"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkuc"] = self["webpackChunkuc"] || []).push([["vendors-node_modules_famibee_skynovel_dist_SoundMng_js"],{

/***/ "./node_modules/@famibee/skynovel/dist/CmnTween.js":
/*!*********************************************************!*\
  !*** ./node_modules/@famibee/skynovel/dist/CmnTween.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   C: () => (/* binding */ i)\n/* harmony export */ });\n/* harmony import */ var _web2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./web2.js */ \"./node_modules/@famibee/skynovel/dist/web2.js\");\n/* harmony import */ var _ReadState_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ReadState.js */ \"./node_modules/@famibee/skynovel/dist/ReadState.js\");\n\n\nclass i {\n  static #t = {};\n  static #i;\n  static #a;\n  static init(t, o) {\n    i.#t = {}, i.#i = t, i.#a = o, i.#a.ticker.add(i.#s);\n  }\n  static #s = () => (0,_ReadState_js__WEBPACK_IMPORTED_MODULE_1__.u)();\n  static destroy() {\n    i.stopAllTw(), i.#a.ticker.remove(i.#s);\n  }\n  static setTwProp(t, o) {\n    const s = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(o, \"repeat\", 1);\n    return t.delay((0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(o, \"delay\", 0)).easing(i.ease(o.ease)).repeat(s > 0 ? s - 1 : 1 / 0).yoyo((0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(o, \"yoyo\", !1));\n  }\n  static #o = {\n    \"Back.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Back.In(t),\n    \"Back.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Back.InOut(t),\n    \"Back.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Back.Out(t),\n    \"Bounce.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Bounce.In(t),\n    \"Bounce.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Bounce.InOut(t),\n    \"Bounce.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Bounce.Out(t),\n    \"Circular.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Circular.In(t),\n    \"Circular.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Circular.InOut(t),\n    \"Circular.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Circular.Out(t),\n    \"Cubic.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Cubic.In(t),\n    \"Cubic.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Cubic.InOut(t),\n    \"Cubic.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Cubic.Out(t),\n    \"Elastic.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Elastic.In(t),\n    \"Elastic.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Elastic.InOut(t),\n    \"Elastic.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Elastic.Out(t),\n    \"Exponential.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Exponential.In(t),\n    \"Exponential.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Exponential.InOut(t),\n    \"Exponential.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Exponential.Out(t),\n    \"Linear.None\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Linear.None(t),\n    \"Quadratic.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quadratic.In(t),\n    \"Quadratic.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quadratic.InOut(t),\n    \"Quadratic.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quadratic.Out(t),\n    \"Quartic.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quartic.In(t),\n    \"Quartic.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quartic.InOut(t),\n    \"Quartic.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quartic.Out(t),\n    \"Quintic.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quintic.In(t),\n    \"Quintic.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quintic.InOut(t),\n    \"Quintic.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Quintic.Out(t),\n    \"Sinusoidal.In\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Sinusoidal.In(t),\n    \"Sinusoidal.InOut\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Sinusoidal.InOut(t),\n    \"Sinusoidal.Out\": (t) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Sinusoidal.Out(t)\n  };\n  static ease(t) {\n    if (!t) return (s) => _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.E.Linear.None(s);\n    const o = i.#o[t];\n    if (!o) throw \"異常なease指定です\";\n    return o;\n  }\n  static hMemberCnt = {\n    alpha: 0,\n    height: 0,\n    rotation: 0,\n    // rotationX〜Z、scaleZ、zは設定すると\n    scale_x: 0,\n    // 三次元方向の拡大縮小ルーチンが働き画像がぼやけるので\n    scale_y: 0,\n    // backlayで設定しない方針\n    pivot_x: 0,\n    pivot_y: 0,\n    width: 0,\n    x: 0,\n    y: 0\n  };\n  static cnvTweenArg(t, o) {\n    const s = {};\n    for (const c of Object.keys(i.hMemberCnt)) {\n      const n = t[c];\n      if (!n) continue;\n      const e = String(n), I = e.startsWith(\"=\"), p = I ? e.slice(1) : e;\n      if (!p) continue;\n      const [O, r] = p.split(\",\"), l = s[c] = parseFloat(O);\n      r && (s[c] += Math.round(\n        Math.random() * (parseFloat(r) - l + 1)\n      )), I && (s[c] += parseFloat(o[c]));\n    }\n    return s;\n  }\n  // トゥイーン全停止\n  static stopAllTw() {\n    i.#t = {}, (0,_ReadState_js__WEBPACK_IMPORTED_MODULE_1__.a)();\n  }\n  static tween(t, o, s, c, n, e, I, p = !0) {\n    const O = this.#i.isSkipping ? 0 : (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(o, \"time\", NaN), r = new _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.T(s).to(c, O).onUpdate(n);\n    i.setTwProp(r, o), i.#t[t] = { tw: r, onEnd: I };\n    const { path: l } = o;\n    let y = r;\n    if (l) {\n      _web2_js__WEBPACK_IMPORTED_MODULE_0__.C.debugLog && console.group(`🍝 [${o[\":タグ名\"]}] path=${l}= start(${s.x},${s.y},${s.alpha})`);\n      for (const { groups: u } of l.matchAll(i.#n)) {\n        const { x: E, x2: v, y: x, y2: S, o: $, o2: g, json: d } = u;\n        let f = {};\n        if (d) try {\n          f = JSON.parse(d);\n        } catch (M) {\n          console.error(`🍝 json=${d} ` + M);\n          continue;\n        }\n        else\n          (E ?? v) && (f.x = E ?? v), (x ?? S) && (f.y = x ?? S), ($ ?? g) && (f.alpha = $ ?? g);\n        const B = i.cnvTweenArg(f, s);\n        _web2_js__WEBPACK_IMPORTED_MODULE_0__.C.debugLog && console.info(`🍝 ${d ?? `{x:${E} y:${x} o:${$}}`} => hTo:${JSON.stringify(B)}`);\n        const Q = new _ReadState_js__WEBPACK_IMPORTED_MODULE_1__.T(s).to(B, O);\n        i.setTwProp(Q, o), y.chain(Q), y = Q;\n      }\n      _web2_js__WEBPACK_IMPORTED_MODULE_0__.C.debugLog && console.groupEnd();\n    }\n    y.onComplete(() => {\n      const u = i.#t[t];\n      u && (delete i.#t[t], u.tw = void 0, r.stop(), i.#i.breakEvent(\"tsy nm:\" + t), u.onEnd?.(), e());\n    });\n    const { chain: h } = o;\n    if (h) {\n      const u = i.#t[h];\n      if (!u?.tw) throw `${h}は存在しない・または終了したトゥイーンです`;\n      delete u.onEnd, u.tw.chain(r);\n    } else p && r.start();\n    return r;\n  }\n  // 11 match 301 step (0.1ms) PCRE2 https://regex101.com/r/reinpq/1\n  // List ${x}${x2}/${y}${y2}/${o}${o2}=${json}\\n\n  /*\n  \\(\\s*\n  (?:\t(?<x>[-=\\d\\.]+)\t|\t(['\"])\t(?<x2>.*?)\t\\2\t)?\n  (?:\n  \t\\s*,\\s*\n  \t(?:\t(?<y>[-=\\d\\.]+)\t|\t(['\"])\t(?<y2>.*?)\t\\5\t)?\n  \t(?:\n  \t\t\\s*,\\s*\n  \t\t(?:\t(?<o>[-=\\d\\.]+)\t|\t(['\"])\t(?<o2>.*?)\t\\8\t)\n  \n  \t)?\n  )?\n  |\n  (?<json>\\{[^{}]*})\n  */\n  static #n = /\\(\\s*(?:(?<x>[-=\\d\\.]+)|(['\"])(?<x2>.*?)\\2)?(?:\\s*,\\s*(?:(?<y>[-=\\d\\.]+)|(['\"])(?<y2>.*?)\\5)?(?:\\s*,\\s*(?:(?<o>[-=\\d\\.]+)|(['\"])(?<o2>.*?)\\8))?)?|(?<json>\\{[^{}]*})/g;\n  // トランス終了待ち\n  static wt(t) {\n    return i.#t[i.TW_INT_TRANS]?.tw ? i.#i.waitEvent(\"tsy nm:\" + i.TW_INT_TRANS, t, () => i.finish_trans()) : !1;\n  }\n  static TW_INT_TRANS = `trans\n`;\n  // 改行でスクリプトから絶対指定できない値に\n  // レイヤのトランジションの停止\n  static finish_trans() {\n    return i.#t[i.TW_INT_TRANS]?.tw?.stop().end(), !1;\n  }\n  // stop()とend()は別\n  // トゥイーン終了待ち\n  static wait_tsy(t) {\n    const { layer: o = \"\", id: s, name: c } = t, n = s ? `frm\n${s}` : c ?? o;\n    if (!n) throw \"トゥイーンが指定されていません\";\n    const e = i.#t[n];\n    if (!e?.tw) {\n      if ((0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(t, \"chk_exist_tw\", !1)) throw s ? `フレームトゥイーン ${s} が見つかりません。` : `トゥイーン ${n} が見つかりません。(layer:${o} name:${c})`;\n      return !1;\n    }\n    return i.#i.waitEvent(\"tsy nm:\" + n, t, () => e.tw?.end());\n  }\n  // トゥイーン中断\n  static stop_tsy(t) {\n    const { layer: o = \"\", id: s, name: c } = t, n = s ? `frm\n${s}` : c ?? o;\n    if (!n) throw \"トゥイーンが指定されていません\";\n    return i.#t[n]?.tw?.stop().end(), !1;\n  }\n  // 一時停止\n  static pause_tsy(t) {\n    const { layer: o = \"\", id: s, name: c } = t, n = s ? `frm\n${s}` : c ?? o;\n    if (!n) throw \"トゥイーンが指定されていません\";\n    return i.#t[n]?.tw?.pause(), !1;\n  }\n  // 一時停止再開\n  static resume_tsy(t) {\n    const { layer: o = \"\", id: s, name: c } = t, n = s ? `frm\n${s}` : c ?? o;\n    if (!n) throw \"トゥイーンが指定されていません\";\n    return i.#t[n]?.tw?.resume(), !1;\n  }\n}\n\n//# sourceMappingURL=CmnTween.js.map\n\n\n//# sourceURL=webpack://uc/./node_modules/@famibee/skynovel/dist/CmnTween.js?");

/***/ }),

/***/ "./node_modules/@famibee/skynovel/dist/SoundMng.js":
/*!*********************************************************!*\
  !*** ./node_modules/@famibee/skynovel/dist/SoundMng.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SoundMng: () => (/* binding */ Te)\n/* harmony export */ });\n/* harmony import */ var _web2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./web2.js */ \"./node_modules/@famibee/skynovel/dist/web2.js\");\n/* harmony import */ var _CmnTween_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CmnTween.js */ \"./node_modules/@famibee/skynovel/dist/CmnTween.js\");\n/* harmony import */ var _ReadState_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ReadState.js */ \"./node_modules/@famibee/skynovel/dist/ReadState.js\");\n\n\n\n/*!\n * @pixi/sound - v4.4.1\n * https://github.com/pixijs/pixi-sound\n * Compiled Tue, 15 Aug 2023 19:22:13 UTC\n *\n * @pixi/sound is licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license\n */\nvar se;\nfunction _() {\n  return se;\n}\nvar ne = function(n, e) {\n  return (ne = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, s) {\n    t.__proto__ = s;\n  } || function(t, s) {\n    for (var o in s) Object.prototype.hasOwnProperty.call(s, o) && (t[o] = s[o]);\n  })(n, e);\n};\nfunction g(n, e) {\n  if (typeof e != \"function\" && e !== null) throw new TypeError(\"Class extends value \" + String(e) + \" is not a constructor or null\");\n  function t() {\n    this.constructor = n;\n  }\n  ne(n, e), n.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t());\n}\nvar A = function() {\n  return (A = Object.assign || function(n) {\n    for (var e, t = 1, s = arguments.length; t < s; t++) for (var o in e = arguments[t]) Object.prototype.hasOwnProperty.call(e, o) && (n[o] = e[o]);\n    return n;\n  }).apply(this, arguments);\n}, oe = [\"mp3\", \"ogg\", \"oga\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"aiff\", \"wma\", \"mid\", \"caf\"], H = {};\nfunction ye(n) {\n  var e = A({ m4a: \"audio/mp4\", oga: \"audio/ogg\", opus: 'audio/ogg; codecs=\"opus\"', caf: 'audio/x-caf; codecs=\"opus\"' }, n || {}), t = document.createElement(\"audio\"), s = {}, o = /^no$/;\n  oe.forEach(function(r) {\n    var i = t.canPlayType(\"audio/\".concat(r)).replace(o, \"\"), u = e[r] ? t.canPlayType(e[r]).replace(o, \"\") : \"\";\n    s[r] = !!i || !!u;\n  }), Object.assign(H, s);\n}\nye();\nvar me = /\\.(\\{([^\\}]+)\\})(\\?.*)?$/;\nfunction ie(n) {\n  var e = me, t = typeof n == \"string\" ? n : n.url;\n  if (!e.test(t)) return t;\n  for (var s = e.exec(t), o = s[2].split(\",\"), r = o[o.length - 1], i = 0, u = o.length; i < u; i++) {\n    var a = o[i];\n    if (H[a]) {\n      r = a;\n      break;\n    }\n  }\n  var l = t.replace(s[1], r);\n  if (typeof n != \"string\") {\n    var h = n;\n    h.extension = r, h.url = l;\n  }\n  return l;\n}\nvar X = oe.filter(function(n) {\n  return H[n];\n}), J = function() {\n  function n() {\n  }\n  return n.add = function() {\n    n.setLegacy(_().useLegacy);\n  }, n.setLegacy = function(e) {\n    e ? X.forEach(function(t) {\n      _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.setExtensionXhrType(t, _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.XHR_RESPONSE_TYPE.DEFAULT), _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.setExtensionLoadType(t, _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.LOAD_TYPE.AUDIO);\n    }) : X.forEach(function(t) {\n      _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.setExtensionXhrType(t, _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.XHR_RESPONSE_TYPE.BUFFER), _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.setExtensionLoadType(t, _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.LOAD_TYPE.XHR);\n    });\n  }, n.pre = function(e, t) {\n    ie(e), t();\n  }, n.use = function(e, t) {\n    e.data && X.indexOf(e.extension) > -1 ? e.sound = _().add(e.name, { loaded: t, preload: !0, url: e.url, source: e.data }) : t();\n  }, n.extension = \"loader\", n;\n}(), be = 0, ve = function(n) {\n  function e(t) {\n    var s = n.call(this) || this;\n    return s.id = be++, s.init(t), s;\n  }\n  return g(e, n), e.prototype.set = function(t, s) {\n    if (this[t] === void 0) throw new Error(\"Property with name \".concat(t, \" does not exist.\"));\n    switch (t) {\n      case \"speed\":\n        this.speed = s;\n        break;\n      case \"volume\":\n        this.volume = s;\n        break;\n      case \"paused\":\n        this.paused = s;\n        break;\n      case \"loop\":\n        this.loop = s;\n        break;\n      case \"muted\":\n        this.muted = s;\n    }\n    return this;\n  }, Object.defineProperty(e.prototype, \"progress\", { get: function() {\n    return this._source.currentTime / this._duration;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"paused\", { get: function() {\n    return this._paused;\n  }, set: function(t) {\n    this._paused = t, this.refreshPaused();\n  }, enumerable: !1, configurable: !0 }), e.prototype._onPlay = function() {\n    this._playing = !0;\n  }, e.prototype._onPause = function() {\n    this._playing = !1;\n  }, e.prototype.init = function(t) {\n    this._playing = !1, this._duration = t.source.duration;\n    var s = this._source = t.source.cloneNode(!1);\n    s.src = t.parent.url, s.onplay = this._onPlay.bind(this), s.onpause = this._onPause.bind(this), t.context.on(\"refresh\", this.refresh, this), t.context.on(\"refreshPaused\", this.refreshPaused, this), this._media = t;\n  }, e.prototype._internalStop = function() {\n    this._source && this._playing && (this._source.onended = null, this._source.pause());\n  }, e.prototype.stop = function() {\n    this._internalStop(), this._source && this.emit(\"stop\");\n  }, Object.defineProperty(e.prototype, \"speed\", { get: function() {\n    return this._speed;\n  }, set: function(t) {\n    this._speed = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"volume\", { get: function() {\n    return this._volume;\n  }, set: function(t) {\n    this._volume = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"loop\", { get: function() {\n    return this._loop;\n  }, set: function(t) {\n    this._loop = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"muted\", { get: function() {\n    return this._muted;\n  }, set: function(t) {\n    this._muted = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"filters\", { get: function() {\n    return null;\n  }, set: function(t) {\n  }, enumerable: !1, configurable: !0 }), e.prototype.refresh = function() {\n    var t = this._media.context, s = this._media.parent;\n    this._source.loop = this._loop || s.loop;\n    var o = t.volume * (t.muted ? 0 : 1), r = s.volume * (s.muted ? 0 : 1), i = this._volume * (this._muted ? 0 : 1);\n    this._source.volume = i * o * r, this._source.playbackRate = this._speed * t.speed * s.speed;\n  }, e.prototype.refreshPaused = function() {\n    var t = this._media.context, s = this._media.parent, o = this._paused || s.paused || t.paused;\n    o !== this._pausedReal && (this._pausedReal = o, o ? (this._internalStop(), this.emit(\"paused\")) : (this.emit(\"resumed\"), this.play({ start: this._source.currentTime, end: this._end, volume: this._volume, speed: this._speed, loop: this._loop })), this.emit(\"pause\", o));\n  }, e.prototype.play = function(t) {\n    var s = this, o = t.start, r = t.end, i = t.speed, u = t.loop, a = t.volume, l = t.muted;\n    this._speed = i, this._volume = a, this._loop = !!u, this._muted = l, this.refresh(), this.loop && r !== null && (this.loop = !1), this._start = o, this._end = r || this._duration, this._start = Math.max(0, this._start - e.PADDING), this._end = Math.min(this._end + e.PADDING, this._duration), this._source.onloadedmetadata = function() {\n      s._source && (s._source.currentTime = o, s._source.onloadedmetadata = null, s.emit(\"progress\", o, s._duration), _web2_js__WEBPACK_IMPORTED_MODULE_0__.T.shared.add(s._onUpdate, s));\n    }, this._source.onended = this._onComplete.bind(this), this._source.play(), this.emit(\"start\");\n  }, e.prototype._onUpdate = function() {\n    this.emit(\"progress\", this.progress, this._duration), this._source.currentTime >= this._end && !this._source.loop && this._onComplete();\n  }, e.prototype._onComplete = function() {\n    _web2_js__WEBPACK_IMPORTED_MODULE_0__.T.shared.remove(this._onUpdate, this), this._internalStop(), this.emit(\"progress\", 1, this._duration), this.emit(\"end\", this);\n  }, e.prototype.destroy = function() {\n    _web2_js__WEBPACK_IMPORTED_MODULE_0__.T.shared.remove(this._onUpdate, this), this.removeAllListeners();\n    var t = this._source;\n    t && (t.onended = null, t.onplay = null, t.onpause = null, this._internalStop()), this._source = null, this._speed = 1, this._volume = 1, this._loop = !1, this._end = null, this._start = 0, this._duration = 0, this._playing = !1, this._pausedReal = !1, this._paused = !1, this._muted = !1, this._media && (this._media.context.off(\"refresh\", this.refresh, this), this._media.context.off(\"refreshPaused\", this.refreshPaused, this), this._media = null);\n  }, e.prototype.toString = function() {\n    return \"[HTMLAudioInstance id=\".concat(this.id, \"]\");\n  }, e.PADDING = 0.1, e;\n}(_web2_js__WEBPACK_IMPORTED_MODULE_0__.c), ge = function(n) {\n  function e() {\n    return n !== null && n.apply(this, arguments) || this;\n  }\n  return g(e, n), e.prototype.init = function(t) {\n    this.parent = t, this._source = t.options.source || new Audio(), t.url && (this._source.src = t.url);\n  }, e.prototype.create = function() {\n    return new ve(this);\n  }, Object.defineProperty(e.prototype, \"isPlayable\", { get: function() {\n    return !!this._source && this._source.readyState === 4;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"duration\", { get: function() {\n    return this._source.duration;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"context\", { get: function() {\n    return this.parent.context;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"filters\", { get: function() {\n    return null;\n  }, set: function(t) {\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    this.removeAllListeners(), this.parent = null, this._source && (this._source.src = \"\", this._source.load(), this._source = null);\n  }, Object.defineProperty(e.prototype, \"source\", { get: function() {\n    return this._source;\n  }, enumerable: !1, configurable: !0 }), e.prototype.load = function(t) {\n    var s = this._source, o = this.parent;\n    if (s.readyState !== 4) if (o.url) {\n      s.src = o.url;\n      var r = function() {\n        a(), o.isLoaded = !0;\n        var h = o.autoPlayStart();\n        t && t(null, o, h);\n      }, i = function() {\n        a(), t && t(new Error(\"Sound loading has been aborted\"));\n      }, u = function() {\n        a();\n        var h = \"Failed to load audio element (code: \".concat(s.error.code, \")\");\n        t && t(new Error(h));\n      }, a = function() {\n        s.removeEventListener(\"canplaythrough\", r), s.removeEventListener(\"load\", r), s.removeEventListener(\"abort\", i), s.removeEventListener(\"error\", u);\n      };\n      s.addEventListener(\"canplaythrough\", r, !1), s.addEventListener(\"load\", r, !1), s.addEventListener(\"abort\", i, !1), s.addEventListener(\"error\", u, !1), s.load();\n    } else t(new Error(\"sound.url or sound.source must be set\"));\n    else {\n      o.isLoaded = !0;\n      var l = o.autoPlayStart();\n      t && setTimeout(function() {\n        t(null, o, l);\n      }, 0);\n    }\n  }, e;\n}(_web2_js__WEBPACK_IMPORTED_MODULE_0__.c), Pe = function() {\n  function n(e, t) {\n    this.parent = e, Object.assign(this, t), this.duration = this.end - this.start;\n  }\n  return n.prototype.play = function(e) {\n    return this.parent.play({ complete: e, speed: this.speed || this.parent.speed, end: this.end, start: this.start, loop: this.loop });\n  }, n.prototype.destroy = function() {\n    this.parent = null;\n  }, n;\n}(), P = function() {\n  function n() {\n  }\n  return n.setParamValue = function(e, t) {\n    if (e.setValueAtTime) {\n      var s = _().context;\n      e.setValueAtTime(t, s.audioContext.currentTime);\n    } else e.value = t;\n    return t;\n  }, n;\n}(), xe = 0, we = function(n) {\n  function e(t) {\n    var s = n.call(this) || this;\n    return s.id = xe++, s._media = null, s._paused = !1, s._muted = !1, s._elapsed = 0, s.init(t), s;\n  }\n  return g(e, n), e.prototype.set = function(t, s) {\n    if (this[t] === void 0) throw new Error(\"Property with name \".concat(t, \" does not exist.\"));\n    switch (t) {\n      case \"speed\":\n        this.speed = s;\n        break;\n      case \"volume\":\n        this.volume = s;\n        break;\n      case \"muted\":\n        this.muted = s;\n        break;\n      case \"loop\":\n        this.loop = s;\n        break;\n      case \"paused\":\n        this.paused = s;\n    }\n    return this;\n  }, e.prototype.stop = function() {\n    this._source && (this._internalStop(), this.emit(\"stop\"));\n  }, Object.defineProperty(e.prototype, \"speed\", { get: function() {\n    return this._speed;\n  }, set: function(t) {\n    this._speed = t, this.refresh(), this._update(!0);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"volume\", { get: function() {\n    return this._volume;\n  }, set: function(t) {\n    this._volume = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"muted\", { get: function() {\n    return this._muted;\n  }, set: function(t) {\n    this._muted = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"loop\", { get: function() {\n    return this._loop;\n  }, set: function(t) {\n    this._loop = t, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"filters\", { get: function() {\n    return this._filters;\n  }, set: function(t) {\n    var s;\n    this._filters && ((s = this._filters) === null || s === void 0 || s.filter(function(o) {\n      return o;\n    }).forEach(function(o) {\n      return o.disconnect();\n    }), this._filters = null, this._source.connect(this._gain)), this._filters = t?.length ? t.slice(0) : null, this.refresh();\n  }, enumerable: !1, configurable: !0 }), e.prototype.refresh = function() {\n    if (this._source) {\n      var t = this._media.context, s = this._media.parent;\n      this._source.loop = this._loop || s.loop;\n      var o = t.volume * (t.muted ? 0 : 1), r = s.volume * (s.muted ? 0 : 1), i = this._volume * (this._muted ? 0 : 1);\n      P.setParamValue(this._gain.gain, i * r * o), P.setParamValue(this._source.playbackRate, this._speed * s.speed * t.speed), this.applyFilters();\n    }\n  }, e.prototype.applyFilters = function() {\n    var t;\n    if (!((t = this._filters) === null || t === void 0) && t.length) {\n      this._source.disconnect();\n      var s = this._source;\n      this._filters.forEach(function(o) {\n        s.connect(o.destination), s = o;\n      }), s.connect(this._gain);\n    }\n  }, e.prototype.refreshPaused = function() {\n    var t = this._media.context, s = this._media.parent, o = this._paused || s.paused || t.paused;\n    o !== this._pausedReal && (this._pausedReal = o, o ? (this._internalStop(), this.emit(\"paused\")) : (this.emit(\"resumed\"), this.play({ start: this._elapsed % this._duration, end: this._end, speed: this._speed, loop: this._loop, volume: this._volume })), this.emit(\"pause\", o));\n  }, e.prototype.play = function(t) {\n    var s = t.start, o = t.end, r = t.speed, i = t.loop, u = t.volume, a = t.muted, l = t.filters;\n    this._paused = !1;\n    var h = this._media.nodes.cloneBufferSource(), m = h.source, y = h.gain;\n    this._source = m, this._gain = y, this._speed = r, this._volume = u, this._loop = !!i, this._muted = a, this._filters = l, this.refresh();\n    var b = this._source.buffer.duration;\n    this._duration = b, this._end = o, this._lastUpdate = this._now(), this._elapsed = s, this._source.onended = this._onComplete.bind(this), this._loop ? (this._source.loopEnd = o, this._source.loopStart = s, this._source.start(0, s)) : o ? this._source.start(0, s, o - s) : this._source.start(0, s), this.emit(\"start\"), this._update(!0), this.enableTicker(!0);\n  }, e.prototype.enableTicker = function(t) {\n    _web2_js__WEBPACK_IMPORTED_MODULE_0__.T.shared.remove(this._updateListener, this), t && _web2_js__WEBPACK_IMPORTED_MODULE_0__.T.shared.add(this._updateListener, this);\n  }, Object.defineProperty(e.prototype, \"progress\", { get: function() {\n    return this._progress;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"paused\", { get: function() {\n    return this._paused;\n  }, set: function(t) {\n    this._paused = t, this.refreshPaused();\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    var t;\n    this.removeAllListeners(), this._internalStop(), this._gain && (this._gain.disconnect(), this._gain = null), this._media && (this._media.context.events.off(\"refresh\", this.refresh, this), this._media.context.events.off(\"refreshPaused\", this.refreshPaused, this), this._media = null), (t = this._filters) === null || t === void 0 || t.forEach(function(s) {\n      return s.disconnect();\n    }), this._filters = null, this._end = null, this._speed = 1, this._volume = 1, this._loop = !1, this._elapsed = 0, this._duration = 0, this._paused = !1, this._muted = !1, this._pausedReal = !1;\n  }, e.prototype.toString = function() {\n    return \"[WebAudioInstance id=\".concat(this.id, \"]\");\n  }, e.prototype._now = function() {\n    return this._media.context.audioContext.currentTime;\n  }, e.prototype._updateListener = function() {\n    this._update();\n  }, e.prototype._update = function(t) {\n    if (t === void 0 && (t = !1), this._source) {\n      var s = this._now(), o = s - this._lastUpdate;\n      if (o > 0 || t) {\n        var r = this._source.playbackRate.value;\n        this._elapsed += o * r, this._lastUpdate = s;\n        var i = this._duration, u = void 0;\n        if (this._source.loopStart) {\n          var a = this._source.loopEnd - this._source.loopStart;\n          u = (this._source.loopStart + this._elapsed % a) / i;\n        } else u = this._elapsed % i / i;\n        this._progress = u, this.emit(\"progress\", this._progress, i);\n      }\n    }\n  }, e.prototype.init = function(t) {\n    this._media = t, t.context.events.on(\"refresh\", this.refresh, this), t.context.events.on(\"refreshPaused\", this.refreshPaused, this);\n  }, e.prototype._internalStop = function() {\n    if (this._source) {\n      this.enableTicker(!1), this._source.onended = null, this._source.stop(0), this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch {\n      }\n      this._source = null;\n    }\n  }, e.prototype._onComplete = function() {\n    if (this._source) {\n      this.enableTicker(!1), this._source.onended = null, this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch {\n      }\n    }\n    this._source = null, this._progress = 1, this.emit(\"progress\", 1, this._duration), this.emit(\"end\", this);\n  }, e;\n}(_web2_js__WEBPACK_IMPORTED_MODULE_0__.c), re = function() {\n  function n(e, t) {\n    this._output = t, this._input = e;\n  }\n  return Object.defineProperty(n.prototype, \"destination\", { get: function() {\n    return this._input;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"filters\", { get: function() {\n    return this._filters;\n  }, set: function(e) {\n    var t = this;\n    if (this._filters && (this._filters.forEach(function(o) {\n      o && o.disconnect();\n    }), this._filters = null, this._input.connect(this._output)), e && e.length) {\n      this._filters = e.slice(0), this._input.disconnect();\n      var s = null;\n      e.forEach(function(o) {\n        s === null ? t._input.connect(o.destination) : s.connect(o.destination), s = o;\n      }), s.connect(this._output);\n    }\n  }, enumerable: !1, configurable: !0 }), n.prototype.destroy = function() {\n    this.filters = null, this._input = null, this._output = null;\n  }, n;\n}(), Oe = function(n) {\n  function e(t) {\n    var s = this, o = t.audioContext, r = o.createBufferSource(), i = o.createGain(), u = o.createAnalyser();\n    return r.connect(u), u.connect(i), i.connect(t.destination), (s = n.call(this, u, i) || this).context = t, s.bufferSource = r, s.gain = i, s.analyser = u, s;\n  }\n  return g(e, n), Object.defineProperty(e.prototype, \"script\", { get: function() {\n    return this._script || (this._script = this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE), this._script.connect(this.context.destination)), this._script;\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    n.prototype.destroy.call(this), this.bufferSource.disconnect(), this._script && this._script.disconnect(), this.gain.disconnect(), this.analyser.disconnect(), this.bufferSource = null, this._script = null, this.gain = null, this.analyser = null, this.context = null;\n  }, e.prototype.cloneBufferSource = function() {\n    var t = this.bufferSource, s = this.context.audioContext.createBufferSource();\n    s.buffer = t.buffer, P.setParamValue(s.playbackRate, t.playbackRate.value), s.loop = t.loop;\n    var o = this.context.audioContext.createGain();\n    return s.connect(o), o.connect(this.destination), { source: s, gain: o };\n  }, Object.defineProperty(e.prototype, \"bufferSize\", { get: function() {\n    return this.script.bufferSize;\n  }, enumerable: !1, configurable: !0 }), e.BUFFER_SIZE = 0, e;\n}(re), Ee = function() {\n  function n() {\n  }\n  return n.prototype.init = function(e) {\n    this.parent = e, this._nodes = new Oe(this.context), this._source = this._nodes.bufferSource, this.source = e.options.source;\n  }, n.prototype.destroy = function() {\n    this.parent = null, this._nodes.destroy(), this._nodes = null;\n    try {\n      this._source.buffer = null;\n    } catch {\n    }\n    this._source = null, this.source = null;\n  }, n.prototype.create = function() {\n    return new we(this);\n  }, Object.defineProperty(n.prototype, \"context\", { get: function() {\n    return this.parent.context;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"isPlayable\", { get: function() {\n    return !!this._source && !!this._source.buffer;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"filters\", { get: function() {\n    return this._nodes.filters;\n  }, set: function(e) {\n    this._nodes.filters = e;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"duration\", { get: function() {\n    return this._source.buffer.duration;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"buffer\", { get: function() {\n    return this._source.buffer;\n  }, set: function(e) {\n    this._source.buffer = e;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"nodes\", { get: function() {\n    return this._nodes;\n  }, enumerable: !1, configurable: !0 }), n.prototype.load = function(e) {\n    this.source ? this._decode(this.source, e) : this.parent.url ? this._loadUrl(e) : e && e(new Error(\"sound.url or sound.source must be set\"));\n  }, n.prototype._loadUrl = function(e) {\n    var t = this, s = new XMLHttpRequest(), o = this.parent.url;\n    s.open(\"GET\", o, !0), s.responseType = \"arraybuffer\", s.onload = function() {\n      t.source = s.response, t._decode(s.response, e);\n    }, s.send();\n  }, n.prototype._decode = function(e, t) {\n    var s = this, o = function(r, i) {\n      if (r) t && t(r);\n      else {\n        s.parent.isLoaded = !0, s.buffer = i;\n        var u = s.parent.autoPlayStart();\n        t && t(null, s.parent, u);\n      }\n    };\n    e instanceof AudioBuffer ? o(null, e) : this.parent.context.decode(e, o);\n  }, n;\n}(), $ = function() {\n  function n(e, t) {\n    this.media = e, this.options = t, this._instances = [], this._sprites = {}, this.media.init(this);\n    var s = t.complete;\n    this._autoPlayOptions = s ? { complete: s } : null, this.isLoaded = !1, this.isPlaying = !1, this.autoPlay = t.autoPlay, this.singleInstance = t.singleInstance, this.preload = t.preload || this.autoPlay, this.url = t.url, this.speed = t.speed, this.volume = t.volume, this.loop = t.loop, t.sprites && this.addSprites(t.sprites), this.preload && this._preload(t.loaded);\n  }\n  return n.from = function(e) {\n    var t = {};\n    return typeof e == \"string\" ? t.url = e : e instanceof ArrayBuffer || e instanceof AudioBuffer || e instanceof HTMLAudioElement ? t.source = e : t = e, (t = A({ autoPlay: !1, singleInstance: !1, url: null, source: null, preload: !1, volume: 1, speed: 1, complete: null, loaded: null, loop: !1 }, t)).url && (t.url = ie(t.url)), Object.freeze(t), new n(_().useLegacy ? new ge() : new Ee(), t);\n  }, Object.defineProperty(n.prototype, \"context\", { get: function() {\n    return _().context;\n  }, enumerable: !1, configurable: !0 }), n.prototype.pause = function() {\n    return this.isPlaying = !1, this.paused = !0, this;\n  }, n.prototype.resume = function() {\n    return this.isPlaying = this._instances.length > 0, this.paused = !1, this;\n  }, Object.defineProperty(n.prototype, \"paused\", { get: function() {\n    return this._paused;\n  }, set: function(e) {\n    this._paused = e, this.refreshPaused();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"speed\", { get: function() {\n    return this._speed;\n  }, set: function(e) {\n    this._speed = e, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"filters\", { get: function() {\n    return this.media.filters;\n  }, set: function(e) {\n    this.media.filters = e;\n  }, enumerable: !1, configurable: !0 }), n.prototype.addSprites = function(e, t) {\n    if (typeof e == \"object\") {\n      var s = {};\n      for (var o in e) s[o] = this.addSprites(o, e[o]);\n      return s;\n    }\n    var r = new Pe(this, t);\n    return this._sprites[e] = r, r;\n  }, n.prototype.destroy = function() {\n    this._removeInstances(), this.removeSprites(), this.media.destroy(), this.media = null, this._sprites = null, this._instances = null;\n  }, n.prototype.removeSprites = function(e) {\n    if (e) {\n      var t = this._sprites[e];\n      t !== void 0 && (t.destroy(), delete this._sprites[e]);\n    } else for (var s in this._sprites) this.removeSprites(s);\n    return this;\n  }, Object.defineProperty(n.prototype, \"isPlayable\", { get: function() {\n    return this.isLoaded && this.media && this.media.isPlayable;\n  }, enumerable: !1, configurable: !0 }), n.prototype.stop = function() {\n    if (!this.isPlayable) return this.autoPlay = !1, this._autoPlayOptions = null, this;\n    this.isPlaying = !1;\n    for (var e = this._instances.length - 1; e >= 0; e--) this._instances[e].stop();\n    return this;\n  }, n.prototype.play = function(e, t) {\n    var s, o = this;\n    if (typeof e == \"string\" ? s = { sprite: i = e, loop: this.loop, complete: t } : typeof e == \"function\" ? (s = {}).complete = e : s = e, (s = A({ complete: null, loaded: null, sprite: null, end: null, start: 0, volume: 1, speed: 1, muted: !1, loop: !1 }, s || {})).sprite) {\n      var r = s.sprite, i = this._sprites[r];\n      s.start = i.start + (s.start || 0), s.end = i.end, s.speed = i.speed || 1, s.loop = i.loop || s.loop, delete s.sprite;\n    }\n    if (s.offset && (s.start = s.offset), !this.isLoaded) return new Promise(function(a, l) {\n      o.autoPlay = !0, o._autoPlayOptions = s, o._preload(function(h, m, y) {\n        h ? l(h) : (s.loaded && s.loaded(h, m, y), a(y));\n      });\n    });\n    (this.singleInstance || s.singleInstance) && this._removeInstances();\n    var u = this._createInstance();\n    return this._instances.push(u), this.isPlaying = !0, u.once(\"end\", function() {\n      s.complete && s.complete(o), o._onComplete(u);\n    }), u.once(\"stop\", function() {\n      o._onComplete(u);\n    }), u.play(s), u;\n  }, n.prototype.refresh = function() {\n    for (var e = this._instances.length, t = 0; t < e; t++) this._instances[t].refresh();\n  }, n.prototype.refreshPaused = function() {\n    for (var e = this._instances.length, t = 0; t < e; t++) this._instances[t].refreshPaused();\n  }, Object.defineProperty(n.prototype, \"volume\", { get: function() {\n    return this._volume;\n  }, set: function(e) {\n    this._volume = e, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"muted\", { get: function() {\n    return this._muted;\n  }, set: function(e) {\n    this._muted = e, this.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"loop\", { get: function() {\n    return this._loop;\n  }, set: function(e) {\n    this._loop = e, this.refresh();\n  }, enumerable: !1, configurable: !0 }), n.prototype._preload = function(e) {\n    this.media.load(e);\n  }, Object.defineProperty(n.prototype, \"instances\", { get: function() {\n    return this._instances;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"sprites\", { get: function() {\n    return this._sprites;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"duration\", { get: function() {\n    return this.media.duration;\n  }, enumerable: !1, configurable: !0 }), n.prototype.autoPlayStart = function() {\n    var e;\n    return this.autoPlay && (e = this.play(this._autoPlayOptions)), e;\n  }, n.prototype._removeInstances = function() {\n    for (var e = this._instances.length - 1; e >= 0; e--) this._poolInstance(this._instances[e]);\n    this._instances.length = 0;\n  }, n.prototype._onComplete = function(e) {\n    if (this._instances) {\n      var t = this._instances.indexOf(e);\n      t > -1 && this._instances.splice(t, 1), this.isPlaying = this._instances.length > 0;\n    }\n    this._poolInstance(e);\n  }, n.prototype._createInstance = function() {\n    if (n._pool.length > 0) {\n      var e = n._pool.pop();\n      return e.init(this.media), e;\n    }\n    return this.media.create();\n  }, n.prototype._poolInstance = function(e) {\n    e.destroy(), n._pool.indexOf(e) < 0 && n._pool.push(e);\n  }, n._pool = [], n;\n}(), je = function(n) {\n  function e() {\n    var t = n !== null && n.apply(this, arguments) || this;\n    return t.speed = 1, t.muted = !1, t.volume = 1, t.paused = !1, t;\n  }\n  return g(e, n), e.prototype.refresh = function() {\n    this.emit(\"refresh\");\n  }, e.prototype.refreshPaused = function() {\n    this.emit(\"refreshPaused\");\n  }, Object.defineProperty(e.prototype, \"filters\", { get: function() {\n    return null;\n  }, set: function(t) {\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"audioContext\", { get: function() {\n    return null;\n  }, enumerable: !1, configurable: !0 }), e.prototype.toggleMute = function() {\n    return this.muted = !this.muted, this.refresh(), this.muted;\n  }, e.prototype.togglePause = function() {\n    return this.paused = !this.paused, this.refreshPaused(), this.paused;\n  }, e.prototype.destroy = function() {\n    this.removeAllListeners();\n  }, e;\n}(_web2_js__WEBPACK_IMPORTED_MODULE_0__.c), z = function(n) {\n  function e() {\n    var t = n.call(this, null, null) || this;\n    t.autoPause = !0;\n    var s = window, o = new e.AudioContext(), r = o.createDynamicsCompressor(), i = o.createAnalyser();\n    return i.connect(r), r.connect(o.destination), t._input = i, t._output = o.destination, t._ctx = o, t._offlineCtx = new e.OfflineAudioContext(1, 2, s.OfflineAudioContext ? Math.max(8e3, Math.min(96e3, o.sampleRate)) : 44100), t.compressor = r, t.analyser = i, t.events = new _web2_js__WEBPACK_IMPORTED_MODULE_0__.c(), t.volume = 1, t.speed = 1, t.muted = !1, t.paused = !1, t._locked = o.state === \"suspended\" && (\"ontouchstart\" in globalThis || \"onclick\" in globalThis), t._locked && (t._unlock(), t._unlock = t._unlock.bind(t), document.addEventListener(\"mousedown\", t._unlock, !0), document.addEventListener(\"touchstart\", t._unlock, !0), document.addEventListener(\"touchend\", t._unlock, !0)), t.onFocus = t.onFocus.bind(t), t.onBlur = t.onBlur.bind(t), globalThis.addEventListener(\"focus\", t.onFocus), globalThis.addEventListener(\"blur\", t.onBlur), t;\n  }\n  return g(e, n), e.prototype.onFocus = function() {\n    if (this.autoPause) {\n      var t = this._ctx.state;\n      t !== \"suspended\" && t !== \"interrupted\" && this._locked || (this.paused = this._pausedOnBlur, this.refreshPaused());\n    }\n  }, e.prototype.onBlur = function() {\n    this.autoPause && (this._locked || (this._pausedOnBlur = this._paused, this.paused = !0, this.refreshPaused()));\n  }, e.prototype._unlock = function() {\n    this._locked && (this.playEmptySound(), this._ctx.state === \"running\" && (document.removeEventListener(\"mousedown\", this._unlock, !0), document.removeEventListener(\"touchend\", this._unlock, !0), document.removeEventListener(\"touchstart\", this._unlock, !0), this._locked = !1));\n  }, e.prototype.playEmptySound = function() {\n    var t = this._ctx.createBufferSource();\n    t.buffer = this._ctx.createBuffer(1, 1, 22050), t.connect(this._ctx.destination), t.start(0, 0, 0), t.context.state === \"suspended\" && t.context.resume();\n  }, Object.defineProperty(e, \"AudioContext\", { get: function() {\n    var t = window;\n    return t.AudioContext || t.webkitAudioContext || null;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, \"OfflineAudioContext\", { get: function() {\n    var t = window;\n    return t.OfflineAudioContext || t.webkitOfflineAudioContext || null;\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    n.prototype.destroy.call(this);\n    var t = this._ctx;\n    t.close !== void 0 && t.close(), globalThis.removeEventListener(\"focus\", this.onFocus), globalThis.removeEventListener(\"blur\", this.onBlur), this.events.removeAllListeners(), this.analyser.disconnect(), this.compressor.disconnect(), this.analyser = null, this.compressor = null, this.events = null, this._offlineCtx = null, this._ctx = null;\n  }, Object.defineProperty(e.prototype, \"audioContext\", { get: function() {\n    return this._ctx;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"offlineContext\", { get: function() {\n    return this._offlineCtx;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"paused\", { get: function() {\n    return this._paused;\n  }, set: function(t) {\n    t && this._ctx.state === \"running\" ? this._ctx.suspend() : t || this._ctx.state !== \"suspended\" || this._ctx.resume(), this._paused = t;\n  }, enumerable: !1, configurable: !0 }), e.prototype.refresh = function() {\n    this.events.emit(\"refresh\");\n  }, e.prototype.refreshPaused = function() {\n    this.events.emit(\"refreshPaused\");\n  }, e.prototype.toggleMute = function() {\n    return this.muted = !this.muted, this.refresh(), this.muted;\n  }, e.prototype.togglePause = function() {\n    return this.paused = !this.paused, this.refreshPaused(), this._paused;\n  }, e.prototype.decode = function(t, s) {\n    var o = function(i) {\n      s(new Error(i?.message || \"Unable to decode file\"));\n    }, r = this._offlineCtx.decodeAudioData(t, function(i) {\n      s(null, i);\n    }, o);\n    r && r.catch(o);\n  }, e;\n}(re), ke = function() {\n  function n() {\n    this.init();\n  }\n  return n.prototype.init = function() {\n    return this.supported && (this._webAudioContext = new z()), this._htmlAudioContext = new je(), this._sounds = {}, this.useLegacy = !this.supported, this;\n  }, Object.defineProperty(n.prototype, \"context\", { get: function() {\n    return this._context;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"filtersAll\", { get: function() {\n    return this.useLegacy ? [] : this._context.filters;\n  }, set: function(e) {\n    this.useLegacy || (this._context.filters = e);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"supported\", { get: function() {\n    return z.AudioContext !== null;\n  }, enumerable: !1, configurable: !0 }), n.prototype.add = function(e, t) {\n    if (typeof e == \"object\") {\n      var s = {};\n      for (var o in e) {\n        var r = this._getOptions(e[o], t);\n        s[o] = this.add(o, r);\n      }\n      return s;\n    }\n    if (t instanceof $) return this._sounds[e] = t, t;\n    var i = this._getOptions(t), u = $.from(i);\n    return this._sounds[e] = u, u;\n  }, n.prototype._getOptions = function(e, t) {\n    var s;\n    return s = typeof e == \"string\" ? { url: e } : e instanceof ArrayBuffer || e instanceof AudioBuffer || e instanceof HTMLAudioElement ? { source: e } : e, s = A(A({}, s), t || {});\n  }, Object.defineProperty(n.prototype, \"useLegacy\", { get: function() {\n    return this._useLegacy;\n  }, set: function(e) {\n    J.setLegacy(e), this._useLegacy = e, this._context = !e && this.supported ? this._webAudioContext : this._htmlAudioContext;\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"disableAutoPause\", { get: function() {\n    return !this._webAudioContext.autoPause;\n  }, set: function(e) {\n    this._webAudioContext.autoPause = !e;\n  }, enumerable: !1, configurable: !0 }), n.prototype.remove = function(e) {\n    return this.exists(e, !0), this._sounds[e].destroy(), delete this._sounds[e], this;\n  }, Object.defineProperty(n.prototype, \"volumeAll\", { get: function() {\n    return this._context.volume;\n  }, set: function(e) {\n    this._context.volume = e, this._context.refresh();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(n.prototype, \"speedAll\", { get: function() {\n    return this._context.speed;\n  }, set: function(e) {\n    this._context.speed = e, this._context.refresh();\n  }, enumerable: !1, configurable: !0 }), n.prototype.togglePauseAll = function() {\n    return this._context.togglePause();\n  }, n.prototype.pauseAll = function() {\n    return this._context.paused = !0, this._context.refreshPaused(), this;\n  }, n.prototype.resumeAll = function() {\n    return this._context.paused = !1, this._context.refreshPaused(), this;\n  }, n.prototype.toggleMuteAll = function() {\n    return this._context.toggleMute();\n  }, n.prototype.muteAll = function() {\n    return this._context.muted = !0, this._context.refresh(), this;\n  }, n.prototype.unmuteAll = function() {\n    return this._context.muted = !1, this._context.refresh(), this;\n  }, n.prototype.removeAll = function() {\n    for (var e in this._sounds) this._sounds[e].destroy(), delete this._sounds[e];\n    return this;\n  }, n.prototype.stopAll = function() {\n    for (var e in this._sounds) this._sounds[e].stop();\n    return this;\n  }, n.prototype.exists = function(e, t) {\n    return !!this._sounds[e];\n  }, n.prototype.find = function(e) {\n    return this.exists(e, !0), this._sounds[e];\n  }, n.prototype.play = function(e, t) {\n    return this.find(e).play(t);\n  }, n.prototype.stop = function(e) {\n    return this.find(e).stop();\n  }, n.prototype.pause = function(e) {\n    return this.find(e).pause();\n  }, n.prototype.resume = function(e) {\n    return this.find(e).resume();\n  }, n.prototype.volume = function(e, t) {\n    var s = this.find(e);\n    return t !== void 0 && (s.volume = t), s.volume;\n  }, n.prototype.speed = function(e, t) {\n    var s = this.find(e);\n    return t !== void 0 && (s.speed = t), s.speed;\n  }, n.prototype.duration = function(e) {\n    return this.find(e).duration;\n  }, n.prototype.close = function() {\n    return this.removeAll(), this._sounds = null, this._webAudioContext && (this._webAudioContext.destroy(), this._webAudioContext = null), this._htmlAudioContext && (this._htmlAudioContext.destroy(), this._htmlAudioContext = null), this._context = null, this;\n  }, n;\n}(), L = function() {\n  function n(e, t) {\n    this.init(e, t);\n  }\n  return n.prototype.init = function(e, t) {\n    this.destination = e, this.source = t || e;\n  }, n.prototype.connect = function(e) {\n    this.source.connect(e);\n  }, n.prototype.disconnect = function() {\n    this.source.disconnect();\n  }, n.prototype.destroy = function() {\n    this.disconnect(), this.destination = null, this.source = null;\n  }, n;\n}(), q = { __proto__: null, EqualizerFilter: function(n) {\n  function e(t, s, o, r, i, u, a, l, h, m) {\n    t === void 0 && (t = 0), s === void 0 && (s = 0), o === void 0 && (o = 0), r === void 0 && (r = 0), i === void 0 && (i = 0), u === void 0 && (u = 0), a === void 0 && (a = 0), l === void 0 && (l = 0), h === void 0 && (h = 0), m === void 0 && (m = 0);\n    var y = this;\n    if (!_().useLegacy) {\n      var b = [{ f: e.F32, type: \"lowshelf\", gain: t }, { f: e.F64, type: \"peaking\", gain: s }, { f: e.F125, type: \"peaking\", gain: o }, { f: e.F250, type: \"peaking\", gain: r }, { f: e.F500, type: \"peaking\", gain: i }, { f: e.F1K, type: \"peaking\", gain: u }, { f: e.F2K, type: \"peaking\", gain: a }, { f: e.F4K, type: \"peaking\", gain: l }, { f: e.F8K, type: \"peaking\", gain: h }, { f: e.F16K, type: \"highshelf\", gain: m }].map(function(K) {\n        var f = _().context.audioContext.createBiquadFilter();\n        return f.type = K.type, P.setParamValue(f.Q, 1), f.frequency.value = K.f, P.setParamValue(f.gain, K.gain), f;\n      });\n      (y = n.call(this, b[0], b[b.length - 1]) || this).bands = b, y.bandsMap = {};\n      for (var d = 0; d < y.bands.length; d++) {\n        var w = y.bands[d];\n        d > 0 && y.bands[d - 1].connect(w), y.bandsMap[w.frequency.value] = w;\n      }\n      return y;\n    }\n    y = n.call(this, null) || this;\n  }\n  return g(e, n), e.prototype.setGain = function(t, s) {\n    if (s === void 0 && (s = 0), !this.bandsMap[t]) throw new Error(\"No band found for frequency \".concat(t));\n    P.setParamValue(this.bandsMap[t].gain, s);\n  }, e.prototype.getGain = function(t) {\n    if (!this.bandsMap[t]) throw new Error(\"No band found for frequency \".concat(t));\n    return this.bandsMap[t].gain.value;\n  }, Object.defineProperty(e.prototype, \"f32\", { get: function() {\n    return this.getGain(e.F32);\n  }, set: function(t) {\n    this.setGain(e.F32, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f64\", { get: function() {\n    return this.getGain(e.F64);\n  }, set: function(t) {\n    this.setGain(e.F64, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f125\", { get: function() {\n    return this.getGain(e.F125);\n  }, set: function(t) {\n    this.setGain(e.F125, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f250\", { get: function() {\n    return this.getGain(e.F250);\n  }, set: function(t) {\n    this.setGain(e.F250, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f500\", { get: function() {\n    return this.getGain(e.F500);\n  }, set: function(t) {\n    this.setGain(e.F500, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f1k\", { get: function() {\n    return this.getGain(e.F1K);\n  }, set: function(t) {\n    this.setGain(e.F1K, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f2k\", { get: function() {\n    return this.getGain(e.F2K);\n  }, set: function(t) {\n    this.setGain(e.F2K, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f4k\", { get: function() {\n    return this.getGain(e.F4K);\n  }, set: function(t) {\n    this.setGain(e.F4K, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f8k\", { get: function() {\n    return this.getGain(e.F8K);\n  }, set: function(t) {\n    this.setGain(e.F8K, t);\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"f16k\", { get: function() {\n    return this.getGain(e.F16K);\n  }, set: function(t) {\n    this.setGain(e.F16K, t);\n  }, enumerable: !1, configurable: !0 }), e.prototype.reset = function() {\n    this.bands.forEach(function(t) {\n      P.setParamValue(t.gain, 0);\n    });\n  }, e.prototype.destroy = function() {\n    this.bands.forEach(function(t) {\n      t.disconnect();\n    }), this.bands = null, this.bandsMap = null;\n  }, e.F32 = 32, e.F64 = 64, e.F125 = 125, e.F250 = 250, e.F500 = 500, e.F1K = 1e3, e.F2K = 2e3, e.F4K = 4e3, e.F8K = 8e3, e.F16K = 16e3, e;\n}(L), DistortionFilter: function(n) {\n  function e(t) {\n    t === void 0 && (t = 0);\n    var s = this;\n    if (!_().useLegacy) {\n      var o = _().context.audioContext.createWaveShaper();\n      return (s = n.call(this, o) || this)._distortion = o, s.amount = t, s;\n    }\n    s = n.call(this, null) || this;\n  }\n  return g(e, n), Object.defineProperty(e.prototype, \"amount\", { get: function() {\n    return this._amount;\n  }, set: function(t) {\n    this._amount = t;\n    for (var s, o = 1e3 * t, r = 44100, i = new Float32Array(r), u = Math.PI / 180, a = 0; a < r; ++a) s = 2 * a / r - 1, i[a] = (3 + o) * s * 20 * u / (Math.PI + o * Math.abs(s));\n    this._distortion.curve = i, this._distortion.oversample = \"4x\";\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    this._distortion = null, n.prototype.destroy.call(this);\n  }, e;\n}(L), StereoFilter: function(n) {\n  function e(t) {\n    t === void 0 && (t = 0);\n    var s = this;\n    if (!_().useLegacy) {\n      var o, r, i, u = _().context.audioContext;\n      return u.createStereoPanner ? i = o = u.createStereoPanner() : ((r = u.createPanner()).panningModel = \"equalpower\", i = r), (s = n.call(this, i) || this)._stereo = o, s._panner = r, s.pan = t, s;\n    }\n    s = n.call(this, null) || this;\n  }\n  return g(e, n), Object.defineProperty(e.prototype, \"pan\", { get: function() {\n    return this._pan;\n  }, set: function(t) {\n    this._pan = t, this._stereo ? P.setParamValue(this._stereo.pan, t) : this._panner.setPosition(t, 0, 1 - Math.abs(t));\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    n.prototype.destroy.call(this), this._stereo = null, this._panner = null;\n  }, e;\n}(L), ReverbFilter: function(n) {\n  function e(t, s, o) {\n    t === void 0 && (t = 3), s === void 0 && (s = 2), o === void 0 && (o = !1);\n    var r = this;\n    if (!_().useLegacy) return (r = n.call(this, null) || this)._seconds = r._clamp(t, 1, 50), r._decay = r._clamp(s, 0, 100), r._reverse = o, r._rebuild(), r;\n    r = n.call(this, null) || this;\n  }\n  return g(e, n), e.prototype._clamp = function(t, s, o) {\n    return Math.min(o, Math.max(s, t));\n  }, Object.defineProperty(e.prototype, \"seconds\", { get: function() {\n    return this._seconds;\n  }, set: function(t) {\n    this._seconds = this._clamp(t, 1, 50), this._rebuild();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"decay\", { get: function() {\n    return this._decay;\n  }, set: function(t) {\n    this._decay = this._clamp(t, 0, 100), this._rebuild();\n  }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, \"reverse\", { get: function() {\n    return this._reverse;\n  }, set: function(t) {\n    this._reverse = t, this._rebuild();\n  }, enumerable: !1, configurable: !0 }), e.prototype._rebuild = function() {\n    for (var t, s = _().context.audioContext, o = s.sampleRate, r = o * this._seconds, i = s.createBuffer(2, r, o), u = i.getChannelData(0), a = i.getChannelData(1), l = 0; l < r; l++) t = this._reverse ? r - l : l, u[l] = (2 * Math.random() - 1) * Math.pow(1 - t / r, this._decay), a[l] = (2 * Math.random() - 1) * Math.pow(1 - t / r, this._decay);\n    var h = _().context.audioContext.createConvolver();\n    h.buffer = i, this.init(h);\n  }, e;\n}(L), MonoFilter: function(n) {\n  function e() {\n    var t = this;\n    if (!_().useLegacy) {\n      var s = _().context.audioContext, o = s.createChannelSplitter(), r = s.createChannelMerger();\n      return r.connect(o), (t = n.call(this, r, o) || this)._merger = r, t;\n    }\n    t = n.call(this, null) || this;\n  }\n  return g(e, n), e.prototype.destroy = function() {\n    this._merger.disconnect(), this._merger = null, n.prototype.destroy.call(this);\n  }, e;\n}(L), StreamFilter: function(n) {\n  function e() {\n    var t = this;\n    if (!_().useLegacy) {\n      var s = _().context.audioContext, o = s.createMediaStreamDestination(), r = s.createMediaStreamSource(o.stream);\n      return (t = n.call(this, o, r) || this)._stream = o.stream, t;\n    }\n    t = n.call(this, null) || this;\n  }\n  return g(e, n), Object.defineProperty(e.prototype, \"stream\", { get: function() {\n    return this._stream;\n  }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function() {\n    this._stream = null, n.prototype.destroy.call(this);\n  }, e;\n}(L), TelephoneFilter: function(n) {\n  function e() {\n    if (!_().useLegacy) {\n      var t = _().context.audioContext, s = t.createBiquadFilter(), o = t.createBiquadFilter(), r = t.createBiquadFilter(), i = t.createBiquadFilter();\n      return s.type = \"lowpass\", P.setParamValue(s.frequency, 2e3), o.type = \"lowpass\", P.setParamValue(o.frequency, 2e3), r.type = \"highpass\", P.setParamValue(r.frequency, 500), i.type = \"highpass\", P.setParamValue(i.frequency, 500), s.connect(o), o.connect(r), r.connect(i), n.call(this, s, i) || this;\n    }\n    n.call(this, null);\n  }\n  return g(e, n), e;\n}(L) }, Fe = { __proto__: null, supported: H }, M = function(n) {\n  return se = n, n;\n}(new ke());\n\"extensions\" in _web2_js__WEBPACK_IMPORTED_MODULE_0__.n ? _web2_js__WEBPACK_IMPORTED_MODULE_0__.e.add(J) : _web2_js__WEBPACK_IMPORTED_MODULE_0__.d.registerPlugin(J);\nclass F {\n  constructor(e, t, s, o, r, i, u, a) {\n    this.fn = e, this.buf = t, this.start_ms = s, this.end_ms = o, this.ret_ms = r, this.volume = i, this.pan = u, this.stt = a ? new B() : new Se(), a && this.addSnd(a);\n  }\n  static #e = 1;\n  stt;\n  loop = !1;\n  addSnd(e) {\n    switch (this.loop = e.loop, this.stt.onLoad(this), this.pan !== 0 && (e.filters = [new q.StereoFilter(this.pan)]), this.setVol = (t) => e.volume = t, this.tw = () => new _ReadState_js__WEBPACK_IMPORTED_MODULE_2__.T(e), this.onPlayEnd = () => {\n      this.stt.onPlayEnd(this.buf), this.#s();\n    }, this.stop = () => {\n      e.stop(), this.#s();\n    }, this.destroy = () => e.destroy(), this.buf) {\n      // セリフ再生中はBGM音量を絞る\n      case ee:\n        const t = Number(c.getVal(\"sys:sn.sound.BGM.vol_mul_talking\") ?? 1);\n        if (t === 1) break;\n        F.#e = t;\n        const s = W[j];\n        s && s.setVol(this.volume * F.#e);\n        break;\n      case j:\n        e.volume = this.volume * F.#e;\n        break;\n    }\n  }\n  #s = () => {\n    if (this.#s = () => {\n    }, F.#e === 1 || this.buf !== ee) return;\n    F.#e = 1;\n    const e = W[j];\n    e && e.setVol(this.volume * F.#e);\n  };\n  setVol(e) {\n  }\n  tw() {\n  }\n  onPlayEnd() {\n  }\n  stop() {\n  }\n  destroy() {\n  }\n}\nlet Z, c, k, Q, W, T;\nconst j = \"BGM\", v = \"SE\", ee = \"VOICE\";\nclass p {\n  constructor(e, t, s) {\n    this.hArg = e, this.buf = t, this.fn = s;\n    const o = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"start_ms\", 0), r = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"end_ms\", p.#s), i = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"ret_ms\", 0), u = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"pan\", 0), a = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"speed\", 1);\n    if (o < 0) throw `[playse] start_ms:${o} が負の値です`;\n    if (i < 0) throw `[playse] ret_ms:${i} が負の値です`;\n    if (0 < r) {\n      if (r <= o) throw `[playse] start_ms:${o} >= end_ms:${r} は異常値です`;\n      if (r <= i) throw `[playse] ret_ms:${i} >= end_ms:${r} は異常値です`;\n    }\n    const l = \"const.sn.sound.\" + t + \".\";\n    c.setVal_Nochk(\"save\", l + \"fn\", s);\n    const h = p.getVol(e, 1);\n    c.setVal_Nochk(\"save\", l + \"volume\", h);\n    const m = h * Number(c.getVal(\"sys:\" + l + \"volume\", 1)), y = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(e, \"loop\", !1);\n    y ? (p.#e[t] = s, c.setVal_Nochk(\"save\", \"const.sn.loopPlaying\", JSON.stringify(p.#e))) : p.delLoopPlay(t), c.setVal_Nochk(\"save\", l + \"start_ms\", o), c.setVal_Nochk(\"save\", l + \"end_ms\", r), c.setVal_Nochk(\"save\", l + \"ret_ms\", i), c.setVal_Nochk(\"tmp\", l + \"playing\", !0), c.flush();\n    const b = M.find(s);\n    this.#t = new F(\n      s,\n      t,\n      o,\n      r,\n      i,\n      m,\n      u,\n      b\n    );\n    const d = {\n      loop: y,\n      speed: a,\n      volume: m,\n      loaded: (f, x) => {\n        if (!this.#t.stt.isDestroy) {\n          if (f) {\n            k.errScript(`ロード失敗です SndBuf fn:${s} ${f}`, !1);\n            return;\n          }\n          x && (this.#t.addSnd(x), u !== 0 && (x.filters = [new q.StereoFilter(u)]), e.fnc?.());\n        }\n      }\n    };\n    let w = \"\";\n    if (0 < o || r < p.#s) {\n      w = `${s};${o};${r};${i}`;\n      const f = (d.sprites ??= {})[w] = {\n        start: o / 1e3,\n        end: r / 1e3\n      };\n      d.preload = !0;\n      const x = d.loaded;\n      d.loaded = (V, N) => {\n        if (this.#t.stt.isDestroy) return;\n        x(V, N);\n        const U = N, G = U.duration;\n        f.end < 0 && (f.end += G, U.removeSprites(w), U.addSprites(w, f)), f.end <= f.start && k.errScript(`[playse] end_ms:${r}(${f.end * 1e3}) >= start_ms:${o} は異常値です`), f.end * 1e3 <= i && k.errScript(`[playse] end_ms:${r}(${f.end * 1e3}) <= ret_ms:${i} は異常値です`), G <= f.start && k.errScript(`[playse] 音声ファイル再生時間:${G * 1e3} <= start_ms:${o} は異常値です`), r !== p.#s && G <= f.end && k.errScript(`[playse] 音声ファイル再生時間:${G * 1e3} <= end_ms:${r} は異常値です`), U.play(w, (ue) => d.complete?.(ue));\n      };\n    } else d.autoPlay = !0;\n    if (y ? i !== 0 && (d.loop = !1, d.complete = async (f) => {\n      const x = f.duration, V = i / 1e3, N = r / 1e3;\n      x <= V && k.errScript(`[playse] 音声ファイル再生時間:${x * 1e3} <=  ret_ms:${i} は異常値です`), await f.play({\n        // 一周目はループなし、なのでキャッシュされてる\n        ...d,\n        start: V,\n        end: N < 0 ? N + x : N,\n        // 負の値は末尾から\n        //\tspeed,\t\t// 重複\n        loop: !0,\n        //\tvolume,\t\t// 重複\n        //-\tmuted?: boolean;\n        filters: u !== 0 ? [new q.StereoFilter(u)] : []\n        //-\tcomplete?: CompleteCallback;\n        //-\tloaded?: LoadedCallback;\n        //-\tsingleInstance?: boolean;\n      });\n    }) : d.complete = () => {\n      Y(this.#t, t), this.#t.onPlayEnd();\n    }, this.#n(), b) {\n      if (b.volume = m, w) this.#o(s, d);\n      else if (b.isPlayable) {\n        const f = b.options.source;\n        !(f instanceof ArrayBuffer) || f.byteLength === 0 ? b.play(d) : this.#t.addSnd($.from({\n          ...d,\n          url: b.options.url,\n          source: f\n        })), u !== 0 && (b.filters = [new q.StereoFilter(u)]);\n      }\n      this.needLoad = !1;\n      return;\n    }\n    if (this.needLoad = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(e, \"join\", !0)) {\n      (0,_ReadState_js__WEBPACK_IMPORTED_MODULE_2__.d)();\n      const f = d.loaded;\n      d.loaded = (x, V) => {\n        this.#t.stt.isDestroy || f(x, V), (0,_ReadState_js__WEBPACK_IMPORTED_MODULE_2__.e)();\n      };\n    }\n    this.#o(s, d);\n  }\n  static #e = {};\n  static init(e, t, s, o, r) {\n    p.#e = {}, Z = e, c = t, k = s, Q = o, W = r;\n  }\n  static setEvtMng(e) {\n    T = e;\n  }\n  static delLoopPlay(e) {\n    delete p.#e[e];\n    const t = \"const.sn.sound.\" + e + \".\";\n    c.setVal_Nochk(\"save\", t + \"fn\", \"\"), c.setVal_Nochk(\"save\", \"const.sn.loopPlaying\", JSON.stringify(p.#e)), c.flush();\n  }\n  static getVol(e, t) {\n    const s = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"volume\", t);\n    return s < 0 ? 0 : s > 1 ? 1 : s;\n  }\n  static xchgbuf({ buf: e = v, buf2: t = v }) {\n    if (e === t) throw `[xchgbuf] buf:${e} が同じ値です`;\n    const s = \"const.sn.sound.\" + e + \".\", o = Number(c.getVal(\"save:\" + s + \"volume\")), r = String(c.getVal(\"save:\" + s + \"fn\")), i = \"const.sn.sound.\" + t + \".\", u = Number(c.getVal(\"save:\" + i + \"volume\")), a = String(c.getVal(\"save:\" + i + \"fn\"));\n    c.setVal_Nochk(\"save\", s + \"volume\", u), c.setVal_Nochk(\"save\", i + \"volume\", o), c.setVal_Nochk(\"save\", s + \"fn\", a), c.setVal_Nochk(\"save\", i + \"fn\", r), e in p.#e != t in p.#e && (e in p.#e ? (delete p.#e[e], p.#e[t] = r) : (delete p.#e[t], p.#e[e] = a), c.setVal_Nochk(\"save\", \"const.sn.loopPlaying\", JSON.stringify(p.#e))), c.flush();\n  }\n  static #s = 999e3;\n  #t;\n  needLoad;\n  #n = () => {\n    M.volumeAll = Number(c.getVal(\"sys:sn.sound.global_volume\", 1)), this.#n = () => {\n    };\n  };\n  #o(e, t) {\n    const s = Z.searchPath(e, _web2_js__WEBPACK_IMPORTED_MODULE_0__.S.SOUND);\n    if (!s.endsWith(\".bin\")) {\n      t.url = s, $.from(t);\n      return;\n    }\n    new _web2_js__WEBPACK_IMPORTED_MODULE_0__.d().add({ name: e, url: s, xhrType: _web2_js__WEBPACK_IMPORTED_MODULE_0__.L.XHR_RESPONSE_TYPE.BUFFER }).use(async (o, r) => {\n      try {\n        o.data = await Q.decAB(o.data);\n      } catch (i) {\n        k.errScript(`Sound ロード失敗ですc fn:${o.name} ${i}`, !1);\n      }\n      r();\n    }).load((o, r) => {\n      t.source = r[e]?.data, $.from(t);\n    });\n  }\n  setVol(e) {\n    this.#t.setVol(e);\n  }\n  ws = (e) => this.#t.stt.ws(this.#t, e);\n  stopse({ buf: e = v }) {\n    Y(this.#t, e), this.#t.stt.stopse(this.#t);\n  }\n  fade = (e) => this.#t.stt.fade(this.#t, e);\n  wf = (e) => this.#t.stt.wf(this.#t, e);\n  stopfadese = (e) => this.#t.stt.stopfadese(this.#t, e);\n}\nfunction Y({ loop: n }, e) {\n  if (n) {\n    p.delLoopPlay(e);\n    return;\n  }\n  const t = \"const.sn.sound.\" + e + \".\";\n  c.setVal_Nochk(\"tmp\", t + \"playing\", !1), c.flush();\n}\nfunction D(n) {\n  n.stop().end();\n}\nclass Se {\n  onLoad(e) {\n    e.stt = new B();\n  }\n  stopse(e) {\n    e.stt = new C(e, !1);\n  }\n  ws = () => !1;\n  onPlayEnd() {\n  }\n  // ok\n  fade() {\n  }\n  // ok\n  wf = () => !1;\n  // ok\n  compFade() {\n  }\n  // ok\n  stopfadese() {\n  }\n  // ok\n  isDestroy = !1;\n}\nclass B {\n  onLoad() {\n  }\n  // ok\n  stopse(e) {\n    e.stt = new C(e);\n  }\n  ws(e, t) {\n    if (e.loop) return !1;\n    const { buf: s = v } = t, o = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(t, \"stop\", !0);\n    return (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(t, \"canskip\", !1), T.waitEvent(\"buf:\" + s, t, () => {\n      Y(e, s), e.onPlayEnd(), o ? e.stt.stopse(e) : e.stt.onPlayEnd = () => {\n      };\n    }) ? (e.stt = new Le(), !0) : !1;\n  }\n  onPlayEnd() {\n  }\n  // ok\n  fade(e, t) {\n    const { buf: s = v } = t, r = \"const.sn.sound.\" + s + \".\" + \"volume\", i = p.getVol(t, NaN);\n    c.setVal_Nochk(\"save\", r, i);\n    const u = i * Number(c.getVal(\"sys:\" + r, 1)), a = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(t, \"stop\", i === 0);\n    a && p.delLoopPlay(s), c.flush();\n    const l = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(t, \"time\", NaN), h = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(t, \"delay\", 0);\n    if (l === 0 && h === 0 || T.isSkipping) {\n      e.setVol(u), e.stt = a ? new C(e) : new B();\n      return;\n    }\n    const m = e.tw();\n    m && (_CmnTween_js__WEBPACK_IMPORTED_MODULE_1__.C.setTwProp(m, t).to({ volume: u }, l).onComplete(() => {\n      (0,_ReadState_js__WEBPACK_IMPORTED_MODULE_2__.r)(m), e.stt.compFade(s), e.stt = a ? new C(e) : new B();\n    }).start(), e.stt = new Ce(m));\n  }\n  wf = () => !1;\n  // ok\n  compFade() {\n  }\n  // ok\n  stopfadese() {\n  }\n  // ok\n  isDestroy = !1;\n}\nclass Le {\n  onLoad() {\n  }\n  // ok\n  stopse(e) {\n    e.stt = new C(e);\n  }\n  ws = () => !1;\n  // ok\n  onPlayEnd(e) {\n    T.breakEvent(\"buf:\" + e);\n  }\n  fade() {\n  }\n  // ok\n  wf = () => !1;\n  // ok\n  compFade() {\n  }\n  // ok\n  stopfadese() {\n  }\n  // ok\n  isDestroy = !1;\n}\nclass Ce {\n  constructor(e) {\n    this.tw = e;\n  }\n  onLoad() {\n  }\n  // ok\n  stopse(e) {\n    D(this.tw), e.stt = new C(e);\n  }\n  // 順番厳守\n  ws = () => !1;\n  // ok ?\n  onPlayEnd() {\n  }\n  // ok\n  fade() {\n  }\n  // ok\n  wf(e, t) {\n    const { buf: s = v } = t;\n    return (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(t, \"canskip\", !1), T.waitEvent(\"buf:\" + s, t, () => D(this.tw)) ? (e.stt = new Ve(this.tw), !0) : !1;\n  }\n  compFade() {\n  }\n  // ok\n  stopfadese = () => D(this.tw);\n  isDestroy = !1;\n}\nclass Ve {\n  constructor(e) {\n    this.tw = e;\n  }\n  onLoad() {\n  }\n  // ok\n  stopse(e) {\n    D(this.tw), e.stt = new C(e);\n  }\n  ws = () => !1;\n  // ok\n  onPlayEnd() {\n  }\n  // ok\n  fade() {\n  }\n  // ok\n  wf = () => !1;\n  // ok\n  compFade(e) {\n    T.breakEvent(\"buf:\" + e);\n  }\n  stopfadese = () => D(this.tw);\n  isDestroy = !1;\n}\nclass C {\n  constructor(e, t = !0) {\n    this.si = e, this.stop = t, t && (e.stop(), e.loop && (e.destroy(), e.destroy = () => {\n    }));\n  }\n  onLoad() {\n  }\n  // ok\n  stopse() {\n  }\n  // ok\n  ws = () => !1;\n  // ok\n  onPlayEnd() {\n  }\n  // ok\n  fade() {\n  }\n  // ok\n  wf = () => !1;\n  // ok\n  compFade() {\n  }\n  // ok\n  stopfadese() {\n  }\n  // ok\n  isDestroy = !0;\n}\nclass Te {\n  constructor(e, t, s, o, r) {\n    this.val = s, t.volume = (i) => this.#t(i), t.fadebgm = (i) => this.#l(i), t.fadeoutbgm = (i) => this.#o(i), t.fadeoutse = (i) => this.#d(i), t.fadese = (i) => this.#i(i), t.playbgm = (i) => this.#c(i), t.playse = (i) => this.#a(i), t.stop_allse = () => this.#r(), t.stopbgm = (i) => this.#_(i), t.stopse = (i) => this.#u(i), t.wb = (i) => this.#y(i), t.wf = (i) => this.#f(i), t.stopfadese = (i) => this.#p(i), t.wl = (i) => this.#m(i), t.ws = (i) => this.#h(i), t.xchgbuf = (i) => this.#b(i), s.setVal_Nochk(\"save\", \"const.sn.loopPlaying\", \"{}\"), s.setVal_Nochk(\"tmp\", \"const.sn.sound.codecs\", JSON.stringify(Fe.supported)), p.init(e, s, o, r, this.#e), M.disableAutoPause = !0;\n  }\n  #e = {};\n  #s;\n  setEvtMng(e) {\n    this.#s = e, p.setEvtMng(e);\n  }\n  setNoticeChgVolume(e, t) {\n    this.val.defValTrg(\"sys:sn.sound.global_volume\", (s, o) => e(M.volumeAll = Number(o))), this.val.defValTrg(\"sys:sn.sound.movie_volume\", (s, o) => t(Number(o))), this.val.setVal_Nochk(\"sys\", \"sn.sound.global_volume\", this.val.getVal(\"sys:sn.sound.global_volume\", 1)), this.val.setVal_Nochk(\"sys\", \"sn.sound.movie_volume\", this.val.getVal(\"sys:sn.sound.movie_volume\", 1));\n  }\n  //MARK: 音量設定（独自拡張）\n  #t(e) {\n    const { buf: t = v } = e, s = \"const.sn.sound.\" + t + \".volume\", o = this.#n(e, 1);\n    return Number(this.val.getVal(\"sys:\" + s)) === o ? !1 : (this.val.setVal_Nochk(\"sys\", s, o), this.val.flush(), e.time = 0, e.volume = Number(this.val.getVal(\"save:\" + s)), this.#i(e));\n  }\n  #n(e, t) {\n    const s = (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.b)(e, \"volume\", t);\n    return s < 0 ? 0 : s > 1 ? 1 : s;\n  }\n  //MARK: BGM/効果音のフェードアウト（loadから使うのでマクロ化禁止）\n  #o(e) {\n    return e.volume = 0, this.#l(e);\n  }\n  //MARK: 効果音のフェードアウト（loadから使うのでマクロ化禁止）\n  #d(e) {\n    return e.volume = 0, this.#i(e);\n  }\n  //MARK: BGMのフェード（loadから使うのでマクロ化禁止）\n  #l(e) {\n    return e.buf = j, this.#i(e);\n  }\n  //MARK: 効果音のフェード\n  #i(e) {\n    const { buf: t = v } = e;\n    return this.#p(e), this.#e[t]?.fade(e), !1;\n  }\n  //MARK: BGM の演奏\n  #c(e) {\n    return e.buf = j, e.canskip = !1, (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(e, \"loop\", !0), this.#a(e);\n  }\n  //MARK: 効果音の再生\n  #a(e) {\n    const { buf: t = v, fn: s } = e;\n    if (this.#u({ buf: t }), !s) throw `fnは必須です buf:${t}`;\n    return (0,_web2_js__WEBPACK_IMPORTED_MODULE_0__.a)(e, \"canskip\", !0) && this.#s.isSkipping ? !1 : (this.#e[t] = new p(e, t, s)).needLoad;\n  }\n  clearCache() {\n    M.removeAll();\n  }\n  //MARK: 全効果音再生の停止\n  #r() {\n    for (const e of Object.keys(this.#e)) this.#u({ buf: e });\n    return this.#e = {}, M.stopAll(), !1;\n  }\n  //MARK: BGM 演奏の停止（loadから使うのでマクロ化禁止）\n  #_(e) {\n    return e.buf = j, this.#u(e);\n  }\n  //MARK: 効果音再生の停止\n  #u(e) {\n    const { buf: t = v } = e;\n    return this.#e[t]?.stopse(e), !1;\n  }\n  //MARK: BGM フェードの終了待ち\n  #y(e) {\n    return e.buf = j, this.#f(e);\n  }\n  //MARK: 効果音フェードの終了待ち\n  #f(e) {\n    const { buf: t = v } = e;\n    return this.#e[t]?.wf(e);\n  }\n  //MARK: 音声フェードの停止\n  #p(e) {\n    const { buf: t = v } = e;\n    return this.#e[t]?.stopfadese(e), !1;\n  }\n  //MARK: BGM 再生の終了待ち\n  #m(e) {\n    return e.buf = j, this.#h(e);\n  }\n  //MARK: 効果音再生の終了待ち\n  #h(e) {\n    const { buf: t = v } = e;\n    return this.#e[t]?.ws(e);\n  }\n  //MARK: 再生トラックの交換\n  #b(e) {\n    const { buf: t = v, buf2: s = v } = e;\n    if (t === s) return !1;\n    const o = this.#e[t], r = this.#e[s];\n    return o ? this.#e[s] = o : delete this.#e[s], r ? this.#e[t] = r : delete this.#e[t], p.xchgbuf(e), !1;\n  }\n  //MARK: しおりの読込（BGM状態復元）\n  playLoopFromSaveObj(e) {\n    const t = String(this.val.getVal(\"save:const.sn.loopPlaying\", \"{}\"));\n    if (t === \"{}\")\n      return this.#r(), this.clearCache(), [];\n    const s = JSON.parse(t);\n    if (e)\n      this.#r(), this.clearCache();\n    else for (const [o, r] of Object.entries(this.#e))\n      o in s || r?.stopse({ buf: o });\n    return Object.entries(s).map(([o, r]) => new Promise((i) => {\n      const u = this.#e[o];\n      if (!e && u && u.fn === r) {\n        i();\n        return;\n      }\n      const a = \"save:const.sn.sound.\" + o + \".\", l = {\n        fn: r,\n        buf: o,\n        join: !1,\n        loop: !0,\n        volume: Number(this.val.getVal(a + \"volume\")),\n        start_ms: Number(this.val.getVal(a + \"start_ms\")),\n        end_ms: Number(this.val.getVal(a + \"end_ms\")),\n        ret_ms: Number(this.val.getVal(a + \"ret_ms\")),\n        fnc: i\n        // loaded\n      };\n      l.buf === j ? this.#c(l) : this.#a(l);\n    }));\n  }\n  destroy() {\n    this.#r(), this.clearCache();\n  }\n}\n\n//# sourceMappingURL=SoundMng.js.map\n\n\n//# sourceURL=webpack://uc/./node_modules/@famibee/skynovel/dist/SoundMng.js?");

/***/ })

}]);