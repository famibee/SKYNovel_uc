/*! For license information please see web.js.LICENSE.txt */
(()=>{var __webpack_modules__={858:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(991);i(119),e.init=t=>{r.baseCls="humane-bigbox",t.addTag("notice",(t=>(r.log(t.text),!1)))}},202:(t,e,i)=>{var r={"./humane":858,"./humane/":858,"./humane/index":858,"./humane/index.js":858};function n(t){var e=s(t);return i(e)}function s(t){if(!i.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=s,t.exports=n,n.id=202},398:function(module){var factory;factory=function(){return(()=>{var __webpack_modules__={"./node_modules/@daybrush/utils/dist/utils.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{RGB:()=>r,RGBA:()=>n,HSL:()=>s,HSLA:()=>o,COLOR_MODELS:()=>a,FUNCTION:()=>h,PROPERTY:()=>u,ARRAY:()=>l,OBJECT:()=>c,STRING:()=>f,NUMBER:()=>d,UNDEFINED:()=>p,IS_WINDOW:()=>m,document:()=>g,getCrossBrowserProperty:()=>_,TRANSFORM:()=>y,FILTER:()=>b,ANIMATION:()=>E,KEYFRAMES:()=>x,OPEN_CLOSED_CHARACTERS:()=>T,TINY_NUM:()=>S,DEFAULT_UNIT_PRESETS:()=>w,cutHex:()=>ft,hexToRGBA:()=>dt,toFullHex:()=>pt,hslToRGBA:()=>mt,stringToRGBA:()=>gt,dot:()=>A,isUndefined:()=>M,isObject:()=>O,isArray:()=>R,isString:()=>C,isNumber:()=>P,isFunction:()=>I,splitText:()=>L,splitSpace:()=>k,splitComma:()=>B,splitBracket:()=>F,splitUnit:()=>j,camelize:()=>G,decamelize:()=>U,toArray:()=>X,now:()=>z,findIndex:()=>H,findLastIndex:()=>Y,findLast:()=>W,find:()=>V,requestAnimationFrame:()=>$,cancelAnimationFrame:()=>q,getKeys:()=>Z,sortOrders:()=>J,convertUnitSize:()=>K,between:()=>Q,checkBoundSize:()=>tt,calculateBoundSize:()=>et,sum:()=>it,average:()=>rt,getRad:()=>nt,getCenterPoint:()=>st,getShapeDirection:()=>ot,getDist:()=>at,throttle:()=>ht,throttleArray:()=>ut,counter:()=>lt,replaceOnce:()=>ct,$:()=>vt,hasClass:()=>_t,addClass:()=>yt,removeClass:()=>bt,fromCSS:()=>Et,addEvent:()=>xt,removeEvent:()=>Tt});var r="rgb",n="rgba",s="hsl",o="hsla",a=[r,n,s,o],h="function",u="property",l="array",c="object",f="string",d="number",p="undefined",m=typeof window!==p,g=typeof document!==p&&document,v=["webkit","ms","moz","o"],_=function(t){if(!g)return"";var e=(g.body||g.documentElement).style,i=v.length;if(typeof e[t]!==p)return t;for(var r=0;r<i;++r){var n="-"+v[r]+"-"+t;if(typeof e[n]!==p)return n}return""},y=_("transform"),b=_("filter"),E=_("animation"),x=E.replace("animation","keyframes"),T=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],S=1e-7,w={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function A(t,e,i,r){return(t*r+e*i)/(i+r)}function M(t){return typeof t===p}function O(t){return t&&typeof t===c}function R(t){return Array.isArray(t)}function C(t){return typeof t===f}function P(t){return typeof t===d}function I(t){return typeof t===h}function N(t,e,i,r,n){return D(t,e,i)?i:function(t,e,i,r,n){for(var s,o=function(i){var o=e[i].trim();if(o===t.close&&!D(t,e,i))return{value:i};var a=i,h=V(n,(function(t){return t.open===o}));if(h&&(a=N(h,e,i,r,n)),-1===a)return s=i,"break";s=i=a},a=i;a<r;++a){var h=o(a);if(a=s,"object"==typeof h)return h.value;if("break"===h)break}return-1}(t,e,i+1,r,n)}function D(t,e,i){if(!t.ignore)return null;var r=e.slice(Math.max(i-3,0),i+3).join("");return new RegExp(t.ignore).exec(r)}function L(t,e){var i=C(e)?{separator:e}:e,r=i.separator,n=void 0===r?",":r,s=i.isSeparateFirst,o=i.isSeparateOnlyOpenClose,a=i.isSeparateOpenClose,h=void 0===a?o:a,u=i.openCloseCharacters,l=void 0===u?T:u,c=l.map((function(t){var e=t.open,i=t.close;return e===i?e:e+"|"+i})).join("|"),f=new RegExp("(\\s*"+n+"\\s*|"+c+"|\\s+)","g"),d=t.split(f).filter(Boolean),p=d.length,m=[],g=[];function v(){return!!g.length&&(m.push(g.join("")),g=[],!0)}for(var _,y=function(t){var e=d[t].trim(),i=t,r=V(l,(function(t){return t.open===e})),a=V(l,(function(t){return t.close===e}));if(r){if(-1!==(i=N(r,d,t,p,l))&&h)return v()&&s?(_=t,"break"):(m.push(d.slice(t,i+1).join("")),t=i,s?(_=t,"break"):(_=t,"continue"))}else{if(a&&!D(a,d,t))throw new Error("invalid format: "+a.close);if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(e,n)&&!o)return v(),s?(_=t,"break"):(_=t,"continue")}-1===i&&(i=p-1),g.push(d.slice(t,i+1).join("")),_=t=i},b=0;b<p;++b){var E=y(b);if(b=_,"break"===E)break}return g.length&&m.push(g.join("")),m}function k(t){return L(t,"")}function B(t){return L(t,",")}function F(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function j(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var i=e[1],r=e[2];return{prefix:i,unit:e[3],value:parseFloat(r)}}function G(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function U(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,i,r){return""+i+e+r.toLowerCase()}))}function X(t){return[].slice.call(t)}function z(){return Date.now?Date.now():(new Date).getTime()}function H(t,e,i){void 0===i&&(i=-1);for(var r=t.length,n=0;n<r;++n)if(e(t[n],n,t))return n;return i}function Y(t,e,i){void 0===i&&(i=-1);for(var r=t.length-1;r>=0;--r)if(e(t[r],r,t))return r;return i}function W(t,e,i){var r=Y(t,e);return r>-1?t[r]:i}function V(t,e,i){var r=H(t,e);return r>-1?t[r]:i}var $=function(){var t=z(),e=m&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var i=z();return window.setTimeout((function(){e(i-t)}),1e3/60)}}(),q=function(){var t=m&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function Z(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in e)e.push(i);return e}function J(t,e){void 0===e&&(e=[]),t.sort((function(t,i){var r=e.indexOf(t),n=e.indexOf(i);return-1===n&&-1===r?0:-1===r?1:-1===n?-1:r-n}))}function K(t,e){var i=j(t),r=i.value,n=i.unit;if(O(e)){var s=e[n];if(s){if(I(s))return s(r);if(w[n])return w[n](r,s)}}else if("%"===n)return r*e/100;return w[n]?w[n](r):r}function Q(t,e,i){return Math.max(e,Math.min(t,i))}function tt(t,e,i){return[[ht(e[0],S),ht(e[0]*t[1]/t[0],S)],[ht(e[1]*t[0]/t[1],S),ht(e[1],S)]].filter((function(t){return t.every((function(t,r){return i?t<=e[r]:t>=e[r]}))}))[0]||t}function et(t,e,i,r){if(!r)return t.map((function(t,r){return Q(t,e[r],i[r])}));var n=t[0],s=t[1],o=tt(t,e,!1),a=o[0],h=o[1],u=tt(t,i,!0),l=u[0],c=u[1];return n<a||s<h?(n=a,s=h):(n>l||s>c)&&(n=l,s=c),[n,s]}function it(t){for(var e=0,i=t.length-1;i>=0;--i)e+=t[i];return e}function rt(t){for(var e=t.length,i=0,r=e-1;r>=0;--r)i+=t[r];return e?i/e:0}function nt(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=Math.atan2(r,i);return n>=0?n:n+2*Math.PI}function st(t){return[0,1].map((function(e){return rt(t.map((function(t){return t[e]})))}))}function ot(t){var e=st(t),i=nt(e,t[0]),r=nt(e,t[1]);return i<r&&r-i<Math.PI||i>r&&r-i<-Math.PI?1:-1}function at(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ht(t,e){return e?Math.round(t/e)*e:t}function ut(t,e){return t.forEach((function(i,r){t[r]=ht(t[r],e)})),t}function lt(t){for(var e=[],i=0;i<t;++i)e.push(i);return e}function ct(t,e,i){var r=!1;return t.replace(e,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r?t[0]:(r=!0,C(i)?i:i.apply(void 0,t))}))}function ft(t){return t.replace("#","")}function dt(t){var e=ft(t),i=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),s=parseInt(e.substring(6,8),16)/255;return isNaN(s)&&(s=1),[i,r,n,s]}function pt(t){var e=t.charAt(1),i=t.charAt(2),r=t.charAt(3),n=t.charAt(4);return["#",e,e,i,i,r,r,n,n].join("")}function mt(t){var e,i=t[0],r=t[1],n=t[2];i<0&&(i+=360*Math.floor((Math.abs(i)+360)/360)),i%=360;var s,o=(1-Math.abs(2*n-1))*r,a=o*(1-Math.abs(i/60%2-1)),h=n-o/2;return s=i<60?[o,a,0]:i<120?[a,o,0]:i<180?[0,o,a]:i<240?[0,a,o]:i<300?[a,0,o]:i<360?[o,0,a]:[0,0,0],[Math.round(255*(s[0]+h)),Math.round(255*(s[1]+h)),Math.round(255*(s[2]+h)),null!==(e=t[3])&&void 0!==e?e:1]}function gt(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?dt(pt(t)):dt(t);if(-1!==t.indexOf("(")){var e=F(t),i=e.prefix,a=e.value;if(!i||!a)return;var h=B(a),u=[0,0,0,1],l=h.length;switch(i){case r:case n:for(var c=0;c<l;++c)u[c]=parseFloat(h[c]);return u;case s:case o:for(c=0;c<l;++c)-1!==h[c].indexOf("%")?u[c]=parseFloat(h[c])/100:u[c]=parseFloat(h[c]);return mt(u)}}}function vt(t,e){return e?g.querySelectorAll(t):g.querySelector(t)}function _t(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function yt(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function bt(t,e){if(t.classList)t.classList.remove(e);else{var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}}function Et(t,e){if(!t||!e||!e.length)return{};var i;if(t instanceof Element)i=t;else{if(!t.length)return{};i=t[0]}for(var r={},n=window.getComputedStyle(i),s=e.length,o=0;o<s;++o)r[e[o]]=n[e[o]];return r}function xt(t,e,i,r){t.addEventListener(e,i,r)}function Tt(t,e,i,r){t.removeEventListener(e,i,r)}},"./node_modules/@egjs/agent/dist/agent.esm.js":(t,e,i)=>{"use strict";function r(t,e){for(var i=t.length,r=0;r<i;++r)if(e(t[r],r))return!0;return!1}function n(t,e){for(var i=t.length,r=0;r<i;++r)if(e(t[r],r))return t[r];return null}function s(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function o(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}function a(t){return t.replace(/_/g,".")}function h(t,e){var i=null,n="-1";return r(t,(function(t){var r=s("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!r||t.brand||(i=t,n=r[3]||"-1",t.versionAlias?n=t.versionAlias:t.versionTest&&(n=function(t,e){var i=s("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return i?i[3]:""}(t.versionTest.toLowerCase(),e)||n),n=a(n),0))})),{preset:i,version:n}}function u(t,e){var i={brand:"",version:"-1"};return r(t,(function(t){var r=l(e,t);return!!r&&(i.brand=t.id,i.version=t.versionAlias||r.version,"-1"!==i.version)})),i}function l(t,e){return n(t,(function(t){var i=t.brand;return s(""+e.test,i.toLowerCase())}))}i.r(e),i.d(e,{default:()=>y,getAccurateAgent:()=>v});var c=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],f=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],d=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],p=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],m=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function g(t){var e=navigator.userAgentData,i=(e.uaList||e.brands).slice(),s=e.mobile||!1,o=i[0],h={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!u(p,i).brand},g={name:"unknown",version:"-1",majorVersion:-1};h.webkit=!h.chromium&&r(d,(function(t){return l(i,t)}));var v=u(f,i);if(h.chromium=!!v.brand,h.chromiumVersion=v.version,!h.chromium){var _=u(d,i);h.webkit=!!_.brand,h.webkitVersion=_.version}if(t){var y=t.platform.toLowerCase(),b=n(m,(function(t){return new RegExp(""+t.test,"g").exec(y)}));g.name=b?b.id:y,g.version=t.platformVersion}var E=u(c,i);return E.brand&&(h.name=E.brand,h.version=t?t.uaFullVersion:E.version),"Linux armv8l"===navigator.platform?g.name="android":h.webkit&&(g.name=s?"ios":"mac"),"ios"===g.name&&h.webview&&(h.version="-1"),g.version=a(g.version),h.version=a(h.version),g.majorVersion=parseInt(g.version,10),h.majorVersion=parseInt(h.version,10),{browser:h,os:g,isMobile:s,isHints:!0}}function v(t){return o()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then((function(e){var i=g(e);return t&&t(i),i})):(t&&t(_()),"undefined"!=typeof Promise&&Promise?Promise.resolve(_()):null)}function _(t){return void 0===t&&o()?g():function(t){var e=function(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}(t),i=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!h(p,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},s=h(c,e),o=s.preset,a=s.version,u=h(m,e),l=u.preset,g=u.version,v=h(f,e);if(r.chromium=!!v.preset,r.chromiumVersion=v.version,!r.chromium){var _=h(d,e);r.webkit=!!_.preset,r.webkitVersion=_.version}return l&&(n.name=l.id,n.version=g,n.majorVersion=parseInt(g,10)),o&&(r.name=o.id,r.version=a,r.webview&&"ios"===n.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:n,isMobile:i,isHints:!1}}(t)}const y=_},"./node_modules/@egjs/children-differ/dist/children-differ.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h,diff:()=>a});var r,n=i("./node_modules/@egjs/list-differ/dist/list-differ.esm.js"),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)},o="function"==typeof Map?void 0:(r=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++r)});function a(t,e){return(0,n.diff)(t,e,o)}const h=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,o)||this}return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(n.default)},"./node_modules/@egjs/list-differ/dist/list-differ.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u,diff:()=>h});var r=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var i=this.keys,r=this.values,n=i.indexOf(t),s=-1===n?i.length:n;i[s]=t,r[s]=e},t}(),n=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),s="function"==typeof Map,o=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),a=function(){function t(t,e,i,r,n,s,o,a){this.prevList=t,this.list=e,this.added=i,this.removed=r,this.changed=n,this.maintained=s,this.changedBeforeAdded=o,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var i=[],r=[];return t.forEach((function(t){var e=t[0],n=t[1],s=new o;i[e]=s,r[n]=s})),i.forEach((function(t,e){t.connect(i[e-1])})),t.filter((function(t,i){return!e[i]})).map((function(t,e){var n=t[0],s=t[1];if(n===s)return[0,0];var o=i[n],a=r[s-1],h=o.getIndex();return o.disconnect(),a?o.connect(a,a.next):o.connect(void 0,i[0]),[h,o.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,i=[];this.cacheOrdered=t.filter((function(t,r){var n=t[0],s=t[1],o=e[r],a=o[0],h=o[1];if(n!==s)return i.push([a,h]),!0})),this.cachePureChanged=i},t}();function h(t,e,i){var o=s?Map:i?n:r,h=i||function(t){return t},u=[],l=[],c=[],f=t.map(h),d=e.map(h),p=new o,m=new o,g=[],v=[],_={},y=[],b=0,E=0;return f.forEach((function(t,e){p.set(t,e)})),d.forEach((function(t,e){m.set(t,e)})),f.forEach((function(t,e){var i=m.get(t);void 0===i?(++E,l.push(e)):_[i]=E})),d.forEach((function(t,e){var i=p.get(t);void 0===i?(u.push(e),++b):(c.push([i,e]),E=_[e]||0,g.push([i-E,e-b]),v.push(e===i),i!==e&&y.push([i,e]))})),l.reverse(),new a(t,e,u,l,y,c,g,v)}const u=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),i=h(this.list,e,this.findKeyCallback);return this.list=e,i},t}()},"./node_modules/@pixi/accessibility/dist/esm/accessibility.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{AccessibilityManager:()=>o,accessibleTarget:()=>s});var r=i("./node_modules/@pixi/display/dist/esm/display.js"),n=i("./node_modules/@pixi/utils/dist/esm/utils.js"),s={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};r.DisplayObject.mixin(s);var o=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(n.isMobile.tablet||n.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(n.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,r=e.top,s=e.width,o=e.height,a=this.renderer,h=a.width,u=a.height,l=a.resolution,c=s/h*l,f=o/u*l,d=this.div;d.style.left=i+"px",d.style.top=r+"px",d.style.width=h+"px",d.style.height=u+"px";for(var p=0;p<this.children.length;p++){var m=this.children[p];if(m.renderId!==this.renderId)m._accessibleActive=!1,(0,n.removeItems)(this.children,p,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,p--;else{d=m._accessibleDiv;var g=m.hitArea,v=m.worldTransform;m.hitArea?(d.style.left=(v.tx+g.x*v.a)*c+"px",d.style.top=(v.ty+g.y*v.d)*f+"px",d.style.width=g.width*v.a*c+"px",d.style.height=g.height*v.d*f+"px"):(g=m.getBounds(),this.capHitArea(g),d.style.left=g.x*c+"px",d.style.top=g.y*f+"px",d.style.width=g.width*c+"px",d.style.height=g.height*f+"px",d.title!==m.accessibleTitle&&null!==m.accessibleTitle&&(d.title=m.accessibleTitle),d.getAttribute("aria-label")!==m.accessibleHint&&null!==m.accessibleHint&&d.setAttribute("aria-label",m.accessibleHint)),m.accessibleTitle===d.title&&m.tabIndex===d.tabIndex||(d.title=m.accessibleTitle,d.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,r=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"click",r),e.dispatchEvent(i,"pointertap",r),e.dispatchEvent(i,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}()},"./node_modules/@pixi/app/dist/esm/app.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Application:()=>s});var r=i("./node_modules/@pixi/display/dist/esm/display.js"),n=i("./node_modules/@pixi/core/dist/esm/core.js"),s=function(){function t(e){var i=this;this.stage=new r.Container,e=Object.assign({forceCanvas:!1},e),this.renderer=(0,n.autoDetectRenderer)(e),t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var r=this,n=t._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),o=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===self)t=self.innerWidth,i=self.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,i=r.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();s.registerPlugin(o)},"./node_modules/@pixi/compressed-textures/dist/esm/compressed-textures.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{BlobResource:()=>p,CompressedTextureLoader:()=>g,CompressedTextureResource:()=>m,DDSLoader:()=>w,FORMATS_TO_COMPONENTS:()=>O,INTERNAL_FORMATS:()=>n,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>u,KTXLoader:()=>C,TYPES_TO_BYTES_PER_COMPONENT:()=>M,TYPES_TO_BYTES_PER_PIXEL:()=>R});var r,n,s=i("./node_modules/@pixi/core/dist/esm/core.js"),o=i("./node_modules/@pixi/loaders/dist/esm/loaders.js"),a=i("./node_modules/@pixi/utils/dist/esm/utils.js"),h=i("./node_modules/@pixi/constants/dist/esm/constants.js");!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(n||(n={}));var u=((r={})[n.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,r[n.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,r[n.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,r[n.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,r[n.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,r[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,r[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,r[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,r[n.COMPRESSED_R11_EAC]=.5,r[n.COMPRESSED_SIGNED_R11_EAC]=.5,r[n.COMPRESSED_RG11_EAC]=1,r[n.COMPRESSED_SIGNED_RG11_EAC]=1,r[n.COMPRESSED_RGB8_ETC2]=.5,r[n.COMPRESSED_RGBA8_ETC2_EAC]=1,r[n.COMPRESSED_SRGB8_ETC2]=.5,r[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,r[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,r[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,r[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,r[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,r[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,r[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,r[n.COMPRESSED_RGB_ETC1_WEBGL]=.5,r[n.COMPRESSED_RGB_ATC_WEBGL]=.5,r[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,r[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,r),l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},l(t,e)};function c(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var f,d,p=function(t){function e(e,i){void 0===i&&(i={width:1,height:1,autoLoad:!0});var r,n,o=this;return"string"==typeof e?(r=e,n=new Uint8Array):(r=null,n=e),(o=t.call(this,n,i)||this).origin=r,o.buffer=n?new s.ViewableBuffer(n):null,o.origin&&!1!==i.autoLoad&&o.load(),n&&n.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return c(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,void 0,i=function(){var t;return function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new s.ViewableBuffer(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((e=Promise)||(e=Promise))((function(r,n){function s(t){try{a(i.next(t))}catch(t){n(t)}}function o(t){try{a(i.throw(t))}catch(t){n(t)}}function a(t){t.done?r(t.value):new e((function(e){e(t.value)})).then(s,o)}a((i=i.apply(t,[])).next())}));var t,e,i},e}(s.BufferResource),m=function(t){function e(i,r){var n=t.call(this,i,r)||this;return n.format=r.format,n.levels=r.levels||1,n._width=r.width,n._height=r.height,n._extension=e._formatToExtension(n.format),(r.levelBuffers||n.buffer)&&(n._levelBuffers=r.levelBuffers||e._createLevelBuffers(i instanceof Uint8Array?i:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return c(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,s=this.levels;n<s;n++){var o=this._levelBuffers[n],a=o.levelID,h=o.levelWidth,u=o.levelHeight,l=o.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,a,this.format,h,u,0,l)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,i,r,n,s,o){for(var a=new Array(i),h=t.byteOffset,l=s,c=o,f=l+r-1&~(r-1),d=c+n-1&~(n-1),p=f*d*u[e],m=0;m<i;m++)a[m]={levelID:m,levelWidth:i>1?l:f,levelHeight:i>1?c:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,p=(f=(l=l>>1||1)+r-1&~(r-1))*(d=(c=c>>1||1)+n-1&~(n-1))*u[e];return a},e}(p),g=function(){function t(){}return t.use=function(e,i){var r=e.data;if(e.type===o.LoaderResource.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var n=r.textures,s=void 0,h=void 0,u=0,l=n.length;u<l;u++){var c=n[u],f=c.src,d=c.format;if(d||(h=f),t.textureFormats[d]){s=f;break}}if(!(s=s||h))return void i(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void i(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},m=a.url.resolve(e.url.replace(this.baseUrl,""),s),g=r.cacheID;this.add(g,m,p,(function(t){if(t.error)i(t.error);else{var r=t.texture,n=void 0===r?null:r,s=t.textures,o=void 0===s?{}:s;Object.assign(e,{texture:n,textures:o}),i()}}))}else i()},t.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(var r in t.textureExtensions=i,t.textureFormats={},i){var n=i[r];n&&Object.assign(t.textureFormats,Object.getPrototypeOf(n))}}else console.warn("WebGL not available for compressed textures. Silently failing.")},t}();function v(t,e,i){var r={textures:{},texture:null};return e?(e.map((function(t){return new s.Texture(new s.BaseTexture(t,Object.assign({mipmap:h.MIPMAP_MODES.OFF,alphaMode:h.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA},i)))})).forEach((function(e,i){var n=e.baseTexture,o=t+"-"+(i+1);s.BaseTexture.addToCache(n,o),s.Texture.addToCache(e,o),0===i&&(s.BaseTexture.addToCache(n,t),s.Texture.addToCache(e,t),r.texture=e),r.textures[o]=e})),r):r}o.LoaderResource.setExtensionXhrType("dds",o.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var _,y;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(_||(_={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(y||(y={}));var b,E,x,T=((f={})[827611204]=n.COMPRESSED_RGBA_S3TC_DXT1_EXT,f[861165636]=n.COMPRESSED_RGBA_S3TC_DXT3_EXT,f[894720068]=n.COMPRESSED_RGBA_S3TC_DXT5_EXT,f),S=((d={})[_.DXGI_FORMAT_BC1_TYPELESS]=n.COMPRESSED_RGBA_S3TC_DXT1_EXT,d[_.DXGI_FORMAT_BC1_UNORM]=n.COMPRESSED_RGBA_S3TC_DXT1_EXT,d[_.DXGI_FORMAT_BC2_TYPELESS]=n.COMPRESSED_RGBA_S3TC_DXT3_EXT,d[_.DXGI_FORMAT_BC2_UNORM]=n.COMPRESSED_RGBA_S3TC_DXT3_EXT,d[_.DXGI_FORMAT_BC3_TYPELESS]=n.COMPRESSED_RGBA_S3TC_DXT5_EXT,d[_.DXGI_FORMAT_BC3_UNORM]=n.COMPRESSED_RGBA_S3TC_DXT5_EXT,d[_.DXGI_FORMAT_BC1_UNORM_SRGB]=n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,d[_.DXGI_FORMAT_BC2_UNORM_SRGB]=n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,d[_.DXGI_FORMAT_BC3_UNORM_SRGB]=n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,d),w=function(){function t(){}return t.use=function(e,i){if("dds"===e.extension&&e.data)try{Object.assign(e,v(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[3],n=i[4],s=i[7],o=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=o[1];if(4&a){var h=o[2];if(808540228!==h){var l=T[h],c=new Uint8Array(t,128);return[new m(c,{format:l,width:n,height:r,levels:s})]}var f=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=f[0],p=f[1],g=f[2],v=f[3],_=S[d];if(void 0===_)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===g)throw new Error("DDSLoader does not support cubemap textures");if(p===y.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var b=new Array;if(1===v)b.push(new Uint8Array(t,148));else{for(var E=u[_],x=0,w=n,A=r,M=0;M<s;M++)x+=Math.max(1,w+3&-4)*Math.max(1,A+3&-4)*E,w>>>=1,A>>>=1;var O=148;for(M=0;M<v;M++)b.push(new Uint8Array(t,O,x)),O+=x}return b.map((function(t){return new m(t,{format:_,width:n,height:r,levels:s})}))}if(64&a)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&a)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();o.LoaderResource.setExtensionXhrType("ktx",o.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var A=[171,75,84,88,32,49,49,187,13,10,26,10],M=((b={})[h.TYPES.UNSIGNED_BYTE]=1,b[h.TYPES.UNSIGNED_SHORT]=2,b[h.TYPES.FLOAT]=4,b[h.TYPES.HALF_FLOAT]=8,b),O=((E={})[h.FORMATS.RGBA]=4,E[h.FORMATS.RGB]=3,E[h.FORMATS.LUMINANCE]=1,E[h.FORMATS.LUMINANCE_ALPHA]=2,E[h.FORMATS.ALPHA]=1,E),R=((x={})[h.TYPES.UNSIGNED_SHORT_4_4_4_4]=2,x[h.TYPES.UNSIGNED_SHORT_5_5_5_1]=2,x[h.TYPES.UNSIGNED_SHORT_5_6_5]=2,x),C=function(){function t(){}return t.use=function(e,i){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url;Object.assign(e,v(r,t.parse(r,e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(e,i){var r=new DataView(i);if(!t.validate(e,r))return null;var n=67305985===r.getUint32(12,!0),s=r.getUint32(16,n),o=r.getUint32(24,n),a=r.getUint32(28,n),h=r.getUint32(36,n),l=r.getUint32(40,n)||1,c=r.getUint32(44,n)||1,f=r.getUint32(48,n)||1,d=r.getUint32(52,n),p=r.getUint32(56,n),g=r.getUint32(60,n);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==f)throw new Error("WebGL does not support array textures");var v,_=h+3&-4,y=l+3&-4,b=new Array(f),E=h*l;if(0===s&&(E=_*y),void 0===(v=0!==s?M[s]?M[s]*O[o]:R[s]:u[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var x=E*v,T=h,S=l,w=_,A=y,C=64+g,P=0;P<p;P++){for(var I=r.getUint32(C,n),N=C+4,D=0;D<f;D++){var L=b[D];L||(L=b[D]=new Array(p)),L[P]={levelID:P,levelWidth:p>1?T:w,levelHeight:p>1?S:A,levelBuffer:new Uint8Array(i,N,x)},N+=x}C=(C+=I+4)%4!=0?C+4-C%4:C,x=(w=(T=T>>1||1)+4-1&-4)*(A=(S=S>>1||1)+4-1&-4)*v}if(0!==s)throw new Error("TODO: Uncompressed");return b.map((function(t){return new m(null,{format:a,width:h,height:l,levels:p,levelBuffers:t})}))},t.validate=function(t,e){for(var i=0;i<A.length;i++)if(e.getUint8(i)!==A[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t}()},"./node_modules/@pixi/constants/dist/esm/constants.js":(t,e,i)=>{"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E;i.r(e),i.d(e,{ALPHA_MODES:()=>m,BLEND_MODES:()=>o,BUFFER_BITS:()=>s,BUFFER_TYPE:()=>E,CLEAR_MODES:()=>g,DRAW_MODES:()=>a,ENV:()=>r,FORMATS:()=>h,GC_MODES:()=>v,MASK_TYPES:()=>y,MIPMAP_MODES:()=>p,MSAA_QUALITY:()=>b,PRECISION:()=>_,RENDERER_TYPE:()=>n,SAMPLER_TYPES:()=>c,SCALE_MODES:()=>f,TARGETS:()=>u,TYPES:()=>l,WRAP_MODES:()=>d}),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(u||(u={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(f||(f={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(d||(d={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(E||(E={}))},"./node_modules/@pixi/core/dist/esm/core.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{AbstractBatchRenderer:()=>xe,AbstractMultiResource:()=>_,AbstractRenderer:()=>ce,ArrayResource:()=>y,Attribute:()=>B,BaseImageResource:()=>b,BaseRenderTexture:()=>C,BaseTexture:()=>v,BatchDrawCall:()=>ye,BatchGeometry:()=>Se,BatchPluginFactory:()=>Me,BatchRenderer:()=>Oe,BatchShaderGenerator:()=>Te,BatchSystem:()=>tt,BatchTextureArray:()=>be,Buffer:()=>j,BufferResource:()=>m,CanvasResource:()=>E,ContextSystem:()=>it,CubeResource:()=>x,Filter:()=>Lt,FilterState:()=>q,FilterSystem:()=>K,Framebuffer:()=>R,FramebufferSystem:()=>st,GLFramebuffer:()=>rt,GLProgram:()=>te,GLTexture:()=>ae,Geometry:()=>H,GeometrySystem:()=>at,IGLUniformData:()=>Qt,INSTALLED:()=>u,ImageBitmapResource:()=>A,ImageResource:()=>T,MaskData:()=>ht,MaskSystem:()=>jt,ObjectRenderer:()=>Q,Program:()=>It,ProjectionSystem:()=>zt,Quad:()=>Y,QuadUv:()=>W,RenderTexture:()=>L,RenderTexturePool:()=>k,RenderTextureSystem:()=>Wt,Renderer:()=>pe,Resource:()=>p,SVGResource:()=>S,ScissorSystem:()=>Ut,Shader:()=>Nt,ShaderSystem:()=>ne,SpriteMaskFilter:()=>Ft,State:()=>Dt,StateSystem:()=>se,StencilSystem:()=>Xt,System:()=>_e,Texture:()=>N,TextureGCSystem:()=>oe,TextureMatrix:()=>Bt,TextureSystem:()=>he,TextureUvs:()=>P,UniformGroup:()=>$,VideoResource:()=>w,ViewableBuffer:()=>Ee,autoDetectRenderer:()=>me,autoDetectResource:()=>l,checkMaxIfStatementsInShader:()=>Rt,createUBOElements:()=>Zt,defaultFilterVertex:()=>ve,defaultVertex:()=>ge,generateProgram:()=>ee,generateUniformBufferSync:()=>Kt,getTestContext:()=>gt,getUBOData:()=>Jt,resources:()=>Re,systems:()=>Ie,uniformParsers:()=>St});var r=i("./node_modules/@pixi/settings/dist/esm/settings.js"),n=i("./node_modules/@pixi/constants/dist/esm/constants.js"),s=i("./node_modules/@pixi/utils/dist/esm/utils.js"),o=i("./node_modules/@pixi/runner/dist/esm/runner.js"),a=i("./node_modules/@pixi/ticker/dist/esm/ticker.js"),h=i("./node_modules/@pixi/math/dist/esm/math.js");r.settings.PREFER_ENV=s.isMobile.any?n.ENV.WEBGL:n.ENV.WEBGL2,r.settings.STRICT_TEXTURE_CACHE=!1;var u=[];function l(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=u.length-1;n>=0;--n){var s=u[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},c(t,e)};function f(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var d=function(){return d=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var s in e=i[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},d.apply(this,arguments)},p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new o.Runner("setRealSize"),this.onUpdate=new o.Runner("update"),this.onError=new o.Runner("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),m=function(t){function e(e,i){var r=this,n=i||{},s=n.width,o=n.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return(r=t.call(this,s,o)||this).data=e,r}return f(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.ALPHA_MODES.UNPACK);var s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(p),g={scaleMode:n.SCALE_MODES.NEAREST,format:n.FORMATS.RGBA,alphaMode:n.ALPHA_MODES.NPM},v=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this,a=(i=i||{}).alphaMode,h=i.mipmap,u=i.anisotropicLevel,c=i.scaleMode,f=i.width,d=i.height,m=i.wrapMode,g=i.format,v=i.type,_=i.target,y=i.resolution,b=i.resourceOptions;return!e||e instanceof p||((e=l(e,b)).internal=!0),o.resolution=y||r.settings.RESOLUTION,o.width=Math.round((f||0)*o.resolution)/o.resolution,o.height=Math.round((d||0)*o.resolution)/o.resolution,o._mipmap=void 0!==h?h:r.settings.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==u?u:r.settings.ANISOTROPIC_LEVEL,o._wrapMode=m||r.settings.WRAP_MODE,o._scaleMode=void 0!==c?c:r.settings.SCALE_MODE,o.format=g||n.FORMATS.RGBA,o.type=v||n.TYPES.UNSIGNED_BYTE,o.target=_||n.TARGETS.TEXTURE_2D,o.alphaMode=void 0!==a?a:n.ALPHA_MODES.UNPACK,o.uid=(0,s.uid)(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=f>0&&d>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return f(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=(0,s.isPow2)(this.realWidth)&&(0,s.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete s.BaseTextureCache[this.cacheId],delete s.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){void 0===n&&(n=r.settings.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+(0,s.uid)()}a=t._pixiId}var u=s.BaseTextureCache[a];if(o&&n&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||((u=new e(t,i)).cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,i,r,s){t=t||new Float32Array(i*r*4);var o=new m(t,{width:i,height:r}),a=t instanceof Float32Array?n.TYPES.FLOAT:n.TYPES.UNSIGNED_BYTE;return new e(o,Object.assign(g,s||{width:i,height:r,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete s.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(s.EventEmitter),_=function(t){function e(e,i){var r=this,n=i||{},s=n.width,o=n.height;(r=t.call(this,s,o)||this).items=[],r.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new v;r.items.push(h),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return f(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof p?this.addResourceAt(t[i],i):this.addResourceAt(l(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,r=e.realHeight;return t.resize(i,r),Promise.resolve(t)})),this._load},e}(p),y=function(t){function e(e,i){var r,n,s=this,o=i||{},a=o.width,h=o.height;return Array.isArray(e)?(r=e,n=e.length):n=e,s=t.call(this,n,{width:a,height:h})||this,r&&s.initFromArray(r,i),s}return f(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.TARGETS.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var r=this,n=r.length,s=r.itemDirtyIds,o=r.items,a=t.gl;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(var h=0;h<n;h++){var u=o[h];s[h]<u.dirtyId&&(s[h]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0},e}(_),b=function(t){function e(e){var i=this,r=e,n=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;return(i=t.call(this,n,s)||this).source=e,i.noSubImage=!1,i}return f(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=(0,s.determineCrossOrigin)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,r){var s=t.gl,o=e.realWidth,a=e.realHeight;return r=r||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.ALPHA_MODES.UNPACK),this.noSubImage||e.target!==s.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(i,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(p),E=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(b),x=function(t){function e(i,r){var s=this,o=r||{},a=o.width,h=o.height,u=o.autoLoad,l=o.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");s=t.call(this,6,{width:a,height:h})||this;for(var c=0;c<e.SIDES;c++)s.items[c].target=n.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+c;return s.linkBaseTexture=!1!==l,i&&s.initFromArray(i,r),!1!==u&&s.load(),s}return f(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.TARGETS.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=n.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,r){for(var n=this.itemDirtyIds,s=0;s<e.SIDES;s++){var o=this.items[s];n[s]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,r),n[s]=o.dirtyId):n[s]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,i.realWidth,i.realHeight,0,i.format,r.type,null),n[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(_),T=function(t){function e(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;b.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==i.createBitmap?i.createBitmap:r.settings.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,n.bitmap=null,n._load=null,!1!==i.autoLoad&&n.load(),n}return f(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var r=e.source;e.url=r.src;var n=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?n():(r.onload=n,r.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!self.createImageBitmap)return Promise.resolve(this);var i=self.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return i(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===n.ALPHA_MODES.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,i,r){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,r,this.bitmap),!this.preserveBitmap){var n=!0,s=i._glTextures;for(var o in s){var a=s[o];if(a!==r&&a.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(b),S=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return f(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;b.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=i*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/r*i,o=t._overrideHeight||t._overrideWidth/i*r),n=Math.round(n),o=Math.round(o);var a=t.source;a.width=n,a.height=o,a._pixiId="canvas_"+(0,s.uid)(),a.getContext("2d").drawImage(e,0,0,i,r,0,0,n,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return"svg"===i||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(b),w=function(t){function e(i,r){var n=this;if(r=r||{},!(i instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var o=i[0].src||i[0];b.crossOrigin(s,o,r.crossorigin);for(var a=0;a<i.length;++a){var h=document.createElement("source"),u=i[a],l=u.src,c=u.mime,f=(l=l||i[a]).split("?").shift().toLowerCase(),d=f.substr(f.lastIndexOf(".")+1);c=c||e.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=c,s.appendChild(h)}i=s}return(n=t.call(this,i)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return f(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=a.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(b),A=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(b);u.push(T,A,E,w,S,m,x,y);var M={__proto__:null,Resource:p,BaseImageResource:b,INSTALLED:u,autoDetectResource:l,AbstractMultiResource:_,ArrayResource:y,BufferResource:m,CanvasResource:E,CubeResource:x,ImageResource:T,SVGResource:S,VideoResource:w,ImageBitmapResource:A},O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.ALPHA_MODES.UNPACK);var s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0},e}(m),R=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new o.Runner("disposeFramebuffer"),this.multisample=n.MSAA_QUALITY.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new v(null,{scaleMode:n.SCALE_MODES.NEAREST,resolution:1,mipmap:n.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new v(new O(null,{width:this.width,height:this.height}),{scaleMode:n.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:n.MIPMAP_MODES.OFF,format:n.FORMATS.DEPTH_COMPONENT,type:n.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),C=function(t){function e(e){var i=this;if("number"==typeof e){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];e={width:r,height:s,scaleMode:o,resolution:a}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:n.MSAA_QUALITY.NONE,(i=t.call(this,null,e)||this).mipmap=n.MIPMAP_MODES.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new R(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return f(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(v),P=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var s=t.width/2/r,o=t.height/2/n,a=t.x/r+s,u=t.y/n+o;i=h.groupD8.add(i,h.groupD8.NW),this.x0=a+s*h.groupD8.uX(i),this.y0=u+o*h.groupD8.uY(i),i=h.groupD8.add(i,2),this.x1=a+s*h.groupD8.uX(i),this.y1=u+o*h.groupD8.uY(i),i=h.groupD8.add(i,2),this.x2=a+s*h.groupD8.uX(i),this.y2=u+o*h.groupD8.uY(i),i=h.groupD8.add(i,2),this.x3=a+s*h.groupD8.uX(i),this.y3=u+o*h.groupD8.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),I=new P,N=function(t){function e(i,r,n,s,o,a){var u=t.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new h.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),u.baseTexture=i,u._frame=r,u.trim=s,u.valid=!1,u._uvs=I,u.uvMatrix=null,u.orig=n||r,u._rotate=Number(o||0),!0===o)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=a?new h.Point(a.x,a.y):new h.Point(0,0),u._updateID=0,u.textureCacheIds=[],i.valid?u.noFrame?i.valid&&u.onBaseTextureUpdated(i):u.frame=r:i.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&i.on("update",u.onBaseTextureUpdated,u),u}return f(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&s.TextureCache[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===I&&(this._uvs=new P),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=r.settings.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+(0,s.uid)()}a=t._pixiId}var u=s.TextureCache[a];if(o&&n&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return u||(i.resolution||(i.resolution=(0,s.getResolutionOfUrl)(t)),(u=new e(new v(t,i))).baseTexture.cacheId=a,v.addToCache(u.baseTexture,a),e.addToCache(u,a)),u},e.fromURL=function(t,i){var r=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),n=e.from(t,Object.assign({resourceOptions:r},i),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,i,r,n){return new e(v.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,n,o){var a=new v(t,Object.assign({scaleMode:r.settings.SCALE_MODE,resolution:(0,s.getResolutionOfUrl)(i)},o)),h=a.resource;h instanceof T&&(h.url=i);var u=new e(a);return n||(n=i),v.addToCache(u.baseTexture,n),e.addToCache(u,n),n!==i&&(v.addToCache(u.baseTexture,i),e.addToCache(u,i)),u.baseTexture.valid?Promise.resolve(u):new Promise((function(t){u.baseTexture.once("loaded",(function(){return t(u)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),s.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)s.TextureCache[t.textureCacheIds[r]]===t&&delete s.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,s=e+r>this.baseTexture.width,o=i+n>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,u="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(s.EventEmitter);function D(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}N.EMPTY=new N(new v),D(N.EMPTY),D(N.EMPTY.baseTexture),N.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new N(new v(new E(t)))}(),D(N.WHITE),D(N.WHITE.baseTexture);var L=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return f(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var r=this.baseTexture.resolution,n=Math.round(t*r)/r,s=Math.round(e*r)/r;this.valid=n>0&&s>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(n,s),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,r=[],n=1;n<arguments.length;n++)r[n-1]=i[n];return"number"==typeof t&&((0,s.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new C(t))},e}(N),k=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,i){void 0===i&&(i=n.MSAA_QUALITY.NONE);var r=new C(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new L(r)},t.prototype.getOptimalTexture=function(t,e,i,r){var o;void 0===i&&(i=1),void 0===r&&(r=n.MSAA_QUALITY.NONE),t=Math.ceil(t*i),e=Math.ceil(e*i),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(t=(0,s.nextPow2)(t)))<<16|65535&(e=(0,s.nextPow2)(e)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,r)),a.filterPoolKey=o,a.setResolution(i),a},t.prototype.getFilterTexture=function(t,e,i){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.MSAA_QUALITY.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),B=function(){function t(t,e,i,r,s,o,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=n.TYPES.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,r,n,s){return new t(e,i,r,n,s)},t}(),F=0,j=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=F++,this.disposeRunner=new o.Runner("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:n.BUFFER_TYPE.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),G={Float32Array,Uint32Array,Int32Array,Uint8Array},U={5126:4,5123:2,5121:1},X=0,z={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},H=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=X++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new o.Runner("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,r,n,s,o,a){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof j||(e instanceof Array&&(e=new Float32Array(e)),e=new j(e));var h=t.split("|");if(h.length>1){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,i,r,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new B(l,i,r,n,s,o,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof j||(t instanceof Array&&(t=new Uint16Array(t)),t=new j(t)),t.type=n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new j;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),i.push(n.size*U[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;var a=new ArrayBuffer(4*i),h=null,u=0;for(o=0;o<t.length;o++){var l=e[o],c=t[o],f=(0,s.getBufferType)(c);n[f]||(n[f]=new G[f](a)),h=n[f];for(var d=0;d<c.length;d++)h[(d/l|0)*r+u+d%l]=c[d];u+=l}return new Float32Array(a)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new j(this.buffers[i].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new B(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var i,r=new t,o=[],a=[],h=[],u=0;u<e.length;u++){i=e[u];for(var l=0;l<i.buffers.length;l++)a[l]=a[l]||0,a[l]+=i.buffers[l].data.length,h[l]=0}for(u=0;u<i.buffers.length;u++)o[u]=new(z[(0,s.getBufferType)(i.buffers[u].data)])(a[u]),r.buffers[u]=new j(o[u]);for(u=0;u<e.length;u++)for(i=e[u],l=0;l<i.buffers.length;l++)o[l].set(i.buffers[l].data,h[l]),h[l]+=i.buffers[l].data.length;if(r.attributes=i.attributes,i.indexBuffer){r.indexBuffer=r.buffers[i.buffers.indexOf(i.indexBuffer)],r.indexBuffer.type=n.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;var c=0,f=0,d=0,p=0;for(u=0;u<i.buffers.length;u++)if(i.buffers[u]!==i.indexBuffer){p=u;break}for(var u in i.attributes){var m=i.attributes[u];(0|m.buffer)===p&&(f+=m.size*U[m.type]/4)}for(u=0;u<e.length;u++){var g=e[u].indexBuffer.data;for(l=0;l<g.length;l++)r.indexBuffer.data[l+d]+=c;c+=e[u].buffers[p].data.length/f,d+=g.length}}return r},t}(),Y=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return f(e,t),e}(H),W=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new j(e.vertices),e.uvBuffer=new j(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return f(e,t),e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(H),V=0,$=function(){function t(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=V++,this.static=!!e,this.ubo=!!i,t instanceof j?(this.buffer=t,this.buffer.type=n.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new j(new Float32Array(1)),this.buffer.type=n.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,i,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(i,r)},t.from=function(e,i,r){return new t(e,i,r)},t.uboFrom=function(e,i){return new t(e,null==i||i,!0)},t}(),q=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=n.MSAA_QUALITY.NONE,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.bindingSourceFrame=new h.Rectangle,this.bindingDestinationFrame=new h.Rectangle,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Z=[new h.Point,new h.Point,new h.Point,new h.Point],J=new h.Matrix,K=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new k,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Y,this.quadUv=new W,this.tempRect=new h.Rectangle,this.activeState={},this.globalUniforms=new $({outputFrame:new h.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new q,s=this.renderer.renderTexture,o=e[0].resolution,a=e[0].multisample,h=e[0].padding,u=e[0].autoFit,l=e[0].legacy,c=1;c<e.length;c++){var f=e[c];o=Math.min(o,f.resolution),a=Math.min(a,f.multisample),h=this.useMaxPadding?Math.max(h,f.padding):h+f.padding,u=u&&f.autoFit,l=l||f.legacy}if(1===r.length&&(this.defaultFilterStack[0].renderTexture=s.current),r.push(n),n.resolution=o,n.multisample=a,n.legacy=l,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(h),u){var d=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(J.copyFrom(i.projection.transform).invert(),d),n.sourceFrame.fit(d)}this.roundFrame(n.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o,a),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var p=this.tempRect;p.x=0,p.y=0,p.width=n.sourceFrame.width,p.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,p),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){var h=r.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,u.renderTexture,n.CLEAR_MODES.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,e.resolution);c.filterFrame=l.filterFrame;var f=0;for(f=0;f<i.length-1;++f){1===f&&e.multisample>1&&((c=this.getOptimalFilterTexture(l.width,l.height,e.resolution)).filterFrame=l.filterFrame),i[f].apply(this,l,c,n.CLEAR_MODES.CLEAR,e);var d=l;l=c,c=d}i[f].apply(this,l,u.renderTexture,n.CLEAR_MODES.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=n.CLEAR_MODES.CLEAR);var i=this.renderer,r=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&s.stateId||this.forceClear;(e===n.CLEAR_MODES.CLEAR||e===n.CLEAR_MODES.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,i,r){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(n.DRAW_MODES.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(n.DRAW_MODES.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,s=e._texture.orig,o=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(h.Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=n.MSAA_QUALITY.NONE),this.texturePool.getOptimalTexture(t,e,i,r)},t.prototype.getFilterTexture=function(t,e,i){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.MSAA_QUALITY.NONE);return s.filterFrame=t.filterFrame,s},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var i=Z[0],r=Z[1],n=Z[2],s=Z[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(s,s);var o=Math.min(i.x,r.x,n.x,s.x),a=Math.min(i.y,r.y,n.y,s.y),h=Math.max(i.x,r.x,n.x,s.x),u=Math.max(i.y,r.y,n.y,s.y);e.x=o,e.y=a,e.width=h-o,e.height=u-a},t.prototype.roundFrame=function(t,e,i,r,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if((Math.abs(o)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(h)>1e-4))return}(n=n?J.copyFrom(n):J.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},t}(),Q=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),tt=function(){function t(t){this.renderer=t,this.emptyRenderer=new Q(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(l>=0&&l<r&&e[l]===u)s[h]=l;else for(;a<r;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){s[h]=a,u._batchLocation=a,e[a]=u;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),et=0,it=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(r.settings.PREFER_ENV>=n.ENV.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=n.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},nt=new h.Rectangle,st=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new R(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;r.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,i){void 0===i&&(i=0);var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var o=t.colorTextures[s];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>i,h=e.height>>i,u=a/e.width;this.setViewport(e.x*u,e.y*u,a,h)}else a=t.width>>i,h=t.height>>i,this.setViewport(0,0,a,h)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,r){var n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,i,r,s){void 0===s&&(s=n.BUFFER_BITS.COLOR|n.BUFFER_BITS.DEPTH);var o=this.gl;o.clearColor(t,e,i,r),o.clear(s)},t.prototype.initFramebuffer=function(t){var e=this.gl,i=new rt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,n=r.length;e.drawBuffers||(n=Math.min(n,1));for(var s=0;s<n;s++){var o=r[s],a=o.parentTextureArray||o;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var i=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,s=n.length;i.drawBuffers||(s=Math.min(s,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var o=[],a=0;a<s;a++){var h=n[a],u=h.parentTextureArray||h;this.renderer.texture.bind(u,0),0===a&&r.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+a,h.target,u._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+a))}if(o.length>1&&i.drawBuffers(o),t.depthTexture&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,i=n.MSAA_QUALITY.NONE;if(t<=1||null===e)return i;for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return 1===i&&(i=n.MSAA_QUALITY.NONE),i},t.prototype.blit=function(t,e,i){var r=this,n=r.current,s=r.renderer,o=r.gl,a=r.CONTEXT_UID;if(2===s.context.webGLVersion&&n){var h=n.glFramebuffers[a];if(h){if(!t){if(!h.msaaBuffer)return;var u=n.colorTextures[0];if(!u)return;h.blitFramebuffer||(h.blitFramebuffer=new R(n.width,n.height),h.blitFramebuffer.addColorTexture(0,u)),(t=h.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===n.width&&t.height===n.height||(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||((e=nt).width=n.width,e.height=n.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var i=t.width,r=t.height,n=this.gl,s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,i,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=s,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.Rectangle},t.prototype.destroy=function(){this.renderer=null},t}(),ot={5126:4,5123:2,5121:1},at=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;r.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return s.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return s.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var s=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?i.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var r=t.buffers[i];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var s in i)r[s]&&n.push(s);return n.join("-")},t.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.program;o.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var a=this.getSignature(t,o),h=t.glVertexArrayObjects[this.CONTEXT_UID],u=h[a];if(u)return h[o.id]=u,u;var l=t.buffers,c=t.attributes,f={},d={};for(var p in l)f[p]=0,d[p]=0;for(var p in c)!c[p].size&&o.attributeData[p]?c[p].size=o.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[c[p].buffer]+=c[p].size*ot[c[p].type];for(var p in c){var m=c[p],g=m.size;void 0===m.stride&&(f[m.buffer]===g*ot[m.type]?m.stride=0:m.stride=f[m.buffer]),void 0===m.start&&(m.start=d[m.buffer],d[m.buffer]+=g*ot[m.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(var v=0;v<l.length;v++){var _=l[v];s.bind(_),i&&_._glBuffers[n].refCount++}return this.activateVao(t,o),this._activeVao=u,h[o.id]=u,h[a]=u,u},t.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),r){if(o)for(var a=0;a<s.length;a++){var h=s[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,0!==h.refCount||e||o.dispose(s[a],e))}if(!e)for(var u in r)if("g"===u[0]){var l=r[u];this._activeVao===l&&this.unbind(),n.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);var a=null;for(var h in o){var u=o[h],l=s[u.buffer],c=l._glBuffers[r];if(e.attributeData[h]){a!==c&&(n.bind(l),a=c);var f=e.attributeData[h].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,u.size,u.type||i.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(f,1)}}}},t.prototype.draw=function(t,e,i,r){var n=this.gl,s=this._activeGeometry;if(s.indexBuffer){var o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?n.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(i||0)*o,r||1):n.drawElements(t,e||s.indexBuffer.data.length,a,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?n.drawArraysInstanced(t,i,e||s.getSize(),r||1):n.drawArrays(t,i,e||s.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ht=function(){function t(t){void 0===t&&(t=null),this.type=n.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.settings.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=n.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ut(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function lt(t,e){var i=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),n=r.split("\n"),s={},o=n.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||s[t]||(s[t]=!0,0))})),a=[""];o.forEach((function(t){i[t-1]="%c"+i[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var h=i.join("\n");a[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function ct(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function ft(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ct(2*e);case"bvec3":return ct(3*e);case"bvec4":return ct(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var dt,pt={},mt=pt;function gt(){if(mt===pt||mt&&mt.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.settings.PREFER_ENV>=n.ENV.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),mt=e}return mt}function vt(t,e,i){if("precision"!==t.substring(0,9)){var r=e;return e===n.PRECISION.HIGH&&i!==n.PRECISION.HIGH&&(r=n.PRECISION.MEDIUM),"precision "+r+" float;\n"+t}return i!==n.PRECISION.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var _t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function yt(t){return _t[t]}var bt=null,Et={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function xt(t,e){if(!bt){var i=Object.keys(Et);bt={};for(var r=0;r<i.length;++r){var n=i[r];bt[t[n]]=Et[n]}}return bt[e]}var Tt,St=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],wt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1i(location, v)\n    }",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},At={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Mt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ot(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function Rt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Mt.replace(/%forloop%/gi,Ot(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Ct=0,Pt={},It=function(){function t(e,i,s){void 0===s&&(s="pixi-shader"),this.id=Ct++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(s=s.replace(/\s+/g,"-"),Pt[s]?(Pt[s]++,s+="-"+Pt[s]):Pt[s]=1,this.vertexSrc="#define SHADER_NAME "+s+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+s+"\n"+this.fragmentSrc,this.vertexSrc=vt(this.vertexSrc,r.settings.PRECISION_VERTEX,n.PRECISION.HIGH),this.fragmentSrc=vt(this.fragmentSrc,r.settings.PRECISION_FRAGMENT,function(){if(!dt){dt=n.PRECISION.MEDIUM;var t=gt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);dt=e.precision?n.PRECISION.HIGH:n.PRECISION.MEDIUM}}return dt}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,r){var n=e+i,o=s.ProgramCache[n];return o||(s.ProgramCache[n]=o=new t(e,i,r)),o},t}(),Nt=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof $?e:new $(e):new $({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,r){return new t(It.from(e,i),r)},t}(),Dt=function(){function t(){this.data=0,this.blendMode=n.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==n.BLEND_MODES.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Lt=function(t){function e(i,n,s){var o=this,a=It.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(o=t.call(this,a,s)||this).padding=0,o.resolution=r.settings.FILTER_RESOLUTION,o.multisample=r.settings.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Dt,o}return f(e,t),e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Nt),kt=new h.Matrix,Bt=function(){function t(t,e){this._texture=t,this.mapCoord=new h.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],s=t[r+1];e[r]=n*i.a+s*i.c+i.tx,e[r+1]=n*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(kt.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(kt));var s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},t}(),Ft=function(t){function e(e){var i=this,r=new h.Matrix;return i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=r,i}return f(e,t),e.prototype.apply=function(t,e,i,r){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Bt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},e}(Lt),jt=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var r=this.maskDataPool.pop()||new ht;r.pooled=!0,r.maskObject=e,i=r}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case n.MASK_TYPES.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case n.MASK_TYPES.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case n.MASK_TYPES.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case n.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case n.MASK_TYPES.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case n.MASK_TYPES.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},t.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=n.MASK_TYPES.SPRITE;else if(t.type=n.MASK_TYPES.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);r=Math.round(r*(180/Math.PI)*100),s=((s=Math.round(s*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3===s&&(t.type=n.MASK_TYPES.SCISSOR)}},t.prototype.pushSpriteMask=function(t){var e,i,r=t.maskObject,n=t._target,s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new Ft(r)]);var o,a,h=this.renderer,u=h.renderTexture;if(u.current){var l=u.current;o=t.resolution||l.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:l.multisample}else o=t.resolution||h.resolution,a=null!==(i=t.multisample)&&void 0!==i?i:h.multisample;s[0].resolution=o,s[0].multisample=a,s[0].maskSprite=r;var c=n.filterArea;n.filterArea=r.getBounds(!0),h.filter.push(n,s),n.filterArea=c,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t.prototype.destroy=function(){this.renderer=null},t}(),Gt=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Ut=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return f(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,r=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,i?r.fit(i):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,r=i.transform,n=i.sourceFrame,s=i.destinationFrame,o=e?e.resolution:this.renderer.resolution,a=s.width/n.width,h=s.height/n.height,u=((t.x-n.x)*a+s.x)*o,l=((t.y-n.y)*h+s.y)*o,c=t.width*a*o,f=t.height*h*o;r&&(u+=r.tx*o,l+=r.ty*o),e||(l=this.renderer.height-f-l),u=Math.round(u),l=Math.round(l),c=Math.round(c),f=Math.round(f),this.renderer.gl.scissor(u,l,c,f)},e}(Gt),Xt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return f(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Gt),zt=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.Matrix,this.transform=null}return t.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,s=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=s*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-s-e.y*n.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Ht=new h.Rectangle,Yt=new h.Rectangle,Wt=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.viewportFrame=new h.Rectangle}return t.prototype.bind=function(t,e,i){void 0===t&&(t=null);var r,n,s,o=this.renderer;this.current=t,t?(s=(r=t.baseTexture).resolution,e||(Ht.width=t.frame.width,Ht.height=t.frame.height,e=Ht),i||(Yt.x=t.frame.x,Yt.y=t.frame.y,Yt.width=e.width,Yt.height=e.height,i=Yt),n=r.framebuffer):(s=o.resolution,e||(Ht.width=o.screen.width,Ht.height=o.screen.height,e=Ht),i||((i=Ht).width=e.width,i.height=e.height));var a=this.viewportFrame;a.x=i.x*s,a.y=i.y*s,a.width=i.width*s,a.height=i.height*s,t||(a.y=o.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(i,e,s,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,n=i.width!==r.width||i.height!==r.height;if(n){var s=this.viewportFrame,o=s.x,a=s.y,h=s.width,u=s.height;o=Math.round(o),a=Math.round(a),h=Math.round(h),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,h,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Vt(t,e,i,r,n){i.buffer.update(n)}var $t={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},qt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Zt(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),i=0,r=0,n=0,s=0;s<e.length;s++){var o=e[s];if(i=qt[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,r%i!=0&&r<16){var a=r%i%16;r+=a,n+=a}r+i>16?(n=16*Math.ceil(n/16),o.offset=n,n+=i,r=i):(o.offset=n,r+=i,n+=i)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}function Jt(t,e){var i=[];for(var r in t)e[r]&&i.push(e[r]);return i.sort((function(t,e){return t.index-e.index})),i}function Kt(t,e){if(!t.autoManage)return{size:0,syncFunc:Vt};for(var i=Zt(Jt(t.uniforms,e)),r=i.uboElements,n=i.size,s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],o=0;o<r.length;o++){for(var a=r[o],h=t.uniforms[a.data.name],u=a.data.name,l=!1,c=0;c<St.length;c++){var f=St[c];if(f.codeUbo&&f.test(a.data,h)){s.push("offset = "+a.offset/4+";",St[c].codeUbo(a.data.name,h)),l=!0;break}}if(!l)if(a.data.size>1){var d=yt(a.data.type),p=Math.max(qt[a.data.type]/16,1),m=d/p,g=(4-m%4)%4;s.push("\n                cv = ud."+u+".value;\n                v = uv."+u+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*p+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=$t[a.data.type];s.push("\n                cv = ud."+u+".value;\n                v = uv."+u+";\n                offset = "+a.offset/4+";\n                "+v+";\n                ")}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}var Qt=function(){},te=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function ee(t,e){var i=ut(t,t.VERTEX_SHADER,e.vertexSrc),r=ut(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();t.attachShader(n,i),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||lt(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||lt(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,i,r),e.attributeData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var s=e.getActiveAttrib(t,n);if(0!==s.name.indexOf("gl_")){var o=xt(e,s.type),a={type:o,name:s.name,size:yt(o),location:n};i[s.name]=a}}return i}(n,t),e.uniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),h=xt(e,s.type);i[o]={name:o,index:n,type:h,size:s.size,isArray:a,value:ft(h,s.size)}}return i}(n,t);var s=Object.keys(e.attributeData);s.sort((function(t,e){return t>e?1:-1}));for(var o=0;o<s.length;o++)e.attributeData[s[o]].location=o,t.bindAttribLocation(n,o,s[o]);t.linkProgram(n),t.deleteShader(i),t.deleteShader(r);var a={};for(var o in e.uniformData){var h=e.uniformData[o];a[o]={location:t.getUniformLocation(n,o),value:ft(h.type,h.size)}}return new te(n,a)}var ie=0,re={textureCount:0,uboCount:0},ne=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=ie++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Tt)return Tt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Tt=!0===t({a:"b"},"a","b")}catch(t){Tt=!1}return Tt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(re.textureCount=0,re.uboCount=0,this.syncUniformGroup(t.uniformGroup,re)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},t.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in t.uniforms){var n=e[r];if(n){for(var s=t.uniforms[r],o=!1,a=0;a<St.length;a++)if(St[a].test(n,s)){i.push(St[a].code(r,s)),o=!0;break}if(!o){var h=(1===n.size?wt:At)[n.type].replace("location",'ud["'+r+'"].location');i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+h+";")}}else t.uniforms[r].group&&(t.uniforms[r].ubo?i.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+r+", '"+r+"');\n                    "):i.push("\n                        renderer.shader.syncUniformGroup(uv."+r+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;var r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,re,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,i){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[s];if(o||(o=this._uboCache[s]=Kt(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(o.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,i){var r=t.uniforms,n=[i+"-"];for(var s in r)n.push(s),e[s]&&n.push(e[s].type);return n.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,i=t.program,r=ee(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),se=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=n.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Dt,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NONE]=[0,0],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[n.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[n.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[n.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[n.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[n.BLEND_MODES.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),oe=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.settings.GC_MAX_IDLE,this.checkCountMax=r.settings.GC_MAX_CHECK_COUNT,this.mode=r.settings.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){var s=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[s++]=e[r]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),ae=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=n.TYPES.UNSIGNED_BYTE,this.internalFormat=n.FORMATS.RGBA,this.samplerType=0},he=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new v,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,i,r,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S;return"WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext?((e={})[n.TYPES.UNSIGNED_BYTE]=((i={})[n.FORMATS.RGBA]=t.RGBA8,i[n.FORMATS.RGB]=t.RGB8,i[n.FORMATS.RG]=t.RG8,i[n.FORMATS.RED]=t.R8,i[n.FORMATS.RGBA_INTEGER]=t.RGBA8UI,i[n.FORMATS.RGB_INTEGER]=t.RGB8UI,i[n.FORMATS.RG_INTEGER]=t.RG8UI,i[n.FORMATS.RED_INTEGER]=t.R8UI,i[n.FORMATS.ALPHA]=t.ALPHA,i[n.FORMATS.LUMINANCE]=t.LUMINANCE,i[n.FORMATS.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),e[n.TYPES.BYTE]=((r={})[n.FORMATS.RGBA]=t.RGBA8_SNORM,r[n.FORMATS.RGB]=t.RGB8_SNORM,r[n.FORMATS.RG]=t.RG8_SNORM,r[n.FORMATS.RED]=t.R8_SNORM,r[n.FORMATS.RGBA_INTEGER]=t.RGBA8I,r[n.FORMATS.RGB_INTEGER]=t.RGB8I,r[n.FORMATS.RG_INTEGER]=t.RG8I,r[n.FORMATS.RED_INTEGER]=t.R8I,r),e[n.TYPES.UNSIGNED_SHORT]=((s={})[n.FORMATS.RGBA_INTEGER]=t.RGBA16UI,s[n.FORMATS.RGB_INTEGER]=t.RGB16UI,s[n.FORMATS.RG_INTEGER]=t.RG16UI,s[n.FORMATS.RED_INTEGER]=t.R16UI,s[n.FORMATS.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,s),e[n.TYPES.SHORT]=((o={})[n.FORMATS.RGBA_INTEGER]=t.RGBA16I,o[n.FORMATS.RGB_INTEGER]=t.RGB16I,o[n.FORMATS.RG_INTEGER]=t.RG16I,o[n.FORMATS.RED_INTEGER]=t.R16I,o),e[n.TYPES.UNSIGNED_INT]=((a={})[n.FORMATS.RGBA_INTEGER]=t.RGBA32UI,a[n.FORMATS.RGB_INTEGER]=t.RGB32UI,a[n.FORMATS.RG_INTEGER]=t.RG32UI,a[n.FORMATS.RED_INTEGER]=t.R32UI,a[n.FORMATS.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[n.TYPES.INT]=((h={})[n.FORMATS.RGBA_INTEGER]=t.RGBA32I,h[n.FORMATS.RGB_INTEGER]=t.RGB32I,h[n.FORMATS.RG_INTEGER]=t.RG32I,h[n.FORMATS.RED_INTEGER]=t.R32I,h),e[n.TYPES.FLOAT]=((u={})[n.FORMATS.RGBA]=t.RGBA32F,u[n.FORMATS.RGB]=t.RGB32F,u[n.FORMATS.RG]=t.RG32F,u[n.FORMATS.RED]=t.R32F,u[n.FORMATS.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,u),e[n.TYPES.HALF_FLOAT]=((l={})[n.FORMATS.RGBA]=t.RGBA16F,l[n.FORMATS.RGB]=t.RGB16F,l[n.FORMATS.RG]=t.RG16F,l[n.FORMATS.RED]=t.R16F,l),e[n.TYPES.UNSIGNED_SHORT_5_6_5]=((c={})[n.FORMATS.RGB]=t.RGB565,c),e[n.TYPES.UNSIGNED_SHORT_4_4_4_4]=((f={})[n.FORMATS.RGBA]=t.RGBA4,f),e[n.TYPES.UNSIGNED_SHORT_5_5_5_1]=((d={})[n.FORMATS.RGBA]=t.RGB5_A1,d),e[n.TYPES.UNSIGNED_INT_2_10_10_10_REV]=((p={})[n.FORMATS.RGBA]=t.RGB10_A2,p[n.FORMATS.RGBA_INTEGER]=t.RGB10_A2UI,p),e[n.TYPES.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[n.FORMATS.RGB]=t.R11F_G11F_B10F,m),e[n.TYPES.UNSIGNED_INT_5_9_9_9_REV]=((g={})[n.FORMATS.RGB]=t.RGB9_E5,g),e[n.TYPES.UNSIGNED_INT_24_8]=((v={})[n.FORMATS.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[n.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]=((_={})[n.FORMATS.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,_),S=e):((y={})[n.TYPES.UNSIGNED_BYTE]=((b={})[n.FORMATS.RGBA]=t.RGBA,b[n.FORMATS.RGB]=t.RGB,b[n.FORMATS.ALPHA]=t.ALPHA,b[n.FORMATS.LUMINANCE]=t.LUMINANCE,b[n.FORMATS.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),y[n.TYPES.UNSIGNED_SHORT_5_6_5]=((E={})[n.FORMATS.RGB]=t.RGB,E),y[n.TYPES.UNSIGNED_SHORT_4_4_4_4]=((x={})[n.FORMATS.RGBA]=t.RGBA,x),y[n.TYPES.UNSIGNED_SHORT_5_5_5_1]=((T={})[n.FORMATS.RGBA]=t.RGBA,T),S=y),S}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new ae(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ae(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,r=e.hasIntegerTextures,s=e.CONTEXT_UID;if(r)for(var o=t-1;o>=0;--o){var a=i[o];a&&a._glTextures[s].samplerType!==n.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new ae(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var i,r;e.internalFormat=null!==(r=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===n.TYPES.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==n.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,s=t.realHeight,o=i.gl;(e.width!==r||e.height!==s||e.dirtyId<0)&&(e.width=r,e.height=s,o.texImage2D(t.target,0,e.internalFormat,r,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&(0,s.removeItems)(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==n.MIPMAP_MODES.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=n.WRAP_MODES.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==n.MIPMAP_MODES.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.SCALE_MODES.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===n.SCALE_MODES.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===n.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),ue={__proto__:null,FilterSystem:K,BatchSystem:tt,ContextSystem:it,FramebufferSystem:st,GeometrySystem:at,MaskSystem:jt,ScissorSystem:Ut,StencilSystem:Xt,ProjectionSystem:zt,RenderTextureSystem:Wt,ShaderSystem:ne,StateSystem:se,TextureGCSystem:oe,TextureSystem:he},le=new h.Matrix,ce=function(t){function e(e,i){void 0===e&&(e=n.RENDERER_TYPE.UNKNOWN);var o=t.call(this)||this;return i=Object.assign({},r.settings.RENDER_OPTIONS,i),o.options=i,o.type=e,o.screen=new h.Rectangle(0,0,i.width,i.height),o.view=i.view||document.createElement("canvas"),o.resolution=i.resolution||r.settings.RESOLUTION,o.useContextAlpha=i.useContextAlpha,o.autoDensity=!!i.autoDensity,o.preserveDrawingBuffer=i.preserveDrawingBuffer,o.clearBeforeRender=i.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=i.backgroundColor||o._backgroundColor,o.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&((0,s.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=i.transparent,o.backgroundAlpha=i.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return f(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var i=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=r+"px"),this.emit("resize",i,r)},e.prototype.generateTexture=function(t,e,i,r){void 0===e&&(e={}),"number"==typeof e&&((0,s.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:r});var n=e.region,o=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&(i[r[n]]=t[r[n]])}return i}(e,["region"]);0===(r=n||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=L.create(d({width:r.width,height:r.height},o));return le.tx=-r.x,le.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:le,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=n.RENDERER_TYPE.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,s.hex2string)(t),(0,s.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(s.EventEmitter),fe=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},de=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var i=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}},t.prototype.bindBufferRange=function(t,e,i){var r=this.gl,n=this.CONTEXT_UID;i=i||0;var s=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,s.buffer,256*i,256)},t.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new fe(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),pe=function(t){function e(i){var r=t.call(this,n.RENDERER_TYPE.WEBGL,i)||this;return i=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new o.Runner("destroy"),contextChange:new o.Runner("contextChange"),reset:new o.Runner("reset"),update:new o.Runner("update"),postrender:new o.Runner("postrender"),prerender:new o.Runner("prerender"),resize:new o.Runner("resize")},r.runners.contextChange.add(r),r.globalUniforms=new $({projectionMatrix:new h.Matrix},!0),r.addSystem(jt,"mask").addSystem(it,"context").addSystem(se,"state").addSystem(ne,"shader").addSystem(he,"texture").addSystem(de,"buffer").addSystem(at,"geometry").addSystem(st,"framebuffer").addSystem(Ut,"scissor").addSystem(Xt,"stencil").addSystem(zt,"projection").addSystem(oe,"textureGC").addSystem(K,"filter").addSystem(Wt,"renderTexture").addSystem(tt,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,i.context?r.context.initFromContext(i.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:i.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,(0,s.sayHello)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return f(e,t),e.create=function(t){if((0,s.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i);t>=n.MSAA_QUALITY.HIGH?this.multisample=n.MSAA_QUALITY.HIGH:t>=n.MSAA_QUALITY.MEDIUM?this.multisample=n.MSAA_QUALITY.MEDIUM:t>=n.MSAA_QUALITY.LOW?this.multisample=n.MSAA_QUALITY.LOW:this.multisample=n.MSAA_QUALITY.NONE},e.prototype.addSystem=function(t,e){var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},e.prototype.render=function(t,e){var i,r,n,o;if(e&&(e instanceof L?((0,s.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),i=e,r=arguments[2],n=arguments[3],o=arguments[4]):(i=e.renderTexture,r=e.clear,n=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(i||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,i,r,n){void 0===i&&(i={});var s=t.prototype.generateTexture.call(this,e,i,r,n);return this.framebuffer.blit(),s},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return(0,s.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(ce);function me(t){return pe.create(t)}var ge="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ve="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",_e=function(){function t(t){(0,s.deprecation)("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),ye=function(){this.texArray=null,this.blend=0,this.type=n.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},be=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Ee=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),xe=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Dt.for2d(),i.size=4*r.settings.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return f(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.settings.PREFER_ENV===n.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Rt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new ye);for(;i.length<n;)i.push(new be);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,r=e._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++v._globalBatch,h=0,u=r[0],l=0;n.copyBoundTextures(s,i);for(var c=0;c<this._bufferSize;++c){var f=t[c];t[c]=null,f._batchEnabled!==a&&(u.count>=i&&(n.boundArray(u,s,a,i),this.buildDrawCalls(u,l,c),l=c,u=r[++h],++a),f._batchEnabled=a,f.touched=o,u.elements[u.count++]=f)}for(u.count>0&&(n.boundArray(u,s,a,i),this.buildDrawCalls(u,l,this._bufferSize),++h,++a),c=0;c<s.length;c++)s[c]=null;v._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,r){var n=this,o=n._bufferedElements,a=n._attributeBuffer,h=n._indexBuffer,u=n.vertexSize,l=e._drawCallPool,c=this._dcIndex,f=this._aIndex,d=this._iIndex,p=l[c];p.start=this._iIndex,p.texArray=t;for(var m=i;m<r;++m){var g=o[m],v=g._texture.baseTexture,_=s.premultiplyBlendMode[v.alphaMode?1:0][g.blendMode];o[m]=null,i<m&&p.blend!==_&&(p.size=d-p.start,i=m,(p=l[++c]).texArray=t,p.start=d),this.packInterleavedGeometry(g,a,h,f,d),f+=g.vertexData.length/2*u,d+=g.indices.length,p.blend=_}i<r&&(p.size=d-p.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,i=t._attributeBuffer,n=t._indexBuffer;r.settings.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,s=e._drawCallPool,o=null,a=0;a<t;a++){var h=s[a],u=h.texArray,l=h.type,c=h.size,f=h.start,d=h.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=d,n.set(this.state),r.drawElements(l,c,r.UNSIGNED_SHORT,2*f)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=(0,s.nextPow2)(Math.ceil(t/8)),i=(0,s.log2)(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new Ee(r*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=(0,s.nextPow2)(Math.ceil(t/12)),i=(0,s.log2)(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},e.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var o=e.uint32View,a=e.float32View,h=r/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,f=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?(0,s.premultiplyTint)(t._tintRGB,d):t._tintRGB+(255*d<<24),m=0;m<c.length;m+=2)a[r++]=c[m],a[r++]=c[m+1],a[r++]=u[m],a[r++]=u[m+1],o[r++]=p,a[r++]=f;for(m=0;m<l.length;m++)i[n++]=h+l[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(Q),Te=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=$.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new It(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.Matrix,default:this.defaultGroupCache[t]};return new Nt(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),Se=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new j(null,e,!1),i._indexBuffer=new j(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,n.TYPES.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,n.TYPES.FLOAT).addAttribute("aColor",i._buffer,4,!0,n.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,n.TYPES.FLOAT).addIndex(i._indexBuffer),i}return f(e,t),e}(H),we="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ae="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Me=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:we,fragment:Ae,geometryClass:Se,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,s=e.geometryClass;return function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new Te(i,r),o.geometryClass=s,o.vertexSize=n,o}return f(e,t),e}(xe)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return we},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Ae},enumerable:!1,configurable:!0}),t}(),Oe=Me.create(),Re={},Ce=function(t){Object.defineProperty(Re,t,{get:function(){return(0,s.deprecation)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),M[t]}})};for(var Pe in M)Ce(Pe);var Ie={},Ne=function(t){Object.defineProperty(Ie,t,{get:function(){return(0,s.deprecation)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),ue[t]}})};for(var Pe in ue)Ne(Pe)},"./node_modules/@pixi/display/dist/esm/display.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Bounds:()=>o,Container:()=>f,DisplayObject:()=>u,TemporaryDisplayObject:()=>l});var r=i("./node_modules/@pixi/settings/dist/esm/settings.js"),n=i("./node_modules/@pixi/math/dist/esm/math.js"),s=i("./node_modules/@pixi/utils/dist/esm/utils.js");r.settings.SORTABLE_CHILDREN=!1;var o=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,r=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,h=i*e.x+n*e.y+o,u=r*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[6])<e?s:e,i=(o=t[7])<i?o:i,r=s>r?s:r,n=o>n?o:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},t.prototype.addFrameMatrix=function(t,e,i,r,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,m=s*e+a*i+u,g=o*e+h*i+l;c=m<c?m:c,f=g<f?g:f,d=m>d?m:d,p=g>p?g:p,c=(m=s*r+a*i+u)<c?m:c,f=(g=o*r+h*i+l)<f?g:f,d=m>d?m:d,p=g>p?g:p,c=(m=s*e+a*n+u)<c?m:c,f=(g=o*e+h*n+l)<f?g:f,d=m>d?m:d,p=g>p?g:p,c=(m=s*r+a*n+u)<c?m:c,f=(g=o*r+h*n+l)<f?g:f,d=m>d?m:d,p=g>p?g:p,this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2){var h=t[a],u=t[a+1];r=h<r?h:r,n=u<n?u:n,s=h>s?h:s,o=u>o?u:o}this.minX=r,this.minY=n,this.maxX=s,this.maxY=o},t.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},t.prototype.addVerticesMatrix=function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,g=i;g<r;g+=2){var v=e[g],_=e[g+1],y=o*v+h*_+l,b=u*_+a*v+c;f=Math.min(f,y-n),p=Math.max(p,y+n),d=Math.min(d,b-s),m=Math.max(m,b+s)}this.minX=f,this.minY=d,this.maxX=p,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=s>u?s:u}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=s>u?s:u}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,r,n,s){t-=n,e-=s,i+=n,r+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},a(t,e)};function h(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new n.Transform,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new o,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return h(e,t),e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new n.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new o);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new l),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*n.RAD_TO_DEG},set:function(t){this.transform.rotation=t*n.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(s.EventEmitter),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return h(e,t),e}(u);function c(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform;var f=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.settings.SORTABLE_CHILDREN,e.sortDirty=!1,e}return h(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],o=this.children.indexOf(n);if(-1===o)return null;n.parent=null,n.transform._parentID=-1,(0,s.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this),this.emit("childRemoved",n,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,r=t,n=e-r;if(n>0&&n<=e){i=this.children.splice(r,n);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(c),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!i)for(var n=0,s=this.children.length;n<s;++n){var o=this.children[n];o.visible&&o.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t),r=0;for(var n=this.children.length;r<n;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(u);f.prototype.containerUpdateTransform=f.prototype.updateTransform},"./node_modules/@pixi/extract/dist/esm/extract.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Extract:()=>a});var r=i("./node_modules/@pixi/utils/dist/esm/utils.js"),n=i("./node_modules/@pixi/math/dist/esm/math.js"),s=i("./node_modules/@pixi/core/dist/esm/core.js"),o=new n.Rectangle,a=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,n,a,h=this.renderer,u=!1,l=!1;e&&(e instanceof s.RenderTexture?a=e:(a=this.renderer.generateTexture(e),l=!0)),a?(i=a.baseTexture.resolution,n=a.frame,u=!1,h.renderTexture.bind(a)):(i=this.renderer.resolution,u=!0,(n=o).width=this.renderer.width,n.height=this.renderer.height,h.renderTexture.bind(null));var c=Math.floor(n.width*i+1e-4),f=Math.floor(n.height*i+1e-4),d=new r.CanvasRenderTarget(c,f,1),p=new Uint8Array(4*c*f),m=h.gl;m.readPixels(n.x*i,n.y*i,c,f,m.RGBA,m.UNSIGNED_BYTE,p);var g=d.context.getImageData(0,0,c,f);if(t.arrayPostDivide(p,g.data),d.context.putImageData(g,0,0),u){var v=new r.CanvasRenderTarget(d.width,d.height,1);v.context.scale(1,-1),v.context.drawImage(d.canvas,0,-f),d.destroy(),d=v}return l&&a.destroy(!0),d.canvas},t.prototype.pixels=function(e){var i,r,n,a=this.renderer,h=!1;e&&(e instanceof s.RenderTexture?n=e:(n=this.renderer.generateTexture(e),h=!0)),n?(i=n.baseTexture.resolution,r=n.frame,a.renderTexture.bind(n)):(i=a.resolution,(r=o).width=a.width,r.height=a.height,a.renderTexture.bind(null));var u=r.width*i,l=r.height*i,c=new Uint8Array(4*u*l),f=a.gl;return f.readPixels(r.x*i,r.y*i,u,l,f.RGBA,f.UNSIGNED_BYTE,c),h&&n.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}()},"./node_modules/@pixi/filter-alpha/dist/esm/filter-alpha.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{AlphaFilter:()=>s});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},s=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,r.defaultVertex,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(r.Filter)},"./node_modules/@pixi/filter-blur/dist/esm/filter-blur.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{BlurFilter:()=>R,BlurFilterPass:()=>O});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=i("./node_modules/@pixi/settings/dist/esm/settings.js"),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)};function o(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},M=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(a||(a={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(h||(h={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(u||(u={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(l||(l={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(c||(c={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(f||(f={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(d||(d={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(p||(p={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(m||(m={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(g||(g={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(v||(v={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(_||(_={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(y||(y={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(b||(b={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(E||(E={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(x||(x={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(T||(T={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(S||(S={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(w||(w={}));var O=function(t){function e(e,i,r,s,o){void 0===i&&(i=8),void 0===r&&(r=4),void 0===s&&(s=n.settings.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,h=function(t,e){var i,r=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=i.replace("%index%",o.toString());s+=a=a.replace("%sampleIndex%",o-(r-1)+".0"),s+="\n"}return(n=n.replace("%blur%",s)).replace("%size%",t.toString())}(o,e),u=function(t){for(var e,i=A[t],r=i.length,n=M,s="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=r&&(e=t-o-1),s+=a=a.replace("%value%",i[e].toString()),s+="\n"}return(n=n.replace("%blur%",s)).replace("%size%",t.toString())}(o);return(a=t.call(this,h,u)||this).horizontal=e,a.resolution=s,a._quality=0,a.quality=r,a.blur=i,a}return o(e,t),e.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),s=t.renderer,o=e,a=n;this.state.blend=!1,t.applyFilter(this,o,a,b.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,b.BLIT),this.uniforms.uSampler=a;var u=a;a=o,o=u,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,r),t.returnFilterTexture(n)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(r.Filter),R=function(t){function e(e,i,r,s){void 0===e&&(e=8),void 0===i&&(i=4),void 0===r&&(r=n.settings.FILTER_RESOLUTION),void 0===s&&(s=5);var o=t.call(this)||this;return o.blurXFilter=new O(!0,e,i,r,s),o.blurYFilter=new O(!1,e,i,r,s),o.resolution=r,o.quality=i,o.blur=e,o.repeatEdgePixels=!1,o}return o(e,t),e.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(n&&s){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,b.CLEAR),this.blurYFilter.apply(t,o,i,r),t.returnFilterTexture(o)}else s?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(r.Filter)},"./node_modules/@pixi/filter-color-matrix/dist/esm/filter-color-matrix.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{ColorMatrixFilter:()=>s});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},s=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,r.defaultFilterVertex,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.tint=function(t,e){var i=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,s=(0,Math.sqrt)(n),o=[i+(1-i)*n,n*(1-i)-s*r,n*(1-i)+s*r,0,0,n*(1-i)+s*r,i+n*(1-i),n*(1-i)-s*r,0,0,n*(1-i)-s*r,n*(1-i)+s*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,l=(255&r)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,u,l,e=e||.15,0,s-h,o-u,a-l,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(r.Filter);s.prototype.grayscale=s.prototype.greyscale},"./node_modules/@pixi/filter-displacement/dist/esm/filter-displacement.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{DisplacementFilter:()=>o});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=i("./node_modules/@pixi/math/dist/esm/math.js"),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)},o=function(t){function e(e,i){var r=this,s=new n.Matrix;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=s,null==i&&(i=20),r.scale=new n.Point(i,i),r}return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,s=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=n.a/s,this.uniforms.rotation[1]=n.b/s,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(r.Filter)},"./node_modules/@pixi/filter-fxaa/dist/esm/filter-fxaa.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{FXAAFilter:()=>s});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},s=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(r.Filter)},"./node_modules/@pixi/filter-noise/dist/esm/filter-noise.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{NoiseFilter:()=>s});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},s=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var n=t.call(this,r.defaultFilterVertex,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(r.Filter)},"./node_modules/@pixi/graphics/dist/esm/graphics.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{FillStyle:()=>c,GRAPHICS_CURVES:()=>l,Graphics:()=>j,GraphicsData:()=>I,GraphicsGeometry:()=>L,LINE_CAP:()=>n,LINE_JOIN:()=>r,LineStyle:()=>k,graphicsUtils:()=>G});var r,n,s=i("./node_modules/@pixi/core/dist/esm/core.js"),o=i("./node_modules/@pixi/math/dist/esm/math.js"),a=i("./node_modules/@pixi/utils/dist/esm/utils.js"),h=i("./node_modules/@pixi/constants/dist/esm/constants.js"),u=i("./node_modules/@pixi/display/dist/esm/display.js");!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(r||(r={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(n||(n={}));var l={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},c=function(){function t(){this.color=16777215,this.alpha=1,this.texture=s.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=s.Texture.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},f(t,e)};function d(t,e){function i(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var p={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,s=e.indices;if(i.length>=6){for(var o=[],h=0;h<r.length;h++){var u=r[h];o.push(i.length/2),i=i.concat(u.points)}var l=(0,a.earcut)(i,o,2);if(!l)return;var c=n.length/2;for(h=0;h<l.length;h+=3)s.push(l[h]+c),s.push(l[h+1]+c),s.push(l[h+2]+c);for(h=0;h<i.length;h++)n.push(i[h])}}},m={build:function(t){var e,i,r=t.shape,n=t.points,s=r.x,a=r.y;if(n.length=0,t.type===o.SHAPES.CIRC)e=r.radius,i=r.radius;else{var h=t.shape;e=h.width,i=h.height}if(0!==e&&0!==i){var u=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(e+i));u/=2.3;for(var l=2*Math.PI/u,c=0;c<u-.5;c++)n.push(s+Math.sin(-l*c)*e,a+Math.cos(-l*c)*i);n.push(n[0],n[1])}},triangulate:function(t,e){var i=t.points,r=e.points,n=e.indices,s=r.length/2,o=s,a=t.shape,h=t.matrix,u=a.x,l=a.y;r.push(t.matrix?h.a*u+h.c*l+h.tx:u,t.matrix?h.b*u+h.d*l+h.ty:l);for(var c=0;c<i.length;c+=2)r.push(i[c],i[c+1]),n.push(s++,o,s)}},g={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,s=e.height,o=t.points;o.length=0,o.push(i,r,i+n,r,i+n,r+s,i,r+s)},triangulate:function(t,e){var i=t.points,r=e.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function v(t,e,i){return t+(e-t)*i}function _(t,e,i,r,n,s,o){void 0===o&&(o=[]);for(var a=o,h=0,u=0,l=0,c=0,f=0,d=0,p=0,m=0;p<=20;++p)h=v(t,i,m=p/20),u=v(e,r,m),l=v(i,n,m),c=v(r,s,m),f=v(h,l,m),d=v(u,c,m),0===p&&a[a.length-2]===f&&a[a.length-1]===d||a.push(f,d);return a}var y={build:function(t){var e=t.shape,i=t.points,r=e.x,n=e.y,s=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));i.length=0,a?(_(r,n+a,r,n,r+a,n,i),_(r+s-a,n,r+s,n,r+s,n+a,i),_(r+s,n+o-a,r+s,n+o,r+s-a,n+o,i),_(r+a,n+o,r,n+o,r,n+o-a,i)):i.push(r,n,r+s,n,r+s,n+o,r,n+o)},triangulate:function(t,e){for(var i=t.points,r=e.points,n=e.indices,s=r.length/2,o=(0,a.earcut)(i,null,2),h=0,u=o.length;h<u;h+=3)n.push(o[h]+s),n.push(o[h+1]+s),n.push(o[h+2]+s);for(h=0,u=i.length;h<u;h++)r.push(i[h],i[++h])}};function b(t,e,i,r,n,s,o,a){var h,u;o?(h=r,u=-i):(h=-r,u=i);var l=t-i*n+h,c=e-r*n+u,f=t+i*s+h,d=e+r*s+u;return a.push(l,c),a.push(f,d),2}function E(t,e,i,r,n,s,o,a){var h=i-t,u=r-e,l=Math.atan2(h,u),c=Math.atan2(n-t,s-e);a&&l<c?l+=2*Math.PI:!a&&l>c&&(c+=2*Math.PI);var f=l,d=c-l,p=Math.abs(d),m=Math.sqrt(h*h+u*u),g=1+(15*p*Math.sqrt(m)/Math.PI>>0),v=d/g;if(f+=v,a){o.push(t,e),o.push(i,r);for(var _=1,y=f;_<g;_++,y+=v)o.push(t,e),o.push(t+Math.sin(y)*m,e+Math.cos(y)*m);o.push(t,e),o.push(n,s)}else{for(o.push(i,r),o.push(t,e),_=1,y=f;_<g;_++,y+=v)o.push(t+Math.sin(y)*m,e+Math.cos(y)*m),o.push(t,e);o.push(n,s),o.push(t,e)}return 2*g}function x(t,e){t.lineStyle.native?function(t,e){var i=0,r=t.shape,n=t.points||r.points,s=r.type!==o.SHAPES.POLY||r.closeStroke;if(0!==n.length){var a=e.points,h=e.indices,u=n.length/2,l=a.length/2,c=l;for(a.push(n[0],n[1]),i=1;i<u;i++)a.push(n[2*i],n[2*i+1]),h.push(c,c+1),c++;s&&h.push(c,l)}}(t,e):function(t,e){var i=t.shape,s=t.points||i.points.slice(),a=e.closePointEps;if(0!==s.length){var h=t.lineStyle,u=new o.Point(s[0],s[1]),c=new o.Point(s[s.length-2],s[s.length-1]),f=i.type!==o.SHAPES.POLY||i.closeStroke,d=Math.abs(u.x-c.x)<a&&Math.abs(u.y-c.y)<a;if(f){s=s.slice(),d&&(s.pop(),s.pop(),c.set(s[s.length-2],s[s.length-1]));var p=.5*(u.x+c.x),m=.5*(c.y+u.y);s.unshift(p,m),s.push(p,m)}var g=e.points,v=s.length/2,_=s.length,y=g.length/2,x=h.width/2,T=x*x,S=h.miterLimit*h.miterLimit,w=s[0],A=s[1],M=s[2],O=s[3],R=0,C=0,P=-(A-O),I=w-M,N=0,D=0,L=Math.sqrt(P*P+I*I);P/=L,I/=L,P*=x,I*=x;var k=h.alignment,B=2*(1-k),F=2*k;f||(h.cap===n.ROUND?_+=E(w-P*(B-F)*.5,A-I*(B-F)*.5,w-P*B,A-I*B,w+P*F,A+I*F,g,!0)+2:h.cap===n.SQUARE&&(_+=b(w,A,P,I,B,F,!0,g))),g.push(w-P*B,A-I*B),g.push(w+P*F,A+I*F);for(var j=1;j<v-1;++j){w=s[2*(j-1)],A=s[2*(j-1)+1],M=s[2*j],O=s[2*j+1],R=s[2*(j+1)],C=s[2*(j+1)+1],P=-(A-O),I=w-M,P/=L=Math.sqrt(P*P+I*I),I/=L,P*=x,I*=x,N=-(O-C),D=M-R,N/=L=Math.sqrt(N*N+D*D),D/=L,N*=x,D*=x;var G=M-w,U=A-O,X=M-R,z=C-O,H=U*X-z*G,Y=H<0;if(Math.abs(H)<.1)g.push(M-P*B,O-I*B),g.push(M+P*F,O+I*F);else{var W=(-P+w)*(-I+O)-(-P+M)*(-I+A),V=(-N+R)*(-D+O)-(-N+M)*(-D+C),$=(G*V-X*W)/H,q=(z*W-U*V)/H,Z=($-M)*($-M)+(q-O)*(q-O),J=M+($-M)*B,K=O+(q-O)*B,Q=M-($-M)*F,tt=O-(q-O)*F,et=Y?B:F;Z<=Math.min(G*G+U*U,X*X+z*z)+et*et*T?h.join===r.BEVEL||Z/T>S?(Y?(g.push(J,K),g.push(M+P*F,O+I*F),g.push(J,K),g.push(M+N*F,O+D*F)):(g.push(M-P*B,O-I*B),g.push(Q,tt),g.push(M-N*B,O-D*B),g.push(Q,tt)),_+=2):h.join===r.ROUND?Y?(g.push(J,K),g.push(M+P*F,O+I*F),_+=E(M,O,M+P*F,O+I*F,M+N*F,O+D*F,g,!0)+4,g.push(J,K),g.push(M+N*F,O+D*F)):(g.push(M-P*B,O-I*B),g.push(Q,tt),_+=E(M,O,M-P*B,O-I*B,M-N*B,O-D*B,g,!1)+4,g.push(M-N*B,O-D*B),g.push(Q,tt)):(g.push(J,K),g.push(Q,tt)):(g.push(M-P*B,O-I*B),g.push(M+P*F,O+I*F),h.join===r.BEVEL||Z/T>S||(h.join===r.ROUND?_+=Y?E(M,O,M+P*F,O+I*F,M+N*F,O+D*F,g,!0)+2:E(M,O,M-P*B,O-I*B,M-N*B,O-D*B,g,!1)+2:(Y?(g.push(Q,tt),g.push(Q,tt)):(g.push(J,K),g.push(J,K)),_+=2)),g.push(M-N*B,O-D*B),g.push(M+N*F,O+D*F),_+=2)}}w=s[2*(v-2)],A=s[2*(v-2)+1],M=s[2*(v-1)],P=-(A-(O=s[2*(v-1)+1])),I=w-M,P/=L=Math.sqrt(P*P+I*I),I/=L,P*=x,I*=x,g.push(M-P*B,O-I*B),g.push(M+P*F,O+I*F),f||(h.cap===n.ROUND?_+=E(M-P*(B-F)*.5,O-I*(B-F)*.5,M-P*B,O-I*B,M+P*F,O+I*F,g,!1)+2:h.cap===n.SQUARE&&(_+=b(M,O,P,I,B,F,!1,g)));var it=e.indices,rt=l.epsilon*l.epsilon;for(j=y;j<_+y-2;++j)w=g[2*j],A=g[2*j+1],M=g[2*(j+1)],O=g[2*(j+1)+1],R=g[2*(j+2)],C=g[2*(j+2)+1],Math.abs(w*(O-C)+M*(C-A)+R*(A-O))<rt||it.push(j,j+1,j+2)}}(t,e)}var T,S=function(){function t(){}return t.curveTo=function(t,e,i,r,n,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,u=r-e,l=i-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===n)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var f=a*a+h*h,d=u*u+l*l,p=a*u+h*l,m=n*Math.sqrt(f)/c,g=n*Math.sqrt(d)/c,v=m*p/f,_=g*p/d,y=m*l+g*h,b=m*u+g*a,E=h*(g+v),x=a*(g+v),T=l*(m+_),S=u*(m+_);return{cx:y+t,cy:b+e,radius:n,startAngle:Math.atan2(x-b,E-y),endAngle:Math.atan2(S-b,T-y),anticlockwise:h*u>l*a}},t.arc=function(t,e,i,r,n,s,a,h,u){for(var c=a-s,f=l._segmentsCount(Math.abs(c)*n,40*Math.ceil(Math.abs(c)/o.PI_2)),d=c/(2*f),p=2*d,m=Math.cos(d),g=Math.sin(d),v=f-1,_=v%1/v,y=0;y<=v;++y){var b=d+s+p*(y+_*y),E=Math.cos(b),x=-Math.sin(b);u.push((m*E+g*x)*n+i,(m*-x+g*E)*n+r)}},t}(),w=function(){function t(){}return t.curveLength=function(t,e,i,r,n,s,o,a){for(var h=0,u=0,l=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=t,b=e,E=1;E<=10;++E)v=y-(m=(p=(d=(f=1-(u=E/10))*f)*f)*t+3*d*u*i+3*f*(l=u*u)*n+(c=l*u)*o),_=b-(g=p*e+3*d*u*r+3*f*l*s+c*a),y=m,b=g,h+=Math.sqrt(v*v+_*_);return h},t.curveTo=function(e,i,r,n,s,o,a){var h=a[a.length-2],u=a[a.length-1];a.length-=2;var c=l._segmentsCount(t.curveLength(h,u,e,i,r,n,s,o)),f=0,d=0,p=0,m=0,g=0;a.push(h,u);for(var v=1,_=0;v<=c;++v)p=(d=(f=1-(_=v/c))*f)*f,g=(m=_*_)*_,a.push(p*h+3*d*_*e+3*f*m*r+g*s,p*u+3*d*_*i+3*f*m*n+g*o)},t}(),A=function(){function t(){}return t.curveLength=function(t,e,i,r,n,s){var o=t-2*i+n,a=e-2*r+s,h=2*i-2*t,u=2*r-2*e,l=4*(o*o+a*a),c=4*(o*h+a*u),f=h*h+u*u,d=2*Math.sqrt(l+c+f),p=Math.sqrt(l),m=2*l*p,g=2*Math.sqrt(f),v=c/p;return(m*d+p*c*(d-g)+(4*f*l-c*c)*Math.log((2*p+v+d)/(v+g)))/(4*m)},t.curveTo=function(e,i,r,n,s){for(var o=s[s.length-2],a=s[s.length-1],h=l._segmentsCount(t.curveLength(o,a,e,i,r,n)),u=0,c=0,f=1;f<=h;++f){var d=f/h;u=o+(e-o)*d,c=a+(i-a)*d,s.push(u+(e+(r-e)*d-u)*d,c+(i+(n-i)*d-c)*d)}},t}(),M=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),O=((T={})[o.SHAPES.POLY]=p,T[o.SHAPES.CIRC]=m,T[o.SHAPES.ELIP]=m,T[o.SHAPES.RECT]=g,T[o.SHAPES.RREC]=y,T),R=[],C=[];function P(t){for(var e=t.points,i=0,r=0;r<e.length-2;r+=2)i+=(e[r+2]-e[r])*(e[r+3]+e[r+1]);return i>0}var I=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),N=new o.Point,D=new u.Bounds,L=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new u.Bounds,e.boundsDirty=-1,e}return d(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),C.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),R.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var n=new I(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new I(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,N):N.copyFrom(t),r.shape.contains(N.x,N.y))){var n=!1;if(r.holes)for(var s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(N.x,N.y)){n=!0;break}if(!n)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,r=null,n=null;this.batches.length>0&&(n=(r=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var o=i[s],a=o.fillStyle,u=o.lineStyle;O[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var l=0;l<2;l++){var c=0===l?a:u;if(c.visible){var f=c.texture.baseTexture,d=this.indices.length,p=this.points.length/2;f.wrapMode=h.WRAP_MODES.REPEAT,0===l?this.processFill(o):this.processLine(o);var m=this.points.length/2-p;0!==m&&(r&&!this._compareStyles(n,c)&&(r.end(d,p),r=null),r||((r=R.pop()||new M).begin(c,d,p),this.batches.push(r),n=c),this.addUvs(this.points,e,c.texture,p,m,c.matrix))}}}var g=this.indices.length,v=this.points.length/2;if(r&&r.end(g,v),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var _=v>65535&&t;this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var s=r.start+n;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++s.BaseTexture._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),C.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=C.pop();n||((n=new s.BatchDrawCall).texArray=new s.BatchTextureArray),n.texArray.count=0,n.start=0,n.size=0,n.type=h.DRAW_MODES.TRIANGLES;var o=0,a=null,u=0,l=!1,c=h.DRAW_MODES.TRIANGLES,f=0;for(this.drawCalls.push(n),e=0;e<this.batches.length;e++){var d=this.batches[e],p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(c=(l=!!p.native)?h.DRAW_MODES.LINES:h.DRAW_MODES.TRIANGLES,a=null,o=8,t++),a!==m&&(a=m,m._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=C.pop())||((n=new s.BatchDrawCall).texArray=new s.BatchTextureArray),this.drawCalls.push(n)),n.start=f,n.size=0,n.texArray.count=0,n.type=c),m.touched=1,m._batchEnabled=t,m._batchLocation=o,m.wrapMode=h.WRAP_MODES.REPEAT,n.texArray.elements[n.texArray.count++]=m,o++)),n.size+=d.size,f+=d.size,u=m._batchLocation,this.addColors(i,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,u,d.attribSize,d.attribStart)}s.BaseTexture._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),s=new Float32Array(n),o=new Uint32Array(n),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=i[h],s[a++]=r[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),p.triangulate(t,this)):O[t.type].triangulate(t,this)},e.prototype.processLine=function(t){x(t,this);for(var e=0;e<t.holes.length;e++)x(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];O[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=D,i=o.Matrix.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var n=this.graphicsData[r],s=n.shape,a=n.type,h=n.lineStyle,u=n.matrix||o.Matrix.IDENTITY,l=0;if(h&&h.visible){var c=h.alignment;l=h.width,a===o.SHAPES.POLY?P(s)?l*=1-c:l*=c:l*=Math.max(0,c)}if(i!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=u),a===o.SHAPES.RECT||a===o.SHAPES.RREC){var f=s;e.addFramePad(f.x,f.y,f.x+f.width,f.y+f.height,l,l)}else if(a===o.SHAPES.CIRC){var d=s;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+l,d.radius+l)}else if(a===o.SHAPES.ELIP){var p=s;e.addFramePad(p.x,p.y,p.x,p.y,p.width+l,p.height+l)}else{var m=s;t.addVerticesMatrix(i,m.points,0,m.points.length,l,l)}}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},e.prototype.addColors=function(t,e,i,r,n){void 0===n&&(n=0);var s=(e>>16)+(65280&e)+((255&e)<<16),o=(0,a.premultiplyTint)(s,i);t.length=Math.max(t.length,n+r);for(var h=0;h<r;h++)t[n+h]=o},e.prototype.addTextureIds=function(t,e,i,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+i);for(var n=0;n<i;n++)t[r+n]=e},e.prototype.addUvs=function(t,e,i,r,n,s){void 0===s&&(s=null);for(var o=0,a=e.length,h=i.frame;o<n;){var u=t[2*(r+o)],l=t[2*(r+o)+1];if(s){var c=s.a*u+s.c*l+s.tx;l=s.b*u+s.d*l+s.ty,u=c}o++,e.push(u/h.width,l/h.height)}var f=i.baseTexture;(h.width<f.width||h.height<f.height)&&this.adjustUvs(e,i,a,n)},e.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,s=1e-6,o=i+2*r,a=e.frame,h=a.width/n.width,u=a.height/n.height,l=a.x/a.width,c=a.y/a.height,f=Math.floor(t[i]+s),d=Math.floor(t[i+1]+s),p=i+2;p<o;p+=2)f=Math.min(f,Math.floor(t[p]+s)),d=Math.min(d,Math.floor(t[p+1]+s));for(l-=f,c-=d,p=i;p<o;p+=2)t[p]=(t[p]+l)*h,t[p+1]=(t[p+1]+c)*u},e.BATCHABLE_SIZE=100,e}(s.BatchGeometry),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=n.BUTT,e.join=r.MITER,e.miterLimit=10,e}return d(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(c),B=new Float32Array(3),F={},j=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new c,i._lineStyle=new k,i._matrix=null,i._holeMode=!1,i.state=s.State.for2d(),i._geometry=e||new L,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=h.BLEND_MODES.NORMAL,i}return d(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,i,r,n){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=.5),void 0===n&&(n=!1),"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:r,native:n}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:s.Texture.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:n.BUTT,join:r.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new o.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new o.Polygon,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),A.curveTo(t,e,i,r,n),this},e.prototype.bezierCurveTo=function(t,e,i,r,n,s){return this._initCurve(),w.curveTo(t,e,i,r,n,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var s=this.currentPath.points,o=S.curveTo(t,e,i,r,n,s);if(o){var a=o.cx,h=o.cy,u=o.radius,l=o.startAngle,c=o.endAngle,f=o.anticlockwise;this.arc(a,h,u,l,c,f)}return this},e.prototype.arc=function(t,e,i,r,n,s){if(void 0===s&&(s=!1),r===n)return this;if(!s&&n<=r?n+=o.PI_2:s&&r<=n&&(r+=o.PI_2),0==n-r)return this;var a=t+Math.cos(r)*i,h=e+Math.sin(r)*i,u=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var c=Math.abs(l[l.length-2]-a),f=Math.abs(l[l.length-1]-h);c<u&&f<u||l.push(a,h)}else this.moveTo(a,h),l=this.currentPath.points;return S.arc(a,h,t,e,i,r,n,s,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:s.Texture.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:s.Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new o.Rectangle(t,e,i,r))},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new o.RoundedRectangle(t,e,i,r,n))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new o.Circle(t,e,i))},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new o.Ellipse(t,e,i,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=!0,s=i[0];s.points?(n=s.closeStroke,t=s.points):t=Array.isArray(i[0])?i[0]:i;var a=new o.Polygon(t);return a.closeStroke=n,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==o.SHAPES.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var r=0;r<i;r++){var n=t.batches[r],s=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),h=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),u={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:h,_batchRGB:(0,a.hex2rgb)(s),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,n=this.worldAlpha,s=e.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(r>>16&255)/255*n,s.tint[1]=(r>>8&255)/255*n,s.tint[2]=(255&r)/255*n,s.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,r=e.type,n=e.size,s=e.start,o=i.count,a=0;a<o;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(r,n,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!F[i]){for(var r=t.plugins.batch.MAX_TEXTURES,n=new Int32Array(r),a=0;a<r;a++)n[a]=a;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new o.Matrix,default:s.UniformGroup.from({uSamplers:n},!0)},u=t.plugins[i]._shader.program;F[i]=new s.Shader(u,h)}e=F[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,r=e.minY,n=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,i,r,n,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=(0,a.hex2rgb)(this.tint,B),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,n=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this._geometry.points,u=this.vertexData,l=0,c=0;c<h.length;c+=2){var f=h[c],d=h[c+1];u[l++]=i*f+n*d+o,u[l++]=s*d+r*f+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new o.Point,e}(u.Container),G={buildPoly:p,buildCircle:m,buildRectangle:g,buildRoundedRectangle:y,buildLine:x,ArcUtils:S,BezierUtils:w,QuadraticUtils:A,BatchPart:M,FILL_COMMANDS:O,BATCH_POOL:R,DRAW_CALL_POOL:C}},"./node_modules/@pixi/interaction/dist/esm/interaction.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{InteractionData:()=>a,InteractionEvent:()=>u,InteractionManager:()=>p,InteractionTrackingData:()=>l,interactiveTarget:()=>f});var r=i("./node_modules/@pixi/math/dist/esm/math.js"),n=i("./node_modules/@pixi/ticker/dist/esm/ticker.js"),s=i("./node_modules/@pixi/display/dist/esm/display.js"),o=i("./node_modules/@pixi/utils/dist/esm/utils.js"),a=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h(t,e)},u=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),l=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),c=function(){function t(){this._tempPoint=new r.Point}return t.prototype.recursiveFindHit=function(t,e,i,r,n){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,h=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(r=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],f=this.recursiveFindHit(t,c,i,r,a);if(f){if(!c.parent)continue;a=!1,f&&(t.target&&(r=!1),o=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},t.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},t}(),f={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};s.DisplayObject.mixin(f);var d={target:null,data:{global:null}},p=function(t){function e(e,i){var r=t.call(this)||this;return i=i||{},r.renderer=e,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new a,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new u,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in self),r.supportsTouchEvents="ontouchstart"in self,r.supportsPointerEvents=!!self.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new c,r._tempDisplayObject=new s.TemporaryDisplayObject,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return d.target=null,d.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(d,e,null,!0),d.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(n.Ticker.system.add(this.tickerUpdate,this,n.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(n.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),s=this.delayedEvents;if(!s.length)return n;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],u=h.displayObject,l=h.eventString,c=h.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,l,c)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===n.pointerType)this.emit("touchstart",o);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new l(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button;s?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var a=r[o],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+s:"mouseup"+s,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,s=e.trackedPointers[n],o="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(a){var u=2===r.button,c=l.FLAGS,f=u?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==s&&s.flags&f;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):d&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),s&&(u?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===n.pointerType&&this.emit("touchmove",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,s="mouse"===r.pointerType||"pen"===r.pointerType,o=e.trackedPointers[n];i&&!o&&(o=e.trackedPointers[n]=new l(n)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new a).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(!self.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof self.PointerEvent)){var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}else e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(o.EventEmitter)},"./node_modules/@pixi/loaders/dist/esm/loaders.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{AppLoaderPlugin:()=>b,Loader:()=>y,LoaderResource:()=>d,TextureLoader:()=>E});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=function(){function t(t,e,i){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},t.prototype.has=function(t){if(!(t instanceof n))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new n(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new n(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof n))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function a(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},s=14;s--;)n[i.key[s]]=r[s]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}var h=!(!self.XDomainRequest||"withCredentials"in new XMLHttpRequest),u=null;function l(){}function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function f(t){return t.toString().replace("object ","")}var d=function(){function t(e,i,r){if(this._dequeue=l,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=l,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o,this.onProgress=new o,this.onComplete=new o,this.onAfterMiddleware=new o}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==self.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==self.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else e=this.metadata.mimeType,this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new self.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(f(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(f(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(f(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(self.origin!==self.location.origin)return"anonymous";e=e||self.location,u||(u=document.createElement("a")),u.href=t;var i=a(u.href,{strictMode:!0}),r=!i.port&&""===e.port||i.port===e.port,n=i.protocol?i.protocol+":":"";return i.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),s=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function p(){}function m(t){return function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(null===t)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,i)}}!function(t){var e,i,r,n;(n=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[n.NONE=0]="NONE",n[n.DATA_URL=1]="DATA_URL",n[n.COMPLETE=2]="COMPLETE",n[n.LOADING=4]="LOADING",(r=t.TYPE||(t.TYPE={}))[r.UNKNOWN=0]="UNKNOWN",r[r.JSON=1]="JSON",r[r.XML=2]="XML",r[r.IMAGE=3]="IMAGE",r[r.AUDIO=4]="AUDIO",r[r.VIDEO=5]="VIDEO",r[r.TEXT=6]="TEXT",(i=t.LOAD_TYPE||(t.LOAD_TYPE={}))[i.XHR=1]="XHR",i[i.IMAGE=2]="IMAGE",i[i.AUDIO=3]="AUDIO",i[i.VIDEO=4]="VIDEO",(e=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(d||(d={}));var g=function(t,e){this.data=t,this.callback=e},v=function(){function t(t,e){var i=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=p,this.unsaturated=p,this.empty=p,this.drain=p,this.error=p,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n=new g(t,"function"==typeof r?r:p);e?i._tasks.unshift(n):i._tasks.push(n),setTimeout(i.process,1)}},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(t.data,m(i._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var i=arguments,r=[],n=0;n<arguments.length;n++)r[n]=i[n];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=p,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,i,r){var n=0,s=t.length;!function o(a){a||n===s?i&&i(a):r?setTimeout((function(){e(t[n++],o)}),1):e(t[n++],o)}()},t.queue=function(e,i){return new t(e,i)},t}(),_=/(#[\w-]+)?$/,y=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=v.queue(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new o,this.onError=new o,this.onLoad=new o,this.onStart=new o,this.onComplete=new o;for(var n=0;n<t._plugins.length;++n){var s=t._plugins[n],a=s.pre,h=s.use;a&&this.pre(a),h&&this.use(h)}this._protected=!1}return t.prototype._add=function(t,e,i,r){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new d(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var n=i.parentResource,s=[],o=0;o<n.children.length;++o)n.children[o].isComplete||s.push(n.children[o]);var a=n.progressChunk*(s.length+1)/(s.length+2);for(n.children.push(this.resources[t]),n.progressChunk=a,o=0;o<s.length;++o)s[o].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,i=a(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=_.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,v.eachSeries(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),v.eachSeries(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();y.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=t,r=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof i&&(r=i,i=null),this._add(t,e,i,r)};var b=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?y.shared:new y},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),E=function(){function t(){}return t.add=function(){d.setExtensionLoadType("svg",d.LOAD_TYPE.XHR),d.setExtensionXhrType("svg",d.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==d.TYPE.IMAGE&&"svg"!==t.extension)e();else{var i=t.data,n=t.url,s=t.name,o=t.metadata;r.Texture.fromLoader(i,n,s,o).then((function(i){t.texture=i,e()})).catch(e)}},t}(),x=self.URL||self.webkitURL;y.registerPlugin({use:function(t,e){if(t.data){if(t.xhr&&t.xhrType===d.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=x.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=d.TYPE.IMAGE,void(t.data.onload=function(){x.revokeObjectURL(i),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],s=0;s<r.length;++s)i<t.length?r[s]=255&t.charCodeAt(i++):r[s]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(s=0;s<n.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return e}(t.xhr.responseText),t.type=d.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}}),y.registerPlugin(E)},"./node_modules/@pixi/math/dist/esm/math.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Circle:()=>h,DEG_TO_RAD:()=>o,Ellipse:()=>u,Matrix:()=>p,ObservablePoint:()=>d,PI_2:()=>n,Point:()=>f,Polygon:()=>l,RAD_TO_DEG:()=>s,Rectangle:()=>a,RoundedRectangle:()=>c,SHAPES:()=>r,Transform:()=>T,groupD8:()=>x});var r,n=2*Math.PI,s=180/Math.PI,o=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var a=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),h=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),u=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new a(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),l=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,s=r-1;n<r;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-o)+o&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),c=function(){function t(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),f=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),d=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),p=function(){function t(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new f;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new f;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,s=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-r,s),h=Math.atan2(i,e),u=Math.abs(a+h);return u<1e-5||Math.abs(n-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*s),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),m=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],g=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],v=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],y=[],b=[],E=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];y.push(e);for(var i=0;i<16;i++)for(var r=E(m[t]*m[i]+v[t]*g[i]),n=E(g[t]*m[i]+_[t]*g[i]),s=E(m[t]*v[i]+v[t]*_[i]),o=E(g[t]*v[i]+_[t]*_[i]),a=0;a<16;a++)if(m[a]===r&&g[a]===n&&v[a]===s&&_[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new p;h.set(m[t],g[t],v[t],_[t],0,0),b.push(h)}}();var x={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return m[t]},uY:function(t){return g[t]},vX:function(t){return v[t]},vY:function(t){return _[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return y[t][e]},sub:function(t,e){return y[t][x.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?x.S:x.N:2*Math.abs(e)<=Math.abs(t)?t>0?x.E:x.W:e>0?t>0?x.SE:x.SW:t>0?x.NE:x.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=b[x.inv(e)];n.tx=i,n.ty=r,t.append(n)}},T=function(){function t(){this.worldTransform=new p,this.localTransform=new p,this.position=new d(this.onChange,this,0,0),this.scale=new d(this.onChange,this,1,1),this.pivot=new d(this.onChange,this,0,0),this.skew=new d(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},"./node_modules/@pixi/mesh-extras/dist/esm/mesh-extras.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{NineSlicePlane:()=>d,PlaneGeometry:()=>h,RopeGeometry:()=>u,SimpleMesh:()=>f,SimplePlane:()=>c,SimpleRope:()=>l});var r=i("./node_modules/@pixi/mesh/dist/esm/mesh.js"),n=i("./node_modules/@pixi/constants/dist/esm/constants.js"),s=i("./node_modules/@pixi/core/dist/esm/core.js"),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},o(t,e)};function a(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===r&&(r=10),void 0===n&&(n=10);var s=t.call(this)||this;return s.segWidth=r,s.segHeight=n,s.width=e,s.height=i,s.build(),s}return a(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,s=this.segHeight-1,o=this.width/n,a=this.height/s,h=0;h<t;h++){var u=h%this.segWidth,l=h/this.segWidth|0;e.push(u*o,l*a),i.push(u/n,l/s)}var c=n*s;for(h=0;h<c;h++){var f=h%n,d=h/n|0,p=d*this.segWidth+f,m=d*this.segWidth+f+1,g=(d+1)*this.segWidth+f,v=(d+1)*this.segWidth+f+1;r.push(p,m,g,m,v,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(r.MeshGeometry),u=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===r&&(r=0);var n=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return n.points=i,n._width=e,n.textureScale=r,n.build(),n}return a(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,s=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,u=t.length,l=0;l<u;l++){var c=4*l;if(this.textureScale>0){var f=a.x-t[l].x,d=a.y-t[l].y,p=Math.sqrt(f*f+d*d);a=t[l],o+=p/h}else o=l/(u-1);n[c]=o,n[c+1]=0,n[c+2]=o,n[c+3]=1}var m=0;for(l=0;l<u-1;l++)c=2*l,s[m++]=c,s[m++]=c+1,s[m++]=c+2,s[m++]=c+2,s[m++]=c+1,s[m++]=c+3;i.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],r=0,n=0,s=this.buffers[0].data,o=t.length,a=0;a<o;a++){var h=t[a],u=4*a;n=-((e=a<t.length-1?t[a+1]:h).x-i.x),r=e.y-i.y;var l=Math.sqrt(r*r+n*n),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=l,n/=l,r*=c,n*=c,s[u]=h.x+r,s[u+1]=h.y+n,s[u+2]=h.x-r,s[u+3]=h.y-n,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(r.MeshGeometry),l=function(t){function e(e,i,s){void 0===s&&(s=0);var o=this,a=new u(e.height,i,s),h=new r.MeshMaterial(e);return s>0&&(e.baseTexture.wrapMode=n.WRAP_MODES.REPEAT),(o=t.call(this,a,h)||this).autoUpdate=!0,o}return a(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(r.Mesh),c=function(t){function e(e,i,n){var o=this,a=new h(e.width,e.height,i,n),u=new r.MeshMaterial(s.Texture.WHITE);return(o=t.call(this,a,u)||this).texture=e,o.autoResize=!0,o}return a(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,i=e.width,r=e.height;!this.autoResize||t.width===i&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(r.Mesh),f=function(t){function e(e,i,n,o,a){void 0===e&&(e=s.Texture.EMPTY);var h=this,u=new r.MeshGeometry(i,n,o);u.getBuffer("aVertexPosition").static=!1;var l=new r.MeshMaterial(e);return(h=t.call(this,u,l,null,a)||this).autoUpdate=!0,h}return a(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(r.Mesh),d=function(t){function e(e,i,r,n,o){void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=10),void 0===o&&(o=10);var a=t.call(this,s.Texture.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=n,a._topHeight=r,a._bottomHeight=o,a.texture=e,a}return a(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(c)},"./node_modules/@pixi/mesh/dist/esm/mesh.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Mesh:()=>p,MeshBatchUvs:()=>c,MeshGeometry:()=>g,MeshMaterial:()=>m});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=i("./node_modules/@pixi/math/dist/esm/math.js"),s=i("./node_modules/@pixi/constants/dist/esm/constants.js"),o=i("./node_modules/@pixi/display/dist/esm/display.js"),a=i("./node_modules/@pixi/settings/dist/esm/settings.js"),h=i("./node_modules/@pixi/utils/dist/esm/utils.js"),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)};function l(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),f=new n.Point,d=new n.Polygon,p=function(t){function e(e,i,n,o){void 0===o&&(o=s.DRAW_MODES.TRIANGLES);var h=t.call(this)||this;return h.geometry=e,e.refCount++,h.shader=i,h.state=n||r.State.for2d(),h.drawMode=o,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=a.settings.ROUND_PIXELS,h.batchUvs=null,h}return l(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===s.DRAW_MODES.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,h=r.d,u=r.tx,l=r.ty,c=this.vertexData,f=0;f<c.length/2;f++){var d=e[2*f],p=e[2*f+1];c[2*f]=n*d+o*p+u,c[2*f+1]=s*d+h*p+l}if(this._roundPixels){var m=a.settings.RESOLUTION;for(f=0;f<c.length;++f)c[f]=Math.round((c[f]*m|0)/m)}this.vertexDirty=i}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new c(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,f);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=d.points,r=this.geometry.getIndex().data,n=r.length,s=4===this.drawMode?3:1,o=0;o+2<n;o+=s){var a=2*r[o],h=2*r[o+1],u=2*r[o+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[u],i[5]=e[u+1],d.contains(f.x,f.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(o.Container),m=function(t){function e(e,i){var s=this,o={uSampler:e,alpha:1,uTextureMatrix:n.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(o,i.uniforms),(s=t.call(this,i.program||r.Program.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o)||this)._colorDirty=!1,s.uvMatrix=new r.TextureMatrix(e),s.batchable=void 0===i.program,s.pluginName=i.pluginName,s.tint=i.tint,s.alpha=i.alpha,s}return l(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;(0,h.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(r.Shader),g=function(t){function e(e,i,n){var o=t.call(this)||this,a=new r.Buffer(e),h=new r.Buffer(i,!0),u=new r.Buffer(n,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,s.TYPES.FLOAT).addAttribute("aTextureCoord",h,2,!1,s.TYPES.FLOAT).addIndex(u),o._updateId=-1,o}return l(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(r.Geometry)},"./node_modules/@pixi/mixin-cache-as-bitmap/dist/esm/mixin-cache-as-bitmap.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{CacheData:()=>R});var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x=i("./node_modules/@pixi/core/dist/esm/core.js"),T=i("./node_modules/@pixi/sprite/dist/esm/sprite.js"),S=i("./node_modules/@pixi/display/dist/esm/display.js"),w=i("./node_modules/@pixi/math/dist/esm/math.js"),A=i("./node_modules/@pixi/utils/dist/esm/utils.js"),M=i("./node_modules/@pixi/settings/dist/esm/settings.js");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(u||(u={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(f||(f={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(d||(d={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(E||(E={}));var O=new w.Matrix;S.DisplayObject.prototype._cacheAsBitmap=!1,S.DisplayObject.prototype._cacheData=null,S.DisplayObject.prototype._cacheAsBitmapResolution=null,S.DisplayObject.prototype._cacheAsBitmapMultisample=b.NONE;var R=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(S.DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new R),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),S.DisplayObject.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},S.DisplayObject.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var i=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;r.pad(n)}r.ceil(M.settings.RESOLUTION);var s=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,u=x.RenderTexture.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),l="cacheAsBitmap_"+(0,A.uid)();this._cacheData.textureCacheId=l,x.BaseTexture.addToCache(u.baseTexture,l),x.Texture.addToCache(u,l);var c=this.transform.localTransform.copyTo(O).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=h,t.renderTexture.bind(s,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var f=new T.Sprite(u);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-r.x/r.width,f.anchor.y=-r.y/r.height,f.alpha=i,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)}},S.DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},S.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var r=t.context,n=t._projTransform;e.ceil(M.settings.RESOLUTION);var s=x.RenderTexture.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+(0,A.uid)();this._cacheData.textureCacheId=o,x.BaseTexture.addToCache(s.baseTexture,o),x.Texture.addToCache(s,o);var a=O;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var h=new T.Sprite(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},S.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},S.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},S.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,x.BaseTexture.removeFromCache(this._cacheData.textureCacheId),x.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},S.DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},"./node_modules/@pixi/mixin-get-child-by-name/dist/esm/mixin-get-child-by-name.js":(t,e,i)=>{"use strict";i.r(e);var r=i("./node_modules/@pixi/display/dist/esm/display.js");r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t,e){for(var i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,r=this.children.length;i<r;i++)if(this.children[i].getChildByName){var n=this.children[i].getChildByName(t,!0);if(n)return n}return null}},"./node_modules/@pixi/mixin-get-global-position/dist/esm/mixin-get-global-position.js":(t,e,i)=>{"use strict";i.r(e);var r=i("./node_modules/@pixi/display/dist/esm/display.js"),n=i("./node_modules/@pixi/math/dist/esm/math.js");r.DisplayObject.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new n.Point),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},"./node_modules/@pixi/particle-container/dist/esm/particle-container.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{ParticleContainer:()=>l,ParticleRenderer:()=>f});var r=i("./node_modules/@pixi/constants/dist/esm/constants.js"),n=i("./node_modules/@pixi/display/dist/esm/display.js"),s=i("./node_modules/@pixi/utils/dist/esm/utils.js"),o=i("./node_modules/@pixi/core/dist/esm/core.js"),a=i("./node_modules/@pixi/math/dist/esm/math.js"),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h(t,e)};function u(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l=function(t){function e(e,i,n,s){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===s&&(s=!1);var o=t.call(this)||this;return n>16384&&(n=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=r.BLEND_MODES.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return u(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,(0,s.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(n.Container),c=function(){function t(t,e,i){this.geometry=new o.Geometry,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||r.TYPES.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new o.Buffer((0,s.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i)(u=this.dynamicProperties[i]).offset=e,e+=u.size,this.dynamicStride+=u.size;var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new o.Buffer(this.dynamicData,!1,!1);var a=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;++i)(u=this.staticProperties[i]).offset=a,a+=u.size,this.staticStride+=u.size;var h=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=new o.Buffer(this.staticData,!0,!1),i=0;i<this.dynamicProperties.length;++i){var u=this.dynamicProperties[i];t.addAttribute(u.attributeName,this.dynamicBuffer,0,u.type===r.TYPES.UNSIGNED_BYTE,u.type,4*this.dynamicStride,4*u.offset)}for(i=0;i<this.staticProperties.length;++i)u=this.staticProperties[i],t.addAttribute(u.attributeName,this.staticBuffer,0,u.type===r.TYPES.UNSIGNED_BYTE,u.type,4*this.staticStride,4*u.offset)},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===r.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===r.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),f=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new a.Matrix,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:r.TYPES.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=o.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=o.State.for2d(),i}return u(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.state.blendMode=(0,s.correctBlendMode)(t.blendMode,h.alphaMode),n.state.set(this.state);var u=n.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=(0,s.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var c=!1,f=0,d=0;f<o;f+=r,d+=1){var p=o-f;p>r&&(p=r),d>=a.length&&a.push(this._generateOneMoreBuffer(t));var m=a[d];m.uploadDynamic(e,f,p);var g=t._bufferUpdateIDs[d]||0;(c=c||m._updateID<g)&&(m._updateID=t._updateID,m.uploadStatic(e,f,p)),n.geometry.bind(m.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,s=0;s<i;s+=r)e.push(new c(this.properties,n,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new c(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,n,s){for(var o=0,a=0,h=0,u=0,l=0;l<i;++l){var c=t[e+l],f=c._texture,d=c.scale.x,p=c.scale.y,m=f.trim,g=f.orig;m?(o=(a=m.x-c.anchor.x*g.width)+m.width,h=(u=m.y-c.anchor.y*g.height)+m.height):(o=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,h=g.height*(1-c.anchor.y),u=g.height*-c.anchor.y),r[s]=a*d,r[s+1]=u*p,r[s+n]=o*d,r[s+n+1]=u*p,r[s+2*n]=o*d,r[s+2*n+1]=h*p,r[s+3*n]=a*d,r[s+3*n+1]=h*p,s+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].position;r[s]=a.x,r[s+1]=a.y,r[s+n]=a.x,r[s+n+1]=a.y,r[s+2*n]=a.x,r[s+2*n+1]=a.y,r[s+3*n]=a.x,r[s+3*n+1]=a.y,s+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;r[s]=a,r[s+n]=a,r[s+2*n]=a,r[s+3*n]=a,s+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(r[s]=a.x0,r[s+1]=a.y0,r[s+n]=a.x1,r[s+n+1]=a.y1,r[s+2*n]=a.x2,r[s+2*n+1]=a.y2,r[s+3*n]=a.x3,r[s+3*n+1]=a.y3,s+=4*n):(r[s]=0,r[s+1]=0,r[s+n]=0,r[s+n+1]=0,r[s+2*n]=0,r[s+2*n+1]=0,r[s+3*n]=0,r[s+3*n+1]=0,s+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var h=t[e+a],u=h._texture.baseTexture.alphaMode>0,l=h.alpha,c=l<1&&u?(0,s.premultiplyTint)(h._tintRGB,l):h._tintRGB+(255*l<<24);r[o]=c,r[o+n]=c,r[o+2*n]=c,r[o+3*n]=c,o+=4*n}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(o.ObjectRenderer)},"./node_modules/@pixi/polyfill/dist/esm/polyfill.js":(t,e,i)=>{"use strict";i.r(e);var r=i("./node_modules/promise-polyfill/src/index.js"),n=i("./node_modules/object-assign/index.js"),s=i.n(n);if(self.Promise||(self.Promise=r.default),Object.assign||(Object.assign=s()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var o=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-o}}for(var a=Date.now(),h=["ms","moz","webkit","o"],u=0;u<h.length&&!self.requestAnimationFrame;++u){var l=h[u];self.requestAnimationFrame=self[l+"RequestAnimationFrame"],self.cancelAnimationFrame=self[l+"CancelAnimationFrame"]||self[l+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+a-e;return i<0&&(i=0),a=e,self.setTimeout((function(){a=Date.now(),t(performance.now())}),i)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array)},"./node_modules/@pixi/prepare/dist/esm/prepare.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{BasePrepare:()=>_,CountLimiter:()=>l,Prepare:()=>x,TimeLimiter:()=>T});var r=i("./node_modules/@pixi/settings/dist/esm/settings.js"),n=i("./node_modules/@pixi/core/dist/esm/core.js"),s=i("./node_modules/@pixi/graphics/dist/esm/graphics.js"),o=i("./node_modules/@pixi/ticker/dist/esm/ticker.js"),a=i("./node_modules/@pixi/display/dist/esm/display.js"),h=i("./node_modules/@pixi/text/dist/esm/text.js");r.settings.UPLOADS_PER_FRAME=4;var u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)},l=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function c(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof n.Texture){var s=t._textures[r].baseTexture;-1===e.indexOf(s)&&(e.push(s),i=!0)}return i}function f(t,e){if(t.baseTexture instanceof n.BaseTexture){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function d(t,e){if(t._texture&&t._texture instanceof n.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function p(t,e){return e instanceof h.Text&&(e.updateText(!0),!0)}function m(t,e){if(e instanceof h.TextStyle){var i=e.toFontString();return h.TextMetrics.measureFont(i),!0}return!1}function g(t,e){if(t instanceof h.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function v(t,e){return t instanceof h.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}var _=function(){function t(t){var e=this;this.limiter=new l(r.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(g),this.registerFindHook(v),this.registerFindHook(c),this.registerFindHook(f),this.registerFindHook(d),this.registerUploadHook(p),this.registerUploadHook(m)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,o.Ticker.system.addOnce(this.tick,this,o.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)o.Ticker.system.addOnce(this.tick,this,o.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);for(this.completes.length=0,i=0,r=n.length;i<r;i++)n[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof a.Container)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&o.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function y(t,e){return e instanceof n.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function b(t,e){if(!(e instanceof s.Graphics))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&y(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function E(t,e){return t instanceof s.Graphics&&(e.push(t),!0)}var x=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(E),i.registerUploadHook(y),i.registerUploadHook(b),i}return function(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(_),T=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}()},"./node_modules/@pixi/runner/dist/esm/runner.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Runner:()=>r});var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,u=h.name,l=h.items;this._aliasCount++;for(var c=0,f=l.length;c<f;c++)l[c][u](t,e,i,r,n,s,o,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},"./node_modules/@pixi/settings/dist/esm/settings.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{isMobile:()=>x,settings:()=>w});var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x=(0,i("./node_modules/ismobilejs/esm/index.js").default)(self.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(u||(u={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(f||(f={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(d||(d={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(E||(E={}));var T,S,w={MIPMAP_TEXTURES:p.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:b.NONE,SPRITE_MAX_TEXTURES:(S=!0,(x.tablet||x.phone)&&(x.apple.device&&(T=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(T[1],10)<11&&(S=!1),x.android.device&&(T=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(T[1],10)<7&&(S=!1)),S?32:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:v.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:d.CLAMP,SCALE_MODE:f.LINEAR,PRECISION_VERTEX:_.HIGH,PRECISION_FRAGMENT:x.apple.device?_.HIGH:_.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!x.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},"./node_modules/@pixi/sound/dist/pixi-sound.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Filter:()=>D,Filterable:()=>A,Sound:()=>R,SoundLibrary:()=>I,SoundLoader:()=>_,SoundSprite:()=>x,filters:()=>L,htmlaudio:()=>N,sound:()=>j,utils:()=>F,webaudio:()=>k});var r,n=i("./node_modules/@pixi/loaders/dist/esm/loaders.js"),s=i("./node_modules/@pixi/utils/dist/esm/utils.js"),o=i("./node_modules/@pixi/ticker/dist/esm/ticker.js"),a=i("./node_modules/@pixi/core/dist/esm/core.js");function h(){return r}var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c=function(){return(c=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},f=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid","caf"],d={};function p(t){var e=c({m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},t||{}),i=document.createElement("audio"),r={},n=/^no$/;f.forEach((function(t){var s=i.canPlayType("audio/"+t).replace(n,""),o=e[t]?i.canPlayType(e[t]).replace(n,""):"";r[t]=!!s||!!o})),Object.assign(d,r)}p();var m=/\.(\{([^\}]+)\})(\?.*)?$/;function g(t){var e=m,i="string"==typeof t?t:t.url;if(!e.test(i))return i;for(var r=e.exec(i),n=r[2].split(","),s=n[n.length-1],o=0,a=n.length;o<a;o++){var h=n[o];if(d[h]){s=h;break}}var u=i.replace(r[1],s);if("string"!=typeof t){var l=t;l.extension=s,l.url=u}return u}var v,_=function(){function t(){}return t.add=function(){t.setLegacy(h().useLegacy)},t.setLegacy=function(t){var e=f;t?e.forEach((function(t){n.LoaderResource.setExtensionXhrType(t,n.LoaderResource.XHR_RESPONSE_TYPE.DEFAULT),n.LoaderResource.setExtensionLoadType(t,n.LoaderResource.LOAD_TYPE.AUDIO)})):e.forEach((function(t){n.LoaderResource.setExtensionXhrType(t,n.LoaderResource.XHR_RESPONSE_TYPE.BUFFER),n.LoaderResource.setExtensionLoadType(t,n.LoaderResource.LOAD_TYPE.XHR)}))},t.pre=function(t,e){g(t),e()},t.use=function(t,e){t.data&&f.indexOf(t.extension)>-1?t.sound=h().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),y=0,b=function(t){function e(e){var i=t.call(this)||this;return i.id=y++,i.init(e),i}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e}return this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);this._source.volume=n*i*r,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},e.prototype.play=function(t){var i=this,r=t.start,n=t.end,s=t.speed,a=t.loop,h=t.volume,u=t.muted;this._speed=s,this._volume=h,this._loop=!!a,this._muted=u,this.refresh(),this.loop&&null!==n&&(this.loop=!1),this._start=r,this._end=n||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){i._source&&(i._source.currentTime=r,i._source.onloadedmetadata=null,i.emit("progress",r,i._duration),o.Ticker.shared.add(i._onUpdate,i))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){o.Ticker.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){o.Ticker.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(s.EventEmitter),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new b(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),e.prototype.load=function(t){var e=this._source,i=this.parent;if(4!==e.readyState)if(i.url){e.src=i.url;var r=function(){o(),i.isLoaded=!0;var e=i.autoPlayStart();t&&t(null,i,e)},n=function(){o(),t&&t(new Error("Sound loading has been aborted"))},s=function(){o();var i="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(i))},o=function(){e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",n),e.removeEventListener("error",s)};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",n,!1),e.addEventListener("error",s,!1),e.load()}else t(new Error("sound.url or sound.source must be set"));else{i.isLoaded=!0;var a=i.autoPlayStart();t&&setTimeout((function(){t(null,i,a)}),0)}},e}(s.EventEmitter),x=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),T=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var i=h().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},t}(),S=0,w=function(t){function e(e){var i=t.call(this)||this;return i.id=S++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i.init(e),i}return l(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e}return this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);T.setParamValue(this._gain.gain,n*r*i),T.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},e.prototype.play=function(t){var e=t.start,i=t.end,r=t.speed,n=t.loop,s=t.volume,o=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),h=a.source,u=a.gain;this._source=h,this._gain=u,this._speed=r,this._volume=s,this._loop=!!n,this._muted=o,this.refresh();var l=this._source.buffer.duration;this._duration=l,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)},e.prototype.enableTicker=function(t){o.Ticker.shared.remove(this._updateListener,this),t&&o.Ticker.shared.add(this._updateListener,this)},Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){var r=this._source.playbackRate.value;this._elapsed+=i*r,this._lastUpdate=e;var n=this._duration,s=void 0;if(this._source.loopStart){var o=this._source.loopEnd-this._source.loopStart;s=(this._source.loopStart+this._elapsed%o)/n}else s=this._elapsed%n/n;this._progress=s,this.emit("progress",this._progress,n)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){}this._source=null}},e.prototype._onComplete=function(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(s.EventEmitter),A=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach((function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t})),i.connect(this._output)}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),M=function(t){function e(e){var i=this,r=e.audioContext,n=r.createBufferSource(),s=r.createGain(),o=r.createAnalyser();return n.connect(o),o.connect(s),s.connect(e.destination),(i=t.call(this,o,s)||this).context=e,i.bufferSource=n,i.gain=s,i.analyser=o,i}return l(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,T.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!1,configurable:!0}),e.BUFFER_SIZE=0,e}(A),O=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new M(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){}this._source=null,this.source=null},t.prototype.create=function(){return new w(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,r=this.parent.url;i.open("GET",r,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},t.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,(function(t,r){if(t)e&&e(t);else{i.parent.isLoaded=!0,i.buffer=r;var n=i.parent.autoPlayStart();e&&e(null,i.parent,n)}}))},t}(),R=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var i={};return"string"==typeof e?i.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?i.source=e:i=e,(i=c({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},i)).url&&(i.url=g(i.url)),Object.freeze(i),new t(h().useLegacy?new E:new O,i)},Object.defineProperty(t.prototype,"context",{get:function(){return h().context},enumerable:!1,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!1,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var r in t)i[r]=this.addSprites(r,t[r]);return i}var n=new x(this,e);return this._sprites[t]=n,n},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!1,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var i,r=this;if("string"==typeof t?i={sprite:s=t,loop:this.loop,complete:e}:"function"==typeof t?(i={}).complete=t:i=t,(i=c({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var n=i.sprite,s=this._sprites[n];i.start=s.start+(i.start||0),i.end=s.end,i.speed=s.speed||1,i.loop=s.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise((function(t,e){r.autoPlay=!0,r._autoPlayOptions=i,r._preload((function(r,n,s){r?e(r):(i.loaded&&i.loaded(r,n,s),t(s))}))}));this.singleInstance&&this._removeInstances();var o=this._createInstance();return this._instances.push(o),this.isPlaying=!0,o.once("end",(function(){i.complete&&i.complete(r),r._onComplete(o)})),o.once("stop",(function(){r._onComplete(o)})),o.play(i),o},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!1,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.muted=!1,e.volume=1,e.paused=!1,e}return l(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(s.EventEmitter),P=function(t){function e(){var i=this,r=window,n=new e.AudioContext,o=n.createDynamicsCompressor(),a=n.createAnalyser();return a.connect(o),o.connect(n.destination),(i=t.call(this,a,o)||this)._ctx=n,i._offlineCtx=new e.OfflineAudioContext(1,2,r.OfflineAudioContext?n.sampleRate:44100),i._unlocked=!1,i.compressor=o,i.analyser=a,i.events=new s.EventEmitter,i.volume=1,i.speed=1,i.muted=!1,i.paused=!1,"running"!==n.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return l(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){var i=function(t){e(new Error(t.message||"Unable to decode file"))},r=this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),i);r&&r.catch(i)},e}(A),I=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new P),this._htmlAudioContext=new C,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==P.AudioContext},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var r in t){var n=this._getOptions(t[r],e);i[r]=this.add(r,n)}return i}if(e instanceof R)return this._sounds[t]=e,e;var s=this._getOptions(e),o=R.from(s);return this._sounds[t]=o,o},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,c(c({},i),e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){_.setLegacy(t),this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!1,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),N={HTMLAudioContext:C,HTMLAudioMedia:E,HTMLAudioInstance:b},D=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),L={Filter:D,EqualizerFilter:function(t){function e(i,r,n,s,o,a,u,l,c,f){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=0),void 0===f&&(f=0);var d=this;if(!h().useLegacy){var p=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:r},{f:e.F125,type:"peaking",gain:n},{f:e.F250,type:"peaking",gain:s},{f:e.F500,type:"peaking",gain:o},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:u},{f:e.F4K,type:"peaking",gain:l},{f:e.F8K,type:"peaking",gain:c},{f:e.F16K,type:"highshelf",gain:f}].map((function(t){var e=h().context.audioContext.createBiquadFilter();return e.type=t.type,T.setParamValue(e.Q,1),e.frequency.value=t.f,T.setParamValue(e.gain,t.gain),e}));(d=t.call(this,p[0],p[p.length-1])||this).bands=p,d.bandsMap={};for(var m=0;m<d.bands.length;m++){var g=d.bands[m];m>0&&d.bands[m-1].connect(g),d.bandsMap[g.frequency.value]=g}return d}d=t.call(this,null)||this}return l(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);T.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){T.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(D),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!h().useLegacy){var r=h().context.audioContext.createWaveShaper();return(i=t.call(this,r)||this)._distortion=r,i.amount=e,i}i=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=44100,r=new Float32Array(i),n=Math.PI/180,s=0;s<i;++s)e=2*s/i-1,r[s]=(3+t)*e*20*n/(Math.PI+t*Math.abs(e));this._distortion.curve=r,this._distortion.oversample="4x"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(D),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!h().useLegacy){var r,n,s,o=h().context.audioContext;return o.createStereoPanner?s=r=o.createStereoPanner():((n=o.createPanner()).panningModel="equalpower",s=n),(i=t.call(this,s)||this)._stereo=r,i._panner=n,i.pan=e,i}i=t.call(this,null)||this}return l(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?T.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(D),ReverbFilter:function(t){function e(e,i,r){void 0===e&&(e=3),void 0===i&&(i=2),void 0===r&&(r=!1);var n=this;if(!h().useLegacy)return(n=t.call(this,null)||this)._seconds=n._clamp(e,1,50),n._decay=n._clamp(i,0,100),n._reverse=r,n._rebuild(),n;n=t.call(this,null)||this}return l(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!1,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=h().context.audioContext,i=e.sampleRate,r=i*this._seconds,n=e.createBuffer(2,r,i),s=n.getChannelData(0),o=n.getChannelData(1),a=0;a<r;a++)t=this._reverse?r-a:a,s[a]=(2*Math.random()-1)*Math.pow(1-t/r,this._decay),o[a]=(2*Math.random()-1)*Math.pow(1-t/r,this._decay);var u=h().context.audioContext.createConvolver();u.buffer=n,this.init(u)},e}(D),MonoFilter:function(t){function e(){var e=this;if(!h().useLegacy){var i=h().context.audioContext,r=i.createChannelSplitter(),n=i.createChannelMerger();return n.connect(r),(e=t.call(this,n,r)||this)._merger=n,e}e=t.call(this,null)||this}return l(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(D),TelephoneFilter:function(t){function e(){if(!h().useLegacy){var e=h().context.audioContext,i=e.createBiquadFilter(),r=e.createBiquadFilter(),n=e.createBiquadFilter(),s=e.createBiquadFilter();return i.type="lowpass",T.setParamValue(i.frequency,2e3),r.type="lowpass",T.setParamValue(r.frequency,2e3),n.type="highpass",T.setParamValue(n.frequency,500),s.type="highpass",T.setParamValue(s.frequency,500),i.connect(r),r.connect(n),n.connect(s),t.call(this,i,s)||this}t.call(this,null)}return l(e,t),e}(D)},k={WebAudioMedia:O,WebAudioInstance:w,WebAudioNodes:M,WebAudioContext:P,WebAudioUtils:T},B=0,F={playOnce:function(t,e){var i="alias"+B++;return h().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(h().remove(i),e&&e(t))},complete:function(){h().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=c({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var r=a.BaseTexture.from(i);if(!(t.media instanceof O))return r;var n=t.media,s=i.getContext("2d");s.fillStyle=e.fill;for(var o=n.buffer.getChannelData(0),h=Math.ceil(o.length/e.width),u=e.height/2,l=0;l<e.width;l++){for(var f=1,d=-1,p=0;p<h;p++){var m=o[l*h+p];m<f&&(f=m),m>d&&(d=m)}s.fillRect(l,(1+f)*u,1,Math.max(1,(d-f)*u))}return r},resolveUrl:g,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=R.from({singleInstance:!0});if(!(i.media instanceof O))return i;for(var r=i.media,n=i.context.audioContext.createBuffer(1,48e3*e,48e3),s=n.getChannelData(0),o=0;o<s.length;o++){var a=t*(o/n.sampleRate)*Math.PI;s[o]=2*Math.sin(a)}return r.buffer=n,i.isLoaded=!0,i},supported:d,extensions:f,validateFormats:p},j=(v=new I,r=v,v);n.Loader.registerPlugin(_)},"./node_modules/@pixi/sprite-animated/dist/esm/sprite-animated.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{AnimatedSprite:()=>a});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=i("./node_modules/@pixi/sprite/dist/esm/sprite.js"),s=i("./node_modules/@pixi/ticker/dist/esm/ticker.js"),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},o(t,e)},a=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this,e[0]instanceof r.Texture?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(s.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(s.Ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.from(t[n]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(s.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(s.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(n.Sprite)},"./node_modules/@pixi/sprite-tiling/dist/esm/sprite-tiling.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{TilingSprite:()=>c,TilingSpriteRenderer:()=>p});var r=i("./node_modules/@pixi/core/dist/esm/core.js"),n=i("./node_modules/@pixi/math/dist/esm/math.js"),s=i("./node_modules/@pixi/sprite/dist/esm/sprite.js"),o=i("./node_modules/@pixi/constants/dist/esm/constants.js"),a=i("./node_modules/@pixi/utils/dist/esm/utils.js"),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h(t,e)};function u(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l=new n.Point,c=function(t){function e(e,i,s){void 0===i&&(i=100),void 0===s&&(s=100);var o=t.call(this,e)||this;return o.tileTransform=new n.Transform,o._width=i,o._height=s,o.uvMatrix=o.texture.uvMatrix||new r.TextureMatrix(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return u(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._width,i=this._height,r=-e*this.anchor._x;if(l.x>=r&&l.x<r+e){var n=-i*this.anchor._y;if(l.y>=n&&l.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof r.Texture?t:r.Texture.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(s.Sprite),f="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",d=new n.Matrix,p=function(t){function e(e){var i=t.call(this,e)||this,n={globals:i.renderer.globalUniforms};return i.shader=r.Shader.from(f,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",n),i.simpleShader=r.Shader.from(f,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",n),i.quad=new r.QuadUv,i.state=r.State.for2d(),i}return u(e,t),e.prototype.render=function(t){var e=this.renderer,i=this.quad,r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var n=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(r=i.uvs)[0]=r[6]=-n,r[1]=r[3]=-s,r[2]=r[4]=1-n,r[5]=r[7]=1-s,i.invalidate();var h=t._texture,u=h.baseTexture,l=t.tileTransform.localTransform,c=t.uvMatrix,f=u.isPowerOfTwo&&h.frame.width===u.width&&h.frame.height===u.height;f&&(u._glTextures[e.CONTEXT_UID]?f=u.wrapMode!==o.WRAP_MODES.CLAMP:u.wrapMode===o.WRAP_MODES.CLAMP&&(u.wrapMode=o.WRAP_MODES.REPEAT));var p=f?this.simpleShader:this.shader,m=h.width,g=h.height,v=t._width,_=t._height;d.set(l.a*m/v,l.b*m/_,l.c*g/v,l.d*g/_,l.tx/v,l.ty/_),d.invert(),f?d.prepend(c.mapCoord):(p.uniforms.uMapCoord=c.mapCoord.toArray(!0),p.uniforms.uClampFrame=c.uClampFrame,p.uniforms.uClampOffset=c.uClampOffset),p.uniforms.uTransform=d.toArray(!0),p.uniforms.uColor=(0,a.premultiplyTintToRgba)(t.tint,t.worldAlpha,p.uniforms.uColor,u.alphaMode),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=h,e.shader.bind(p),e.geometry.bind(i),this.state.blendMode=(0,a.correctBlendMode)(t.blendMode,u.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(r.ObjectRenderer)},"./node_modules/@pixi/sprite/dist/esm/sprite.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Sprite:()=>f});var r=i("./node_modules/@pixi/constants/dist/esm/constants.js"),n=i("./node_modules/@pixi/core/dist/esm/core.js"),s=i("./node_modules/@pixi/display/dist/esm/display.js"),o=i("./node_modules/@pixi/math/dist/esm/math.js"),a=i("./node_modules/@pixi/settings/dist/esm/settings.js"),h=i("./node_modules/@pixi/utils/dist/esm/utils.js"),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)},l=new o.Point,c=new Uint16Array([0,1,2,0,2,3]),f=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new o.ObservablePoint(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=r.BLEND_MODES.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||n.Texture.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=c,i.pluginName="batch",i.isSprite=!0,i._roundPixels=a.settings.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,o=e.tx,h=e.ty,u=this.vertexData,l=t.trim,c=t.orig,f=this._anchor,d=0,p=0,m=0,g=0;if(l?(d=(p=l.x-f._x*c.width)+l.width,m=(g=l.y-f._y*c.height)+l.height):(d=(p=-f._x*c.width)+c.width,m=(g=-f._y*c.height)+c.height),u[0]=i*p+n*g+o,u[1]=s*g+r*p+h,u[2]=i*d+n*g+o,u[3]=s*g+r*d+h,u[4]=i*d+n*m+o,u[5]=s*m+r*d+h,u[6]=i*p+n*m+o,u[7]=s*m+r*p+h,this._roundPixels)for(var v=a.settings.RESOLUTION,_=0;_<u.length;++_)u[_]=Math.round((u[_]*v|0)/v)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,c=-r._x*i.width,f=c+i.width,d=-r._y*i.height,p=d+i.height;e[0]=s*c+a*d+u,e[1]=h*d+o*c+l,e[2]=s*f+a*d+u,e[3]=h*d+o*f+l,e[4]=s*f+a*p+u,e[5]=h*p+o*f+l,e[6]=s*c+a*p+u,e[7]=h*p+o*c+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return l.x>=r&&l.x<r+e&&(n=-i*this.anchor.y,l.y>=n&&l.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof n.Texture?t:n.Texture.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||n.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(s.Container)},"./node_modules/@pixi/spritesheet/dist/esm/spritesheet.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Spritesheet:()=>a,SpritesheetLoader:()=>h});var r=i("./node_modules/@pixi/math/dist/esm/math.js"),n=i("./node_modules/@pixi/core/dist/esm/core.js"),s=i("./node_modules/@pixi/utils/dist/esm/utils.js"),o=i("./node_modules/@pixi/loaders/dist/esm/loaders.js"),a=function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof n.Texture?t:null,this.baseTexture=t instanceof n.BaseTexture?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=(0,s.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,s=t.BATCH_SIZE;i-e<s&&i<this._frameKeys.length;){var o=this._frameKeys[i],a=this._frames[o],h=a.frame;if(h){var u,l=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,f=new r.Rectangle(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);u=a.rotated?new r.Rectangle(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):new r.Rectangle(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(l=new r.Rectangle(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[o]=new n.Texture(this.baseTexture,u,f,l,a.rotated?2:0,a.anchor),n.Texture.addToCache(this.textures[o],o)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var r=t[e][i];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),h=function(){function t(){}return t.use=function(e,i){var r,n,h=this,u=e.name+"_image";if(e.data&&e.type===o.LoaderResource.TYPE.JSON&&e.data.frames&&!h.resources[u]){var l=null===(n=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===n?void 0:n.related_multi_packs;if(Array.isArray(l))for(var c=function(t){if("string"!=typeof t)return"continue";var i=t.replace(".json",""),r=s.url.resolve(e.url.replace(h.baseUrl,""),t);if(h.resources[i]||Object.values(h.resources).some((function(t){return s.url.format(s.url.parse(t.url))===r})))return"continue";var n={crossOrigin:e.crossOrigin,loadType:o.LoaderResource.LOAD_TYPE.XHR,xhrType:o.LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};h.add(i,r,n)},f=0,d=l;f<d.length;f++)c(d[f]);var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},m=t.getResourcePath(e,h.baseUrl);h.add(u,m,p,(function(t){if(t.error)i(t.error);else{var r=new a(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:s.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}()},"./node_modules/@pixi/text-bitmap/dist/esm/text-bitmap.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{BitmapFont:()=>y,BitmapFontData:()=>f,BitmapFontLoader:()=>T,BitmapText:()=>x});var r=i("./node_modules/@pixi/math/dist/esm/math.js"),n=i("./node_modules/@pixi/settings/dist/esm/settings.js"),s=i("./node_modules/@pixi/mesh/dist/esm/mesh.js"),o=i("./node_modules/@pixi/utils/dist/esm/utils.js"),a=i("./node_modules/@pixi/core/dist/esm/core.js"),h=i("./node_modules/@pixi/text/dist/esm/text.js"),u=i("./node_modules/@pixi/display/dist/esm/display.js"),l=i("./node_modules/@pixi/loaders/dist/esm/loaders.js"),c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},c(t,e)},f=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},d=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var r in e){var n=e[r].match(/^[a-z]+/gm)[0],s=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var a in s){var h=s[a].split("="),u=h[0],l=h[1].replace(/"/gm,""),c=parseFloat(l),d=isNaN(c)?l:c;o[u]=d}i[n].push(o)}var p=new f;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),p=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new f,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=0;a<i.length;a++)e.info.push({face:i[a].getAttribute("face"),size:parseInt(i[a].getAttribute("size"),10)});for(a=0;a<r.length;a++)e.common.push({lineHeight:parseInt(r[a].getAttribute("lineHeight"),10)});for(a=0;a<n.length;a++)e.page.push({id:parseInt(n[a].getAttribute("id"),10)||0,file:n[a].getAttribute("file")});for(a=0;a<s.length;a++){var h=s[a];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(a=0;a<o.length;a++)e.kerning.push({first:parseInt(o[a].getAttribute("first"),10),second:parseInt(o[a].getAttribute("second"),10),amount:parseInt(o[a].getAttribute("amount"),10)});return e},t}(),m=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return p.test(e)}return!1},t.parse=function(t){var e=(new self.DOMParser).parseFromString(t,"text/xml");return p.parse(e)},t}(),g=[d,p,m];function v(t){for(var e=0;e<g.length;e++)if(g[e].test(t))return g[e];return null}function _(t,e,i,r,n,s,a){var u=i.text,l=i.fontProperties;e.translate(r,n),e.scale(s,s);var c=a.strokeThickness/2,f=-a.strokeThickness/2;e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,i,r,n,s){var o,a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var u=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,c=t.width/r-u-2*l,f=t.height/r-u-2*l,d=a.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var m=d.length+1,g=1;g<m;++g)p.push(g/m);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),i.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL){o=e.createLinearGradient(c/2,l,c/2,f+l);var v=0,_=(s.fontProperties.fontSize+i.strokeThickness)/f;for(g=0;g<n.length;g++)for(var y=s.lineHeight*g,b=0;b<d.length;b++){var E=y/f+("number"==typeof p[b]?p[b]:b/d.length)*_,x=Math.max(v,E);x=Math.min(x,1),o.addColorStop(x,d[b]),v=x}}else{o=e.createLinearGradient(l,f/2,c+l,f/2);var T=d.length+1,S=1;for(g=0;g<d.length;g++){var w;w="number"==typeof p[g]?p[g]:S/T,o.addColorStop(w,d[g]),S++}}return o}(t,e,a,s,[u],i),e.strokeStyle=a.stroke;var d=a.dropShadowColor,p=(0,o.hex2rgb)("number"==typeof d?d:(0,o.string2hex)(d));a.dropShadow?(e.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+a.dropShadowAlpha+")",e.shadowBlur=a.dropShadowBlur,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),a.stroke&&a.strokeThickness&&e.strokeText(u,c,f+i.lineHeight-l.descent),a.fill&&e.fillText(u,c,f+i.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var y=function(){function t(t,e,i){var n=t.info[0],s=t.common[0],h=t.page[0],u=(0,o.getResolutionOfUrl)(h.file),l={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=l;for(var c=0;c<t.page.length;c++){var f=t.page[c],d=f.id,p=f.file;l[d]=e instanceof Array?e[c]:e[p]}for(c=0;c<t.char.length;c++){var m=t.char[c],g=(d=m.id,m.page),v=t.char[c],_=v.x,y=v.y,b=v.width,E=v.height,x=v.xoffset,T=v.yoffset,S=v.xadvance;_/=u,y/=u,b/=u,E/=u,x/=u,T/=u,S/=u;var w=new r.Rectangle(_+l[g].frame.x/u,y+l[g].frame.y/u,b,E);this.chars[d]={xOffset:x,yOffset:T,xAdvance:S,kerning:{},texture:new a.Texture(l[g].baseTexture,w),page:g}}for(c=0;c<t.kerning.length;c++){var A=t.kerning[c],M=A.first,O=A.second,R=A.amount;M/=u,O/=u,R/=u,this.chars[O]&&(this.chars[O].kerning[M]=R)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,r){var n;if(e instanceof f)n=e;else{var s=v(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}i instanceof a.Texture&&(i=[i]);var o=new t(n,i,r);return t.available[o.font]=o,o},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,r),s=n.chars,o=n.padding,u=n.resolution,l=n.textureWidth,c=n.textureHeight,d=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,n.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s),p=i instanceof h.TextStyle?i:new h.TextStyle(i),m=l,g=new f;g.info[0]={face:p.fontFamily,size:p.fontSize},g.common[0]={lineHeight:p.fontSize};for(var v,y,b,E=0,x=0,T=0,S=[],w=0;w<d.length;w++){v||((v=document.createElement("canvas")).width=l,v.height=c,y=v.getContext("2d"),b=new a.BaseTexture(v,{resolution:u}),S.push(new a.Texture(b)),g.page.push({id:S.length-1,file:""}));var A=h.TextMetrics.measureText(d[w],p,!1,v),M=A.width,O=Math.ceil(A.height),R=Math.ceil(("italic"===p.fontStyle?2:1)*M);if(x>=c-O*u){if(0===x)throw new Error("[BitmapFont] textureHeight "+c+"px is too small for "+p.fontSize+"px fonts");--w,v=null,y=null,b=null,x=0,E=0,T=0}else if(T=Math.max(O+A.fontProperties.descent,T),R*u+E>=m)--w,x+=T*u,x=Math.ceil(x),E=0,T=0;else{_(v,y,A,E,x,u,p);var C=A.text.charCodeAt(0);g.char.push({id:C,page:S.length-1,x:E/u,y:x/u,width:R,height:O,xoffset:0,yoffset:0,xadvance:Math.ceil(M-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0))}),E+=(R+2*o)*u,E=Math.ceil(E)}}w=0;for(var P=d.length;w<P;w++)for(var I=d[w],N=0;N<P;N++){var D=d[N],L=y.measureText(I).width,k=y.measureText(D).width,B=y.measureText(I+D).width-(L+k);B&&g.kerning.push({first:I.charCodeAt(0),second:D.charCodeAt(0),amount:B})}var F=new t(g,S,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=F,F},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),b=[],E=[],x=function(t){function e(i,s){void 0===s&&(s={});var o=t.call(this)||this;o._tint=16777215;var a=Object.assign({},e.styleDefaults,s),h=a.align,u=a.tint,l=a.maxWidth,c=a.letterSpacing,f=a.fontName,d=a.fontSize;if(!y.available[f])throw new Error('Missing BitmapFont "'+f+'"');return o._activePagesMeshData=[],o._textWidth=0,o._textHeight=0,o._align=h,o._tint=u,o._fontName=f,o._fontSize=d||y.available[f].size,o._text=i,o._maxWidth=l,o._maxLineHeight=0,o._letterSpacing=c,o._anchor=new r.ObservablePoint((function(){o.dirty=!0}),o,0,0),o._roundPixels=n.settings.ROUND_PIXELS,o.dirty=!0,o._textureCache={},o}return function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=y.available[this._fontName],i=this._fontSize/e.size,n=new r.Point,h=[],u=[],l=[],c=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",f=c.length,d=this._maxWidth*e.size/this._fontSize,p=null,m=0,g=0,v=0,_=-1,x=0,T=0,S=0,w=0,A=0;A<f;A++){var M=c.charCodeAt(A),O=c.charAt(A);if(/(?:\s)/.test(O)&&(_=A,x=m,w++),"\r"!==O&&"\n"!==O){var R=e.chars[M];if(R){p&&R.kerning[p]&&(n.x+=R.kerning[p]);var C=E.pop()||{texture:a.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new r.Point};C.texture=R.texture,C.line=v,C.charCode=M,C.position.x=n.x+R.xOffset+this._letterSpacing/2,C.position.y=n.y+R.yOffset,C.prevSpaces=w,h.push(C),m=C.position.x+R.texture.orig.width,n.x+=R.xAdvance+this._letterSpacing,S=Math.max(S,R.yOffset+R.texture.height),p=M,-1!==_&&d>0&&n.x>d&&(++T,(0,o.removeItems)(h,1+_-T,1+A-_),A=_,_=-1,u.push(x),l.push(h.length>0?h[h.length-1].prevSpaces:0),g=Math.max(g,x),v++,n.x=0,n.y+=e.lineHeight,p=null,w=0)}}else u.push(m),l.push(-1),g=Math.max(g,m),++v,++T,n.x=0,n.y+=e.lineHeight,p=null,w=0}var P=c.charAt(c.length-1);"\r"!==P&&"\n"!==P&&(/(?:\s)/.test(P)&&(m=x),u.push(m),g=Math.max(g,m),l.push(-1));var I=[];for(A=0;A<=v;A++){var N=0;"right"===this._align?N=g-u[A]:"center"===this._align?N=(g-u[A])/2:"justify"===this._align&&(N=l[A]<0?0:(g-u[A])/l[A]),I.push(N)}var D=h.length,L={},k=[],B=this._activePagesMeshData;for(A=0;A<B.length;A++)b.push(B[A]);for(A=0;A<D;A++){var F=(V=h[A].texture).baseTexture.uid;if(!L[F]){if(!(tt=b.pop())){var j=new s.MeshGeometry,G=new s.MeshMaterial(a.Texture.EMPTY);tt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new s.Mesh(j,G),vertices:null,uvs:null,indices:null}}tt.index=0,tt.indexCount=0,tt.vertexCount=0,tt.uvsCount=0,tt.total=0;var U=this._textureCache;U[F]=U[F]||new a.Texture(V.baseTexture),tt.mesh.texture=U[F],tt.mesh.tint=this._tint,k.push(tt),L[F]=tt}L[F].total++}for(A=0;A<B.length;A++)-1===k.indexOf(B[A])&&this.removeChild(B[A].mesh);for(A=0;A<k.length;A++)k[A].mesh.parent!==this&&this.addChild(k[A].mesh);for(var A in this._activePagesMeshData=k,L){var X=(tt=L[A]).total;if(!((null===(t=tt.indices)||void 0===t?void 0:t.length)>6*X)||tt.vertices.length<2*s.Mesh.BATCHABLE_SIZE)tt.vertices=new Float32Array(8*X),tt.uvs=new Float32Array(8*X),tt.indices=new Uint16Array(6*X);else for(var z=tt.total,H=tt.vertices,Y=4*z*2;Y<H.length;Y++)H[Y]=0;tt.mesh.size=6*X}for(A=0;A<D;A++){var W=(O=h[A]).position.x+I[O.line]*("justify"===this._align?O.prevSpaces:1);this._roundPixels&&(W=Math.round(W));var V,$=W*i,q=O.position.y*i,Z=L[(V=O.texture).baseTexture.uid],J=V.frame,K=V._uvs,Q=Z.index++;Z.indices[6*Q+0]=0+4*Q,Z.indices[6*Q+1]=1+4*Q,Z.indices[6*Q+2]=2+4*Q,Z.indices[6*Q+3]=0+4*Q,Z.indices[6*Q+4]=2+4*Q,Z.indices[6*Q+5]=3+4*Q,Z.vertices[8*Q+0]=$,Z.vertices[8*Q+1]=q,Z.vertices[8*Q+2]=$+J.width*i,Z.vertices[8*Q+3]=q,Z.vertices[8*Q+4]=$+J.width*i,Z.vertices[8*Q+5]=q+J.height*i,Z.vertices[8*Q+6]=$,Z.vertices[8*Q+7]=q+J.height*i,Z.uvs[8*Q+0]=K.x0,Z.uvs[8*Q+1]=K.y0,Z.uvs[8*Q+2]=K.x1,Z.uvs[8*Q+3]=K.y1,Z.uvs[8*Q+4]=K.x2,Z.uvs[8*Q+5]=K.y2,Z.uvs[8*Q+6]=K.x3,Z.uvs[8*Q+7]=K.y3}for(var A in this._textWidth=g*i,this._textHeight=(n.y+e.lineHeight)*i,L){var tt=L[A];if(0!==this.anchor.x||0!==this.anchor.y)for(var et=0,it=this._textWidth*this.anchor.x,rt=this._textHeight*this.anchor.y,nt=0;nt<tt.total;nt++)tt.vertices[et++]-=it,tt.vertices[et++]-=rt,tt.vertices[et++]-=it,tt.vertices[et++]-=rt,tt.vertices[et++]-=it,tt.vertices[et++]-=rt,tt.vertices[et++]-=it,tt.vertices[et++]-=rt;this._maxLineHeight=S*i;var st=tt.mesh.geometry.getBuffer("aVertexPosition"),ot=tt.mesh.geometry.getBuffer("aTextureCoord"),at=tt.mesh.geometry.getIndex();st.data=tt.vertices,ot.data=tt.uvs,at.data=tt.indices,st.update(),ot.update(),at.update()}for(A=0;A<h.length;A++)E.push(h[A])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!y.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var i=this._textureCache;for(var r in i)i[r].destroy(),delete i[r];this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(u.Container),T=function(){function t(){}return t.add=function(){l.LoaderResource.setExtensionXhrType("fnt",l.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var r=v(e.data);if(r)for(var n=t.getBaseUrl(this,e),s=r.parse(e.data),o={},a=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=y.install(s,o,!0),i())},h=0;h<s.page.length;++h){var u=s.page[h].file,c=n+u,f=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===c){p.metadata.pageFile=u,p.texture?a(p):p.onAfterMiddleware.add(a),f=!0;break}}if(!f){var m={crossOrigin:e.crossOrigin,loadType:l.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(c,m,a)}}else i()},t.getBaseUrl=function(e,i){var r=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()},"./node_modules/@pixi/text/dist/esm/text.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{TEXT_GRADIENT:()=>r,Text:()=>y,TextMetrics:()=>g,TextStyle:()=>f});var r,n=i("./node_modules/@pixi/sprite/dist/esm/sprite.js"),s=i("./node_modules/@pixi/core/dist/esm/core.js"),o=i("./node_modules/@pixi/settings/dist/esm/settings.js"),a=i("./node_modules/@pixi/math/dist/esm/math.js"),h=i("./node_modules/@pixi/utils/dist/esm/utils.js"),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},u(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(r||(r={}));var l={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:r.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},c=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f=function(){function t(t){this.styleID=0,this.reset(),m(this,t,t)}return t.prototype.clone=function(){var e={};return m(e,this,l),new t(e)},t.prototype.reset=function(){m(this,l,l)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=p(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=p(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=p(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&c.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function d(t){return"number"==typeof t?(0,h.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function p(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=d(t[e]);return t}return d(t)}function m(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var g=function(){function t(t,e,i,r,n,s,o,a,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,i,r,n){void 0===n&&(n=t._canvas),r=null==r?i.wordWrap:r;var s=i.toFontString(),o=t.measureFont(s);0===o.fontSize&&(o.fontSize=i.fontSize,o.ascent=i.fontSize);var a=n.getContext("2d");a.font=s;for(var h=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),u=new Array(h.length),l=0,c=0;c<h.length;c++){var f=a.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;u[c]=f,l=Math.max(l,f)}var d=l+i.strokeThickness;i.dropShadow&&(d+=i.dropShadowDistance);var p=i.lineHeight||o.fontSize+i.strokeThickness,m=Math.max(p,o.fontSize+i.strokeThickness)+(h.length-1)*(p+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,d,m,h,u,p+i.leading,l,o)},t.wordWrap=function(e,i,r){void 0===r&&(r=t._canvas);for(var n=r.getContext("2d"),s=0,o="",a="",h=Object.create(null),u=i.letterSpacing,l=i.whiteSpace,c=t.collapseSpaces(l),f=t.collapseNewlines(l),d=!c,p=i.wordWrapWidth+u,m=t.tokenize(e),g=0;g<m.length;g++){var v=m[g];if(t.isNewline(v)){if(!f){a+=t.addLine(o),d=!c,o="",s=0;continue}v=" "}if(c){var _=t.isBreakingSpace(v),y=t.isBreakingSpace(o[o.length-1]);if(_&&y)continue}var b=t.getFromCache(v,u,h,n);if(b>p)if(""!==o&&(a+=t.addLine(o),o="",s=0),t.canBreakWords(v,i.breakWords))for(var E=t.wordWrapSplit(v),x=0;x<E.length;x++){for(var T=E[x],S=1;E[x+S];){var w=E[x+S],A=T[T.length-1];if(t.canBreakChars(A,w,v,x,i.breakWords))break;T+=w,S++}x+=T.length-1;var M=t.getFromCache(T,u,h,n);M+s>p&&(a+=t.addLine(o),d=!1,o="",s=0),o+=T,s+=M}else{o.length>0&&(a+=t.addLine(o),o="",s=0);var O=g===m.length-1;a+=t.addLine(v,!O),d=!1,o="",s=0}else b+s>p&&(d=!1,a+=t.addLine(o),o="",s=0),(o.length>0||!t.isBreakingSpace(v)||d)&&(o+=v,s+=b)}return a+t.addLine(o,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if("number"!=typeof n){var s=t.length*e;n=r.measureText(t).width+s,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,i){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var s=e[n],o=e[n+1];t.isBreakingSpace(s,o)||t.isNewline(s)?(""!==r&&(i.push(r),r=""),i.push(s)):r+=s}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},r=t._canvas,n=t._context;n.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width),a=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),h=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,r.width=o,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,o,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);var u=n.getImageData(0,0,o,h).data,l=u.length,c=4*o,f=0,d=0,p=!1;for(f=0;f<a;++f){for(var m=0;m<c;m+=4)if(255!==u[d+m]){p=!0;break}if(p)break;d+=c}for(i.ascent=a-f,d=l-c,p=!1,f=h;f>a;--f){for(m=0;m<c;m+=4)if(255!==u[d+m]){p=!0;break}if(p)break;d-=c}return i.descent=f-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),v=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();v.width=v.height=10,g._canvas=v,g._context=v.getContext("2d"),g._fonts={},g.METRICS_STRING="|ÉqÅ",g.BASELINE_SYMBOL="M",g.BASELINE_MULTIPLIER=1.4,g.HEIGHT_MULTIPLIER=2,g._newlines=[10,13],g._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var _={texture:!0,children:!1,baseTexture:!0},y=function(t){function e(e,i,r){var n=this,h=!1;r||(r=document.createElement("canvas"),h=!0),r.width=3,r.height=3;var u=s.Texture.from(r);return u.orig=new a.Rectangle,u.trim=new a.Rectangle,(n=t.call(this,u)||this)._ownCanvas=h,n.canvas=r,n.context=n.canvas.getContext("2d"),n._resolution=o.settings.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=e,n.style=i,n.localStyleID=-1,n}return function(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,n,s=this.context,o=g.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,u=o.height,l=o.lines,c=o.lineHeight,f=o.lineWidths,d=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*i.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var m=i.dropShadow?2:1,v=0;v<m;++v){var _=i.dropShadow&&0===v,y=_?Math.ceil(Math.max(1,u)+2*i.padding):0,b=y*this._resolution;if(_){s.fillStyle="black",s.strokeStyle="black";var E=i.dropShadowColor,x=(0,h.hex2rgb)("number"==typeof E?E:(0,h.string2hex)(E));s.shadowColor="rgba("+255*x[0]+","+255*x[1]+","+255*x[2]+","+i.dropShadowAlpha+")",s.shadowBlur=i.dropShadowBlur,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+b}else s.fillStyle=this._generateFillStyle(i,l,o),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var T=(c-p.fontSize)/2;(!e.nextLineHeightBehavior||c-p.fontSize<0)&&(T=0);for(var S=0;S<l.length;S++)r=i.strokeThickness/2,n=i.strokeThickness/2+S*c+p.ascent+T,"right"===i.align?r+=d-f[S]:"center"===i.align&&(r+=(d-f[S])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[S],r+i.padding,n+i.padding-y,!0),i.fill&&this.drawLetterSpacing(l[S],r+i.padding,n+i.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,r){void 0===r&&(r=!1);var n=this._style.letterSpacing;if(0!==n)for(var s=e,o=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,h=0,u=0;u<o.length;++u){var l=o[u];r?this.context.strokeText(l,s,i):this.context.fillText(l,s,i),s+=a-(h=this.context.measureText(t.substring(u+1)).width)+n,a=h}else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,h.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,s=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var n,s=t.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,h=this.canvas.width/this._resolution-o-2*a,u=this.canvas.height/this._resolution-o-2*a,l=s.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var f=l.length+1,d=1;d<f;++d)c.push(d/f);if(l.unshift(s[0]),c.unshift(0),l.push(s[s.length-1]),c.push(1),t.fillGradientType===r.LINEAR_VERTICAL){n=this.context.createLinearGradient(h/2,a,h/2,u+a);var p=i.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var m=i.lineHeight*(d-1)+p,g=i.lineHeight*d,v=g;d>0&&m>g&&(v=(g+m)/2);var _=g+p,y=i.lineHeight*(d+1),b=_;d+1<e.length&&y<_&&(b=(_+y)/2);for(var E=(b-v)/u,x=0;x<l.length;x++){var T;T="number"==typeof c[x]?c[x]:x/l.length;var S=Math.min(1,Math.max(0,v/u+T*E));S=Number(S.toFixed(5)),n.addColorStop(S,l[x])}}}else{n=this.context.createLinearGradient(a,u/2,h+a,u/2);var w=l.length+1,A=1;for(d=0;d<l.length;d++){var M;M="number"==typeof c[d]?c[d]:A/w,n.addColorStop(M,l[d]),A++}}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},_,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof f?t:new f(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(n.Sprite)},"./node_modules/@pixi/ticker/dist/esm/ticker.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Ticker:()=>o,TickerPlugin:()=>a,UPDATE_PRIORITY:()=>r});var r,n=i("./node_modules/@pixi/settings/dist/esm/settings.js");n.settings.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var s=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),o=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s(null,null,1/0),this.deltaMS=1/n.settings.TARGET_FPMS,this.elapsedMS=1/n.settings.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new s(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new s(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*n.settings.TARGET_FPMS;for(var r=this._head,s=r.next;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,n.settings.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},"./node_modules/@pixi/utils/dist/esm/utils.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{isMobile:()=>r.isMobile,EventEmitter:()=>s.a,earcut:()=>a.a,BaseTextureCache:()=>U,CanvasRenderTarget:()=>H,DATA_URI:()=>V,ProgramCache:()=>j,TextureCache:()=>G,clearTextureCache:()=>z,correctBlendMode:()=>x,createIndicesForQuads:()=>A,decomposeDataUri:()=>$,deprecation:()=>F,destroyTextureCache:()=>X,determineCrossOrigin:()=>q,getBufferType:()=>M,getResolutionOfUrl:()=>Z,hex2rgb:()=>v,hex2string:()=>_,interleaveTypedArrays:()=>R,isPow2:()=>P,isWebGLSupported:()=>m,log2:()=>I,nextPow2:()=>C,premultiplyBlendMode:()=>E,premultiplyRgba:()=>T,premultiplyTint:()=>S,premultiplyTintToRgba:()=>w,removeItems:()=>N,rgb2hex:()=>b,sayHello:()=>p,sign:()=>D,skipHello:()=>d,string2hex:()=>y,trimCanvas:()=>Y,uid:()=>k,url:()=>l});var r=i("./node_modules/@pixi/settings/dist/esm/settings.js"),n=i("./node_modules/eventemitter3/index.js"),s=i.n(n),o=i("./node_modules/earcut/src/earcut.js"),a=i.n(o),h=i("./node_modules/url/url.js"),u=i("./node_modules/@pixi/constants/dist/esm/constants.js"),l={parse:h.parse,format:h.format,resolve:h.resolve};r.settings.RETINA_PREFIX=/@([0-9\.]+)x/,r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var c,f=!1;function d(){f=!0}function p(t){var e;if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.1.3 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,i)}else self.console&&self.console.log("PixiJS 6.1.3 - "+t+" - http://www.pixijs.com/");f=!0}}function m(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch(t){return!1}}()),c}var g={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function _(t){var e=t.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function y(t){return"string"==typeof t&&"#"===(t=g[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var E=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[u.BLEND_MODES.NORMAL_NPM]=u.BLEND_MODES.NORMAL,t[u.BLEND_MODES.ADD_NPM]=u.BLEND_MODES.ADD,t[u.BLEND_MODES.SCREEN_NPM]=u.BLEND_MODES.SCREEN,e[u.BLEND_MODES.NORMAL]=u.BLEND_MODES.NORMAL_NPM,e[u.BLEND_MODES.ADD]=u.BLEND_MODES.ADD_NPM,e[u.BLEND_MODES.SCREEN]=u.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function x(t,e){return E[e?1:0][t]}function T(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function S(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n*e+.5|0)}function w(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function A(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function M(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var O={Float32Array,Uint32Array,Int32Array,Uint8Array};function R(t,e){for(var i=0,r=0,n={},s=0;s<t.length;s++)r+=e[s],i+=t[s].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(s=0;s<t.length;s++){var u=e[s],l=t[s],c=M(l);n[c]||(n[c]=new O[c](o)),a=n[c];for(var f=0;f<l.length;f++)a[(f/u|0)*r+h+f%u]=l[f];h+=u}return new Float32Array(o)}function C(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)}function P(t){return!(t&t-1||!t)}function I(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function N(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var s=n-(i=e+i>n?n-e:i);for(r=e;r<s;++r)t[r]=t[r+i];t.length=s}}function D(t){return 0===t?0:t<0?-1:1}var L=0;function k(){return++L}var B={};function F(t,e,i){if(void 0===i&&(i=3),!B[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),B[e]=!0}}var j={},G=Object.create(null),U=Object.create(null);function X(){var t;for(t in G)G[t].destroy();for(t in U)U[t].destroy()}function z(){var t;for(t in G)delete G[t];for(t in U)delete U[t]}var H=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.settings.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function Y(t){var e,i,r,n=t.width,s=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,n,s).data,h=a.length,u={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%n,r=~~(e/4/n),null===u.top&&(u.top=r),(null===u.left||i<u.left)&&(u.left=i),(null===u.right||u.right<i)&&(u.right=i+1),(null===u.bottom||u.bottom<r)&&(u.bottom=r));return null!==u.top&&(n=u.right-u.left,s=u.bottom-u.top+1,l=o.getImageData(u.left,u.top,n,s)),{height:s,width:n,data:l}}var W,V=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function $(t){var e=V.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function q(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,W||(W=document.createElement("a")),W.href=t;var i=l.parse(W.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function Z(t,e){var i=r.settings.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}},"./node_modules/@scena/dragscroll/dist/dragscroll.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var r=i("./node_modules/@scena/event-emitter/dist/event-emitter.esm.js"),n=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)};function o(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startRect=null,e.startPos=[],e.prevTime=0,e.timer=0,e}!function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t);var i=e.prototype;return i.dragStart=function(t,e){var i=e.container,r=0,n=0,s=0,o=0;if(i===document.body)s=window.innerWidth,o=window.innerHeight;else{var a=i.getBoundingClientRect();r=a.top,n=a.left,s=a.width,o=a.height}this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:n,width:s,height:o}},i.drag=function(t,e){var i=this,r=t.clientX,s=t.clientY,a=e.container,h=e.threshold,u=void 0===h?0:h,l=e.throttleTime,c=void 0===l?0:l,f=e.getScrollPosition,d=void 0===f?o:f,p=this.startRect,m=this.startPos,g=(0,n.now)(),v=Math.max(c+this.prevTime-g,0),_=[0,0];if(p.top>s-u?(m[1]>p.top||s<m[1])&&(_[1]=-1):p.top+p.height<s+u&&(m[1]<p.top+p.height||s>m[1])&&(_[1]=1),p.left>r-u?(m[0]>p.left||r<m[0])&&(_[0]=-1):p.left+p.width<r+u&&(m[0]<p.left+p.width||r>m[0])&&(_[0]=1),clearTimeout(this.timer),!_[0]&&!_[1])return!1;if(v>0)return this.timer=window.setTimeout((function(){i.drag(t,e)}),v),!1;this.prevTime=g;var y=d({container:a,direction:_});this.trigger("scroll",{container:a,direction:_,inputEvent:t});var b=d({container:a,direction:_}),E=b[0]-y[0],x=b[1]-y[1];return!(!E&&!x||(this.trigger("move",{offsetX:_[0]?E:0,offsetY:_[1]?x:0,inputEvent:t}),c&&(this.timer=window.setTimeout((function(){i.drag(t,e)}),c)),0))},i.dragEnd=function(){clearTimeout(this.timer)},e}(r.default);const h=a},"./node_modules/@scena/event-emitter/dist/event-emitter.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var r=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),n=function(){return n=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)},s=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if((0,r.isObject)(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if((0,r.isObject)(t))for(var i in t)this.off(i);else if(e){var n=this._events[t];if(n){var s=(0,r.findIndex)(n,(function(t){return t.listener===e}));s>-1&&n.splice(s,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var i=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){i._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var i=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var n=!1;return e.eventType=t,e.stop=function(){n=!0},e.currentTarget=this,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r}(r).forEach((function(r){r.listener(e),r.once&&i.off(t,r.listener)})),!n},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,i){var r=this._events;r[t]=r[t]||[],r[t].push(n({listener:e},i))},t}();const o=s},"./node_modules/@scena/matrix/dist/matrix.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{calculate:()=>b,convertCSStoMatrix:()=>_,convertDimension:()=>d,convertMatrixtoCSS:()=>y,convertPositionMatrix:()=>f,createIdentityMatrix:()=>R,createOriginMatrix:()=>P,createRotateMatrix:()=>O,createScaleMatrix:()=>C,createWarpMatrix:()=>I,fromTranslation:()=>c,getCenter:()=>N,getOrigin:()=>l,ignoreDimension:()=>a,invert:()=>h,matrix3d:()=>M,minus:()=>v,multiplies:()=>p,multiply:()=>m,plus:()=>g,rotate:()=>w,rotateX3d:()=>E,rotateY3d:()=>x,rotateZ3d:()=>T,scale3d:()=>S,translate3d:()=>A,transpose:()=>u});var r=i("./node_modules/@daybrush/utils/dist/utils.esm.js");function n(t,e,i,r,n,s){for(var o=0;o<n;++o){var a=i+o*n,h=r+o*n;t[a]+=t[h]*s,e[a]+=e[h]*s}}function s(t,e,i,r,n){for(var s=0;s<n;++s){var o=i+s*n,a=r+s*n,h=t[o],u=e[o];t[o]=t[a],t[a]=h,e[o]=e[a],e[a]=u}}function o(t,e,i,r,n){for(var s=0;s<r;++s){var o=i+s*r;t[o]/=n,e[o]/=n}}function a(t,e,i){void 0===i&&(i=Math.sqrt(t.length));for(var r=t.slice(),n=0;n<i;++n)r[n*i+e-1]=0,r[(e-1)*i+n]=0;return r[(e-1)*(i+1)]=1,r}function h(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var i=t.slice(),a=R(e),h=0;h<e;++h){var u=e*h+h;if(!(0,r.throttle)(i[u],r.TINY_NUM))for(var l=h+1;l<e;++l)if(i[e*h+l]){s(i,a,h,l,e);break}if(!(0,r.throttle)(i[u],r.TINY_NUM))return[];for(o(i,a,h,e,i[u]),l=0;l<e;++l){var c=l,f=i[l+h*e];(0,r.throttle)(f,r.TINY_NUM)&&h!==l&&n(i,a,c,h,e,-f)}}return a}function u(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var i=[],r=0;r<e;++r)for(var n=0;n<e;++n)i[n*e+r]=t[e*r+n];return i}function l(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var i=[],r=t[e*e-1],n=0;n<e-1;++n)i[n]=t[e*(e-1)+n]/r;return i[e-1]=0,i}function c(t,e){for(var i=R(e),r=0;r<e-1;++r)i[e*(e-1)+r]=t[r]||0;return i}function f(t,e){for(var i=t.slice(),r=t.length;r<e-1;++r)i[r]=0;return i[e-1]=1,i}function d(t,e,i){if(void 0===e&&(e=Math.sqrt(t.length)),e===i)return t;for(var r=R(i),n=Math.min(e,i),s=0;s<n-1;++s){for(var o=0;o<n-1;++o)r[s*i+o]=t[s*e+o];r[(s+1)*i-1]=t[(s+1)*e-1],r[(i-1)*i+s]=t[(e-1)*e+s]}return r[i*i-1]=t[e*e-1],r}function p(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=R(t);return e.forEach((function(e){r=m(r,e,t)})),r}function m(t,e,i){void 0===i&&(i=Math.sqrt(t.length));var r=[],n=t.length/i,s=e.length/n;if(!n)return e;if(!s)return t;for(var o=0;o<i;++o)for(var a=0;a<s;++a){r[a*i+o]=0;for(var h=0;h<n;++h)r[a*i+o]+=t[h*i+o]*e[a*n+h]}return r}function g(t,e){for(var i=Math.min(t.length,e.length),r=t.slice(),n=0;n<i;++n)r[n]=r[n]+e[n];return r}function v(t,e){for(var i=Math.min(t.length,e.length),r=t.slice(),n=0;n<i;++n)r[n]=r[n]-e[n];return r}function _(t,e){return void 0===e&&(e=6===t.length),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function y(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function b(t,e,i){void 0===i&&(i=e.length);var r=m(t,e,i),n=r[i-1];return r.map((function(t){return t/n}))}function E(t,e){return m(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function x(t,e){return m(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function T(t,e){return m(t,O(e,4))}function S(t,e){var i=e[0],r=void 0===i?1:i,n=e[1],s=void 0===n?1:n,o=e[2];return m(t,[r,0,0,0,0,s,0,0,0,0,void 0===o?1:o,0,0,0,0,1],4)}function w(t,e){return b(O(e,3),f(t,3))}function A(t,e){var i=e[0],r=void 0===i?0:i,n=e[1],s=void 0===n?0:n,o=e[2];return m(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,s,void 0===o?0:o,1],4)}function M(t,e){return m(t,e,4)}function O(t,e){var i=Math.cos(t),r=Math.sin(t),n=R(e);return n[0]=i,n[1]=r,n[e]=-r,n[e+1]=i,n}function R(t){for(var e=t*t,i=[],r=0;r<e;++r)i[r]=r%(t+1)?0:1;return i}function C(t,e){for(var i=R(e),r=Math.min(t.length,e-1),n=0;n<r;++n)i[(e+1)*n]=t[n];return i}function P(t,e){for(var i=R(e),r=Math.min(t.length,e-1),n=0;n<r;++n)i[e*(e-1)+n]=t[n];return i}function I(t,e,i,r,n,s,o,a){var l=t[0],c=t[1],f=e[0],p=e[1],g=i[0],v=i[1],_=r[0],y=r[1],b=n[0],E=n[1],x=s[0],T=s[1],S=o[0],w=o[1],A=a[0],M=a[1],O=h([l,0,f,0,g,0,_,0,c,0,p,0,v,0,y,0,1,0,1,0,1,0,1,0,0,l,0,f,0,g,0,_,0,c,0,p,0,v,0,y,0,1,0,1,0,1,0,1,-b*l,-E*l,-x*f,-T*f,-S*g,-w*g,-A*_,-M*_,-b*c,-E*c,-x*p,-T*p,-S*v,-w*v,-A*y,-M*y],8);if(!O.length)return[];var R=m(O,[b,E,x,T,S,w,A,M],8);return R[8]=1,d(u(R),3,4)}function N(t){return[0,1].map((function(e){return(0,r.average)(t.map((function(t){return t[e]})))}))}},"./node_modules/@socket.io/component-emitter/index.js":(t,e)=>{function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}e.Emitter=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<r.length;n++)if((i=r[n])===e||i.fn===e){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){r=0;for(var n=(i=i.slice(0)).length;r<n;++r)i[r].apply(this,e)}return this},i.prototype.emitReserved=i.prototype.emit,i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},"./node_modules/@tweenjs/tween.js/dist/tween.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>y,Easing:()=>n,Group:()=>o,Interpolation:()=>a,Sequence:()=>h,Tween:()=>l,VERSION:()=>c,add:()=>g,getAll:()=>p,nextId:()=>f,now:()=>s,remove:()=>v,removeAll:()=>m,update:()=>_});var r,n={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*n.Bounce.In(2*t):.5*n.Bounce.Out(2*t-1)+.5}}},s="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},o=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=s()),void 0===e&&(e=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var n=this._tweens[i[r]],o=!e;n&&!1===n.update(t,o)&&!e&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),a={Linear:function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r),s=a.Utils.Linear;return e<0?s(t[0],t[1],r):e>1?s(t[i],t[i-1],i-r):s(t[n],t[n+1>i?i:n+1],r-n)},Bezier:function(t,e){for(var i=0,r=t.length-1,n=Math.pow,s=a.Utils.Bernstein,o=0;o<=r;o++)i+=n(1-e,r-o)*n(e,o)*t[o]*s(r,o);return i},CatmullRom:function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r),s=a.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(n=Math.floor(r=i*(1+e))),s(t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i],r-n)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],r-i)-t[i]):s(t[n?n-1:0],t[n],t[i<n+1?i:n+1],t[i<n+2?i:n+2],r-n)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=a.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(r=[1],function(t){var e=1;if(r[t])return r[t];for(var i=t;i>1;i--)e*=i;return r[t]=e,e}),CatmullRom:function(t,e,i,r,n){var s=.5*(i-t),o=.5*(r-e),a=n*n;return(2*e-2*i+s+o)*(n*a)+(-3*e+3*i-2*s-o)*a+s*n+e}}},h=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),u=new o,l=function(){function t(t,e){void 0===e&&(e=u),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=n.Linear.None,this._interpolationFunction=a.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=h.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?s()+parseFloat(t):t:s(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,i,r){for(var n in i){var s=t[n],o=Array.isArray(s),a=o?"array":typeof s,h=!o&&Array.isArray(i[n]);if("undefined"!==a&&"function"!==a){if(h){var u=i[n];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,s)),i[n]=[s].concat(u)}if("object"!==a&&!o||!s||h)void 0===e[n]&&(e[n]=s),o||(e[n]*=1),r[n]=h?i[n].slice().reverse():e[n]||0;else{for(var l in e[n]=o?[]:{},s)e[n][l]=s[l];r[n]=o?[]:{},this._setupProperties(s,e[n],i[n],r[n])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=s()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=s()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=s()),void 0===e&&(e=!0),this._isPaused)return!0;var i,r,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>n)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,i,r){for(var n in i)if(void 0!==e[n]){var s=e[n]||0,o=i[n],a=Array.isArray(t[n]),h=Array.isArray(o);!a&&h?t[n]=this._interpolationFunction(o,r):"object"==typeof o&&o?this._updateProperties(t[n],s,o,r):"number"==typeof(o=this._handleRelativeValue(s,o))&&(t[n]=s+(o-s)*r)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],i=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof i?this._valuesStartRepeat[t]+parseFloat(i):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),c="18.6.4",f=h.nextId,d=u,p=d.getAll.bind(d),m=d.removeAll.bind(d),g=d.add.bind(d),v=d.remove.bind(d),_=d.update.bind(d);const y={Easing:n,Group:o,Interpolation:a,now:s,Sequence:h,nextId:f,Tween:l,VERSION:c,getAll:p,removeAll:m,add:g,remove:v,update:_}},"./node_modules/backo2/index.js":t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},"./node_modules/base64-arraybuffer/dist/base64-arraybuffer.es5.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{decode:()=>a,encode:()=>o});for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<r.length;s++)n[r.charCodeAt(s)]=s;var o=function(t){var e,i=new Uint8Array(t),n=i.length,s="";for(e=0;e<n;e+=3)s+=r[i[e]>>2],s+=r[(3&i[e])<<4|i[e+1]>>4],s+=r[(15&i[e+1])<<2|i[e+2]>>6],s+=r[63&i[e+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s},a=function(t){var e,i,r,s,o,a=.75*t.length,h=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),c=new Uint8Array(l);for(e=0;e<h;e+=4)i=n[t.charCodeAt(e)],r=n[t.charCodeAt(e+1)],s=n[t.charCodeAt(e+2)],o=n[t.charCodeAt(e+3)],c[u++]=i<<2|r>>4,c[u++]=(15&r)<<4|s>>2,c[u++]=(3&s)<<6|63&o;return l}},"./node_modules/css-styled/dist/styled.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});var r=i("./node_modules/@daybrush/utils/dist/utils.esm.js");const n=function(t){var e,i="rCS"+function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return e>>>0}(t).toString(36),n=0;return{className:i,inject:function(s,o){void 0===o&&(o={});var a,h=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(s),u=0===n;return(h||u)&&(a=function(t,e,i,n){var s=document.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),i.nonce&&s.setAttribute("nonce",i.nonce),s.innerHTML=function(t,e,i){return i.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,i){var n=i.trim();return(n?(0,r.splitComma)(n):[""]).map((function(e){var i=e.trim();return 0===i.indexOf("@")?i:i.indexOf(":global")>-1?i.replace(/\:global/g,""):i.indexOf(":host")>-1?""+i.replace(/\:host/g,"."+t):i?"."+t+" "+i:"."+t})).join(", ")+" {"}))}(t,e,i),(n||document.head||document.body).appendChild(s),s}(i,t,o,h)),u&&(e=a),h||++n,{destroy:function(){h?(s.removeChild(a),a=null):(n>0&&--n,0===n&&e&&(e.parentNode.removeChild(e),e=null))}}}}}},"./node_modules/css-to-mat/dist/css-to-mat.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{calculateMatrixDist:()=>h,createMatrix:()=>s,getDistElementMatrix:()=>u,getElementMatrix:()=>a,parse:()=>c,parseMat:()=>o,toMat:()=>l});var r=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),n=i("./node_modules/@scena/matrix/dist/matrix.esm.js");function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return l(c(t))}function a(t){return o(getComputedStyle(t).transform)}function h(t,e){var i=(0,n.calculate)(t,[e[0],e[1]||0,e[2]||0,1],4),r=i[3]||1;return[i[0]/r,i[1]/r,i[2]/r]}function u(t,e){void 0===e&&(e=document.body);for(var i=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];i;){var s=getComputedStyle(i).transform;if(r=(0,n.matrix3d)(o(s),r),i===e)break;i=i.parentElement}return(r=(0,n.invert)(r,4))[12]=0,r[13]=0,r[14]=0,r}function l(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var i=t.matrixFunction,r=t.functionValue;i&&(e=i(e,r))})),e}function c(t){return((0,r.isArray)(t)?t:(0,r.splitSpace)(t)).map((function(t){var e=(0,r.splitBracket)(t),i=e.prefix,s=e.value,o=null,a=i,h="";if("translate"===i||"translateX"===i||"translate3d"===i){var u=(0,r.splitComma)(s).map((function(t){return parseFloat(t)})),l=u[0],c=u[1],f=void 0===c?0:c,d=u[2],p=void 0===d?0:d;o=n.translate3d,h=[l,f,p]}else if("translateY"===i)f=parseFloat(s),o=n.translate3d,h=[0,f,0];else if("translateZ"===i)p=parseFloat(s),o=n.translate3d,h=[0,0,p];else if("scale"===i||"scale3d"===i){var m=(0,r.splitComma)(s).map((function(t){return parseFloat(t)})),g=m[0],v=m[1],_=void 0===v?g:v,y=m[2],b=void 0===y?1:y;o=n.scale3d,h=[g,_,b]}else if("scaleX"===i)g=parseFloat(s),o=n.scale3d,h=[g,1,1];else if("scaleY"===i)_=parseFloat(s),o=n.scale3d,h=[1,_,1];else if("scaleZ"===i)b=parseFloat(s),o=n.scale3d,h=[1,1,b];else if("rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i){var E=(0,r.splitUnit)(s),x=E.unit,T=E.value,S="rad"===x?T:T*Math.PI/180;"rotate"===i||"rotateZ"===i?(a="rotateZ",o=n.rotateZ3d):"rotateX"===i?o=n.rotateX3d:"rotateY"===i&&(o=n.rotateY3d),h=S}else if("matrix3d"===i)o=n.matrix3d,h=(0,r.splitComma)(s).map((function(t){return parseFloat(t)}));else if("matrix"===i){var w=(0,r.splitComma)(s).map((function(t){return parseFloat(t)}));o=n.matrix3d,h=[w[0],w[1],0,0,w[2],w[3],0,0,0,0,1,0,w[4],w[5],0,1]}else a="";return{name:i,functionName:a,value:s,matrixFunction:o,functionValue:h}}))}},"./node_modules/debug/src/browser.js":(t,e,i)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(n=r))})),e.splice(n,0,i)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=i("./node_modules/debug/src/common.js")(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},"./node_modules/debug/src/common.js":(t,e,i)=>{t.exports=function(t){function e(t){let i,n,s,o=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),s=n-(i||n);r.diff=s,r.prev=i,r.curr=n,i=n,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((i,n)=>{if("%%"===i)return"%";o++;const s=e.formatters[n];if("function"==typeof s){const e=t[o];i=s.call(r,e),t.splice(o,1),o--}return i})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==e.namespaces&&(n=e.namespaces,s=e.enabled(t)),s),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,i){const r=e(this.namespace+(void 0===i?":":i)+t);return r.log=this.log,r}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let i;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(i=0;i<n;i++)r[i]&&("-"===(t=r[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let i,r;for(i=0,r=e.skips.length;i<r;i++)if(e.skips[i].test(t))return!1;for(i=0,r=e.names.length;i<r;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i("./node_modules/ms/index.js"),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((i=>{e[i]=t[i]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return e.colors[Math.abs(i)%e.colors.length]},e.enable(e.load()),e}},"./node_modules/earcut/src/earcut.js":t=>{"use strict";function e(t,e,s){s=s||2;var o,a,h,c,f,p,m,g=e&&e.length,v=g?e[0]*s:t.length,_=i(t,0,v,s,!0),y=[];if(!_||_.next===_.prev)return y;if(g&&(_=function(t,e,n,s){var o,a,h,c=[];for(o=0,a=e.length;o<a;o++)(h=i(t,e[o]*s,o<a-1?e[o+1]*s:t.length,s,!1))===h.next&&(h.steiner=!0),c.push(d(h));for(c.sort(u),o=0;o<c.length;o++)n=r(n=l(c[o],n),n.next);return n}(t,e,_,s)),t.length>80*s){o=h=t[0],a=c=t[1];for(var b=s;b<v;b+=s)(f=t[b])<o&&(o=f),(p=t[b+1])<a&&(a=p),f>h&&(h=f),p>c&&(c=p);m=0!==(m=Math.max(h-o,c-a))?1/m:0}return n(_,y,s,o,a,m),y}function i(t,e,i,r,n){var s,o;if(n===A(t,e,i,r)>0)for(s=e;s<i;s+=r)o=T(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=T(s,t[s],t[s+1],o);return o&&v(o,o.next)&&(S(o),o=o.next),o}function r(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!v(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function n(t,e,i,u,l,c,d){if(t){!d&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=f(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,h,u=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(h=u;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,u*=2}while(o>1)}(n)}(t,u,l,c);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?o(t,u,l,c):s(t))e.push(p.i/i),e.push(t.i/i),e.push(m.i/i),S(t),t=m.next,g=m.next;else if((t=m)===g){d?1===d?n(t=a(r(t),e,i),e,i,u,l,c,2):2===d&&h(t,e,i,u,l,c):n(r(t),e,i,u,l,c,1);break}}}function s(t){var e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(p(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&g(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function o(t,e,i,r){var n=t.prev,s=t,o=t.next;if(g(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,h=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,u=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,l=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,c=f(a,h,e,i,r),d=f(u,l,e,i,r),m=t.prevZ,v=t.nextZ;m&&m.z>=c&&v&&v.z<=d;){if(m!==t.prev&&m!==t.next&&p(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,v!==t.prev&&v!==t.next&&p(n.x,n.y,s.x,s.y,o.x,o.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;m&&m.z>=c;){if(m!==t.prev&&m!==t.next&&p(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;v&&v.z<=d;){if(v!==t.prev&&v!==t.next&&p(n.x,n.y,s.x,s.y,o.x,o.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function a(t,e,i){var n=t;do{var s=n.prev,o=n.next.next;!v(s,o)&&_(s,n,n.next,o)&&E(s,o)&&E(o,s)&&(e.push(s.i/i),e.push(n.i/i),e.push(o.i/i),S(n),S(n.next),n=t=o),n=n.next}while(n!==t);return r(n)}function h(t,e,i,s,o,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&m(h,u)){var l=x(h,u);return h=r(h,h.next),l=r(l,l.next),n(h,e,i,s,o,a),void n(l,e,i,s,o,a)}u=u.next}h=h.next}while(h!==t)}function u(t,e){return t.x-e.x}function l(t,e){var i=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var h,u=i,l=i.x,f=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=l&&n!==r.x&&p(s<f?n:o,s,l,f,s<f?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),E(r,t)&&(h<d||h===d&&(r.x>i.x||r.x===i.x&&c(i,r)))&&(i=r,d=h)),r=r.next}while(r!==u);return i}(t,e);if(!i)return e;var n=x(i,t),s=r(i,i.next);return r(n,n.next),e===i?s:e}function c(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function f(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function p(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||v(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,i,r){var n=b(g(t,e,i)),s=b(g(t,e,r)),o=b(g(i,r,t)),a=b(g(i,r,e));return n!==s&&o!==a||!(0!==n||!y(t,i,e))||!(0!==s||!y(t,r,e))||!(0!==o||!y(i,t,r))||!(0!==a||!y(i,e,r))}function y(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function E(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function x(t,e){var i=new w(t.i,t.x,t.y),r=new w(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function T(t,e,i,r){var n=new w(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(A(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,l=a<h-1?e[a+1]*i:t.length;o-=Math.abs(A(t,u,l,i))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*i,d=r[a+1]*i,p=r[a+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},"./node_modules/eventemitter3/index.js":t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,s),!0;case 6:return l.fn.call(l.context,e,r,n,s,o),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,n);break;default:if(!h)for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l[u].fn.apply(l[u].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||o(this,s);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||n&&!a[h].once||r&&a[h].context!==r)&&u.push(a[h]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},"./node_modules/framework-utils/dist/utils.esm.js":(t,e,i)=>{"use strict";function r(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function n(t,e){return e.replace(/([^}{]*){/gm,(function(e,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}function s(t,e){return function(i){i&&(t[e]=i)}}function o(t,e,i){return function(r){r&&(t[e][i]=r)}}function a(t,e){return function(i){var r=i.prototype;t.forEach((function(t){e(r,t)}))}}function h(t,e){return void 0===e&&(e={}),function(i,r){t.forEach((function(t){var n=e[t]||t;i[n]||(i[n]=function(){for(var e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s=(e=this[r])[t].apply(e,i);return s===this[r]?this:s})}))}}i.r(e),i.d(e,{Properties:()=>a,prefixCSS:()=>n,prefixNames:()=>r,ref:()=>s,refs:()=>o,withMethods:()=>h})},"./node_modules/gamepad.js/gamepad.js":function(t){t.exports=(()=>{var t={944:function(t){t.exports=(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=i){var r,n,s=[],o=!0,a=!1;try{for(i=i.call(t);!(o=(r=i.next()).done)&&(s.push(r.value),!e||s.length!==e);o=!0);}catch(t){a=!0,n=t}finally{try{o||null==i.return||i.return()}finally{if(a)throw n}}return s}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.d(e,{default:()=>h});var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(this,t),this.allowExtra=e,this.defaults=new Map,this.types=new Map,this.optional=new Set,this.required=new Set}var e;return(e=[{key:"setDefaults",value:function(t){var e=this;return Object.entries(t).forEach((function(t){var i=n(t,2),r=i[0],s=i[1];return e.defaults.set(r,s)})),this}},{key:"setTypes",value:function(t){var e=this;return Object.entries(t).forEach((function(t){var i=n(t,2),r=i[0],s=i[1];return e.types.set(r,s)})),this}},{key:"setOptional",value:function(t){var e=this;return t.forEach((function(t){return e.optional.add(t)})),this}},{key:"setRequired",value:function(t){var e=this;return t.forEach((function(t){return e.required.add(t)})),this}},{key:"resolve",value:function(t){var e=Object.assign(this.getDefaults(),t);return this.validate(e),e}},{key:"getDefaults",value:function(){var t,e={},i=r(this.defaults);try{for(i.s();!(t=i.n()).done;){var s=n(t.value,2),o=s[0],a=s[1];e[o]=a}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"validate",value:function(t){for(var e in t){if(!this.optionExists(e))throw new Error('Unkown option "'.concat(e,'".'));this.checkType(e,t[e])}var i,n=r(this.required.values());try{for(n.s();!(i=n.n()).done;){var s=i.value;if(void 0===t[s])throw new Error('Option "'.concat(s,'" is required.'))}}catch(t){n.e(t)}finally{n.f()}}},{key:"checkType",value:function(t,e){if(this.types.has(t)){var r=this.types.get(t),n=i(e);if(n!==r)throw new Error('Wrong value for option "'.concat(t,'". Expected type "').concat(r,'" but got "').concat(n,'".'))}}},{key:"optionExists",value:function(t){return!!this.allowExtra||this.defaults.has(t)||this.optional.has(t)||this.required.has(t)||this.types.has(t)}}])&&function(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();return e.default})()},162:function(t){t.exports=(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>i});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._events={},this.on=this.addEventListener,this.off=this.removeEventListener}var e;return(e=[{key:"emit",value:function(t,e){if(Object.prototype.hasOwnProperty.call(this._events,t))for(var i=this._events[t],r={type:t,detail:e},n=i.length,s=0;s<n;s++)this.handle(i[s],r)}},{key:"handle",value:function(t,e){t(e)}},{key:"addEventListener",value:function(t,e){Object.prototype.hasOwnProperty.call(this._events,t)||(this._events[t]=[]),this._events[t].indexOf(e)<0&&this._events[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(Object.prototype.hasOwnProperty.call(this._events,t)){var i=this._events[t],r=i.indexOf(e);r>=0&&i.splice(r,1),0===i.length&&delete this._events[t]}}}])&&function(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();return e.default})()}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";i.r(r),i.d(r,{GamepadHandler:()=>d,GamepadListener:()=>E});var t=i(162),e=i.n(t),n=i(944),s=i.n(n);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(d,t);var e,i,r,n,s,o=(n=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(s){var i=f(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return l(this,t)});function d(t,e){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,d),(i=o.call(this)).index=t,i.options=i.constructor.resolveOptions(r),i.sticks=new Array(e.axes.length/2).fill(null).map((function(){return[null,null]})),i.buttons=new Array(e.buttons.length).fill(null),i.updateStick=i.updateStick.bind(c(i)),i.updateButton=i.updateButton.bind(c(i)),i}return e=d,r=[{key:"resolveOptions",value:function(t){var e=void 0!==t.stick,i=void 0!==t.button,r={stick:this.optionResolver.resolve(e?t.stick:i?{}:t),button:this.optionResolver.resolve(i?t.button:e?{}:t)};return r.stick.deadZone=Math.max(Math.min(r.stick.deadZone,1),0),r.button.deadZone=Math.max(Math.min(r.button.deadZone,1),0),r.stick.precision=r.stick.precision?Math.pow(10,r.stick.precision):0,r.button.precision=r.button.precision?Math.pow(10,r.button.precision):0,r}}],(i=[{key:"update",value:function(t){for(var e=0,i=this.sticks.length,r=0;r<i;r++)for(var n=0;n<2;n++)this.updateStick(t,r,n,t.axes[e++]);var s=this.buttons.length;for(e=0;e<s;e++)this.updateButton(t,t.buttons[e],e)}},{key:"updateStick",value:function(t,e,i,r){var n=this.options.stick,s=n.deadZone,o=n.analog,a=n.precision;s&&r<s&&r>-s&&(r=0),o?a&&(r=Math.round(r*a)/a):r=r>0?1:r<0?-1:0,this.sticks[e][i]!==r&&(this.sticks[e][i]=r,this.emit("axis",{gamepad:t,stick:e,axis:i,value:r,index:this.index}))}},{key:"updateButton",value:function(t,e,i){var r=this.options.button,n=r.deadZone,s=r.analog,o=r.precision,a=e.value,h=e.pressed,u=a;n&&e.value<n&&e.value>-n&&(u=0),s?o&&(u=Math.round(u*o)/o):u=h?1:0,this.buttons[i]!==u&&(this.buttons[i]=u,this.emit("button",{gamepad:t,button:i,pressed:h,value:u,index:this.index}))}}])&&h(e.prototype,i),r&&h(e,r),d}(e());d.optionResolver=(new(s())).setDefaults({analog:!0,deadZone:0,precision:0}).setTypes({analog:"boolean",deadZone:"number",precision:"number"});var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callback=e,this.frame=null,this.update=this.update.bind(this)}var e;return(e=[{key:"setCallback",value:function(t){this.callback=t}},{key:"start",value:function(){this.frame||(this.frame=window.requestAnimationFrame(this.update))}},{key:"stop",value:function(){this.frame&&(window.cancelAnimationFrame(this.frame),this.frame=null)}},{key:"update",value:function(){this.frame=window.requestAnimationFrame(this.update),this.callback()}}])&&function(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(s,t);var e,i,r,n=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(i);if(r){var n=b(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _(this,t)});function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g(this,s),t=n.call(this),"function"!=typeof navigator.getGamepads)throw new Error("This browser does not support gamepad API.");return t.options=e,t.onAxis=t.onAxis.bind(y(t)),t.update=t.update.bind(y(t)),t.start=t.start.bind(y(t)),t.stop=t.stop.bind(y(t)),t.discover=t.discover.bind(y(t)),t.onButton=t.onButton.bind(y(t)),t.handlers=new Array(4).fill(null),t.loop=new p(t.update),window.addEventListener("error",t.stop),t}return(e=[{key:"start",value:function(){this.loop.start()}},{key:"stop",value:function(){this.loop.stop()}},{key:"update",value:function(){var t=navigator.getGamepads();this.discover(t[0],0),this.discover(t[1],1),this.discover(t[2],2),this.discover(t[3],3)}},{key:"discover",value:function(t,e){t?(this.handlers[e]||this.registerHandler(e,t),this.handlers[e].update(t)):this.handlers[e]&&this.removeGamepad(e)}},{key:"registerHandler",value:function(t,e){if(this.handlers[t])throw new Error("Gamepad #".concat(t," is already registered."));var i=new d(t,e,this.options);this.handlers[t]=i,i.addEventListener("axis",this.onAxis),i.addEventListener("button",this.onButton),this.emit("gamepad:connected",{index:t,gamepad:e}),this.emit("gamepad:".concat(t,":connected"),{index:t,gamepad:e})}},{key:"removeGamepad",value:function(t){if(!this.handlers[t])throw new Error("Gamepad #".concat(t," is not registered."));this.handlers[t].removeEventListener("axis",this.onAxis),this.handlers[t].removeEventListener("button",this.onButton),this.handlers[t]=null,this.emit("gamepad:disconnected",{index:t}),this.emit("gamepad:".concat(t,":disconnected"),{index:t})}},{key:"onAxis",value:function(t){var e=t.detail.index;this.emit("gamepad:axis",t.detail),this.emit("gamepad:".concat(e,":axis"),t.detail),this.emit("gamepad:".concat(e,":axis:").concat(t.detail.axis),t.detail)}},{key:"onButton",value:function(t){var e=t.detail.index;this.emit("gamepad:button",t.detail),this.emit("gamepad:".concat(e,":button"),t.detail),this.emit("gamepad:".concat(e,":button:").concat(t.detail.button),t.detail)}}])&&function(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(e())})(),r})()},"./node_modules/gesto/dist/gesto.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var r=i("./node_modules/@scena/event-emitter/dist/event-emitter.esm.js"),n=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)},o=function(){return o=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};function a(t){return 180*(e=[t[0].clientX,t[0].clientY],r=(i=[t[1].clientX,t[1].clientY])[0]-e[0],n=i[1]-e[1],((s=Math.atan2(n,r))>=0?s:s+2*Math.PI)/Math.PI);var e,i,r,n,s}function h(t){return t.touches?function(t){for(var e=Math.min(t.length,2),i=[],r=0;r<e;++r)i.push(c(t[r]));return i}(t.touches):[c(t)]}function u(t,e,i){var r=i.length,n=f(t,r),s=n.clientX,o=n.clientY,a=n.originalClientX,h=n.originalClientY,u=f(e,r),l=u.clientX,c=u.clientY,d=f(i,r);return{clientX:a,clientY:h,deltaX:s-l,deltaY:o-c,distX:s-d.clientX,distY:o-d.clientY}}function l(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function c(t){return{clientX:t.clientX,clientY:t.clientY}}function f(t,e){void 0===e&&(e=t.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var n=t[r];i.originalClientX+="originalClientX"in n?n.originalClientX:n.clientX,i.originalClientY+="originalClientY"in n?n.originalClientY:n.clientY,i.clientX+=n.clientX,i.clientY+=n.clientY}return e?{clientX:i.clientX/e,clientY:i.clientY/e,originalClientX:i.originalClientX/e,originalClientY:i.originalClientY/e}:i}var d=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.addClients=function(t){void 0===t&&(t=this.prevClients);var e=this.getPosition(t),i=e.deltaX,r=e.deltaY;return this.movement+=Math.sqrt(i*i+r*r),this.prevClients=t,e},e.getAngle=function(t){return void 0===t&&(t=this.prevClients),a(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),a(t)-a(this.startClients)},e.getPosition=function(t){return u(t||this.prevClients,this.prevClients,this.startClients)},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(i,r){return u([t[r]],[e[r]],[i])}))},e.getMovement=function(t){var e=this.movement;if(!t)return e;var i=f(t,this.length),r=f(this.prevClients,this.length),n=i.clientX-r.clientX,s=i.clientY-r.clientY;return Math.sqrt(n*n+s*s)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),l(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),l(t)/l(this.startClients)},e.move=function(t,e){this.startClients.forEach((function(i){i.clientX-=t,i.clientY-=e})),this.prevClients.forEach((function(i){i.clientX-=t,i.clientY-=e}))},t}(),p=["textarea","input"];const m=function(t){function e(e,i){void 0===i&&(i={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.datas={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var i=r.options,s=i.container,a=i.pinchOutside,u=i.preventRightClick,l=i.preventDefault,c=i.checkInput,f=r.isTouch,m=!r.flag;if(m){var g=document.activeElement,v=t.target,_=v.tagName.toLowerCase(),y=p.indexOf(_)>-1,b=v.isContentEditable;if(y||b){if(c||g===v)return!1;if(g&&b&&g.isContentEditable&&g.contains(v))return!1}else if((l||"touchstart"===t.type)&&g){var E=g.tagName;(g.isContentEditable||p.indexOf(E)>-1)&&g.blur()}if(r.clientStores=[new d(h(t))],r.flag=!0,r.isDrag=!1,r.datas={},u&&(3===t.which||2===t.button))return r.initDrag(),!1;r.doubleFlag=(0,n.now)()-r.prevTime<200,!1===r.emit("dragStart",o({datas:r.datas,inputEvent:t,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()))&&r.initDrag(),r.flag&&l&&t.preventDefault()}if(!r.flag)return!1;var x=0;if(m&&f&&a&&(x=setTimeout((function(){(0,n.addEvent)(s,"touchstart",r.onDragStart,{passive:!1})}))),!m&&f&&a&&(0,n.removeEvent)(s,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(x),m&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,e){if(r.flag){var i=h(t),n=r.moveClients(i,t,!1);(r.pinchFlag||n.deltaX||n.deltaY)&&r.emit("drag",o({},n,{isScroll:!!e,inputEvent:t})),r.pinchFlag&&r.onPinch(t,i),r.getCurrentStore().addClients(i)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,i=e.pinchOutside,s=e.container;r.isTouch&&i&&(0,n.removeEvent)(s,"touchstart",r.onDragStart),r.flag=!1;var a=r.getCurrentStore().getPosition(),h=(0,n.now)(),u=!r.isDrag&&r.doubleFlag;r.prevTime=r.isDrag||u?0:h,r.emit("dragEnd",o({datas:r.datas,isDouble:u,isDrag:r.isDrag,isClick:!r.isDrag,inputEvent:t},a)),r.pinchFlag&&r.onPinchEnd(t),r.clientStores=[]}},r.onBlur=function(){r.onDragEnd()};var s=[].concat(e);r.options=o({checkInput:!1,container:s.length>1?window:s[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},i);var a=r.options,u=a.container,l=a.events,c=a.checkWindowBlur;if(r.isTouch=l.indexOf("touch")>-1,r.isMouse=l.indexOf("mouse")>-1,r.targets=s,r.isMouse&&(s.forEach((function(t){(0,n.addEvent)(t,"mousedown",r.onDragStart)})),(0,n.addEvent)(u,"mousemove",r.onDrag),(0,n.addEvent)(u,"mouseup",r.onDragEnd),(0,n.addEvent)(u,"contextmenu",r.onDragEnd)),c&&(0,n.addEvent)(window,"blur",r.onBlur),r.isTouch){var f={passive:!1};s.forEach((function(t){(0,n.addEvent)(t,"touchstart",r.onDragStart,f)})),(0,n.addEvent)(u,"touchmove",r.onDrag,f),(0,n.addEvent)(u,"touchend",r.onDragEnd,f),(0,n.addEvent)(u,"touchcancel",r.onDragEnd,f)}return r}!function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t);var i=e.prototype;return i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isDoubleFlag=function(){return this.doubleFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,e,i,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(i,!0))},i.move=function(t,e){var i=t[0],r=t[1],n=this.getCurrentStore().prevClients;return this.moveClients(n.map((function(t){var e=t.clientX,n=t.clientY;return{clientX:e+i,clientY:n+r,originalClientX:e,originalClientY:n}})),e,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var e=this.datas;for(var i in t)e[i]=t[i];return this},i.getEventDatas=function(){return this.datas},i.unset=function(){var t=this,e=this.targets,i=this.options.container;this.off(),(0,n.removeEvent)(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){(0,n.removeEvent)(e,"mousedown",t.onDragStart)})),(0,n.removeEvent)(i,"mousemove",this.onDrag),(0,n.removeEvent)(i,"mouseup",this.onDragEnd),(0,n.removeEvent)(i,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){(0,n.removeEvent)(e,"touchstart",t.onDragStart)})),(0,n.removeEvent)(i,"touchstart",this.onDragStart),(0,n.removeEvent)(i,"touchmove",this.onDrag),(0,n.removeEvent)(i,"touchend",this.onDragEnd),(0,n.removeEvent)(i,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var i=new d(h(t));this.pinchFlag=!0,this.clientStores.splice(0,0,i),!1===this.emit("pinchStart",o({datas:this.datas,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1)}},i.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",o({datas:this.datas,movement:this.getMovement(e),angle:i.getAngle(e),rotation:i.getRotation(e),touches:i.getPositions(e),scale:i.getScale(e),distance:i.getDistance(e)},i.getPosition(e),{inputEvent:t}))}},i.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",o({datas:this.datas,isPinch:e,touches:i.getPositions()},i.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,e,i){var r=this.getCurrentStore()[i?"addClients":"getPosition"](t);return this.isDrag=!0,o({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e}(r.default)},"./node_modules/has-cors/index.js":t=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},"./node_modules/ismobilejs/esm/index.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r.default});var r=i("./node_modules/ismobilejs/esm/isMobile.js")},"./node_modules/ismobilejs/esm/isMobile.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>y});var r=/iPhone/i,n=/iPod/i,s=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,u=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,c=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,p=/BB10/i,m=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,_=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};function y(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,y=i.split("[FBAN");void 0!==y[1]&&(i=y[0]),void 0!==(y=i.split("Twitter"))[1]&&(i=y[0]);var b=function(t){return function(e){return e.test(t)}}(i),E={apple:{phone:b(r)&&!b(c),ipod:b(n),tablet:!b(r)&&(b(s)||_(e))&&!b(c),universal:b(o),device:(b(r)||b(n)||b(s)||b(o)||_(e))&&!b(c)},amazon:{phone:b(u),tablet:!b(u)&&b(l),device:b(u)||b(l)},android:{phone:!b(c)&&b(u)||!b(c)&&b(a),tablet:!b(c)&&!b(u)&&!b(a)&&(b(l)||b(h)),device:!b(c)&&(b(u)||b(l)||b(a)||b(h))||b(/\bokhttp\b/i)},windows:{phone:b(c),tablet:b(f),device:b(c)||b(f)},other:{blackberry:b(d),blackberry10:b(p),opera:b(m),firefox:b(v),chrome:b(g),device:b(d)||b(p)||b(m)||b(v)||b(g)},any:!1,phone:!1,tablet:!1};return E.any=E.apple.device||E.android.device||E.windows.device||E.other.device,E.phone=E.apple.phone||E.android.phone||E.windows.phone,E.tablet=E.apple.tablet||E.android.tablet||E.windows.tablet,E}},"./node_modules/moveable/dist/moveable.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>E,EVENTS:()=>d,METHODS:()=>f,PROPERTIES:()=>c,PROPS_MAP:()=>p,getElementInfo:()=>y,makeAble:()=>b});var r=i("./node_modules/framework-utils/dist/utils.esm.js"),n=i("./node_modules/react-simple-compat/dist/compat.esm.js"),s=i("./node_modules/react-compat-moveable/dist/moveable.esm.js"),o=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},a(t,e)};function h(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u=function(){return u=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},u.apply(this,arguments)},l=function(t){function e(e){var i=t.call(this,e)||this;return i.state={},i.state=i.props,i}return h(e,t),e.prototype.render=function(){return(0,n.createPortal)((0,n.createElement)(s.default,u({ref:(0,r.ref)(this,"moveable")},this.state)),this.state.parentElement)},e}(n.Component),c=s.MOVEABLE_PROPS,f=s.MOVEABLE_METHODS,d=s.MOVEABLE_EVENTS,p=s.MOVEABLE_PROPS_MAP,m=function(){return m=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},m.apply(this,arguments)},g=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if((0,o.isObject)(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if((0,o.isObject)(t))for(var i in t)this.off(i);else if(e){var r=this._events[t];if(r){var n=(0,o.findIndex)(r,(function(t){return t.listener===e}));n>-1&&r.splice(n,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var i=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){i._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var i=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var n=!1;return e.eventType=t,e.stop=function(){n=!0},e.currentTarget=this,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r}(r).forEach((function(r){r.listener(e),r.once&&i.off(t,r.listener)})),!n},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,i){var r=this._events;r[t]=r[t]||[],r[t].push(m({listener:e},i))},t}(),v=function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this)||this;s.tempElement=document.createElement("div");var a=u({container:e||document.body},i),h={};d.forEach((function(t){h[(0,o.camelize)("on "+t)]=function(e){return s.trigger(t,e)}})),(0,n.render)((0,n.createElement)(l,u({ref:(0,r.ref)(s,"innerMoveable"),parentElement:e},a,h)),s.tempElement);var c=a.target;return(0,o.isArray)(c)&&c.length>1&&s.updateRect(),s}h(e,t);var i=e.prototype;return i.setState=function(t,e){this.innerMoveable.setState(t,e)},i.destroy=function(){(0,n.render)(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},i.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,i,r){var n,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}([(0,r.Properties)(f,(function(t,e){t[e]||(t[e]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})})),(0,r.Properties)(c,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var i;this.setState(((i={})[e]=t,i))},enumerable:!0,configurable:!0})}))],e),e}(g),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(v);function y(t,e,i){return(0,s.getElementInfo)(t,e,i)}function b(t,e){return(0,s.makeAble)(t,e)}const E=_},"./node_modules/ms/index.js":t=>{var e=1e3,i=60*e,r=60*i,n=24*r;function s(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}t.exports=function(t,o){o=o||{};var a,h,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===u&&isFinite(t))return o.long?(a=t,(h=Math.abs(a))>=n?s(a,h,n,"day"):h>=r?s(a,h,r,"hour"):h>=i?s(a,h,i,"minute"):h>=e?s(a,h,e,"second"):a+" ms"):function(t){var s=Math.abs(t);return s>=n?Math.round(t/n)+"d":s>=r?Math.round(t/r)+"h":s>=i?Math.round(t/i)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"./node_modules/object-assign/index.js":t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,s){for(var o,a,h=n(t),u=1;u<arguments.length;u++){for(var l in o=Object(arguments[u]))i.call(o,l)&&(h[l]=o[l]);if(e){a=e(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(h[a[c]]=o[a[c]])}}return h}},"./node_modules/overlap-area/dist/overlap-area.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{convertLines:()=>f,fitPoints:()=>s,getAreaSize:()=>n,getIntersectionPoints:()=>l,getIntersectionPointsByConstants:()=>u,getLinearConstants:()=>h,getMinMaxs:()=>o,getOverlapPoints:()=>d,getOverlapSize:()=>p,getPointsOnLines:()=>c,isInside:()=>a});var r=i("./node_modules/@daybrush/utils/dist/utils.esm.js");function n(t){return t.length<3?0:Math.abs((0,r.sum)(t.map((function(e,i){var r=t[i+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function s(t,e){var i=e.width,r=e.height,n=e.left,s=e.top,a=o(t),h=a.minX,u=a.minY,l=a.maxX,c=a.maxY,f=i/(l-h),d=r/(c-u);return t.map((function(t){return[n+(t[0]-h)*f,s+(t[1]-u)*d]}))}function o(t){var e=t.map((function(t){return t[0]})),i=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,i),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,i)}}function a(t,e,i){var n=t[0],s=t[1],a=o(e),l=a.minX,d=a.minY,p=a.maxX,m=a.maxY,g=[[l,s],[p,s]],v=[[n,d],[n,m]],_=h(g[0],g[1]),y=h(v[0],v[1]),b=f(e),E=[],x=[];return b.forEach((function(t){var e=h(t[0],t[1]),i=c(u(_,e),[g,t]),r=c(u(y,e),[v,t]);1===i.length&&t[0][1]===s||E.push.apply(E,i),1===r.length&&t[0][0]===n||x.push.apply(x,r),e[0]||E.push.apply(E,i),e[1]||x.push.apply(x,r)})),!i&&((0,r.findIndex)(E,(function(t){return t[0]===n}))>-1||(0,r.findIndex)(x,(function(t){return t[1]===s}))>-1)||!!(E.filter((function(t){return t[0]>n})).length%2&&x.filter((function(t){return t[1]>s})).length%2)}function h(t,e){var i=t[0],r=t[1],n=e[0],s=e[1];if(i===n&&r===s)return[0,0,0];if(i===n)return[1,0,-i];if(r===s)return[0,1,-r];var o=(n-i)/(r-s);return[1,o,-i-o*r]}function u(t,e){var i,r,n=t[0],s=t[1],o=t[2],a=e[0],h=e[1],u=e[2],l=0===n&&0===a,c=0===s&&0===h;if(l&&c)return[];if(l){var f=-o/s;return f!==-u/h?[]:[[-1/0,f],[1/0,f]]}if(c){var d=-o/n;return d!==-u/a?[]:[[d,-1/0],[d,1/0]]}return 0===n?[[i=-(h*(r=-o/s)+u)/a,r]]:0===a?[[i=-(s*(r=-u/h)+o)/n,r]]:0===s?[[i=-o/n,r=-(a*i+u)/h]]:0===h?[[i=-u/a,r=-(n*i+o)/s]]:[[i=(s*u-h*o)/(h*n-s*a),r=-(n*i+o)/s]]}function l(t,e,i){var r=u(h(t[0],t[1]),h(e[0],e[1]));return i?c(r,[t,e]):r}function c(t,e){var i=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))}));if(2===t.length){var r=t[0],n=r[0],s=r[1];if(n===t[1][0]){var o=Math.max.apply(Math,i.map((function(t){return t[1][0]}))),a=Math.min.apply(Math,i.map((function(t){return t[1][1]})));return o>a?[]:[[n,o],[n,a]]}if(s===t[1][1]){var h=Math.max.apply(Math,i.map((function(t){return t[0][0]}))),u=Math.min.apply(Math,i.map((function(t){return t[0][1]})));return h>u?[]:[[h,s],[u,s]]}}return t.filter((function(t){return i.every((function(e){return e[0][0]<=t[0]&&t[0]<=e[0][1]&&e[1][0]<=t[1]&&t[1]<=e[1][1]}))}))}function f(t){return function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r}(t.slice(1),[t[0]]).map((function(e,i){return[t[i],e]}))}function d(t,e){var i=t.slice(),n=e.slice();-1===(0,r.getShapeDirection)(i)&&i.reverse(),-1===(0,r.getShapeDirection)(n)&&n.reverse();var s=f(i),o=f(n),l=s.map((function(t){return h(t[0],t[1])})),d=o.map((function(t){return h(t[0],t[1])})),p=[];l.forEach((function(t,e){var i=s[e],h=[];d.forEach((function(r,n){var s=c(u(t,r),[i,o[n]]);h.push.apply(h,s.map((function(t){return{index1:e,index2:n,pos:t}})))})),h.sort((function(t,e){return(0,r.getDist)(i[0],t.pos)-(0,r.getDist)(i[0],e.pos)})),p.push.apply(p,h),a(i[1],n)&&p.push({index1:e,index2:-1,pos:i[1]})})),o.forEach((function(t,e){if(a(t[1],i)){var n=!1,s=(0,r.findIndex)(p,(function(t){return t.index2===e?(n=!0,!1):!!n}));-1===s&&(n=!1,s=(0,r.findIndex)(p,(function(t){var i=t.index1,r=t.index2;return-1===i&&r+1===e?(n=!0,!1):!!n}))),-1===s?p.push({index1:-1,index2:e,pos:t[1]}):p.splice(s,0,{index1:-1,index2:e,pos:t[1]})}}));var m=p.map((function(t){return t.pos})),g={};return m.filter((function(t){var e=t[0]+"x"+t[1];return!g[e]&&(g[e]=!0,!0)}))}function p(t,e){return n(d(t,e))}},"./node_modules/parseqs/index.js":(t,e)=>{e.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){for(var e={},i=t.split("&"),r=0,n=i.length;r<n;r++){var s=i[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}},"./node_modules/parseuri/index.js":t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var r,n,s,o=t,a=t.indexOf("["),h=t.indexOf("]");-1!=a&&-1!=h&&(t=t.substring(0,a)+t.substring(a,h).replace(/:/g,";")+t.substring(h,t.length));for(var u,l,c=e.exec(t||""),f={},d=14;d--;)f[i[d]]=c[d]||"";return-1!=a&&-1!=h&&(f.source=o,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=(n=/\/{2,9}/g,s=(r=f.path).replace(n,"/").split("/"),"/"!=r.substr(0,1)&&0!==r.length||s.splice(0,1),"/"==r.substr(r.length-1,1)&&s.splice(s.length-1,1),s),f.queryKey=(u=f.query,l={},u.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(l[e]=i)})),l),f}},"./node_modules/parsimmon/build/parsimmon.umd.min.js":function(t){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function r(t){if(!(this instanceof r))return new r(t);this._=t}var n=r.prototype;function s(t,e){for(var i=0;i<t;i++)e(i)}function o(t,e,i){return function(t,e){s(e.length,(function(i){t(e[i],i,e)}))}((function(i,r,n){e=t(e,i,r,n)}),i),e}function a(t,e){return o((function(e,i,r,n){return e.concat([t(i,r,n)])}),[],e)}function h(t,e){var i={v:0,buf:e};return s(t,(function(){var t;i={v:i.v<<1|(t=i.buf,t[0]>>7),buf:function(t){var e=o((function(t,e,i,r){return t.concat(i===r.length-1?Buffer.from([e,0]).readUInt16BE(0):r.readUInt16BE(i))}),[],t);return Buffer.from(a((function(t){return(t<<1&65535)>>8}),e))}(i.buf)}})),i}function u(){return"undefined"!=typeof Buffer}function l(){if(!u())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function c(t){l();var e=o((function(t,e){return t+e}),0,t);if(e%8!=0)throw new Error("The bits ["+t.join(", ")+"] add up to "+e+" which is not an even number of bytes; the total should be divisible by 8");var i,n=e/8,s=(i=function(t){return t>48},o((function(t,e){return t||(i(e)?e:t)}),null,t));if(s)throw new Error(s+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r((function(e,i){var r=n+i;return r>e.length?x(i,n.toString()+" bytes"):E(r,o((function(t,e){var i=h(e,t.buf);return{coll:t.coll.concat(i.v),buf:i.buf}}),{coll:[],buf:e.slice(i,r)},t).coll)}))}function f(t,e){return new r((function(i,r){return l(),r+e>i.length?x(r,e+" bytes for "+t):E(r+e,i.slice(r,r+e))}))}function d(t,e){if("number"!=typeof(i=e)||Math.floor(i)!==i||e<0||e>6)throw new Error(t+" requires integer length in range [0, 6].");var i}function p(t){return d("uintBE",t),f("uintBE("+t+")",t).map((function(e){return e.readUIntBE(0,t)}))}function m(t){return d("uintLE",t),f("uintLE("+t+")",t).map((function(e){return e.readUIntLE(0,t)}))}function g(t){return d("intBE",t),f("intBE("+t+")",t).map((function(e){return e.readIntBE(0,t)}))}function v(t){return d("intLE",t),f("intLE("+t+")",t).map((function(e){return e.readIntLE(0,t)}))}function _(t){return t instanceof r}function y(t){return"[object Array]"==={}.toString.call(t)}function b(t){return u()&&Buffer.isBuffer(t)}function E(t,e){return{status:!0,index:t,value:e,furthest:-1,expected:[]}}function x(t,e){return y(e)||(e=[e]),{status:!1,index:-1,value:null,furthest:t,expected:e}}function T(t,e){if(!e)return t;if(t.furthest>e.furthest)return t;var i=t.furthest===e.furthest?function(t,e){if(function(){if(void 0!==r._supportsSet)return r._supportsSet;var t="undefined"!=typeof Set;return r._supportsSet=t,t}()&&Array.from){for(var i=new Set(t),n=0;n<e.length;n++)i.add(e[n]);var s=Array.from(i);return s.sort(),s}for(var o={},a=0;a<t.length;a++)o[t[a]]=!0;for(var h=0;h<e.length;h++)o[e[h]]=!0;var u=[];for(var l in o)({}).hasOwnProperty.call(o,l)&&u.push(l);return u.sort(),u}(t.expected,e.expected):e.expected;return{status:t.status,index:t.index,value:t.value,furthest:e.furthest,expected:i}}var S={};function w(t,e){if(b(t))return{offset:e,line:-1,column:-1};t in S||(S[t]={});for(var i=S[t],r=0,n=0,s=0,o=e;o>=0;){if(o in i){r=i[o].line,0===s&&(s=i[o].lineStart);break}"\n"===t.charAt(o)&&(n++,0===s&&(s=o+1)),o--}var a=r+n,h=e-s;return i[e]={line:a,lineStart:s},{offset:e,line:a+1,column:h+1}}function A(t){if(!_(t))throw new Error("not a parser: "+t)}function M(t,e){return"string"==typeof t?t.charAt(e):t[e]}function O(t){if("number"!=typeof t)throw new Error("not a number: "+t)}function R(t){if("function"!=typeof t)throw new Error("not a function: "+t)}function C(t){if("string"!=typeof t)throw new Error("not a string: "+t)}function P(t,e){return new Array(e+1).join(t)}function I(t,e,i){var r=e-t.length;return r<=0?t:P(i,r)+t}function N(t,e,i,r){return{from:t-e>0?t-e:0,to:t+i>r?r:t+i}}function D(t,e){var i,r,n,s,h,u=e.index,l=u.offset,c=1;if(l===t.length)return"Got the end of the input";if(b(t)){var f=l-l%8,d=l-f,p=N(f,40,40,t.length),m=a((function(t){return a((function(t){return I(t.toString(16),2,"0")}),t)}),function(t,e){var i=t.length,r=[],n=0;if(i<=8)return[t.slice()];for(var s=0;s<i;s++)r[n]||r.push([]),r[n].push(t[s]),(s+1)%8==0&&n++;return r}(t.slice(p.from,p.to).toJSON().data));s=function(t){return 0===t.from&&1===t.to?{from:t.from,to:t.to}:{from:t.from/8,to:Math.floor(t.to/8)}}(p),r=f/8,i=3*d,d>=4&&(i+=1),c=2,n=a((function(t){return t.length<=4?t.join(" "):t.slice(0,4).join(" ")+"  "+t.slice(4).join(" ")}),m),(h=(8*(s.to>0?s.to-1:s.to)).toString(16).length)<2&&(h=2)}else{var g=t.split(/\r\n|[\n\r\u2028\u2029]/);i=u.column-1,r=u.line-1,s=N(r,2,3,g.length),n=g.slice(s.from,s.to),h=s.to.toString().length}var v=r-s.from;return b(t)&&(h=(8*(s.to>0?s.to-1:s.to)).toString(16).length)<2&&(h=2),o((function(e,r,n){var o,a=n===v,u=a?"> ":"  ";return o=b(t)?I((8*(s.from+n)).toString(16),h,"0"):I((s.from+n+1).toString(),h," "),[].concat(e,[u+o+" | "+r],a?["  "+P(" ",h)+" | "+I("",i," ")+P("^",c)]:[])}),[],n).join("\n")}function L(t,e){return["\n","-- PARSING FAILED "+P("-",50),"\n\n",D(t,e),"\n\n",(i=e.expected,1===i.length?"Expected:\n\n"+i[0]:"Expected one of the following: \n\n"+i.join(", ")),"\n"].join("");var i}function k(t){return void 0!==t.flags?t.flags:[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.unicode?"u":"",t.sticky?"y":""].join("")}function B(){for(var t=[].slice.call(arguments),e=t.length,i=0;i<e;i+=1)A(t[i]);return r((function(i,r){for(var n,s=new Array(e),o=0;o<e;o+=1){if(!(n=T(t[o]._(i,r),n)).status)return n;s[o]=n.value,r=n.index}return T(E(r,s),n)}))}function F(){var t=[].slice.call(arguments);if(0===t.length)throw new Error("seqMap needs at least one argument");var e=t.pop();return R(e),B.apply(null,t).map((function(t){return e.apply(null,t)}))}function j(){var t=[].slice.call(arguments),e=t.length;if(0===e)return Y("zero alternates");for(var i=0;i<e;i+=1)A(t[i]);return r((function(e,i){for(var r,n=0;n<t.length;n+=1)if((r=T(t[n]._(e,i),r)).status)return r;return r}))}function G(t,e){return U(t,e).or(H([]))}function U(t,e){return A(t),A(e),F(t,e.then(t).many(),(function(t,e){return[t].concat(e)}))}function X(t){C(t);var e="'"+t+"'";return r((function(i,r){var n=r+t.length,s=i.slice(r,n);return s===t?E(n,s):x(r,e)}))}function z(t,e){!function(t){if(!(t instanceof RegExp))throw new Error("not a regexp: "+t);for(var e=k(t),i=0;i<e.length;i++){var r=e.charAt(i);if("i"!==r&&"m"!==r&&"u"!==r&&"s"!==r)throw new Error('unsupported regexp flag "'+r+'": '+t)}}(t),arguments.length>=2?O(e):e=0;var i=function(t){return RegExp("^(?:"+t.source+")",k(t))}(t),n=""+t;return r((function(t,r){var s=i.exec(t.slice(r));if(s){if(0<=e&&e<=s.length){var o=s[0],a=s[e];return E(r+o.length,a)}return x(r,"valid match group (0 to "+s.length+") in "+n)}return x(r,n)}))}function H(t){return r((function(e,i){return E(i,t)}))}function Y(t){return r((function(e,i){return x(i,t)}))}function W(t){if(_(t))return r((function(e,i){var r=t._(e,i);return r.index=i,r.value="",r}));if("string"==typeof t)return W(X(t));if(t instanceof RegExp)return W(z(t));throw new Error("not a string, regexp, or parser: "+t)}function V(t){return A(t),r((function(e,i){var r=t._(e,i),n=e.slice(i,r.index);return r.status?x(i,'not "'+n+'"'):E(i,null)}))}function $(t){return R(t),r((function(e,i){var r=M(e,i);return i<e.length&&t(r)?E(i+1,r):x(i,"a character/byte matching "+t)}))}function q(t,e){arguments.length<2&&(e=t,t=void 0);var i=r((function(t,r){return i._=e()._,i._(t,r)}));return t?i.desc(t):i}function Z(){return Y("fantasy-land/empty")}n.parse=function(t){if("string"!=typeof t&&!b(t))throw new Error(".parse must be called with a string or Buffer as its argument");var e,i=this.skip(tt)._(t,0);return e=i.status?{status:!0,value:i.value}:{status:!1,index:w(t,i.furthest),expected:i.expected},delete S[t],e},n.tryParse=function(t){var e=this.parse(t);if(e.status)return e.value;var i=L(t,e),r=new Error(i);throw r.type="ParsimmonError",r.result=e,r},n.assert=function(t,e){return this.chain((function(i){return t(i)?H(i):Y(e)}))},n.or=function(t){return j(this,t)},n.trim=function(t){return this.wrap(t,t)},n.wrap=function(t,e){return F(t,this,e,(function(t,e){return e}))},n.thru=function(t){return t(this)},n.then=function(t){return A(t),B(this,t).map((function(t){return t[1]}))},n.many=function(){var t=this;return r((function(e,i){for(var r=[],n=void 0;;){if(!(n=T(t._(e,i),n)).status)return T(E(i,r),n);if(i===n.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");i=n.index,r.push(n.value)}}))},n.tieWith=function(t){return C(t),this.map((function(e){if(function(t){if(!y(t))throw new Error("not an array: "+t)}(e),e.length){C(e[0]);for(var i=e[0],r=1;r<e.length;r++)C(e[r]),i+=t+e[r];return i}return""}))},n.tie=function(){return this.tieWith("")},n.times=function(t,e){var i=this;return arguments.length<2&&(e=t),O(t),O(e),r((function(r,n){for(var s=[],o=void 0,a=void 0,h=0;h<t;h+=1){if(a=T(o=i._(r,n),a),!o.status)return a;n=o.index,s.push(o.value)}for(;h<e&&(a=T(o=i._(r,n),a),o.status);h+=1)n=o.index,s.push(o.value);return T(E(n,s),a)}))},n.result=function(t){return this.map((function(){return t}))},n.atMost=function(t){return this.times(0,t)},n.atLeast=function(t){return F(this.times(t),this.many(),(function(t,e){return t.concat(e)}))},n.map=function(t){R(t);var e=this;return r((function(i,r){var n=e._(i,r);return n.status?T(E(n.index,t(n.value)),n):n}))},n.contramap=function(t){R(t);var e=this;return r((function(i,r){var n=e.parse(t(i.slice(r)));return n.status?E(r+i.length,n.value):n}))},n.promap=function(t,e){return R(t),R(e),this.contramap(t).map(e)},n.skip=function(t){return B(this,t).map((function(t){return t[0]}))},n.mark=function(){return F(J,this,J,(function(t,e,i){return{start:t,value:e,end:i}}))},n.node=function(t){return F(J,this,J,(function(e,i,r){return{name:t,value:i,start:e,end:r}}))},n.sepBy=function(t){return G(this,t)},n.sepBy1=function(t){return U(this,t)},n.lookahead=function(t){return this.skip(W(t))},n.notFollowedBy=function(t){return this.skip(V(t))},n.desc=function(t){y(t)||(t=[t]);var e=this;return r((function(i,r){var n=e._(i,r);return n.status||(n.expected=t),n}))},n.fallback=function(t){return this.or(H(t))},n.ap=function(t){return F(t,this,(function(t,e){return t(e)}))},n.chain=function(t){var e=this;return r((function(i,r){var n=e._(i,r);return n.status?T(t(n.value)._(i,n.index),n):n}))},n.concat=n.or,n.empty=Z,n.of=H,n["fantasy-land/ap"]=n.ap,n["fantasy-land/chain"]=n.chain,n["fantasy-land/concat"]=n.concat,n["fantasy-land/empty"]=n.empty,n["fantasy-land/of"]=n.of,n["fantasy-land/map"]=n.map;var J=r((function(t,e){return E(e,w(t,e))})),K=r((function(t,e){return e>=t.length?x(e,"any character/byte"):E(e+1,M(t,e))})),Q=r((function(t,e){return E(t.length,t.slice(e))})),tt=r((function(t,e){return e<t.length?x(e,"EOF"):E(e,null)})),et=z(/[0-9]/).desc("a digit"),it=z(/[0-9]*/).desc("optional digits"),rt=z(/[a-z]/i).desc("a letter"),nt=z(/[a-z]*/i).desc("optional letters"),st=z(/\s*/).desc("optional whitespace"),ot=z(/\s+/).desc("whitespace"),at=X("\r"),ht=X("\n"),ut=X("\r\n"),lt=j(ut,ht,at).desc("newline"),ct=j(lt,tt);r.all=Q,r.alt=j,r.any=K,r.cr=at,r.createLanguage=function(t){var e={};for(var i in t)({}).hasOwnProperty.call(t,i)&&function(i){e[i]=q((function(){return t[i](e)}))}(i);return e},r.crlf=ut,r.custom=function(t){return r(t(E,x))},r.digit=et,r.digits=it,r.empty=Z,r.end=ct,r.eof=tt,r.fail=Y,r.formatError=L,r.index=J,r.isParser=_,r.lazy=q,r.letter=rt,r.letters=nt,r.lf=ht,r.lookahead=W,r.makeFailure=x,r.makeSuccess=E,r.newline=lt,r.noneOf=function(t){return $((function(e){return t.indexOf(e)<0})).desc("none of '"+t+"'")},r.notFollowedBy=V,r.of=H,r.oneOf=function(t){for(var e=t.split(""),i=0;i<e.length;i++)e[i]="'"+e[i]+"'";return $((function(e){return t.indexOf(e)>=0})).desc(e)},r.optWhitespace=st,r.Parser=r,r.range=function(t,e){return $((function(i){return t<=i&&i<=e})).desc(t+"-"+e)},r.regex=z,r.regexp=z,r.sepBy=G,r.sepBy1=U,r.seq=B,r.seqMap=F,r.seqObj=function(){for(var t,e={},i=0,n=(t=arguments,Array.prototype.slice.call(t)),s=n.length,o=0;o<s;o+=1){var a=n[o];if(!_(a)){if(y(a)&&2===a.length&&"string"==typeof a[0]&&_(a[1])){var h=a[0];if(Object.prototype.hasOwnProperty.call(e,h))throw new Error("seqObj: duplicate key "+h);e[h]=!0,i++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===i)throw new Error("seqObj expects at least one named parser, found zero");return r((function(t,e){for(var i,r={},o=0;o<s;o+=1){var a,h;if(y(n[o])?(a=n[o][0],h=n[o][1]):(a=null,h=n[o]),!(i=T(h._(t,e),i)).status)return i;a&&(r[a]=i.value),e=i.index}return T(E(e,r),i)}))},r.string=X,r.succeed=H,r.takeWhile=function(t){return R(t),r((function(e,i){for(var r=i;r<e.length&&t(M(e,r));)r++;return E(r,e.slice(i,r))}))},r.test=$,r.whitespace=ot,r["fantasy-land/empty"]=Z,r["fantasy-land/of"]=H,r.Binary={bitSeq:c,bitSeqObj:function(t){l();var e={},i=0,r=a((function(t){if(y(t)){var r=t;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(C(r[0]),O(r[1]),Object.prototype.hasOwnProperty.call(e,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return e[r[0]]=!0,i++,r}return O(t),[null,t]}),t);if(i<1)throw new Error("bitSeqObj expects at least one named pair, got ["+t.join(", ")+"]");var n=a((function(t){return t[0]}),r);return c(a((function(t){return t[1]}),r)).map((function(t){return o((function(t,e){return null!==e[0]&&(t[e[0]]=e[1]),t}),{},a((function(e,i){return[e,t[i]]}),n))}))},byte:function(t){if(l(),O(t),t>255)throw new Error("Value specified to byte constructor ("+t+"=0x"+t.toString(16)+") is larger in value than a single byte.");var e=(t>15?"0x":"0x0")+t.toString(16);return r((function(i,r){var n=M(i,r);return n===t?E(r+1,n):x(r,e)}))},buffer:function(t){return f("buffer",t).map((function(t){return Buffer.from(t)}))},encodedString:function(t,e){return f("string",e).map((function(e){return e.toString(t)}))},uintBE:p,uint8BE:p(1),uint16BE:p(2),uint32BE:p(4),uintLE:m,uint8LE:m(1),uint16LE:m(2),uint32LE:m(4),intBE:g,int8BE:g(1),int16BE:g(2),int32BE:g(4),intLE:v,int8LE:v(1),int16LE:v(2),int32LE:v(4),floatBE:f("floatBE",4).map((function(t){return t.readFloatBE(0)})),floatLE:f("floatLE",4).map((function(t){return t.readFloatLE(0)})),doubleBE:f("doubleBE",8).map((function(t){return t.readDoubleBE(0)})),doubleLE:f("doubleLE",8).map((function(t){return t.readDoubleLE(0)}))},t.exports=r}])},"./node_modules/pixi.js/dist/esm/pixi.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{utils:()=>r,AccessibilityManager:()=>n.AccessibilityManager,accessibleTarget:()=>n.accessibleTarget,InteractionData:()=>s.InteractionData,InteractionEvent:()=>s.InteractionEvent,InteractionManager:()=>s.InteractionManager,InteractionTrackingData:()=>s.InteractionTrackingData,interactiveTarget:()=>s.interactiveTarget,Application:()=>o.Application,AbstractBatchRenderer:()=>a.AbstractBatchRenderer,AbstractMultiResource:()=>a.AbstractMultiResource,AbstractRenderer:()=>a.AbstractRenderer,ArrayResource:()=>a.ArrayResource,Attribute:()=>a.Attribute,BaseImageResource:()=>a.BaseImageResource,BaseRenderTexture:()=>a.BaseRenderTexture,BaseTexture:()=>a.BaseTexture,BatchDrawCall:()=>a.BatchDrawCall,BatchGeometry:()=>a.BatchGeometry,BatchPluginFactory:()=>a.BatchPluginFactory,BatchRenderer:()=>a.BatchRenderer,BatchShaderGenerator:()=>a.BatchShaderGenerator,BatchSystem:()=>a.BatchSystem,BatchTextureArray:()=>a.BatchTextureArray,Buffer:()=>a.Buffer,BufferResource:()=>a.BufferResource,CanvasResource:()=>a.CanvasResource,ContextSystem:()=>a.ContextSystem,CubeResource:()=>a.CubeResource,Filter:()=>a.Filter,FilterState:()=>a.FilterState,FilterSystem:()=>a.FilterSystem,Framebuffer:()=>a.Framebuffer,FramebufferSystem:()=>a.FramebufferSystem,GLFramebuffer:()=>a.GLFramebuffer,GLProgram:()=>a.GLProgram,GLTexture:()=>a.GLTexture,Geometry:()=>a.Geometry,GeometrySystem:()=>a.GeometrySystem,IGLUniformData:()=>a.IGLUniformData,INSTALLED:()=>a.INSTALLED,ImageBitmapResource:()=>a.ImageBitmapResource,ImageResource:()=>a.ImageResource,MaskData:()=>a.MaskData,MaskSystem:()=>a.MaskSystem,ObjectRenderer:()=>a.ObjectRenderer,Program:()=>a.Program,ProjectionSystem:()=>a.ProjectionSystem,Quad:()=>a.Quad,QuadUv:()=>a.QuadUv,RenderTexture:()=>a.RenderTexture,RenderTexturePool:()=>a.RenderTexturePool,RenderTextureSystem:()=>a.RenderTextureSystem,Renderer:()=>a.Renderer,Resource:()=>a.Resource,SVGResource:()=>a.SVGResource,ScissorSystem:()=>a.ScissorSystem,Shader:()=>a.Shader,ShaderSystem:()=>a.ShaderSystem,SpriteMaskFilter:()=>a.SpriteMaskFilter,State:()=>a.State,StateSystem:()=>a.StateSystem,StencilSystem:()=>a.StencilSystem,System:()=>a.System,Texture:()=>a.Texture,TextureGCSystem:()=>a.TextureGCSystem,TextureMatrix:()=>a.TextureMatrix,TextureSystem:()=>a.TextureSystem,TextureUvs:()=>a.TextureUvs,UniformGroup:()=>a.UniformGroup,VideoResource:()=>a.VideoResource,ViewableBuffer:()=>a.ViewableBuffer,autoDetectRenderer:()=>a.autoDetectRenderer,autoDetectResource:()=>a.autoDetectResource,checkMaxIfStatementsInShader:()=>a.checkMaxIfStatementsInShader,createUBOElements:()=>a.createUBOElements,defaultFilterVertex:()=>a.defaultFilterVertex,defaultVertex:()=>a.defaultVertex,generateProgram:()=>a.generateProgram,generateUniformBufferSync:()=>a.generateUniformBufferSync,getTestContext:()=>a.getTestContext,getUBOData:()=>a.getUBOData,resources:()=>a.resources,systems:()=>a.systems,uniformParsers:()=>a.uniformParsers,Extract:()=>h.Extract,AppLoaderPlugin:()=>u.AppLoaderPlugin,Loader:()=>u.Loader,LoaderResource:()=>u.LoaderResource,TextureLoader:()=>u.TextureLoader,BlobResource:()=>l.BlobResource,CompressedTextureLoader:()=>l.CompressedTextureLoader,CompressedTextureResource:()=>l.CompressedTextureResource,DDSLoader:()=>l.DDSLoader,FORMATS_TO_COMPONENTS:()=>l.FORMATS_TO_COMPONENTS,INTERNAL_FORMATS:()=>l.INTERNAL_FORMATS,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>l.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,KTXLoader:()=>l.KTXLoader,TYPES_TO_BYTES_PER_COMPONENT:()=>l.TYPES_TO_BYTES_PER_COMPONENT,TYPES_TO_BYTES_PER_PIXEL:()=>l.TYPES_TO_BYTES_PER_PIXEL,ParticleContainer:()=>c.ParticleContainer,ParticleRenderer:()=>c.ParticleRenderer,BasePrepare:()=>f.BasePrepare,CountLimiter:()=>f.CountLimiter,Prepare:()=>f.Prepare,TimeLimiter:()=>f.TimeLimiter,Spritesheet:()=>d.Spritesheet,SpritesheetLoader:()=>d.SpritesheetLoader,TilingSprite:()=>p.TilingSprite,TilingSpriteRenderer:()=>p.TilingSpriteRenderer,BitmapFont:()=>m.BitmapFont,BitmapFontData:()=>m.BitmapFontData,BitmapFontLoader:()=>m.BitmapFontLoader,BitmapText:()=>m.BitmapText,Ticker:()=>g.Ticker,TickerPlugin:()=>g.TickerPlugin,UPDATE_PRIORITY:()=>g.UPDATE_PRIORITY,ALPHA_MODES:()=>T.ALPHA_MODES,BLEND_MODES:()=>T.BLEND_MODES,BUFFER_BITS:()=>T.BUFFER_BITS,BUFFER_TYPE:()=>T.BUFFER_TYPE,CLEAR_MODES:()=>T.CLEAR_MODES,DRAW_MODES:()=>T.DRAW_MODES,ENV:()=>T.ENV,FORMATS:()=>T.FORMATS,GC_MODES:()=>T.GC_MODES,MASK_TYPES:()=>T.MASK_TYPES,MIPMAP_MODES:()=>T.MIPMAP_MODES,MSAA_QUALITY:()=>T.MSAA_QUALITY,PRECISION:()=>T.PRECISION,RENDERER_TYPE:()=>T.RENDERER_TYPE,SAMPLER_TYPES:()=>T.SAMPLER_TYPES,SCALE_MODES:()=>T.SCALE_MODES,TARGETS:()=>T.TARGETS,TYPES:()=>T.TYPES,WRAP_MODES:()=>T.WRAP_MODES,Bounds:()=>S.Bounds,Container:()=>S.Container,DisplayObject:()=>S.DisplayObject,TemporaryDisplayObject:()=>S.TemporaryDisplayObject,FillStyle:()=>w.FillStyle,GRAPHICS_CURVES:()=>w.GRAPHICS_CURVES,Graphics:()=>w.Graphics,GraphicsData:()=>w.GraphicsData,GraphicsGeometry:()=>w.GraphicsGeometry,LINE_CAP:()=>w.LINE_CAP,LINE_JOIN:()=>w.LINE_JOIN,LineStyle:()=>w.LineStyle,graphicsUtils:()=>w.graphicsUtils,Circle:()=>A.Circle,DEG_TO_RAD:()=>A.DEG_TO_RAD,Ellipse:()=>A.Ellipse,Matrix:()=>A.Matrix,ObservablePoint:()=>A.ObservablePoint,PI_2:()=>A.PI_2,Point:()=>A.Point,Polygon:()=>A.Polygon,RAD_TO_DEG:()=>A.RAD_TO_DEG,Rectangle:()=>A.Rectangle,RoundedRectangle:()=>A.RoundedRectangle,SHAPES:()=>A.SHAPES,Transform:()=>A.Transform,groupD8:()=>A.groupD8,Mesh:()=>M.Mesh,MeshBatchUvs:()=>M.MeshBatchUvs,MeshGeometry:()=>M.MeshGeometry,MeshMaterial:()=>M.MeshMaterial,NineSlicePlane:()=>O.NineSlicePlane,PlaneGeometry:()=>O.PlaneGeometry,RopeGeometry:()=>O.RopeGeometry,SimpleMesh:()=>O.SimpleMesh,SimplePlane:()=>O.SimplePlane,SimpleRope:()=>O.SimpleRope,Runner:()=>R.Runner,Sprite:()=>C.Sprite,AnimatedSprite:()=>P.AnimatedSprite,TEXT_GRADIENT:()=>I.TEXT_GRADIENT,Text:()=>I.Text,TextMetrics:()=>I.TextMetrics,TextStyle:()=>I.TextStyle,isMobile:()=>N.isMobile,settings:()=>N.settings,VERSION:()=>D,filters:()=>L}),i("./node_modules/@pixi/polyfill/dist/esm/polyfill.js");var r=i("./node_modules/@pixi/utils/dist/esm/utils.js"),n=i("./node_modules/@pixi/accessibility/dist/esm/accessibility.js"),s=i("./node_modules/@pixi/interaction/dist/esm/interaction.js"),o=i("./node_modules/@pixi/app/dist/esm/app.js"),a=i("./node_modules/@pixi/core/dist/esm/core.js"),h=i("./node_modules/@pixi/extract/dist/esm/extract.js"),u=i("./node_modules/@pixi/loaders/dist/esm/loaders.js"),l=i("./node_modules/@pixi/compressed-textures/dist/esm/compressed-textures.js"),c=i("./node_modules/@pixi/particle-container/dist/esm/particle-container.js"),f=i("./node_modules/@pixi/prepare/dist/esm/prepare.js"),d=i("./node_modules/@pixi/spritesheet/dist/esm/spritesheet.js"),p=i("./node_modules/@pixi/sprite-tiling/dist/esm/sprite-tiling.js"),m=i("./node_modules/@pixi/text-bitmap/dist/esm/text-bitmap.js"),g=i("./node_modules/@pixi/ticker/dist/esm/ticker.js"),v=i("./node_modules/@pixi/filter-alpha/dist/esm/filter-alpha.js"),_=i("./node_modules/@pixi/filter-blur/dist/esm/filter-blur.js"),y=i("./node_modules/@pixi/filter-color-matrix/dist/esm/filter-color-matrix.js"),b=i("./node_modules/@pixi/filter-displacement/dist/esm/filter-displacement.js"),E=i("./node_modules/@pixi/filter-fxaa/dist/esm/filter-fxaa.js"),x=i("./node_modules/@pixi/filter-noise/dist/esm/filter-noise.js"),T=(i("./node_modules/@pixi/mixin-cache-as-bitmap/dist/esm/mixin-cache-as-bitmap.js"),i("./node_modules/@pixi/mixin-get-child-by-name/dist/esm/mixin-get-child-by-name.js"),i("./node_modules/@pixi/mixin-get-global-position/dist/esm/mixin-get-global-position.js"),i("./node_modules/@pixi/constants/dist/esm/constants.js")),S=i("./node_modules/@pixi/display/dist/esm/display.js"),w=i("./node_modules/@pixi/graphics/dist/esm/graphics.js"),A=i("./node_modules/@pixi/math/dist/esm/math.js"),M=i("./node_modules/@pixi/mesh/dist/esm/mesh.js"),O=i("./node_modules/@pixi/mesh-extras/dist/esm/mesh-extras.js"),R=i("./node_modules/@pixi/runner/dist/esm/runner.js"),C=i("./node_modules/@pixi/sprite/dist/esm/sprite.js"),P=i("./node_modules/@pixi/sprite-animated/dist/esm/sprite-animated.js"),I=i("./node_modules/@pixi/text/dist/esm/text.js"),N=i("./node_modules/@pixi/settings/dist/esm/settings.js");a.Renderer.registerPlugin("accessibility",n.AccessibilityManager),a.Renderer.registerPlugin("extract",h.Extract),a.Renderer.registerPlugin("interaction",s.InteractionManager),a.Renderer.registerPlugin("particle",c.ParticleRenderer),a.Renderer.registerPlugin("prepare",f.Prepare),a.Renderer.registerPlugin("batch",a.BatchRenderer),a.Renderer.registerPlugin("tilingSprite",p.TilingSpriteRenderer),u.Loader.registerPlugin(m.BitmapFontLoader),u.Loader.registerPlugin(l.CompressedTextureLoader),u.Loader.registerPlugin(l.DDSLoader),u.Loader.registerPlugin(l.KTXLoader),u.Loader.registerPlugin(d.SpritesheetLoader),o.Application.registerPlugin(g.TickerPlugin),o.Application.registerPlugin(u.AppLoaderPlugin);var D="6.1.3",L={AlphaFilter:v.AlphaFilter,BlurFilter:_.BlurFilter,BlurFilterPass:_.BlurFilterPass,ColorMatrixFilter:y.ColorMatrixFilter,DisplacementFilter:b.DisplacementFilter,FXAAFilter:E.FXAAFilter,NoiseFilter:x.NoiseFilter}},"./node_modules/platform/platform.js":function(t,e,i){var r;t=i.nmd(t),function(){"use strict";var n={function:!0,object:!0},s=n[typeof window]&&window||this,o=n[typeof e]&&e,a=n.object&&t&&!t.nodeType&&t,h=o&&a&&"object"==typeof i.g&&i.g;!h||h.global!==h&&h.window!==h&&h.self!==h||(s=h);var u=Math.pow(2,53)-1,l=/\bOpera/,c=Object.prototype,f=c.hasOwnProperty,d=c.toString;function p(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function m(t){return t=b(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:p(t)}function g(t,e){for(var i in t)f.call(t,i)&&e(t[i],i,t)}function v(t){return null==t?p(t):d.call(t).slice(8,-1)}function _(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function y(t,e){var i=null;return function(t,e){var i=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++i<r;)e(t[i],i);else g(t,e)}(t,(function(r,n){i=e(i,r,n,t)})),i}function b(t){return String(t).replace(/^ +| +$/g,"")}var E=function t(e){var i=s,r=e&&"object"==typeof e&&"String"!=v(e);r&&(i=e,e=null);var n=i.navigator||{},o=n.userAgent||"";e||(e=o);var a,h,u,c,f=r?!!n.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),p="Object",E=r?p:"ScriptBridgingProxyObject",x=r?p:"Environment",T=r&&i.java?"JavaPackage":v(i.java),S=r?p:"RuntimeObject",w=/\bJava/.test(T)&&i.java,A=w&&v(i.environment)==x,M=w?"a":"α",O=w?"b":"β",R=i.document||{},C=i.operamini||i.opera,P=l.test(P=r&&C?C["[[Class]]"]:v(C))?P:C=null,I=e,N=[],D=null,L=e==o,k=L&&C&&"function"==typeof C.version&&C.version(),B=y([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,i){return t||RegExp("\\b"+(i.pattern||_(i))+"\\b","i").exec(e)&&(i.label||i)})),F=y(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(t,i){return t||RegExp("\\b"+(i.pattern||_(i))+"\\b","i").exec(e)&&(i.label||i)})),j=X([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),G=y({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(t,i,r){return t||(i[j]||i[/^[a-z]+(?: +[a-z]+\b)*/i.exec(j)]||RegExp("\\b"+_(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})),U=y(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(t,i){var r=i.pattern||_(i);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,i){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&i&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&i&&(t=t.replace(RegExp(e,"i"),i)),m(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,i.label||i)),t}));function X(t){return y(t,(function(t,i){var r=i.pattern||_(i);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(i.label&&!RegExp(r,"i").test(i.label)?i.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),i=i.label||i,t=m(t[0].replace(RegExp(r,"i"),i).replace(RegExp("; *(?:"+i+"[_-])?","i")," ").replace(RegExp("("+i+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function z(t){return y(t,(function(t,i){return t||(RegExp(i+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(B&&(B=[B]),/\bAndroid\b/.test(U)&&!j&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(j=b(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),G&&!j?j=X([G]):G&&j&&(j=j.replace(RegExp("^("+_(G)+")[-_.\\s]","i"),G+" ").replace(RegExp("^("+_(G)+")[-_.]?(\\w)","i"),G+" $2")),(a=/\bGoogle TV\b/.exec(j))&&(j=a[0]),/\bSimulator\b/i.test(e)&&(j=(j?j+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(e)&&N.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(e)?(G=(a=t(e.replace(/like iPhone OS/,""))).manufacturer,j=a.product):/^iP/.test(j)?(F||(F="Safari"),U="iOS"+((a=/ OS ([\d_]+)/i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==F&&/^Linux\b/i.test(U)?U="Kubuntu":G&&"Google"!=G&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(j))||/\bAndroid\b/.test(U)&&/^Chrome/.test(F)&&/\bVersion\//i.test(e)?(F="Android Browser",U=/\bAndroid\b/.test(U)?U:"Android"):"Silk"==F?(/\bMobi/i.test(e)||(U="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&N.unshift("accelerated")):"UC Browser"==F&&/\bUCWEB\b/.test(e)?N.push("speed mode"):"PaleMoon"==F&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?N.push("identifying as Firefox "+a[1]):"Firefox"==F&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(U||(U="Firefox OS"),j||(j=a[1])):!F||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!j&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(F=null),(a=j||G||U)&&(j||G||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(U))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(U)?U:a)+" Browser")):"Electron"==F&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&N.push("Chromium "+a),k||(k=z(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",_(F),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==B&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(B)&&"WebKit"||!B&&/\bMSIE\b/i.test(e)&&("Mac OS"==U?"Tasman":"Trident")||"WebKit"==B&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(B=[a]),"IE"==F&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(F+=" Mobile",U="Windows Phone "+(/\+$/.test(a)?a:a+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(F="IE Mobile",U="Windows Phone 8.x",N.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=F&&"Trident"==B&&(a=/\brv:([\d.]+)/.exec(e))&&(F&&N.push("identifying as "+F+(k?" "+k:"")),F="IE",k=a[1]),L){if("global",c=null!=(u=i)?typeof u.global:"number",/^(?:boolean|number|string|undefined)$/.test(c)||"object"==c&&!u.global)v(a=i.runtime)==E?(F="Adobe AIR",U=a.flash.system.Capabilities.os):v(a=i.phantom)==S?(F="PhantomJS",k=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof R.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(k=[k,R.documentMode],(a=+a[1]+4)!=k[1]&&(N.push("IE "+k[1]+" mode"),B&&(B[1]=""),k[1]=a),k="IE"==F?String(k[1].toFixed(1)):k[0]):"number"==typeof R.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(N.push("masking as "+F+" "+k),F="IE",k="11.0",B=["Trident"],U="Windows");else if(w&&(I=(a=w.lang.System).getProperty("os.arch"),U=U||a.getProperty("os.name")+" "+a.getProperty("os.version")),A){try{k=i.require("ringo/engine").version.join("."),F="RingoJS"}catch(t){(a=i.system)&&a.global.system==i.system&&(F="Narwhal",U||(U=a[0].os||null))}F||(F="Rhino")}else"object"==typeof i.process&&!i.process.browser&&(a=i.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(N.push("Node "+a.versions.node),F="Electron",k=a.versions.electron):"string"==typeof a.versions.nw&&(N.push("Chromium "+k,"Node "+a.versions.node),F="NW.js",k=a.versions.nw)),F||(F="Node.js",I=a.arch,U=a.platform,k=(k=/[\d.]+/.exec(a.version))?k[0]:null));U=U&&m(U)}if(k&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(L&&n.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(D=/b/i.test(a)?"beta":"alpha",k=k.replace(RegExp(a+"\\+?$"),"")+("beta"==D?O:M)+(/\d+\+?/.exec(a)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(U))F="Firefox Mobile";else if("Maxthon"==F&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(j))"Xbox 360"==j&&(U=null),"Xbox 360"==j&&/\bIEMobile\b/.test(e)&&N.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||j||/Browser|Mobi/.test(F))||"Windows CE"!=U&&!/Mobi/i.test(e))if("IE"==F&&L)try{null===i.external&&N.unshift("platform preview")}catch(t){N.unshift("embedded")}else(/\bBlackBerry\b/.test(j)||/\bBB10\b/.test(e))&&(a=(RegExp(j.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||k)?(U=((a=[a,/BB10/.test(e)])[1]?(j=null,G="BlackBerry"):"Device Software")+" "+a[0],k=null):this!=g&&"Wii"!=j&&(L&&C||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(U)||"IE"==F&&(U&&!/^Win/.test(U)&&k>5.5||/\bWindows XP\b/.test(U)&&k>8||8==k&&!/\bTrident\b/.test(e)))&&!l.test(a=t.call(g,e.replace(l,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),l.test(F)?(/\bIE\b/.test(a)&&"Mac OS"==U&&(U=null),a="identify"+a):(a="mask"+a,F=P?m(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(U=null),L||(k=null)),B=["Presto"],N.push(a));else F+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==F&&"+"==a[1].slice(-1)?(F="WebKit Nightly",D="alpha",k=a[1].slice(0,-1)):k!=a[1]&&k!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(k=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==B&&(B=["Blink"]),L&&(f||a[1])?(B&&(B[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=B?"27":"28")):(B&&(B[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),B&&(B[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==F&&(!k||parseInt(k)>45)?k=a:"Chrome"==F&&/\bHeadlessChrome/i.test(e)&&N.unshift("headless")),"Opera"==F&&(a=/\bzbov|zvav$/.exec(U))?(F+=" ",N.unshift("desktop mode"),"zvav"==a?(F+="Mini",k=null):F+="Mobile",U=U.replace(RegExp(" *"+a+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(B&&B[1])?(N.unshift("desktop mode"),F="Chrome Mobile",k=null,/\bOS X\b/.test(U)?(G="Apple",U="iOS 4.3+"):U=null):/\bSRWare Iron\b/.test(F)&&!k&&(k=z("Chrome")),k&&0==k.indexOf(a=/[\d.]+$/.exec(U))&&e.indexOf("/"+a+"-")>-1&&(U=b(U.replace(a,""))),U&&-1!=U.indexOf(F)&&!RegExp(F+" OS").test(U)&&(U=U.replace(RegExp(" *"+_(F)+" *"),"")),B&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(U)&&/\bSafari\b/.test(B[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(F)&&B[1])&&(a=B[B.length-1])&&N.push(a),N.length&&(N=["("+N.join("; ")+")"]),G&&j&&j.indexOf(G)<0&&N.push("on "+G),j&&N.push((/^on /.test(N[N.length-1])?"":"on ")+j),U&&(a=/ ([\d.+]+)$/.exec(U),h=a&&"/"==U.charAt(U.length-a[0].length-1),U={architecture:32,family:a&&!h?U.replace(a[0],""):U,version:a?a[1]:null,toString:function(){var t=this.version;return this.family+(t&&!h?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(I))&&!/\bi686\b/i.test(I)?(U&&(U.architecture=64,U.family=U.family.replace(RegExp(" *"+a),"")),F&&(/\bWOW64\b/i.test(e)||L&&/\w(?:86|32)$/.test(n.cpuClass||n.platform)&&!/\bWin64; x64\b/i.test(e))&&N.unshift("32-bit")):U&&/^OS X/.test(U.family)&&"Chrome"==F&&parseFloat(k)>=39&&(U.architecture=64),e||(e=null);var H={};return H.description=e,H.layout=B&&B[0],H.manufacturer=G,H.name=F,H.prerelease=D,H.product=j,H.ua=e,H.version=F&&k,H.os=U||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=t,H.toString=function(){return this.description||""},H.version&&N.unshift(k),H.name&&N.unshift(F),U&&F&&(U!=String(U).split(" ")[0]||U!=F.split(" ")[0]&&!j)&&N.push(j?"("+U+")":"on "+U),N.length&&(H.description=N.join(" ")),H}();s.platform=E,void 0===(r=function(){return E}.call(e,i,e,t))||(t.exports=r)}.call(this)},"./node_modules/promise-polyfill/src/allSettled.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});const r=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function s(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var o=i.then;if("function"==typeof o)return void o.call(i,(function(e){s(t,e)}),(function(i){r[t]={status:"rejected",reason:i},0==--n&&e(r)}))}r[t]={status:"fulfilled",value:i},0==--n&&e(r)}for(var o=0;o<r.length;o++)s(o,r[o])}))}},"./node_modules/promise-polyfill/src/finally.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});const r=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))}},"./node_modules/promise-polyfill/src/index.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var r=i("./node_modules/promise-polyfill/src/finally.js"),n=i("./node_modules/promise-polyfill/src/allSettled.js"),s=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function a(){}function h(t){if(!(this instanceof h))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,h._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void c(e.promise,t)}l(e.promise,r)}else(1===t._state?l:c)(e.promise,t._value)}))):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof h)return t._state=3,t._value=e,void f(t);if("function"==typeof i)return void p((r=i,n=e,function(){r.apply(n,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var r,n}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&h._immediateFn((function(){t._handled||h._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)u(t,t._deferreds[e]);t._deferreds=null}function d(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function p(t,e){var i=!1;try{t((function(t){i||(i=!0,l(e,t))}),(function(t){i||(i=!0,c(e,t))}))}catch(t){if(i)return;i=!0,c(e,t)}}h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){var i=new this.constructor(a);return u(this,new d(t,e,i)),i},h.prototype.finally=r.default,h.all=function(t){return new h((function(e,i){if(!o(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function s(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(e){s(t,e)}),i)}r[t]=o,0==--n&&e(r)}catch(t){i(t)}}for(var a=0;a<r.length;a++)s(a,r[a])}))},h.allSettled=n.default,h.resolve=function(t){return t&&"object"==typeof t&&t.constructor===h?t:new h((function(e){e(t)}))},h.reject=function(t){return new h((function(e,i){i(t)}))},h.race=function(t){return new h((function(e,i){if(!o(t))return i(new TypeError("Promise.race accepts an array"));for(var r=0,n=t.length;r<n;r++)h.resolve(t[r]).then(e,i)}))},h._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){s(t,0)},h._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const m=h},"./node_modules/querystring/decode.js":t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,i,r,n){i=i||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var o=/\+/g;t=t.split(i);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var h=t.length;a>0&&h>a&&(h=a);for(var u=0;u<h;++u){var l,c,f,d,p=t[u].replace(o,"%20"),m=p.indexOf(r);m>=0?(l=p.substr(0,m),c=p.substr(m+1)):(l=p,c=""),f=decodeURIComponent(l),d=decodeURIComponent(c),e(s,f)?Array.isArray(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s}},"./node_modules/querystring/encode.js":t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,i,r,n){return i=i||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var s=encodeURIComponent(e(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return s+encodeURIComponent(e(t))})).join(i):s+encodeURIComponent(e(t[n]))})).join(i):n?encodeURIComponent(e(n))+r+encodeURIComponent(e(t)):""}},"./node_modules/querystring/index.js":(t,e,i)=>{"use strict";e.decode=e.parse=i("./node_modules/querystring/decode.js"),e.encode=e.stringify=i("./node_modules/querystring/encode.js")},"./node_modules/react-compat-css-styled/dist/styled.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l,StyledElement:()=>u});var r=i("./node_modules/css-styled/dist/styled.esm.js"),n=i("./node_modules/react-simple-compat/dist/compat.esm.js"),s=i("./node_modules/framework-utils/dist/utils.esm.js"),o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},o(t,e)};function a(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h=function(){return h=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},h.apply(this,arguments)},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}a(e,t);var i=e.prototype;return i.render=function(){var t=this.props,e=t.className,i=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),o=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}(t,["className","cspNonce","portalContainer"]),a=this.injector.className,u=this.tag,l={};return(n.version||"").indexOf("simple")>-1&&r&&(l={portalContainer:r}),(0,n.createElement)(u,h({ref:(0,s.ref)(this,"element"),"data-styled-id":a,className:i+" "+a},l,o))},i.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},i.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},i.getElement=function(){return this.element},e}(n.Component);const l=function(t,e){var i=(0,r.default)(e);return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.injector=i,r.tag=t,r}return a(r,e),r}(u)}},"./node_modules/react-compat-moveable/dist/moveable.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>vr,Clippable:()=>Ui,Draggable:()=>Je,EdgeDraggable:()=>ir,InitialMoveable:()=>pr,MOVEABLE_ABLES:()=>nr,MOVEABLE_EVENTS:()=>hr,MOVEABLE_EVENTS_MAP:()=>ar,MOVEABLE_EVENTS_PROPS_MAP:()=>sr,MOVEABLE_METHODS:()=>D,MOVEABLE_PROPS:()=>ur,MOVEABLE_PROPS_MAP:()=>or,Pinchable:()=>Ct,Resizable:()=>hi,Rotatable:()=>ai,Roundable:()=>Yi,Scalable:()=>ui,Snappable:()=>Ze,Warpable:()=>fi,getElementInfo:()=>H,makeAble:()=>_,makeMoveable:()=>gr});var r=i("./node_modules/@egjs/agent/dist/agent.esm.js"),n=i("./node_modules/framework-utils/dist/utils.esm.js"),s=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),o=i("./node_modules/@scena/matrix/dist/matrix.esm.js"),a=i("./node_modules/css-to-mat/dist/css-to-mat.esm.js"),h=i("./node_modules/overlap-area/dist/overlap-area.esm.js"),u=i("./node_modules/@egjs/children-differ/dist/children-differ.esm.js"),l=i("./node_modules/@scena/dragscroll/dist/dragscroll.esm.js"),c=i("./node_modules/react-simple-compat/dist/compat.esm.js"),f=i("./node_modules/gesto/dist/gesto.esm.js"),d=i("./node_modules/react-compat-css-styled/dist/styled.esm.js"),p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},p(t,e)};function m(t,e){function i(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var g=function(){return g=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},g.apply(this,arguments)};function v(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r}function _(t,e){var i;return g({events:{},props:(i={},i[t]=Boolean,i),name:t},e)}function y(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var b,E=(0,r.default)().browser.webkit,x=E&&!!(b=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(b[1])<605,T="moveable-",S="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=y(1,t),i=y(2,t),r=45*Math.round(t/45)%180,n="ns-resize";return 135===r?n="nwse-resize":45===r?n="nesw-resize":90===r&&(n="ew-resize"),"cursor:"+n+";cursor: url('"+e+"') 16 16, "+n+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+i+"') 2x) 16 16, "+n+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(x?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",w=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],A=1e-4,M=1e-7,O=1e-9,R=Math.pow(10,10),C=-R,P=["n","w","s","e","nw","ne","sw","se"],I={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},N={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},D=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.prefixNames.apply(void 0,v([T],t))}function k(t,e,i){return(0,o.multiplies)(e,(0,o.createOriginMatrix)(i,e),t,(0,o.createOriginMatrix)(i.map((function(t){return-t})),e))}function B(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function F(t,e,i){for(var r=document.body,n=!t||i?t:t.parentElement,s=t===e||n===e,o="relative";n&&n!==r;){e===n&&(s=!0);var a=pt(n),h=a.transform;if(o=a.position,"svg"===n.tagName.toLowerCase()||"static"!==o||h&&"none"!==h)break;n=n.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:s||!n||n===r,offsetParent:n||r}}function j(t,e,i,r){var n,o=t.tagName.toLowerCase(),a=t.offsetLeft,h=t.offsetTop;if(r){var u=(e||document.documentElement).getBoundingClientRect();a-=u.left,h-=u.top}var l,c,f=(0,s.isUndefined)(a),d=!f;return d||"svg"===o?c=(l=B(i).map((function(t){return parseFloat(t)}))).slice():(c=(l=x?function(t){return B(pt(t,":before")).map((function(e,i){var r=(0,s.splitUnit)(e),n=r.value,o=r.unit;return n*function(t,e,i){return"%"===e?W(t.ownerSVGElement)[i?"width":"height"]/100:1}(t,o,0===i)}))}(t):B(i).map((function(t){return parseFloat(t)}))).slice(),d=!0,n=function(t,e){if(!t.getBBox)return[0,0];var i=t.getBBox(),r=W(t.ownerSVGElement),n=i.x-r.x,s=i.y-r.y;return[n,s,e[0]-n,e[1]-s]}(t,l),a=n[0],h=n[1],l[0]=n[2],l[1]=n[3]),{tagName:o,isSVG:f,hasOffset:d,offset:[a||0,h||0],origin:l,targetOrigin:c}}function G(t,e,i){void 0===i&&(i=pt(t));var r=pt(document.body),n=r.position;if(!(e||n&&"static"!==n))return[0,0];var s=parseInt(r.marginLeft,10),o=parseInt(r.marginTop,10);return"absolute"===i.position&&("auto"===i.top&&"auto"===i.bottom||(o=0),"auto"===i.left&&"auto"===i.right||(s=0)),[s,o]}function U(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=(0,o.convertDimension)(e,3,4))}))}function X(t,e){for(var i,r,n,a,h=t,u=[],l=t===e,c=!1,f=3,d=F(e,e,!0).offsetParent;h&&!l;){var p=pt(h),m=p.position,g="fixed"===m,v=(0,o.convertCSStoMatrix)((a=p.transform)&&"none"!==a?(0,s.isObject)(a)?a:(0,s.splitBracket)(a).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0]),_=v.length;c||16!==_||(c=!0,f=4,U(u)),c&&9===_&&(v=(0,o.convertDimension)(v,3,4));var y=j(h,e,p,g),b=y.tagName,x=y.hasOffset,T=y.isSVG,S=y.origin,w=y.targetOrigin,A=y.offset,M=A[0],O=A[1];"svg"===b&&n?(u.push({type:"target",target:h,matrix:V(h,f)}),u.push({type:"offset",target:h,matrix:(0,o.createIdentityMatrix)(f)})):"g"===b&&t!==h&&(M=0,O=0);var R=F(h,e),C=R.offsetParent,P=R.isEnd,I=R.isStatic;E&&x&&!T&&I&&("relative"===m||"static"===m)&&(M-=C.offsetLeft,O-=C.offsetTop,l=l||P);var N=0,D=0;if(x&&d!==C&&(N=C.clientLeft,D=C.clientTop),x&&C===document.body){var L=G(h,!1,p);M+=L[0],O+=L[1]}if(u.push({type:"target",target:h,matrix:k(v,f,S)}),x?u.push({type:"offset",target:h,matrix:(0,o.createOriginMatrix)([M-h.scrollLeft+N,O-h.scrollTop+D],f)}):u.push({type:"offset",target:h,origin:S}),n||(n=v),i||(i=S),r||(r=w),l||g)break;h=C,l=P}return n||(n=(0,o.createIdentityMatrix)(f)),i||(i=[0,0]),r||(r=[0,0]),{offsetContainer:d,matrixes:u,targetMatrix:n,transformOrigin:i,targetOrigin:r,is3d:c}}function z(t,e,i,r){var n;void 0===i&&(i=e);var a=0,h=0,u=0,l={};if(t){var c=pt(t);a=t.offsetWidth,h=t.offsetHeight,(0,s.isUndefined)(a)&&(a=(n=rt(t,c,!0))[0],h=n[1])}if(t){var f=function(t,e,i,r){void 0===i&&(i=e);var n=X(t,e),s=n.matrixes,a=n.is3d,h=n.targetMatrix,u=n.transformOrigin,l=n.targetOrigin,c=X(n.offsetContainer,i),f=c.matrixes,d=c.is3d,p=r||d||a,m=p?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=h,_=(0,o.createIdentityMatrix)(m),y=(0,o.createIdentityMatrix)(m),b=(0,o.createIdentityMatrix)(m),E=(0,o.createIdentityMatrix)(m),x=s.length,T=i||document.body,S=F(T,T,!0).offsetParent;f.reverse(),s.reverse(),!a&&p&&(v=(0,o.convertDimension)(v,3,4),U(s)),!d&&p&&U(f),f.forEach((function(t){y=(0,o.multiply)(y,t.matrix,m)})),s.forEach((function(t,e){if(x-2===e&&(b=_.slice()),x-1===e&&(E=_.slice()),!t.matrix){var i=function(t,e,i,r,n){var s,a=t.target,h=t.origin,u=e.matrix,l=rt(a,void 0,!0),c=l[0],f=l[1],d=i.getBoundingClientRect(),p=[0,0];i===document.body&&(p=G(a,!0));for(var m=a.getBoundingClientRect(),g=m.left-d.left+i.scrollLeft-(i.clientLeft||0)+p[0],v=m.top-d.top+i.scrollTop-(i.clientTop||0)+p[1],_=m.width,y=m.height,b=(0,o.multiplies)(r,n,u),E=J(b,c,f,r),x=E.left,T=E.top,S=E.width,w=E.height,A=$(b,h,r),M=(0,o.minus)(A,[x,T]),O=[g+M[0]*_/S,v+M[1]*y/w],R=[0,0],C=0;++C<10;){var P=(0,o.invert)(n,r);s=(0,o.minus)($(P,O,r),$(P,A,r)),R[0]=s[0],R[1]=s[1];var I=J((0,o.multiplies)(r,n,(0,o.createOriginMatrix)(R,r),u),c,f,r),N=I.left-g,D=I.top-v;if(Math.abs(N)<2&&Math.abs(D)<2)break;O[0]-=N,O[1]-=D}return R.map((function(t){return Math.round(t)}))}(t,s[e+1],S,m,(0,o.multiply)(y,_,m));t.matrix=(0,o.createOriginMatrix)(i,m)}_=(0,o.multiply)(_,t.matrix,m)}));var w=!g&&a;v||(v=(0,o.createIdentityMatrix)(w?4:3));var A=Y(g&&16===v.length?(0,o.convertDimension)(v,4,3):v,w);return{rootMatrix:y=(0,o.ignoreDimension)(y,m,m),beforeMatrix:b,offsetMatrix:E,allMatrix:_,targetMatrix:v,targetTransform:A,transformOrigin:u,targetOrigin:l,is3d:p}}(t,e,i,r),d=K(f.allMatrix,f.transformOrigin,a,h);l=g(g({},f),d);var p=K(f.allMatrix,[50,50],100,100);u=nt([p.pos1,p.pos2],p.direction)}var m=r?4:3;return g({width:a,height:h,rotation:u,rootMatrix:(0,o.createIdentityMatrix)(m),beforeMatrix:(0,o.createIdentityMatrix)(m),offsetMatrix:(0,o.createIdentityMatrix)(m),allMatrix:(0,o.createIdentityMatrix)(m),targetMatrix:(0,o.createIdentityMatrix)(m),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},l)}function H(t,e,i){return void 0===i&&(i=e),z(t,e,i,!0)}function Y(t,e){return void 0===e&&(e=t.length>9),(e?"matrix3d":"matrix")+"("+(0,o.convertMatrixtoCSS)(t,!e).join(",")+")"}function W(t){var e=t.clientWidth,i=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:i};var r=t.viewBox,n=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||e,height:n.height||i,clientWidth:e,clientHeight:i}}function V(t,e){var i=W(t),r=i.width,n=i.height,s=i.clientWidth,a=i.clientHeight,h=s/r,u=a/n,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,d=[0,0],p=[h,u],m=[0,0];if(1!==c){var g=(c-2)%3,v=Math.floor((c-2)/3);d[0]=r*g/2,d[1]=n*v/2;var _=2===f?Math.max(u,h):Math.min(h,u);p[0]=_,p[1]=_,m[0]=(s-r)/2*g,m[1]=(a-n)/2*v}var y=(0,o.createScaleMatrix)(p,e);return y[e*(e-1)]=m[0],y[e*(e-1)+1]=m[1],k(y,e,d)}function $(t,e,i){return(0,o.calculate)(t,(0,o.convertPositionMatrix)(e,i),i)}function q(t,e,i,r){return[[0,0],[e,0],[0,i],[e,i]].map((function(e){return $(t,e,r)}))}function Z(t){var e=t.map((function(t){return t[0]})),i=t.map((function(t){return t[1]})),r=Math.min.apply(Math,e),n=Math.min.apply(Math,i),s=Math.max.apply(Math,e),o=Math.max.apply(Math,i);return{left:r,top:n,right:s,bottom:o,width:s-r,height:o-n}}function J(t,e,i,r){return Z(q(t,e,i,r))}function K(t,e,i,r){var n=16===t.length?4:3,o=q(t,i,r,n),a=o[0],h=a[0],u=a[1],l=o[1],c=l[0],f=l[1],d=o[2],p=d[0],m=d[1],g=o[3],v=g[0],_=g[1],y=$(t,e,n),b=y[0],E=y[1],x=Math.min(h,c,p,v),T=Math.min(u,f,m,_),S=Math.max(h,c,p,v);return h=h-x||0,{left:x,top:T,right:S,bottom:Math.max(u,f,m,_),origin:[b=b-x||0,E=E-T||0],pos1:[h,u=u-T||0],pos2:[c=c-x||0,f=f-T||0],pos3:[p=p-x||0,m=m-T||0],pos4:[v=v-x||0,_=_-T||0],direction:(0,s.getShapeDirection)(o)}}function Q(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function tt(t,e){return Q([e[0]-t[0],e[1]-t[1]])}function et(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r=(0,s.getRad)(t,e));var n=tt(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+i+")",width:n+"px"}}function it(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var n=i.length,s=i.reduce((function(t,e){return t+e[0]}),0)/n,o=i.reduce((function(t,e){return t+e[1]}),0)/n;return{transform:"translateZ(0px) translate("+s+"px, "+o+"px) rotate("+t+"rad) scale("+e+")"}}function rt(t,e,i,r){void 0===e&&(e=pt(t)),void 0===r&&(r=i||"border-box"===e.boxSizing);var n=t.offsetWidth,o=t.offsetHeight,a=!(0,s.isUndefined)(n);if((i||r)&&a)return[n,o];if(!a&&"svg"!==t.tagName.toLowerCase()){var h=t.getBBox();return[h.width,h.height]}return n=t.clientWidth,o=t.clientHeight,i||r?[n+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[n-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)]}function nt(t,e){return(0,s.getRad)(e>0?t[0]:t[1],e>0?t[1]:t[0])}function st(t,e,i,r,n){var s=1,a=[0,0],h={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c=z(e,i,n,!1);if(e){var f=c.is3d?4:3,d=K(c.offsetMatrix,(0,o.plus)(c.transformOrigin,(0,o.getOrigin)(c.targetMatrix,f)),c.width,c.height);s=d.direction,a=(0,o.plus)(d.origin,[d.left-c.left,d.top-c.top]),h=ot(e),u=ot(F(r,r,!0).offsetParent||document.body,!0),t&&(l=ot(t))}return g({targetClientRect:h,containerClientRect:u,moveableClientRect:l,beforeDirection:s,beforeOrigin:a,originalBeforeOrigin:a,target:e},c)}function ot(t,e){var i=0,r=0,n=0,s=0;if(t===document.body||t===document.documentElement)n=window.innerWidth,s=window.innerHeight,i=-(document.documentElement.scrollLeft||document.body.scrollLeft),r=-(document.documentElement.scrollTop||document.body.scrollTop);else{var o=t.getBoundingClientRect();i=o.left,r=o.top,n=o.width,s=o.height}var a={left:i,right:i+n,top:r,bottom:r+s,width:n,height:s};return e&&(a.clientLeft=t.clientLeft,a.clientTop=t.clientTop,a.clientWidth=t.clientWidth,a.clientHeight=t.clientHeight,a.scrollWidth=t.scrollWidth,a.scrollHeight=t.scrollHeight,a.overflow="visible"!==pt(t).overflow),a}function at(t){if(t){var e=t.getAttribute("data-direction");if(e){var i=[0,0];return e.indexOf("w")>-1&&(i[0]=-1),e.indexOf("e")>-1&&(i[0]=1),e.indexOf("n")>-1&&(i[1]=-1),e.indexOf("s")>-1&&(i[1]=1),i}}}function ht(t,e){return[(0,o.plus)(e,t[0]),(0,o.plus)(e,t[1]),(0,o.plus)(e,t[2]),(0,o.plus)(e,t[3])]}function ut(t){var e=t.left,i=t.top;return ht([t.pos1,t.pos2,t.pos3,t.pos4],[e,i])}function lt(t,e){t[e]&&(t[e].unset(),t[e]=null)}function ct(t,e,i){var r=e.datas;r.datas||(r.datas={});var n=g(g({},i),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=n:r.isStartEvent=!0,n}function ft(t,e,i){var r=e.datas,n="isDrag"in i?i.isDrag:e.isDrag;return r.datas||(r.datas={}),g(g({isDrag:n},i),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function dt(t,e,i,r){return t.triggerEvent(e,i,r)}function pt(t,e){return window.getComputedStyle(t,e)}function mt(t,e,i){var r={},n={};return t.filter((function(t){var s=t.name;if(r[s]||!e.some((function(e){return t[e]})))return!1;if(!i&&t.ableGroup){if(n[t.ableGroup])return!1;n[t.ableGroup]=!0}return r[s]=!0,!0}))}function gt(t,e){return t===e||null==t&&null==e}function vt(t,e){var i=[],r=[];return t.forEach((function(n,s){var o=e(n,s,t),a=r.indexOf(o),h=i[a]||[];-1===a&&(r.push(o),i.push(h)),h.push(n)})),i}function _t(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function yt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function bt(t,e,i){return(0,o.calculate)((0,o.invert)(t,i),(0,o.convertPositionMatrix)(e,i),i)}function Et(t,e){var i,r=t.is3d?4:3;return i=bt(t.rootMatrix,[e.distX,e.distY],r),e.distX=i[0],e.distY=i[1],e}function xt(t,e,i,r,n){return(0,o.minus)($(t,(0,o.plus)(i,e),n),r)}function Tt(t,e,i){return i?t/e*100+"%":t+"px"}function St(t){return Math.abs(t)<=M?0:t}function wt(t,e){return e.isRequest?("resizable"===e.requestAble||"scalable"===e.requestAble)&&e.parentDirection:(0,s.hasClass)(e.inputEvent.target,L("direction"))}function At(t){var e={};for(var i in t)e[t[i]]=i;return e}function Mt(t,e){return t?(0,s.isString)(t)?e?document.querySelector(t):t:(0,s.isFunction)(t)?t():"current"in t?t.current:t:null}function Ot(t,e){return t?((i=t)&&(0,s.isObject)(i)&&((0,s.isArray)(i)||"length"in i)?[].slice.call(t):[t]).reduce((function(t,i){return(0,s.isString)(i)&&e?v(t,[].slice.call(document.querySelectorAll(i))):(t.push(Mt(i,e)),t)}),[]):[];var i}function Rt(t,e){var i=t.rootMatrix,r=t.is3d,n=r?4:3,s=(0,o.invert)(i,n);return r||(s=(0,o.convertDimension)(s,3,4)),s[12]=0,s[13]=0,s[14]=0,(0,a.calculateMatrixDist)(s,e)}var Ct=_("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var i=e.datas,r=e.targets,n=e.angle,s=e.originalDatas,o=t.props,a=o.pinchable,h=o.ables;if(!a)return!1;var u="onPinch"+(r?"Group":"")+"Start",l="drag"+(r?"Group":"")+"ControlStart",c=(!0===a?t.controlAbles:h.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[l]})),f=ct(t,e,{});r&&(f.targets=r);var d=dt(t,u,f);i.isPinch=!1!==d,i.ables=c;var p=i.isPinch;return!!p&&(c.forEach((function(i){if(s[i.name]=s[i.name]||{},i[l]){var r=g(g({},e),{datas:s[i.name],parentRotate:n,isPinch:!0});i[l](t,r)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var i=e.datas,r=e.scale,n=e.distance,s=e.originalDatas,o=e.inputEvent,a=e.targets,h=e.angle;if(i.isPinch){var u=n*(1-1/r),l=ct(t,e,{});a&&(l.targets=a),dt(t,"onPinch"+(a?"Group":""),l);var c=i.ables,f="drag"+(a?"Group":"")+"Control";return c.forEach((function(i){i[f]&&i[f](t,g(g({},e),{datas:s[i.name],inputEvent:o,parentDistance:u,parentRotate:h,isPinch:!0}))})),l}},pinchEnd:function(t,e){var i=e.datas,r=e.isPinch,n=e.inputEvent,s=e.targets,o=e.originalDatas;if(i.isPinch){var a="onPinch"+(s?"Group":"")+"End",h=ft(t,e,{isDrag:r});s&&(h.targets=s),dt(t,a,h);var u=i.ables,l="drag"+(s?"Group":"")+"ControlEnd";return u.forEach((function(i){i[l]&&i[l](t,g(g({},e),{isDrag:r,datas:o[i.name],inputEvent:n,isPinch:!0}))})),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,g(g({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,g(g({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,g(g({},e),{targets:t.props.targets}))}});function Pt(t,e,i,r,n){var s=e.gesto.move(i,t.inputEvent),o=s.originalDatas||s.datas,a=o.draggable||(o.draggable={});return g(g({},n?Et(e,s):s),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:a,originalDatas:t.originalDatas})}var It=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var i=e.originalDatas;return this.datas=i,i.draggable||(i.draggable={}),g(g({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var i,r;return this.isFlag?(i=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],i=t[0],r=t[1],this.isFlag=!0),this.prevX=i,this.prevY=r,{type:"drag",clientX:i,clientY:r,inputEvent:e,isDrag:this.isDrag,distX:i-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Nt(t,e,i){var r=i.originalDatas;r.groupable=r.groupable||{};var n=r.groupable;n.childDatas=n.childDatas||[];var s=n.childDatas;return t.moveables.map((function(t,r){return s[r]=s[r]||{},s[r][e]=s[r][e]||{},g(g({},i),{datas:s[r][e],originalDatas:s[r]})}))}function Dt(t,e,i,r,n,s){var o=!!i.match(/Start$/g),a=!!i.match(/End$/g),h=n.isPinch,u=n.datas,l=Nt(t,e.name,n),c=t.moveables,f=l.map((function(t,n){var l=c[n],f=t;o?f=(new It).dragStart(r,t):(l.state.gesto||(l.state.gesto=u.childGestos[n]),f=Pt(t,l.state,r,h,s));var d=e[i](l,g(g({},f),{parentFlag:!0}));return a&&(l.state.gesto=null),d}));return o&&(u.childGestos=c.map((function(t){return t.state.gesto}))),f}function Lt(t,e,i,r,n,s){void 0===n&&(n=function(t,e){return e});var o=!!i.match(/End$/g),a=Nt(t,e.name,r),h=t.moveables;return a.map((function(t,r){var a,u=h[r];a=n(u,t);var l=e[i](u,g(g({},a),{parentFlag:!0}));return l&&s&&s(u,t,l,r),o&&(u.state.gesto=null),l}))}function kt(t,e){var i=e.clientX,r=e.clientY,n=e.datas,s=t.state,a=s.moveableClientRect,h=s.rootMatrix,u=s.is3d,l=s.pos1,c=a.left,f=a.top,d=u?4:3,p=(0,o.minus)(bt(h,[i-c,r-f],d),l),m=Xt({datas:n,distX:p[0],distY:p[1]});return[m[0],m[1]]}function Bt(t,e){var i=e.datas,r=t.state,n=r.allMatrix,s=r.beforeMatrix,a=r.is3d,h=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,f=r.targetMatrix,d=r.transformOrigin,p=a?4:3;i.is3d=a,i.matrix=n,i.targetMatrix=f,i.beforeMatrix=s,i.offsetMatrix=c,i.transformOrigin=d,i.inverseMatrix=(0,o.invert)(n,p),i.inverseBeforeMatrix=(0,o.invert)(s,p),i.absoluteOrigin=(0,o.convertPositionMatrix)((0,o.plus)([h,u],l),p),i.startDragBeforeDist=(0,o.calculate)(i.inverseBeforeMatrix,i.absoluteOrigin,p),i.startDragDist=(0,o.calculate)(i.inverseMatrix,i.absoluteOrigin,p)}function Ft(t,e){var i=t.datas,r=t.originalDatas.beforeRenderable,n=i.transformIndex,s=r.nextTransforms,h=r.nextTransformAppendedIndexes,u=-1===n?s.length:n+h.filter((function(t){return t<n})).length,l=function(t,e){var i=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),n=t[e]||"",s=e<0?[]:t.slice(e),h=e<0?[]:t.slice(e+1),u=(0,a.parse)(i),l=(0,a.parse)(r),c=(0,a.parse)([n]),f=(0,a.parse)(s),d=(0,a.parse)(h),p=(0,a.toMat)(u),m=(0,a.toMat)(l),g=(0,a.toMat)(f),v=(0,a.toMat)(d),_=(0,o.multiply)(p,g,4);return{transforms:t,beforeFunctionMatrix:p,beforeFunctionMatrix2:m,targetFunctionMatrix:(0,a.toMat)(c),afterFunctionMatrix:g,afterFunctionMatrix2:v,allFunctionMatrix:_,beforeFunctions:u,beforeFunctions2:l,targetFunction:c[0],afterFunctions:f,afterFunctions2:d,beforeFunctionTexts:i,beforeFunctionTexts2:r,targetFunctionText:n,afterFunctionTexts:s,afterFunctionTexts2:h}}(s,u),c=l.targetFunction,f="rotate"===e?"rotateZ":e;i.beforeFunctionTexts=l.beforeFunctionTexts,i.afterFunctionTexts=l.afterFunctionTexts,i.beforeTransform=l.beforeFunctionMatrix,i.beforeTransform2=l.beforeFunctionMatrix2,i.targetTansform=l.targetFunctionMatrix,i.afterTransform=l.afterFunctionMatrix,i.afterTransform2=l.afterFunctionMatrix2,i.targetAllTransform=l.allFunctionMatrix,c.functionName===f?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):(i.isAppendTransform=!0,r.nextTransformAppendedIndexes=v(h,[u]))}function jt(t,e,i){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?i:e)+" "+t.afterFunctionTexts.join(" ")}function Gt(t,e,i){var r=t.beforeTransform,n=t.afterTransform,s=t.beforeTransform2,a=t.afterTransform2,h=t.targetAllTransform,u=i?(0,o.multiply)(h,e,4):(0,o.multiply)(e,h,4),l=(0,o.multiply)((0,o.invert)(i?s:r,4),u,4);return(0,o.multiply)(l,(0,o.invert)(i?a:n,4),4)}function Ut(t){var e=t.datas,i=t.distX,r=t.distY,n=e.inverseBeforeMatrix,s=e.is3d,a=e.startDragBeforeDist,h=e.absoluteOrigin,u=s?4:3;return(0,o.minus)((0,o.calculate)(n,(0,o.plus)(h,[i,r]),u),a)}function Xt(t,e){var i=t.datas,r=t.distX,n=t.distY,s=i.inverseBeforeMatrix,a=i.inverseMatrix,h=i.is3d,u=i.startDragBeforeDist,l=i.startDragDist,c=i.absoluteOrigin,f=h?4:3;return(0,o.minus)((0,o.calculate)(e?s:a,(0,o.plus)(c,[r,n]),f),e?u:l)}function zt(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Ht(t,e){return zt(e).map((function(e){return t[e]}))}function Yt(t,e){var i=Ht(t,e);return[(0,s.average)(i.map((function(t){return t[0]}))),(0,s.average)(i.map((function(t){return t[1]})))]}function Wt(t,e,i,r){return(0,o.multiply)(t,k(e,r,i),r)}function Vt(t){var e=t.originalDatas.beforeRenderable;return{setTransform:function(i,r){void 0===r&&(r=-1),e.startTransforms=(0,s.isArray)(i)?i:(0,s.splitSpace)(i),qt(t,r)},setTransformIndex:function(e){qt(t,e)}}}function $t(t,e){var i=t.originalDatas.beforeRenderable.startTransforms;qt(t,(0,s.findIndex)(i,(function(t){return 0===t.indexOf(e+"(")})))}function qt(t,e){var i=t.originalDatas.beforeRenderable,r=t.datas;if(r.transformIndex=e,-1!==e){var n=i.startTransforms[e];if(n){var s=(0,a.parse)([n]);r.startValue=s[0].functionValue}}}function Zt(t,e){t.originalDatas.beforeRenderable.nextTransforms=(0,s.splitSpace)(e)}function Jt(t,e,i,r,n){return Zt(n,e),{transform:e,drag:Je.drag(t,Pt(n,t.state,i,r,!1))}}function Kt(t,e,i,r,n){var s=t.state,h=s.left,u=s.top,l=t.props.groupable,c=function(t,e,i){var r=t.transformOrigin,n=t.offsetMatrix,s=t.is3d,h=e.beforeTransform,u=e.afterTransform,l=s?4:3,c=(0,a.parseMat)([i]);return Wt(n,(0,o.convertDimension)((0,o.multiply)((0,o.multiply)(h,c,4),u,4),4,l),r,l)}(t.state,n,e),f=l?h:0,d=l?u:0,p=te(t,i,c),m=(0,o.minus)(r,p);return(0,o.minus)(m,[f,d])}function Qt(t){var e=t.state,i=e.width,r=e.height,n=e.transformOrigin;return[n[0]/(i/2)-1,n[1]/(r/2)-1]}function te(t,e,i){void 0===i&&(i=t.state.allMatrix);var r=t.state,n=r.width,s=r.height,o=r.is3d?4:3;return $(i,[n/2*(1+e[0]),s/2*(1+e[1])],o)}function ee(t,e){return Yt(ut(t.state),e)}function ie(t,e,i){var r=$(t,[e.clientLeft,e.clientTop],i);return[e.left+r[0],e.top+r[1]]}function re(t,e,i,r,n,o){var a=n[0],h=n[1],u=o[0],l=o[1],c=[],f=r?0:1,d="vertical"===e?"horizontal":"vertical",p=vt(t.filter((function(t){return t.type===e})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var e=t.pos,i=t.sizes;return e[f]<=l&&u<=e[f]+i[f]}));return p.forEach((function(t){var e=t.pos[r],n=e+t.sizes[r];p.forEach((function(t){var o=t.pos,u=t.sizes,l=t.element,f=t.className,m=o[r],g=m+u[r],v=0,_=0,y=!0;if(n<=m)a<(v=g-(_=n-m))-i&&(y=!1);else{if(!(g<=e))return;h>(v=m-(_=e-g))+i&&(y=!1)}if(y&&c.push({pos:"vertical"===d?[v,o[1]]:[o[0],v],element:l,sizes:u,size:0,type:d,gap:_,className:f,gapGuidelines:p}),n<=a&&h<=m){var b=(m+n-(h-a))/2;(0,s.throttle)(a-(b-i),.1)>=0&&c.push({pos:"vertical"===d?[b,o[1]]:[o[0],b],className:f,element:l,sizes:u,size:0,type:d,gap:n-a,gapGuidelines:p})}}))})),c}function ne(t,e,i,r,n,o,a){void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var h=[],u=a.left,l=a.top,c=a.bottom,f=i+a.right-u,d=r+c-l;return t&&t.forEach((function(t){h.push({type:"horizontal",pos:[u,(0,s.throttle)(t-o+l,.1)],size:f})})),e&&e.forEach((function(t){h.push({type:"vertical",pos:[(0,s.throttle)(t-n+u,.1),l],size:d})})),h}function se(t,e,i){void 0===i&&(i=[]);var r=[],n=t.state;if(e&&n.guidelines&&n.guidelines.length)return r;var a=t.props.elementGuidelines,l=void 0===a?[]:a;if(!l.length)return r;var c=n.elementGuidelineValues||[],f=l.map((function(t){return(0,s.isObject)(t)&&"element"in t?t:{element:Mt(t,!0)}})).filter((function(t){return t.element}));n.elementGuidelineValues=f;var d=(0,u.diff)(c.map((function(t){return t.element})),f.map((function(t){return t.element}))),p=d.added,m=d.removed.map((function(t){return c[t].element})),g=function(t,e){var i=[];if(!e.length)return i;var r=t.state,n=t.props.snapCenter,a=r.containerClientRect,u=r.targetClientRect,l=u.top,c=u.left,f=r.rootMatrix,d=r.is3d?4:3,p=ie(f,a,d),m=p[0],g=p[1],v=ut(r),_=(0,h.getMinMaxs)(v),y=_.minX,b=_.minY,E=(0,o.minus)([y,b],bt(f,[c-m,l-g],d)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),x=E[0],T=E[1];return e.forEach((function(t){var e=t.element,r=t.top,o=t.left,a=t.right,h=t.bottom,u=t.className,l=e.getBoundingClientRect(),c=l.left-m,p=l.top-g,v=p+l.height,_=c+l.width,y=bt(f,[c,p],d),b=y[0],E=y[1],S=bt(f,[_,v],d),w=S[0],A=S[1],M=w-b,O=A-E,R=[M,O];!1!==r&&i.push({type:"vertical",element:e,pos:[(0,s.throttle)(b+x,.1),E],size:O,sizes:R,className:u}),!1!==h&&i.push({type:"vertical",element:e,pos:[(0,s.throttle)(w+x,.1),E],size:O,sizes:R,className:u}),!1!==o&&i.push({type:"horizontal",element:e,pos:[b,(0,s.throttle)(E+T,.1)],size:M,sizes:R,className:u}),!1!==a&&i.push({type:"horizontal",element:e,pos:[b,(0,s.throttle)(A+T,.1)],size:M,sizes:R,className:u}),n&&(i.push({type:"vertical",element:e,pos:[(0,s.throttle)((b+w)/2+x,.1),E],size:O,sizes:R,center:!0,className:u}),i.push({type:"horizontal",element:e,pos:[b,(0,s.throttle)((E+A)/2+T,.1)],size:M,sizes:R,center:!0,className:u}))})),i}(t,p.map((function(t){return f[t]})).filter((function(t){return t.refresh&&e||!t.refresh&&!e})));return v(i.filter((function(t){return-1===m.indexOf(t.element)})),g)}function oe(t){var e=t.state,i=e.snapOffset,r=e.staticGuidelines,n=e.containerClientRect,o=n.overflow,a=n.scrollHeight,h=n.scrollWidth,u=n.clientHeight,l=n.clientWidth,c=n.clientLeft,f=n.clientTop,d=t.props,p=d.snapHorizontal,m=void 0===p||p,g=d.snapVertical,_=void 0===g||g,y=d.snapGap,b=void 0===y||y,E=d.verticalGuidelines,x=d.horizontalGuidelines,T=d.snapThreshold,S=void 0===T?5:T,w=d.snapGridWidth,A=void 0===w?0:w,M=d.snapGridHeight,O=void 0===M?0:M,R=v(r,se(t,!0));if(b){var C=Z(ut(t.state)),P=C.top,I=C.left,N=C.bottom,D=C.right,L=r.filter((function(t){return t.element}));R.push.apply(R,v(re(L,"horizontal",S,0,[I,D],[P,N]),re(L,"vertical",S,1,[P,N],[I,D])))}return R.push.apply(R,function(t,e,i,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=[];if(e)for(var h=0;h<=r;h+=e)a.push({type:"horizontal",pos:[0,(0,s.throttle)(h-o,.1)],size:i,hide:!0});if(t)for(h=0;h<=i;h+=t)a.push({type:"vertical",pos:[(0,s.throttle)(h-n,.1),0],size:r,hide:!0});return a}(A,O,o?h:l,o?a:u,c,f)),R.push.apply(R,ne(m&&x||!1,_&&E||!1,o?h:l,o?a:u,c,f,i)),R}function ae(t,e,i,r,n){var o=t.props,a=o.snapElement,h=void 0===a||a,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length-1,r=0;r<i;++r){var n=t[r];if(!(0,s.isUndefined)(n))return n}return t[i]}(n,o.snapThreshold,5);return he(t.state.guidelines,e,i,{snapThreshold:u,snapCenter:r,snapElement:h})}function he(t,e,i,r){return{vertical:ce(t,"vertical",e,r),horizontal:ce(t,"horizontal",i,r)}}function ue(t,e,i,r){var n=t.props.snapCenter&&i,s=["left","right"],o=["top","bottom"];return n&&(s.push("center"),o.push("middle")),s=s.filter((function(t){return t in e})),o=o.filter((function(t){return t in e})),ae(t,s.map((function(t){return e[t]})),o.map((function(t){return e[t]})),n,r)}function le(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var i=t.posInfos[0],r=i.guidelineInfos[0],n=r.offset,s=r.dist,o=r.guideline;return{isSnap:e,offset:n,dist:s,pos:i.pos,guideline:o}}function ce(t,e,i,r){var n=void 0===r?{}:r,s=n.snapThreshold,o=void 0===s?5:s,a=n.snapElement,h=n.snapCenter;if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var u="vertical"===e?0:1,l=i.map((function(i,r){var n=t.map((function(t){var e=t.pos,r=i-e[u];return{offset:r,dist:Math.abs(r),guideline:t}})).filter((function(t){var i=t.guideline,r=t.dist,n=i.type,s=i.center,u=i.element;return!(!a&&u||!h&&s||n!==e||r>o)})).sort((function(t,e){return t.dist-e.dist}));return{pos:i,index:r,guidelineInfos:n}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),c=l.length>0;return{isSnap:c,index:c?l[0].index:-1,posInfos:l}}function fe(t,e){var i=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-i:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-i:t.isSnap?-1:e.isSnap||i<M?1:r<M?-1:i-r}function de(t,e){return t.slice().sort((function(t,i){var r=t.sign[e],n=i.sign[e],s=t.offset[e],o=i.offset[e];return r?n?fe({isBound:t.isBound,isSnap:t.isSnap,offset:s},{isBound:i.isBound,isSnap:i.isSnap,offset:o}):-1:1}))[0]}function pe(t,e){var i=(0,s.average)([e[0][0],e[1][0]]),r=(0,s.average)([e[0][1],e[1][1]]);return{vertical:i<=t[0],horizontal:r<=t[1]}}function me(t,e){var i,r,n=e[0],s=e[1],o=s[0]-n[0],a=s[1]-n[1];return Math.abs(o)<M&&(o=0),Math.abs(a)<M&&(a=0),o?a?(i=a/o*(t[0]-n[0])+n[1],r=t[1]):(i=n[1],r=t[1]):(i=n[0],r=t[0]),i-r}function ge(t,e,i){void 0===i&&(i=M);var r=me(t[0],e)<=0;return t.slice(1).every((function(t){var n=me(t,e);return n<=0===r||Math.abs(n)<=i}))}function ve(t,e,i,r,n){return void 0===n&&(n=0),r&&e-n<=t||!r&&t<=i+n?{isBound:!0,offset:r?e-t:i-t}:{isBound:!1,offset:0}}function _e(t,e,i,r,n){var s,o=t[0],a=t[1],h=e[0],u=e[1],l=St(a[1]-o[1]),c=St(a[0]-o[0]),f=St(u[1]-h[1]);if(!St(u[0]-h[0])){if(n&&!l)return{isBound:!1,offset:0};if(c)return ve(l/c*(h[0]-o[0])+o[1],h[1],u[1],i,r);var d=h[0]-o[0];return{isBound:s=Math.abs(d)<=(r||0),offset:s?d:0}}return f||n&&!c?{isBound:!1,offset:0}:l?ve((h[1]-o[1])/(l/c)+o[0],h[0],u[0],i,r):(d=h[1]-o[1],{isBound:s=Math.abs(d)<=(r||0),offset:s?d:0})}function ye(t,e,i,r){return e.map((function(e){var n=e[0],s=e[1],o=e[2],a=function(t,e,i){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var n=r.left,s=r.top,o=r.width,a=r.height,h=[[n,s],[n,s+a]],u=[[n,s],[n+o,s]],l=[[n+o,s],[n+o,s+a]],c=[[n,s+a],[n+o,s+a]],f=pe(i,e),d=f.horizontal,p=f.vertical;if(ge([i,[n,s],[n+o,s],[n,s+a],[n+o,s+a]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=_e(e,u,p),g=_e(e,c,p),v=_e(e,h,d),_=_e(e,l,d),y=m.isBound&&g.isBound,b=m.isBound||g.isBound,E=v.isBound&&_.isBound,x=v.isBound||_.isBound,T=yt(m.offset,g.offset),S=yt(v.offset,_.offset),w=[0,0],A=!1,M=!1;return Math.abs(S)<Math.abs(T)?(w=[T,0],A=b,M=y):(w=[0,S],A=x,M=E),{isAllBound:M,isVerticalBound:b,isHorizontalBound:x,isBound:A,offset:w}}(t,[s,o],i),h=a.isBound,u=a.offset,l=a.isVerticalBound,c=a.isHorizontalBound,f=Xt({datas:r,distX:u[0],distY:u[1]}).map((function(t,e){return t*(n[e]?2/n[e]:0)}));return{sign:n,isBound:h,isVerticalBound:l,isHorizontalBound:c,isSnap:!1,offset:f}}))}function be(t,e,i){return function(t,e){var i=[],r=t[0],n=t[1];return r&&n?i.push([[0,2*n],t,[-r,n]],[[2*r,0],t,[r,-n]]):r?(i.push([[2*r,0],[r,1],[r,-1]]),e&&i.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):n?(i.push([[0,2*n],[1,n],[-1,n]]),e&&i.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i}(e,i).map((function(e){var i=e[0],r=e[1],n=e[2];return[i,Yt(t,r),Yt(t,n)]}))}function Ee(t,e,i,r){var n=r?t.map((function(t){return(0,o.rotate)(t,r)})):t,s=v([i],e);return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some((function(t){return!ge(s,t)}))}function xe(t,e,i){var r=t||{},n=r.position,s=void 0===n?"client":n,o=r.left,a=void 0===o?-1/0:o,h=r.top,u=void 0===h?-1/0:h,l=r.right,c=void 0===l?1/0:l,f=r.bottom,d={position:s,left:a,top:u,right:c,bottom:void 0===f?1/0:f};return{vertical:Se(d,e,!0),horizontal:Se(d,i,!1)}}function Te(t,e){var i=t.state,r=i.containerClientRect,n=r.clientHeight,s=r.clientWidth,o=r.clientLeft,a=r.clientTop,h=i.snapOffset,u=h.left,l=h.top,c=h.right,f=h.bottom,d=e||t.props.bounds||{},p="css"===(d.position||"client"),m=d.left,g=void 0===m?-1/0:m,v=d.top,_=void 0===v?-1/0:v,y=d.right,b=void 0===y?p?-1/0:1/0:y,E=d.bottom,x=void 0===E?p?-1/0:1/0:E;return p&&(b=s+c-u-b,x=n+f-l-x),{left:g+u-o,right:b+u-o,top:_+l-a,bottom:x+l-a}}function Se(t,e,i){var r=t[i?"left":"top"],n=t[i?"right":"bottom"],s=Math.min.apply(Math,e),o=Math.max.apply(Math,e),a=[];return r+1>s&&a.push({isBound:!0,offset:s-r,pos:r}),n-1<o&&a.push({isBound:!0,offset:o-n,pos:n}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function we(t,e,i){return(i?t.map((function(t){return(0,o.rotate)(t,i)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}var Ae={horizontal:["left","top","width","Y","X"],vertical:["top","left","height","X","Y"]};function Me(t,e,i,r){var n=t-i,s=n<0?n+e:r;return{size:(n<0?0:n)-s,pos:s}}function Oe(t,e){return function(t,e){var i,r=t.direction,n=t.classNames,s=t.size,o=t.pos,a=t.zoom,h=t.key,u="horizontal"===r,l=u?"Y":"X";return e.createElement("div",{key:h,className:n.join(" "),style:(i={},i[u?"width":"height"]=""+s,i.transform="translate("+o[0]+", "+o[1]+") translate"+l+"(-50%) scale"+l+"("+a+")",i)})}(g(g({},t),{classNames:v([L("line","guideline",t.direction)],t.classNames).filter((function(t){return t})),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map((function(t){return(0,s.throttle)(t,.1)+"px"}))}),e)}function Re(t,e,i,r,n,s,o,a,h,u,l,c){var f=t.props,d=f.zoom,p=f.isDisplaySnapDigit,m=void 0===p||p,g=Ae[e],v=g[0],_=g[1],y=g[2],b=g[4];return _t(i.map((function(t,i){var f=!0;return t.map((function(t,p){var g,E=t.pos,x=t.size,T=Me(E[u],x,n,s),S=T.pos,w=T.size;if(w<a)return null;var A=f;f=!1;var M=m&&A?parseFloat(w.toFixed(h)):0;return c.createElement("div",{key:e+"LinkGuideline"+i+"-"+p,className:L("guideline-group",e),style:(g={},g[v]=r+S+"px",g[_]=-o+E[u?0:1]+"px",g[y]=w+"px",g)},Oe({direction:e,classNames:[L("dashed")],size:"100%",posValue:[0,0],sizeValue:w,zoom:d},c),c.createElement("div",{className:L("size-value"),style:{transform:"translate"+b+"(-50%) scale("+d+")"}},M>0?l(M):""))}))})))}function Ce(t,e,i,r,n,s,o,a){var h=t.props.zoom;return i.map((function(t,i){var u=t.type,l=t.pos,c=[0,0];return c[o]=r,c[o?0:1]=-n+l,Oe({key:e+"TargetGuideline"+i,classNames:[L("target","bold",u)],posValue:c,sizeValue:s,zoom:h,direction:e},a)}))}function Pe(t,e,i,r,n,o){var a=t.props.isDisplayInnerSnapDigit,h=i?0:1,u=r[i],l=o[i],c=[],f=e.filter((function(t){var e=t.element,n=t.pos,s=t.size;if(a&&e&&n[i]<u&&u+l<n[i]+s){var o=n[i]-u,f=n[h]-r[h];return c.push(g(g({},t),{inner:!0,gap:o,renderPos:i?[f,o]:[o,f]})),c.push(g(g({},t),{inner:!0,gap:n[i]+s-u-l,renderPos:i?[f,l]:[l,f]})),!1}return!0})),d=function(t,e,i,r){var n=[],o=vt(t.filter((function(t){var e=t.element,i=t.gap;return e&&!i})),(function(t){var i=t.element,o=t.pos,a=o[r],h=(Math.min(0,a-e)<0?-1:1)+"_"+o[r?0:1],u=(0,s.find)(n,(function(t){var e=t[0],r=t[1];return i===e&&a===r}));return u?u[2]:(n.push([i,a,h]),h)}));return o.forEach((function(t){t.sort((function(t,n){return Me(t.pos[r],t.size,e,i).size-Me(n.pos[r],t.size,e,i).size||t.pos[r?0:1]-n.pos[r?0:1]}))})),o}(f=f.filter((function(t){var e=t.element,r=t.pos,n=t.size,s=r[i];return!e||f.every((function(e){var r=e.element,o=e.pos,a=e.size,h=o[i];return!r||t===e||s+n<=h||h+a<=s||s<h&&h+a<s+n}))})),n[i],l,i);return c=c.filter((function(t){var e=t.gap,r=t.pos[h];return d.every((function(t){return t.every((function(t){var n=t.pos,s=-u+n[i];return!(n[h]===r&&(e<0&&s<0||e>0&&s>o[i]))}))}))})),{guidelines:f,groups:d,gapGuidelines:c}}function Ie(t,e,i,r,n){var s=t.props.zoom;return i.filter((function(t){return!t.hide})).map((function(t,i){var o=t.pos,a=t.size,h=t.element,u=[-r[0]+o[0],-r[1]+o[1]];return Oe({key:e+"Guideline"+i,classNames:h?[L("bold")]:[],direction:e,posValue:u,sizeValue:a,zoom:s},n)}))}function Ne(t,e,i,r,n){var s=t.props,o=s.snapDigit,a=void 0===o?0:o,h=s.isDisplaySnapDigit,u=void 0===h||h,l=s.zoom,c="horizontal"===e?"X":"Y",f="horizontal"===e?"width":"height";return i.map((function(t,i){var s,o=t.renderPos,h=t.gap,d=t.className,p=t.inner,m=Math.abs(h),g=u?parseFloat(m.toFixed(a)):0;return n.createElement("div",{key:e+"GapGuideline"+i,className:L("guideline-group",e),style:(s={left:o[0]+"px",top:o[1]+"px"},s[f]=m+"px",s)},Oe({direction:e,classNames:[L(p?"dashed":"gap"),d],size:"100%",posValue:[0,0],sizeValue:m,zoom:l},n),n.createElement("div",{className:L("size-value","gap"),style:{transform:"translate"+c+"(-50%) scale("+l+")"}},g>0?r(g):""))}))}function De(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var i=t.state.container,r=t.props.snapContainer||i,n=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(i!==r){var a=Mt(r,!0);if(a){var h=ot(a),u=Rt(e,[h.left-n.left,h.top-n.top]),l=Rt(e,[h.right-n.right,h.bottom-n.bottom]);o.left=(0,s.throttle)(u[0],.1),o.top=(0,s.throttle)(u[1],.1),o.right=(0,s.throttle)(l[0],.1),o.bottom=(0,s.throttle)(l[1],.1)}}e.snapOffset=o,e.elementGuidelineValues=[],e.staticGuidelines=se(t,!1),e.guidelines=oe(t),e.enableSnap=!0}}function Le(t,e){var i=t.props,r=i.snappable,n=i.bounds,s=i.innerBounds,o=i.verticalGuidelines,a=i.horizontalGuidelines,h=i.snapGridWidth,u=i.snapGridHeight,l=t.state,c=l.guidelines,f=l.enableSnap;return!(!r||!f||e&&!0!==r&&r.indexOf(e)<0||!(h||u||n||s||c&&c.length||o&&o.length||a&&a.length))}function ke(t,e,i,r,n){var o=function(t,e,i,r){var n=e[0]-t[0],s=e[1]-t[1];if(Math.abs(n)<M&&(n=0),Math.abs(s)<M&&(s=0),!n)return r?[0,0]:[0,i];if(!s)return r?[i,0]:[0,0];var o=s/n,a=t[1]-o*t[0];return r?[i,o*(e[0]+i)+a-e[1]]:[(e[1]+i-a)/o-e[0],i]}(t,e,i,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=(0,s.getDist)(t,e),h=(0,s.getDist)(o,t),u=(0,s.getDist)(o,e),l=h>a||u>a,c=Xt({datas:n,distX:o[0],distY:o[1]});return{offset:[c[0],c[1]],isOutside:l}}function Be(t,e,i,r,n,s){var a=q(t,e,i,s?4:3),h=function(t,e){return Yt(t,e.map((function(t){return-t})))}(a,n);return ht(a,(0,o.minus)(r,h))}function Fe(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function je(t,e){return t.isBound?t.offset:e.isSnap?le(e).offset:0}function Ge(t,e,i,r){void 0===r&&(r=i);var n=xe(Te(t),r.map((function(t){return t[0]})),r.map((function(t){return t[1]}))),s=n.horizontal,o=n.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ae(t,i.map((function(t){return t[0]})),i.map((function(t){return t[1]})),t.props.snapCenter),h=a.horizontal,u=a.vertical,l=je(s[0],h),c=je(o[0],u),f=Math.abs(l),d=Math.abs(c);return{horizontal:{isBound:s[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:l,dist:f,bounds:s,snap:h},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:d,bounds:o,snap:u}}}function Ue(t,e,i,r,n){void 0===n&&(n={});var s=xe(e,i,r),o=s.horizontal,a=s.vertical,h=n.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:he(t,i,r,n),u=h.horizontal,l=h.vertical,c=je(o[0],u),f=je(a[0],l),d=Math.abs(c),p=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:d,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:p,bounds:a,snap:l}}}function Xe(t,e,i,r,n,a){return i.map((function(i){var h=i[0],u=i[1],l=Yt(e,h),c=Yt(e,u),f=r?function(t,e,i,r){var n=function(t,e,i){var r=Te(t),n=r.left,s=r.top,a=r.right,h=r.bottom,u=i[0],l=i[1],c=(0,o.minus)(i,e),f=c[0],d=c[1];Math.abs(f)<M&&(f=0),Math.abs(d)<M&&(d=0);var p=d>0,m=f>0,g={isBound:!1,offset:0,pos:0},v={isBound:!1,offset:0,pos:0};if(0===f&&0===d)return{vertical:g,horizontal:v};if(0===f)p?h<l&&(v.pos=h,v.offset=l-h):s>l&&(v.pos=s,v.offset=l-s);else if(0===d)m?a<u&&(g.pos=a,g.offset=u-a):n>u&&(g.pos=n,g.offset=u-n);else{var _=d/f,y=i[1]-_*u,b=0,E=0,x=!1;m&&a<=u?(b=_*a+y,E=a,x=!0):!m&&u<=n&&(b=_*n+y,E=n,x=!0),x&&(b<s||b>h)&&(x=!1),x||(p&&h<=l?(E=((b=h)-y)/_,x=!0):!p&&l<=s&&(E=((b=s)-y)/_,x=!0)),x&&(g.isBound=!0,g.pos=E,g.offset=u-E,v.isBound=!0,v.pos=b,v.offset=l-b)}return{vertical:g,horizontal:v}}(t,e,i),s=n.horizontal,a=n.vertical,h=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,i){var r=i[0],n=i[1],s=e[0],a=e[1],h=(0,o.minus)(i,e),u=h[0],l=h[1],c=l>0,f=u>0;u=St(u),l=St(l);var d={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(0===u&&0===l)return{vertical:d,horizontal:p};var m=ae(t,u?[r]:[],l?[n]:[]),g=m.vertical,v=m.horizontal;g.posInfos.filter((function(t){var e=t.pos;return f?e>=s:e<=s})),v.posInfos.filter((function(t){var e=t.pos;return c?e>=a:e<=a})),g.isSnap=g.posInfos.length>0,v.isSnap=v.posInfos.length>0;var _=le(g),y=_.isSnap,b=_.guideline,E=le(v),x=E.isSnap,T=E.guideline,S=x?T.pos[1]:0,w=y?b.pos[0]:0;if(0===u)x&&(p.isSnap=!0,p.pos=T.pos[1],p.offset=n-p.pos);else if(0===l)y&&(d.isSnap=!0,d.pos=w,d.offset=r-w);else{var A=l/u,M=i[1]-A*r,O=0,R=0,C=!1;y?(O=A*(R=w)+M,C=!0):x&&(R=((O=S)-M)/A,C=!0),C&&(d.isSnap=!0,d.pos=R,d.offset=r-R,p.isSnap=!0,p.pos=O,p.offset=n-O)}return{vertical:d,horizontal:p}}(t,e,i),u=h.horizontal,l=h.vertical,c=Fe(s,u),f=Fe(a,l),d=Math.abs(c),p=Math.abs(f);return{horizontal:{isBound:s.isBound,isSnap:u.isSnap,offset:c,dist:d},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:p}}}(t,l,c,n):Ge(t,n,[c]),d=f.horizontal,p=d.offset,m=d.isBound,g=d.isSnap,v=f.vertical,_=v.offset,y=v.isBound,b=v.isSnap,E=(0,o.minus)(u,h);if(!_&&!p)return{isBound:y||m,isSnap:b||g,sign:E,offset:[0,0]};var x=function(t,e,i,r){var n=(0,s.getRad)(t,e)/Math.PI*180,o=i.vertical,a=o.isBound,h=o.isSnap,u=o.dist,l=i.horizontal,c=l.isBound,f=l.isSnap,d=n%180,p=d<3||d>177,m=d>87&&d<93;return l.dist<u&&(a||h&&!m&&(!r||!p))?"vertical":!c&&(!f||p||r&&m)?"":"horizontal"}(l,c,f,r);if(!x)return{sign:E,isBound:!1,isSnap:!1,offset:[0,0]};var T="vertical"===x,S=ke(l,c,-(T?_:p),T,a).offset.map((function(t,e){return t*(E[e]?2/E[e]:0)}));return{sign:E,isBound:T?y:m,isSnap:T?b:g,offset:S}}))}function ze(t,e,i,r,n,s){var o=function(t,e){var i=[],r=[-t[0],-t[1]];return t[0]&&t[1]?(i.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),e&&i.push([r,t])):t[0]?e?i.push([r,[r[0],-1]],[r,[r[0],1]],[r,[t[0],-1]],[r,t],[r,[t[0],1]]):i.push([[r[0],-1],[t[0],-1]],[[r[0],0],[t[0],0]],[[r[0],1],[t[0],1]]):t[1]?e?i.push([r,[-1,r[1]]],[r,[1,r[1]]],[r,[-1,t[1]]],[r,[1,t[1]]],[r,t]):i.push([[-1,r[1]],[-1,t[1]]],[[0,r[1]],[0,t[1]]],[[1,r[1]],[1,t[1]]]):i.push([r,[1,0]],[r,[-1,0]],[r,[0,-1]],[r,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),i}(i,r),a=be(e,i,r),h=v(Xe(t,e,o,r,n,s),ye(t,a,Yt(e,[0,0]),s)),u=de(h,0),l=de(h,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:l.isBound,offset:l.offset[1]}}}function He(t,e,i,r,n,o,a,h){for(var u=ut(t.state),l=t.props.keepRatio,c=0,f=0,d=0;d<2;++d){var p=ze(t,e(c,f),n,l,a,h),m=p.width,g=p.height,v=m.isBound,_=g.isBound,y=m.offset,b=g.offset;if(1===d&&(v||(y=0),_||(b=0)),0===d&&a&&!v&&!_)return[0,0];if(l){var E=Math.abs(y)*(i?1/i:1),x=Math.abs(b)*(r?1/r:1);(v&&_?E<x:_||!v&&E<x)?y=i*b/r:b=r*y/i}c+=y,f+=b}if(n[0]&&n[1]){var T=function(t,e,i,r,n){var o=[-i[0],-i[1]],a=t.state,h=a.width,u=a.height,l=t.props.bounds,c=1/0,f=1/0;if(l){var d=[[i[0],-i[1]],[-i[0],i[1]]],p=l.left,m=void 0===p?-1/0:p,g=l.top,v=void 0===g?-1/0:g,_=l.right,y=void 0===_?1/0:_,b=l.bottom,E=void 0===b?1/0:b;d.forEach((function(t){var i=t[0]!==o[0],a=t[1]!==o[1],l=Yt(e,t),d=360*(0,s.getRad)(r,l)/Math.PI;if(a){var p=l.slice();(Math.abs(d-360)<2||Math.abs(d-180)<2)&&(p[1]=r[1]);var g=ke(r,p,(r[1]<l[1]?E:v)-l[1],!1,n),_=g.offset[1],b=g.isOutside;isNaN(_)||(f=u+(b?1:-1)*Math.abs(_))}if(i){p=l.slice(),(Math.abs(d-90)<2||Math.abs(d-270)<2)&&(p[0]=r[0]);var x=ke(r,p,(r[0]<l[0]?y:m)-l[0],!0,n),T=x.offset[0],S=x.isOutside;isNaN(T)||(c=h+(S?1:-1)*Math.abs(T))}}))}return{maxWidth:c,maxHeight:f}}(t,u,n,o,h),S=T.maxWidth,w=T.maxHeight,M=function(t,e,i,r,n,s,o,a,h){var u=Ge(t,a,[Yt(e,o)]),l=u.horizontal.offset,c=u.vertical.offset;if(c||l){var f=Xt({datas:h,distX:-c,distY:-l}),d=f[0],p=f[1];return[Math.min(n||1/0,i+o[0]*d)-i,Math.min(s||1/0,r+o[1]*p)-r]}return[0,0]}(t,e(c,f).map((function(t){return t.map((function(t){return(0,s.throttle)(t,A)}))})),i+c,r+f,S,w,n,a,h);c+=y=M[0],f+=b=M[1]}return[c,f]}function Ye(t,e,i,r){if(!Le(t,"rotatable"))return r;var n=e.pos1,a=e.pos2,h=e.pos3,u=e.pos4,l=r*Math.PI/180,c=[n,a,h,u].map((function(t){return(0,o.minus)(t,i)})),f=c.map((function(t){return(0,o.rotate)(t,l)})),d=v(function(t,e,i,r,n){if(!t.props.bounds)return[];var o=n*Math.PI/180,a=Te(t),h=a.left,u=a.top,l=a.right,c=a.bottom,f=h-r[0],d=l-r[0],p=u-r[1],m=c-r[1],g={left:f,top:p,right:d,bottom:m};if(!we(i,g,0))return[];var v=[];return[[f,0],[d,0],[p,1],[m,1]].forEach((function(t){var r=t[0],n=t[1];i.forEach((function(t){var i=(0,s.getRad)([0,0],t);v.push.apply(v,function(t,e,i){var r=Q(t),n=Math.sqrt(r*r-e*e)||0;return[n,-n].sort((function(e,r){return Math.abs(e-t[i?0:1])-Math.abs(r-t[i?0:1])})).map((function(t){return(0,s.getRad)([0,0],i?[t,e]:[e,t])}))}(t,r,n).map((function(t){return o+t-i})).filter((function(t){return!we(e,g,t)})).map((function(t){return(0,s.throttle)(180*t/Math.PI,M)})))}))})),v}(t,c,f,i,r),function(t,e,i,r,n){var o=t.props.innerBounds,a=n*Math.PI/180;if(!o)return[];var h=o.left,u=o.top,l=o.width,c=o.height,f=h-r[0],d=h+l-r[0],p=u-r[1],m=u+c-r[1],g=[[f,p],[d,p],[f,m],[d,m]],v=Yt(i,[0,0]);if(!Ee(i,g,v,0))return[];var _=[],y=g.map((function(t){return[Q(t),(0,s.getRad)([0,0],t)]}));return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].forEach((function(t){var i=(0,s.getRad)([0,0],function(t){var e=t[0],i=t[1],r=i[0]-e[0],n=i[1]-e[1];if(!r)return[e[0],0];if(!n)return[0,e[1]];var s=n/r,o=-s*e[0]+e[1];return[-o/(s+1/s),o/(s*s+1)]}(t)),r=function(t){var e=t[0],i=t[1],r=i[0]-e[0],n=i[1]-e[1];if(!r)return Math.abs(e[0]);if(!n)return Math.abs(e[1]);var s=n/r;return Math.abs((-s*e[0]+e[1])/Math.sqrt(Math.pow(s,2)+1))}(t);_.push.apply(_,y.filter((function(t){var e=t[0];return e&&r<=e})).map((function(t){var e=t[0],n=t[1],s=Math.acos(e?r/e:0);return[a+(n+s)-i,a+(n-s)-i]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Ee(e,g,v,t)})).map((function(t){return(0,s.throttle)(180*t/Math.PI,M)})))})),_}(t,c,f,i,r));return d.sort((function(t,e){return Math.abs(t-r)-Math.abs(e-r)})),d.length?d[0]:r}function We(t,e,i,r,n,s){if(!Le(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=ht(s.absolutePoses,[e,i]),h=Z(a),u=h.left,l=h.right,c=h.top,f=h.bottom,d=[[u,c],[l,c],[u,f],[l,f]];t.props.snapCenter&&d.push([(u+l)/2,(c+f)/2]);var p=Ge(t,n,d,a),m=p.vertical,g=p.horizontal,v=function(t,e,i){var r,n=be(e,[0,0],!1).map((function(t){var e=t[0],i=t[1],r=t[2];return[e.map((function(t){return 2*Math.abs(t)})),i,r]})),s=ye(t,n,Yt(e,[0,0]),i),a=de(s,0),h=de(s,1),u=0,l=0,c=a.isVerticalBound||h.isVerticalBound,f=a.isHorizontalBound||h.isHorizontalBound;return(c||f)&&(r=function(t,e){var i=t.datas,r=t.distX,n=t.distY,s=(i.beforeMatrix,i.matrix),a=i.is3d,h=(i.startDragBeforeDist,i.startDragDist),u=i.absoluteOrigin,l=a?4:3;return(0,o.minus)((0,o.calculate)(s,(0,o.plus)(h,[r,n]),l),u)}({datas:i,distX:-a.offset[0],distY:-h.offset[1]}),u=r[0],l=r[1]),{vertical:{isBound:c,offset:u},horizontal:{isBound:f,offset:l}}}(t,a,s),_=v.vertical,y=v.horizontal,b=m.isSnap,E=g.isSnap,x=m.isBound||_.isBound,T=g.isBound||y.isBound,S=function(t,e,i,r,n){var s=e[0],a=e[1],h=i[0],u=i[1],l=r[0],c=r[1],f=n[0],d=n[1],p=-f,m=-d;if(t&&s&&a){p=0,m=0;var g=[];if(h&&u?g.push([0,d],[f,0]):h?g.push([f,0]):u?g.push([0,d]):l&&c?g.push([0,d],[f,0]):l?g.push([f,0]):c&&g.push([0,d]),g.length){g.sort((function(t,e){return Q((0,o.minus)([s,a],t))-Q((0,o.minus)([s,a],e))}));var v=g[0];if(v[0]&&Math.abs(s)>M)p=-v[0],m=a*Math.abs(s+p)/Math.abs(s)-a;else if(v[1]&&Math.abs(a)>M){var _=a;m=-v[1],p=s*Math.abs(a+m)/Math.abs(_)-s}if(t&&u&&h)if(Math.abs(p)>M&&Math.abs(p)<Math.abs(f))p*=y=Math.abs(f)/Math.abs(p),m*=y;else if(Math.abs(m)>M&&Math.abs(m)<Math.abs(d)){var y;p*=y=Math.abs(d)/Math.abs(m),m*=y}else p=yt(-f,p),m=yt(-d,m)}}else p=s||h?-f:0,m=a||u?-d:0;return[p,m]}(r,[e,i],[x,T],[b,E],[yt(m.offset,_.offset),yt(g.offset,y.offset)]);return[{isBound:x,isSnap:b,offset:S[0]},{isBound:T,isSnap:E,offset:S[1]}]}function Ve(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var i=t.guideline;e.indexOf(i)>-1||e.push(i)}))})),e}function $e(t,e,i,r){var n=t.filter((function(t){var i=t.element,r=t.gap,n=t.type;return i&&r&&n===e})),o="vertical"===e?[0,1]:[1,0],a=o[0],h=o[1];return _t(n.map((function(t){var e=t.pos,n=t.gap,o=t.gapGuidelines,u=t.sizes,l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(t)-Math.abs(e)})),t[0]}(e[h]+u[h]-i[h],e[h]-i[h]-r[h]),c=Math.min(u[h],r[h]);if(l>0&&l>c?l=2*(l-c/2):l<0&&l<-c&&(l=2*(l+c/2)),0===l)return[];var f=(l>0?0:r[h])+l/2;return v(function(t,e,i,r,n,o,a){var h=Math.abs(o),u=n[e]+(o>0?r[0]:0);return t.filter((function(t){return t.pos[e]<=i[e]})).sort((function(t,i){var r=t.pos;return i.pos[e]-r[e]})).filter((function(t){var i=t.pos,r=t.sizes,n=i[e];return(0,s.throttle)(n+r[e],A)===(0,s.throttle)(u-h,A)&&(u=n,!0)})).map((function(t){var r=-i[e]+t.pos[e]+t.sizes[e];return g(g({},t),{gap:o,renderPos:e?[a,r]:[r,a]})}))}(o,a,i,r,e,n,f),function(t,e,i,r,n,o,a){var h=Math.abs(o),u=n[e]+(o<0?r[e]:0);return t.filter((function(t){return t.pos[e]>i[e]})).sort((function(t,i){var r=t.pos,n=i.pos;return r[e]-n[e]})).filter((function(t){var i=t.pos,r=t.sizes,n=i[e];return(0,s.throttle)(n,A)===(0,s.throttle)(u+h,A)&&(u=n+r[e],!0)})).map((function(t){var r=-i[e]+t.pos[e]-h;return g(g({},t),{gap:o,renderPos:e?[a,r]:[r,a]})}))}(o,a,i,r,e,n,f))})))}function qe(t,e,i,r,n,o){var a=xe(Te(t,o),e,i),h=a.vertical,u=a.horizontal;h.forEach((function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})})),u.forEach((function(t){t.isBound&&n.push({type:"bounds",pos:t.pos})}));var l=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var i=t.getRect(),r=i.pos1,n=i.pos2,s=i.pos3,o=i.pos4,a=Yt([r,n,s,o],[0,0]),h=e.left,u=e.top,l=e.width,c=e.height,f=[[h,u],[h,u+c]],d=[[h,u],[h+l,u]],p=[[h+l,u],[h+l,u+c]],m=[[h,u+c],[h+l,u+c]],g=[],v=[],_={top:!1,bottom:!1,left:!1,right:!1};return[[r,n],[n,o],[o,s],[s,r]].forEach((function(t){var e=pe(a,t),i=e.horizontal,r=e.vertical,n=_e(t,d,r,1,!0),s=_e(t,m,r,1,!0),o=_e(t,f,i,1,!0),y=_e(t,p,i,1,!0);n.isBound&&!_.top&&(g.push(u),_.top=!0),s.isBound&&!_.bottom&&(g.push(u+c),_.bottom=!0),o.isBound&&!_.left&&(v.push(h),_.left=!0),y.isBound&&!_.right&&(v.push(h+l),_.right=!0)})),{horizontal:g,vertical:v}}(t),c=l.vertical,f=l.horizontal;c.forEach((function(t){(0,s.findIndex)(r,(function(e){var i=e.type,r=e.pos;return"bounds"===i&&r===t}))>=0||r.push({type:"bounds",pos:t})})),f.forEach((function(t){(0,s.findIndex)(n,(function(e){var i=e.type,r=e.pos;return"bounds"===i&&r===t}))>=0||n.push({type:"bounds",pos:t})}))}var Ze={name:"snappable",props:{snappable:[Boolean,Array],snapContainer:Object,snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var i=t.state,r=i.top,n=i.left,s=i.pos1,o=i.pos2,a=i.pos3,h=i.pos4,u=i.snapRenderInfo,l=i.targetClientRect,c=i.containerClientRect,f=i.is3d,d=i.rootMatrix;if(!u||!Le(t,""))return[];i.staticGuidelines=se(t,!1,i.staticGuidelines),i.guidelines=oe(t);var p=f?4:3,m=Math.min(s[0],o[0],a[0],h[0]),g=Math.min(s[1],o[1],a[1],h[1]),_=ie(d,c,p),y=bt(d,[l.left-_[0],l.top-_[1]],p),b=y[0],E=y[1],x=t.props,T=x.snapThreshold,S=void 0===T?5:T,w=x.snapDigit,A=void 0===w?0:w,M=x.snapDistFormat,O=void 0===M?function(t){return t}:M,R=u.externalPoses||[],C=ut(t.state),P=[],I=[],N=[],D=[],L=[],k=Z(C),B=k.width,F=k.height,j=k.top,G=k.left,U=k.bottom,X=k.right,z=R.length>0,H=z?Z(R):{};if(!u.request){if(u.direction&&L.push(function(t,e,i){var r=[];if(i[0]&&i[1])r=[i,[-i[0],i[1]],[i[0],-i[1]]].map((function(t){return Yt(e,t)}));else if(i[0]||i[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],i].map((function(t){return Yt(e,t)})):(r=Ht(e,i)).length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var n=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)r.push(n[s]),r.push([(n[s][0]+n[s+1][0])/2,(n[s][1]+n[s+1][1])/2]);return ae(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),!0,1)}(t,C,u.direction)),u.snap){var Y=Z(C);u.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),L.push(ue(t,Y,!0,1))}z&&(u.center&&(H.middle=(H.top+H.bottom)/2,H.center=(H.left+H.right)/2),L.push(ue(t,H,!0,1))),L.forEach((function(t){var e=t.vertical.posInfos,i=t.horizontal.posInfos;P.push.apply(P,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),I.push.apply(I,i.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),N.push.apply(N,Ve(e)),D.push.apply(D,Ve(i))}))}qe(t,[G,X],[j,U],P,I),z&&qe(t,[H.left,H.right],[H.top,H.bottom],P,I,u.externalBounds);var W=$e(N,"vertical",[n,r],[B,F]),V=$e(D,"horizontal",[n,r],[B,F]),$=v(N,D);dt(t,"onSnap",{guidelines:$.filter((function(t){return!t.element})),elements:vt($.filter((function(t){return t.element})),(function(t){return t.element})),gaps:v(V,W)},!0);var q=Pe(t,D,0,[n,r],[b,E],[B,F]),J=q.guidelines,K=q.groups,Q=q.gapGuidelines,tt=Pe(t,N,1,[n,r],[b,E],[B,F]),et=tt.guidelines,it=tt.groups;return v(Ne(t,"vertical",v(V,tt.gapGuidelines),O,e),Ne(t,"horizontal",v(W,Q),O,e),Re(t,"horizontal",K,m,b,B,r,S,A,0,O,e),Re(t,"vertical",it,g,E,F,n,S,A,1,O,e),Ie(t,"horizontal",J,[n,r],e),Ie(t,"vertical",et,[n,r],e),Ce(t,"horizontal",I,m,r,B,0,e),Ce(t,"vertical",P,g,n,F,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},De(t)},drag:function(t){var e=t.state;e.staticGuidelines=se(t,!1,e.staticGuidelines),e.guidelines=oe(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!wt(0,e)&&!oi(t,e))||(!e.isRequest&&e.inputEvent?(0,s.hasClass)(e.inputEvent.target,L("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,De(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,De(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.staticGuidelines=[],e.guidelines=[],e.snapRenderInfo=null}},Je={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var i=t.props,r=i.throttleDragRotate,n=i.zoom,o=t.state,a=o.dragInfo,h=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=Q(u),c=(0,s.getRad)(u,[0,0]);return[e.createElement("div",{className:L("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+h[0]+"px, "+h[1]+"px) rotate("+c+"rad) scaleY("+n+")"}})]},dragStart:function(t,e){var i=e.datas,r=e.parentEvent,n=e.parentGesto,s=t.state,o=s.target;if(s.gesto)return!1;s.gesto=n||t.targetGesto;var a=pt(o);i.datas={},i.left=parseFloat(a.left||"")||0,i.top=parseFloat(a.top||"")||0,i.bottom=parseFloat(a.bottom||"")||0,i.right=parseFloat(a.right||"")||0,i.startValue=[0,0],Bt(t,e),$t(e,"translate"),function(t,e){e.absolutePoses=ut(t.state)}(t,i),i.prevDist=[0,0],i.prevBeforeDist=[0,0],i.isDrag=!1;var h=ct(t,e,g({set:function(t){i.startValue=t}},Vt(e)));return!1!==(r||dt(t,"onDragStart",h))?(i.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.gesto=null,i.isPinch=!1),!!i.isDrag&&h},drag:function(t,e){Ft(e,"translate");var i=e.datas,r=e.parentEvent,n=e.parentFlag,a=e.isPinch,h=e.isRequest,u=e.distX,l=e.distY,c=i.isDrag,f=i.prevDist,d=i.prevBeforeDist,p=i.startValue;if(c){var m=t.props,g=m.parentMoveable,v=r?0:m.throttleDrag||0,_=r?0:m.throttleDragRotate||0,y=!1,b=0;if(!r&&_>0&&(u||l)){var E=m.startDragRotate||0,x=(0,s.throttle)(E+180*(0,s.getRad)([0,0],[u,l])/Math.PI,_)-E,T=l*Math.abs(Math.cos((x-90)/180*Math.PI)),S=Q([u*Math.abs(Math.cos(x/180*Math.PI)),T]);b=x*Math.PI/180,u=S*Math.cos(b),l=S*Math.sin(b)}if(!a&&!r&&!n&&(!_||u||l)){var w=We(t,u,l,_,h,i),A=w[0],M=w[1],O=A.isSnap,R=A.isBound,C=A.offset,P=M.isSnap,I=M.isBound;y=O||P||R||I,u+=C,l+=M.offset}i.passDeltaX=u-(i.passDistX||0),i.passDeltaY=l-(i.passDistY||0),i.passDistX=u,i.passDistY=l;var N=(0,o.plus)(Ut({datas:i,distX:u,distY:l}),p),D=(0,o.plus)(function(t){var e=t.datas,i=Ut({datas:e,distX:t.distX,distY:t.distY}),r=i[0],n=i[1],s=Gt(e,(0,o.fromTranslation)([r,n],4));return(0,o.calculate)(s,(0,o.convertPositionMatrix)([0,0,0],4),4)}({datas:i,distX:u,distY:l}),p);_||y||((0,s.throttleArray)(D,v),(0,s.throttleArray)(N,v));var L=(0,o.minus)(N,p),k=(0,o.minus)(D,p),B=(0,o.minus)(k,f),F=(0,o.minus)(L,d);i.prevDist=k,i.prevBeforeDist=L;var j=i.left+L[0],G=i.top+L[1],U=i.right-L[0],X=i.bottom-L[1],z=jt(i,"translate("+D[0]+"px, "+D[1]+"px)","translate("+k[0]+"px, "+k[1]+"px)");if(t.state.dragInfo.dist=r?[0,0]:k,r||g||!B.every((function(t){return!t}))||!F.some((function(t){return!t}))){var H=t.state,Y=ct(t,e,{transform:z,dist:k,delta:B,translate:D,beforeDist:L,beforeDelta:F,beforeTranslate:N,left:j,top:G,right:U,bottom:X,width:H.width,height:H.height,isPinch:a});return!r&&dt(t,"onDrag",Y),Y}}},dragEnd:function(t,e){var i=e.parentEvent,r=e.datas,n=e.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,!i&&dt(t,"onDragEnd",ft(t,e,{})),n},dragGroupStart:function(t,e){var i=e.datas,r=e.clientX,n=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var o=Dt(t,this,"dragStart",[r||0,n||0],e,!1),a=dt(t,"onDragGroupStart",g(g({},s),{targets:t.props.targets,events:o}));return i.isDrag=!1!==a,!!i.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var i=this.drag(t,e),r=e.datas,n=Dt(t,this,"drag",[r.passDeltaX,r.passDeltaY],e,!1);if(i){var s=g({targets:t.props.targets,events:n},i);return dt(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var i=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),Dt(t,this,"dragEnd",[0,0],e,!1),dt(t,"onDragGroupEnd",ft(t,e,{targets:t.props.targets})),i},request:function(t){var e={},i=t.getRect(),r=0,n=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-i.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?n=t.y-i.top:"deltaY"in t&&(n+=t.deltaY),{datas:e,distX:r,distY:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Ke(t,e,i,r){void 0===r&&(r="");var n=t.state,o=n.renderPoses,a=n.rotation,h=n.direction,u=t.props,l=u.renderDirections,c=void 0===l?e:l,f=u.zoom,d={};if(!c)return[];var p=h>0?1:-1,m=!0===c?P:c,g=a/Math.PI*180;return m.forEach((function(t){d[t]=!0})),m.map((function(t){var e=I[t];if(!e||!d[t])return null;var n=((0,s.throttle)(g,15)+p*N[t]+720)%180;return i.createElement("div",{className:L("control","direction",t,r),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:it.apply(void 0,v([a,f],e.map((function(t){return o[t]}))))})}))}function Qe(t,e,i,r,n,o){for(var a=[],h=6;h<arguments.length;h++)a[h-6]=arguments[h];var u=(0,s.getRad)(i,r),l=e?(0,s.throttle)(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:L.apply(void 0,v(["line","direction",e],a)),"data-rotation":l,"data-line-index":o,"data-direction":e,style:et(i,r,n,u)})}function ti(t,e){return Ke(t,P,e)}function ei(t,e){return Ke(t,["nw","ne","sw","se"],e)}function ii(t,e,i,r,n,a){var h=t.state.is3d?4:3,u=$(t.state.rootMatrix,n,h),l=(0,o.plus)([a.left,a.top],u);e.startAbsoluteOrigin=l,e.prevDeg=(0,s.getRad)(l,[i,r])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function ri(t,e,i,r,n,s){var o=i.prevDeg,a=Ye(t,e,i.origin,r);return i.prevDeg=a,[a-o,a,s+a]}function ni(t,e,i,r,n,o,a,h){var u=i.prevDeg,l=i.prevSnapDeg,c=i.startDeg,f=i.loop;u>r&&u>270&&r<90?++i.loop:u<r&&u<90&&r>270&&--i.loop;var d=i.loop,p=360*f+l-c+o,m=360*d+r-c+o;i.prevDeg=m-360*d+c-o;var g=n*((m=(0,s.throttle)(m,a))-o);return h&&(m=(g=Ye(t,e,i.origin,g))/n+o),i.prevSnapDeg=m-360*d+c-o,[n*(m-p),g,o+g]}function si(t,e,i,r,n,o,a,h){return ni(t,e,i,(0,s.getRad)(i.startAbsoluteOrigin,[n,o])/Math.PI*180,r,a,h,!0)}function oi(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var i=e.inputEvent.target;if((0,s.hasClass)(i,L("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&Ot(r,!0).some((function(t){return!!t&&(i===t||i.contains(t))}))}var ai={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var i=t.props,r=i.rotatable,n=i.rotationPosition,s=i.zoom,o=i.renderDirections,a=t.state,h=a.renderPoses,u=a.direction;if(!r)return null;var l=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3];if("none"!==t){var a=(t||"top").split("-"),h=a[0],u=a[1],l=[r,n];"left"===h?l=[s,r]:"right"===h?l=[n,o]:"bottom"===h&&(l=[o,s]);var c=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2],f=nt(l,i);if(u){var d="top"===u||"left"===u,p="bottom"===h||"left"===h;c=l[d&&!p||!d&&p?0:1]}return[c,f]}}(n,h,u),c=[];if(l){var f=l[0],d=l[1];c.push(e.createElement("div",{key:"rotation",className:L("rotation"),style:{transform:"translate(-50%) translate("+f[0]+"px, "+f[1]+"px) rotate("+d+"rad)"}},e.createElement("div",{className:L("line rotation-line"),style:{transform:"scaleX("+s+")"}}),e.createElement("div",{className:L("control rotation-control"),style:{transform:"translate(0.5px) scale("+s+")"}})))}return o&&c.push.apply(c,Ke(t,[],e)),c},dragControlCondition:oi,dragControlStart:function(t,e){var i=e.datas,r=e.clientX,n=e.clientY,s=e.parentRotate,o=e.parentFlag,a=e.isPinch,h=e.isRequest,u=t.state,l=u.target,c=u.left,f=u.top,d=u.origin,p=u.beforeOrigin,m=u.direction,v=u.beforeDirection,_=u.targetTransform,y=u.moveableClientRect;if(!h&&!l)return!1;var b=t.getRect();if(i.rect=b,i.transform=_,i.left=c,i.top=f,i.fixedPosition=te(t,Qt(t)),i.absoluteInfo={origin:b.origin,startValue:b.rotation},ii(t,i.absoluteInfo,r,n,d,y),h||a||o){var E=s||0;i.beforeInfo={origin:b.beforeOrigin,prevDeg:E,startDeg:E,prevSnapDeg:E,loop:0},i.afterInfo={origin:b.origin,prevDeg:E,startDeg:E,prevSnapDeg:E,loop:0}}else i.beforeInfo={origin:b.beforeOrigin},i.afterInfo={origin:b.origin},ii(t,i.beforeInfo,r,n,p,y),ii(t,i.afterInfo,r,n,d,y);i.direction=m,i.beforeDirection=v,i.startValue=0,i.datas={},$t(e,"rotate");var x=ct(t,e,g(g({set:function(t){i.startValue=t*Math.PI/180}},Vt(e)),{dragStart:Je.dragStart(t,(new It).dragStart([0,0],e))})),T=dt(t,"onRotateStart",x);return i.isRotate=!1!==T,t.state.snapRenderInfo={request:e.isRequest},!!i.isRotate&&x},dragControl:function(t,e){var i,r,n,s,a,h,u,l,c,f=e.datas,d=e.clientX,p=e.clientY,m=e.parentRotate,v=e.parentFlag,_=e.isPinch,y=e.groupDelta,b=f.beforeDirection,E=f.beforeInfo,x=f.afterInfo,T=f.absoluteInfo,S=f.isRotate,w=f.startValue,A=f.rect;if(S){Ft(e,"rotate");var M,O,R,C,P,I,N,D,L,k=function(t){return K(t.datas.beforeTransform,[50,50],100,100).direction}(e),B=b*k,F=t.props,j=F.throttleRotate,G=void 0===j?0:j,U=F.parentMoveable,X=180/Math.PI*w,z=T.startValue;if(!v&&"parentDist"in e){var H=e.parentDist;M=(i=ri(t,A,x,H,0,X))[0],O=i[1],R=i[2],C=(r=ri(t,A,E,H,0,X))[0],P=r[1],I=r[2],N=(n=ri(t,A,T,H,0,z))[0],D=n[1],L=n[2]}else _||v?(M=(s=ni(t,A,x,m,B,X,G))[0],O=s[1],R=s[2],C=(a=ni(t,A,E,m,b,X,G))[0],P=a[1],I=a[2],N=(h=ni(t,A,T,m,B,z,G))[0],D=h[1],L=h[2]):(M=(u=si(t,A,x,B,d,p,X,G))[0],O=u[1],R=u[2],C=(l=si(t,A,E,b,d,p,X,G))[0],P=l[1],I=l[2],N=(c=si(t,A,T,B,d,p,z,G))[0],D=c[1],L=c[2]);if(N||M||C||U){var Y=jt(f,"rotate("+R+"deg)","rotate("+O+"deg)"),W=function(t,e,i,r){return Kt(t,"rotate("+e+"deg)",Qt(t),i,r)}(t,O,f.fixedPosition,f),V=(0,o.minus)((0,o.plus)(y||[0,0],W),f.prevInverseDist||[0,0]);f.prevInverseDist=W;var $=ct(t,e,g({delta:M,dist:O,rotate:R,beforeDist:P,beforeDelta:C,beforeRotate:I,absoluteDist:D,absoluteDelta:N,absoluteRotate:L,isPinch:!!_},Jt(t,Y,V,_,e)));return dt(t,"onRotate",$),$}}},dragControlEnd:function(t,e){var i=e.datas,r=e.isDrag;return!!i.isRotate&&(i.isRotate=!1,dt(t,"onRotateEnd",ft(t,e,{})),r)},dragGroupControlCondition:oi,dragGroupControlStart:function(t,e){var i=e.datas,r=t.state,n=r.left,s=r.top,a=r.beforeOrigin,h=this.dragControlStart(t,e);if(!h)return!1;h.set(i.beforeDirection*t.rotation);var u=Lt(t,this,"dragControlStart",e,(function(t,e){var i=t.state,r=i.left,h=i.top,u=i.beforeOrigin,l=(0,o.plus)((0,o.minus)([r,h],[n,s]),(0,o.minus)(u,a));return e.datas.groupClient=l,g(g({},e),{parentRotate:0})})),l=dt(t,"onRotateGroupStart",g(g({},h),{targets:t.props.targets,events:u}));return i.isRotate=!1!==l,!!i.isRotate&&h},dragGroupControl:function(t,e){var i=e.datas;if(i.isRotate){var r=this.dragControl(t,e);if(r){var n=i.beforeDirection,s=r.beforeDist,a=r.beforeDelta/180*Math.PI,h=Lt(t,this,"dragControl",e,(function(t,e){var i=e.datas.groupClient,r=i[0],h=i[1],u=(0,o.rotate)([r,h],a*n),l=u[0],c=u[1],f=[l-r,c-h];return e.datas.groupClient=[l,c],g(g({},e),{parentRotate:s,groupDelta:f})}));t.rotation=n*r.beforeRotate;var u=g({targets:t.props.targets,events:h,set:function(e){t.rotation=e}},r);return dt(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var i=e.isDrag;if(e.datas.isRotate)return this.dragControlEnd(t,e),Lt(t,this,"dragControlEnd",e),dt(t,"onRotateGroupEnd",ft(t,e,{targets:t.props.targets})),i},request:function(t){var e={},i=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?i+=t.deltaRotate:"rotate"in t&&(i=t.rotate-r),{datas:e,parentDist:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},hi={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var i=t.props,r=i.resizable,n=i.edge;if(r)return n?ei(t,e):ti(t,e)},dragControlCondition:wt,dragControlStart:function(t,e){var i,r=e.inputEvent,n=e.isPinch,a=e.parentDirection,h=e.datas,u=e.parentFlag,l=a||(n?[0,0]:at(r.target)),c=t.state,f=c.target,d=c.width,p=c.height;if(!l||!f)return!1;!n&&Bt(t,e),h.datas={},h.direction=l,h.startOffsetWidth=d,h.startOffsetHeight=p,h.prevWidth=0,h.prevHeight=0,i=function(t){var e=pt(t);return[parseFloat(e.width),parseFloat(e.height)]}(f),h.startWidth=i[0],h.startHeight=i[1];var m=[Math.max(0,d-h.startWidth),Math.max(0,p-h.startHeight)];if(h.minSize=m,h.maxSize=[1/0,1/0],!u){var g=pt(f),v=g.position,_=g.minWidth,y=g.minHeight,b=g.maxWidth,E=g.maxHeight,x="static"===v||"relative"===v,T=x?f.parentElement:f.offsetParent,S=d,w=p;if(T&&(S=T.clientWidth,w=T.clientHeight,x)){var A=pt(T);S-=parseFloat(A.paddingLeft)||0,w-=parseFloat(A.paddingTop)||0}h.minSize=(0,o.plus)([(0,s.convertUnitSize)(_,S)||0,(0,s.convertUnitSize)(y,w)||0],m),h.maxSize=(0,o.plus)([(0,s.convertUnitSize)(b,S)||1/0,(0,s.convertUnitSize)(E,w)||1/0],m)}var M=t.props.transformOrigin||"% %";function O(t){h.ratio=t&&isFinite(t)?t:0}function R(e){h.fixedDirection=e,h.fixedPosition=ee(t,e)}h.transformOrigin=M&&(0,s.isString)(M)?M.split(" "):M,h.isWidth=!l[0]&&!l[1]||l[0]||!l[1],O(d/p),R([-l[0],-l[1]]);var C=ct(t,e,{direction:l,set:function(t){var e=t[0],i=t[1];h.startWidth=e,h.startHeight=i},setMin:function(t){h.minSize=t},setMax:function(t){h.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:O,setFixedDirection:R,setOrigin:function(t){h.transformOrigin=t},dragStart:Je.dragStart(t,(new It).dragStart([0,0],e))});return!1!==dt(t,"onResizeStart",C)&&(h.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:l}),!!h.isResize&&C},dragControl:function(t,e){var i,r=e.datas,n=e.distX,a=e.distY,h=e.parentFlag,u=e.isPinch,l=e.parentDistance,c=e.parentScale,f=e.parentKeepRatio,d=e.dragClient,p=e.parentDist,m=e.isRequest,g=r.isResize,_=r.transformOrigin,y=r.fixedDirection,b=r.startWidth,E=r.startHeight,x=r.prevWidth,T=r.prevHeight,S=r.minSize,w=r.maxSize,A=r.ratio,O=r.isWidth,R=r.startOffsetWidth,C=r.startOffsetHeight;if(g){var P=t.props,I=P.throttleResize,N=void 0===I?0:I,D=P.parentMoveable,L=P.snapThreshold,k=void 0===L?5:L,B=r.direction,F=B,j=0,G=0;B[0]||B[1]||(F=[1,1]);var U=A&&(t.props.keepRatio||f),X=d;if(d||(X=!h&&u?ee(t,[0,0]):r.fixedPosition),p)j=p[0],G=p[1],U&&(j?G||(G=j/A):j=G*A);else if(c)j=(c[0]-1)*R,G=(c[1]-1)*C;else if(u)l&&(j=l,G=l*C/R);else{var z=Xt({datas:r,distX:n,distY:a});if(j=F[0]*z[0],G=F[1]*z[1],U&&R&&C){var H=(0,s.getRad)([0,0],z),Y=(0,s.getRad)([0,0],F),W=Q([j,G]),V=Math.cos(H-Y)*W;if(F[0])if(F[1]){var $=2*F[0]*R,Z=2*F[1]*C,J=Q([$+z[0],Z+z[1]])-Q([$,Z]),K=(0,s.getRad)([0,0],[A,1]);j=Math.cos(K)*J,G=Math.sin(K)*J}else G=(j=V)*A;else j=(G=V)/A}else if(!U){var tt=v(B);R||(z[0]<0?tt[0]=-1:z[0]>0&&(tt[0]=1)),C||(z[1]<0?tt[1]=-1:z[1]>0&&(tt[1]=1)),B=tt,j=(F=tt)[0]*z[0],G=F[1]*z[1]}}var et=F[0]||U?Math.max(R+j,M):R,it=F[1]||U?Math.max(C+G,M):C;U&&R&&C&&(O?it=et/A:et=it*A);var rt=[0,0];if(u||(rt=function(t,e,i,r,n,s,o){if(!Le(t,"resizable"))return[0,0];var a=t.state,h=a.allMatrix,u=a.is3d;return He(t,(function(t,s){return Be(h,e+t,i+s,n,r,u)}),e,i,r,n,s,o)}(t,et,it,B,X,m,r)),p&&(!p[0]&&(rt[0]=0),!p[1]&&(rt[1]=0)),U){F[0]&&F[1]&&rt[0]&&rt[1]&&(Math.abs(rt[0])>Math.abs(rt[1])?rt[1]=0:rt[0]=0);var nt=!rt[0]&&!rt[1];nt&&(O?et=(0,s.throttle)(et,N):it=(0,s.throttle)(it,N)),F[0]&&!F[1]||rt[0]&&!rt[1]||nt&&O?it=(et+=rt[0])/A:(!F[0]&&F[1]||!rt[0]&&rt[1]||nt&&!O)&&(et=(it+=rt[1])*A)}else R+j<-k&&(rt[0]=0),R+G<-k&&(rt[1]=0),et+=rt[0],it+=rt[1],rt[0]||(et=(0,s.throttle)(et,N)),rt[1]||(it=(0,s.throttle)(it,N));et=(i=(0,s.calculateBoundSize)([et,it],S,w,U))[0],it=i[1];var st=[(j=(et=Math.round(et))-R)-x,(G=(it=Math.round(it))-C)-T];r.prevWidth=j,r.prevHeight=G;var ot=function(t,e,i,r,n,a){var h=t.props.groupable,u=t.state,l=u.transformOrigin,c=u.targetMatrix,f=u.offsetMatrix,d=u.is3d,p=u.width,m=u.height,g=u.left,v=u.top,_=d?4:3,y=function(t,e,i,r,n,o){return void 0===r&&(r=e),void 0===n&&(n=i),void 0===o&&(o=[0,0]),t?t.map((function(t,a){var h=(0,s.splitUnit)(t),u=h.value,l=h.unit,c=a?n:r,f=a?i:e;return"%"===t||isNaN(u)?f*(c?o[a]/c:0):"%"!==l?u:f*u/100})):o}(a,e,i,p,m,l),b=h?g:0,E=h?v:0,x=function(t,e,i,r,n,s){var o=Yt(q(e,i,r,n),s);return[t[0]-o[0],t[1]-o[1]]}(n,Wt(f,c,y,_),e,i,_,r);return(0,o.minus)(x,[b,E])}(t,et,it,y,X,_);if(D||!st.every((function(t){return!t}))||!ot.every((function(t){return!t}))){var at=ct(t,e,{width:b+j,height:E+G,offsetWidth:et,offsetHeight:it,direction:B,dist:[j,G],delta:st,isPinch:!!u,drag:Je.drag(t,Pt(e,t.state,ot,!!u,!1))});return dt(t,"onResize",at),at}}},dragControlAfter:function(t,e){var i=e.datas,r=i.isResize,n=i.startOffsetWidth,s=i.startOffsetHeight,o=i.prevWidth,a=i.prevHeight;if(r){var h=t.state,u=h.width-(n+o),l=h.height-(s+a),c=Math.abs(u)>3,f=Math.abs(l)>3;return c&&(i.startWidth+=u,i.startOffsetWidth+=u,i.prevWidth+=u),f&&(i.startHeight+=l,i.startOffsetHeight+=l,i.prevHeight+=l),c||f?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var i=e.datas,r=e.isDrag;return!!i.isResize&&(i.isResize=!1,dt(t,"onResizeEnd",ft(t,e,{})),r)},dragGroupControlCondition:wt,dragGroupControlStart:function(t,e){var i=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var n=Nt(t,"resizable",e);function s(e,r){var n=i.fixedDirection,s=i.fixedPosition,a=ee(e,n),h=(0,o.calculate)((0,o.createRotateMatrix)(-t.rotation/180*Math.PI,3),[a[0]-s[0],a[1]-s[1],1],3),u=h[0],l=h[1];return r.datas.originalX=u,r.datas.originalY=l,r}var a=Lt(t,this,"dragControlStart",e,(function(t,e){return s(t,e)})),h=g(g({},r),{targets:t.props.targets,events:a,setFixedDirection:function(e){r.setFixedDirection(e),a.forEach((function(i,r){i.setFixedDirection(e),s(t.moveables[r],n[r])}))}}),u=dt(t,"onResizeGroupStart",h);return i.isResize=!1!==u,!!i.isResize&&r},dragGroupControl:function(t,e){var i=e.datas;if(i.isResize){var r=this.dragControl(t,e);if(r){var n=r.offsetWidth,s=r.offsetHeight,a=r.dist,h=t.props.keepRatio,u=[n/(n-a[0]),s/(s-a[1])],l=i.fixedPosition,c=Lt(t,this,"dragControl",e,(function(e,i){var r=(0,o.calculate)((0,o.createRotateMatrix)(t.rotation/180*Math.PI,3),[i.datas.originalX*u[0],i.datas.originalY*u[1],1],3),n=r[0],s=r[1];return g(g({},i),{parentDist:null,parentScale:u,dragClient:(0,o.plus)(l,[n,s]),parentKeepRatio:h})})),f=g({targets:t.props.targets,events:c},r);return dt(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var i=e.isDrag;if(e.datas.isResize)return this.dragControlEnd(t,e),Lt(t,this,"dragControlEnd",e),dt(t,"onResizeGroupEnd",ft(t,e,{targets:t.props.targets})),i},request:function(t){var e={},i=0,r=0,n=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?i=t.offsetWidth-n.offsetWidth:"deltaWidth"in t&&(i+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-n.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[i,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ui={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var i=t.props,r=i.resizable,n=i.scalable,s=i.edge;if(!r&&n)return s?ei(t,e):ti(t,e)},dragControlCondition:wt,dragControlStart:function(t,e){var i=e.datas,r=e.isPinch,n=e.inputEvent,o=e.parentDirection||(r?[0,0]:at(n.target)),a=t.state,h=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,d=a.pos2,p=a.pos4;if(!o||!c)return!1;r||Bt(t,e),i.datas={},i.transform=l,i.prevDist=[1,1],i.direction=o,i.width=h,i.height=u,i.startValue=[1,1];var m=(0,s.getDist)(f,d),v=(0,s.getDist)(d,p),_=!o[0]&&!o[1]||o[0]||!o[1];function y(t){i.ratio=t&&isFinite(t)?t:0}function b(e){i.fixedDirection=e,i.fixedPosition=ee(t,e)}i.scaleWidth=m,i.scaleHeight=v,i.scaleXRatio=m/h,i.scaleYRatio=v/u,$t(e,"scale"),i.isWidth=_,y((0,s.getDist)(f,d)/(0,s.getDist)(d,p)),b([-o[0],-o[1]]);var E=ct(t,e,g(g({direction:o,set:function(t){i.startValue=t},setRatio:y,setFixedDirection:b},Vt(e)),{dragStart:Je.dragStart(t,(new It).dragStart([0,0],e))}));return!1!==dt(t,"onScaleStart",E)&&(i.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!i.isScale&&E},dragControl:function(t,e){Ft(e,"scale");var i=e.datas,r=e.distX,n=e.distY,a=e.parentScale,h=e.parentDistance,u=e.parentKeepRatio,l=e.parentFlag,c=e.isPinch,f=e.dragClient,d=e.parentDist,p=e.isRequest,m=i.prevDist,v=i.direction,_=i.width,y=i.height,b=i.isScale,E=i.startValue,x=i.isWidth,T=i.ratio,S=i.fixedDirection,w=i.scaleXRatio,A=i.scaleYRatio;if(!b)return!1;var M=t.props,R=M.throttleScale,C=M.parentMoveable,P=v;v[0]||v[1]||(P=[1,1]);var I=T&&(t.props.keepRatio||u),N=t.state,D=1,L=1,k=f;if(f||(k=!l&&c?ee(t,[0,0]):i.fixedPosition),d)D=(_+d[0])/_,L=(y+d[1])/y;else if(a)D=a[0],L=a[1];else if(c)h&&(D=(_+h)/_,L=(y+h*y/_)/y);else{var B=Xt({datas:i,distX:r,distY:n}),F=P[0]*B[0]*w,j=P[1]*B[1]*A;if(I&&_&&y)if(P[0])if(P[1]){var G=Q([F,j]),U=(0,s.getRad)([0,0],B),X=(0,s.getRad)([0,0],P),z=Math.cos(U-X)*G,H=(0,s.getRad)([0,0],[T,1]);F=Math.cos(H)*z,j=Math.sin(H)*z}else j=F/T;else F=j*T;D=(_+F/w)/_,L=(y+j/A)/y}D=P[0]||I?D*E[0]:E[0],L=P[1]||I?L*E[1]:E[1],0===D&&(D=(m[0]>0?1:-1)*O),0===L&&(L=(m[1]>0?1:-1)*O);var Y=[D/E[0],L/E[1]],W=[D,L];if(!c&&t.props.groupable){var V=(N.snapRenderInfo||{}).direction;(0,s.isArray)(V)&&(V[0]||V[1])&&(N.snapRenderInfo={direction:v,request:e.isRequest})}var $=[0,0];if(c||($=function(t,e,i,r,n){var s=n.width,a=n.height,h=n.fixedPosition;if(!Le(t,"scalable"))return[0,0];var u=n.is3d,l=He(t,(function(t,r){return Be(function(t,e){var i=t.transformOrigin,r=t.offsetMatrix,n=t.is3d,s=t.targetMatrix,a=n?4:3;return Wt(r,(0,o.multiply)(s,(0,o.createScaleMatrix)(e,a),a),i,a)}(n,(0,o.plus)(e,[t/s,r/a])),s,a,h,i,u)}),s,a,i,h,r,n);return[l[0]/s,l[1]/a]}(t,Y,v,p,i)),I){P[0]&&P[1]&&$[0]&&$[1]&&(Math.abs($[0]*_)>Math.abs($[1]*y)?$[1]=0:$[0]=0);var q=!$[0]&&!$[1];if(q&&(x?Y[0]=(0,s.throttle)(Y[0]*E[0],R)/E[0]:Y[1]=(0,s.throttle)(Y[1]*E[1],R)/E[1]),P[0]&&!P[1]||$[0]&&!$[1]||q&&x){Y[0]+=$[0];var Z=_*Y[0]*E[0]/T;Y[1]=Z/y/E[1]}else if(!P[0]&&P[1]||!$[0]&&$[1]||q&&!x){Y[1]+=$[1];var J=y*Y[1]*E[1]*T;Y[0]=J/_/E[0]}}else Y[0]+=$[0],Y[1]+=$[1],$[0]||(Y[0]=(0,s.throttle)(Y[0]*E[0],R)/E[0]),$[1]||(Y[1]=(0,s.throttle)(Y[1]*E[1],R)/E[1]);0===Y[0]&&(Y[0]=(m[0]>0?1:-1)*O),0===Y[1]&&(Y[1]=(m[1]>0?1:-1)*O);var K,tt,et=[Y[0]/m[0],Y[1]/m[1]];tt=E,W=[(K=Y)[0]*tt[0],K[1]*tt[1]];var it=function(t,e,i,r,n){return Kt(t,"scale("+e.join(", ")+")",i,r,n)}(t,Y,S,k,i),rt=(0,o.minus)(it,i.prevInverseDist||[0,0]);if(i.prevDist=Y,i.prevInverseDist=it,D===m[0]&&L===m[1]&&rt.every((function(t){return!t}))&&!C)return!1;var nt=jt(i,"scale("+W.join(", ")+")","scale("+Y.join(", ")+")"),st=ct(t,e,g({offsetWidth:_,offsetHeight:y,direction:v,scale:W,dist:Y,delta:et,isPinch:!!c},Jt(t,nt,rt,c,e)));return dt(t,"onScale",st),st},dragControlEnd:function(t,e){var i=e.datas,r=e.isDrag;return!!i.isScale&&(i.isScale=!1,dt(t,"onScaleEnd",ft(t,e,{})),r)},dragGroupControlCondition:wt,dragGroupControlStart:function(t,e){var i=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var n=Nt(t,"resizable",e);function s(e,r){var n=i.fixedDirection,s=i.fixedPosition,a=ee(e,n),h=(0,o.calculate)((0,o.createRotateMatrix)(-t.rotation/180*Math.PI,3),[a[0]-s[0],a[1]-s[1],1],3),u=h[0],l=h[1];return r.datas.originalX=u,r.datas.originalY=l,r}i.moveableScale=t.scale;var a=Lt(t,this,"dragControlStart",e,(function(t,e){return s(t,e)})),h=g(g({},r),{targets:t.props.targets,events:a,setFixedDirection:function(e){r.setFixedDirection(e),a.forEach((function(i,r){i.setFixedDirection(e),s(t.moveables[r],n[r])}))}}),u=dt(t,"onScaleGroupStart",h);return i.isScale=!1!==u,!!i.isScale&&h},dragGroupControl:function(t,e){var i=e.datas;if(i.isScale){var r=this.dragControl(t,e);if(r){var n=i.moveableScale;t.scale=[r.scale[0]*n[0],r.scale[1]*n[1]];var s=t.props.keepRatio,a=r.dist,h=r.scale,u=i.fixedPosition,l=Lt(t,this,"dragControl",e,(function(e,i){var r=(0,o.calculate)((0,o.createRotateMatrix)(t.rotation/180*Math.PI,3),[i.datas.originalX*a[0],i.datas.originalY*a[1],1],3),n=r[0],l=r[1];return g(g({},i),{parentDist:null,parentScale:h,parentKeepRatio:s,dragClient:(0,o.plus)(u,[n,l])})})),c=g({targets:t.props.targets,events:l},r);return dt(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var i=e.isDrag;if(e.datas.isScale)return this.dragControlEnd(t,e),Lt(t,this,"dragControlEnd",e),dt(t,"onScaleGroupEnd",ft(t,e,{targets:t.props.targets})),i},request:function(){var t={},e=0,i=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,i+=r.deltaHeight,{datas:t,parentDist:[e,i]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function li(t,e){return t.map((function(t,i){return(0,s.dot)(t,e[i],1,2)}))}function ci(t,e,i){var r=(0,s.getRad)(t,e),n=(0,s.getRad)(t,i)-r;return n>=0?n:n+2*Math.PI}var fi={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var i=t.props,r=i.resizable,n=i.scalable,s=i.warpable,o=i.zoom;if(r||n||!s)return[];var a=t.state,h=a.pos1,u=a.pos2,l=a.pos3,c=a.pos4,f=li(h,u),d=li(u,h),p=li(h,l),m=li(l,h),g=li(l,c),_=li(c,l),y=li(u,c),b=li(c,u);return v([e.createElement("div",{className:L("line"),key:"middeLine1",style:et(f,g,o)}),e.createElement("div",{className:L("line"),key:"middeLine2",style:et(d,_,o)}),e.createElement("div",{className:L("line"),key:"middeLine3",style:et(p,y,o)}),e.createElement("div",{className:L("line"),key:"middeLine4",style:et(m,b,o)})],ti(t,e))},dragControlCondition:function(t,e){return!e.isRequest&&(0,s.hasClass)(e.inputEvent.target,L("direction"))},dragControlStart:function(t,e){var i=e.datas,r=e.inputEvent,n=t.props.target,s=at(r.target);if(!s||!n)return!1;var a=t.state,h=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,d=a.height,p=a.left,m=a.top;return i.datas={},i.targetTransform=l,i.warpTargetMatrix=u?c:(0,o.convertDimension)(c,3,4),i.targetInverseMatrix=(0,o.ignoreDimension)((0,o.invert)(i.warpTargetMatrix,4),3,4),i.direction=s,i.left=p,i.top=m,i.poses=[[0,0],[f,0],[0,d],[f,d]].map((function(t){return(0,o.minus)(t,h)})),i.nextPoses=i.poses.map((function(t){var e=t[0],r=t[1];return(0,o.calculate)(i.warpTargetMatrix,[e,r,0,1],4)})),i.startValue=(0,o.createIdentityMatrix)(4),i.prevMatrix=(0,o.createIdentityMatrix)(4),i.absolutePoses=ut(a),i.posIndexes=zt(s),Bt(t,e),$t(e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:s},!1!==dt(t,"onWarpStart",ct(t,e,g({set:function(t){i.startValue=t}},Vt(e))))&&(i.isWarp=!0),i.isWarp},dragControl:function(t,e){var i=e.datas,r=e.isRequest,n=e.distX,s=e.distY,a=i.targetInverseMatrix,h=i.prevMatrix,u=i.isWarp,l=i.startValue,c=i.poses,f=i.posIndexes,d=i.absolutePoses;if(!u)return!1;if(Ft(e,"matrix3d"),Le(t,"warpable")){var p=f.map((function(t){return d[t]}));p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var m=Ge(t,r,p.map((function(t){return[t[0]+n,t[1]+s]}))),g=m.horizontal,v=m.vertical;s-=g.offset,n-=v.offset}var _=Xt({datas:i,distX:n,distY:s},!0),y=i.nextPoses.slice();if(f.forEach((function(t){y[t]=(0,o.plus)(y[t],_)})),!w.every((function(t){return e=t.map((function(t){return c[t]})),i=t.map((function(t){return y[t]})),r=ci(e[0],e[1],e[2]),n=ci(i[0],i[1],i[2]),!(r>=(s=Math.PI)&&n<=s||r<=s&&n>=s);var e,i,r,n,s})))return!1;var b=(0,o.createWarpMatrix)(c[0],c[2],c[1],c[3],y[0],y[2],y[1],y[3]);if(!b.length)return!1;var E=Gt(i,(0,o.multiply)(a,b,4),!0),x=(0,o.multiply)((0,o.invert)(h,4),E,4);i.prevMatrix=E;var T=(0,o.multiply)(l,E,4),S=jt(i,"matrix3d("+T.join(", ")+")","matrix3d("+E.join(", ")+")");return Zt(e,S),dt(t,"onWarp",ct(t,e,{delta:x,matrix:T,dist:E,multiply:o.multiply,transform:S})),!0},dragControlEnd:function(t,e){var i=e.datas,r=e.isDrag;return!!i.isWarp&&(i.isWarp=!1,dt(t,"onWarpEnd",ft(t,e,{})),r)}},di=L("area-pieces"),pi=L("area-piece"),mi=L("avoid");function gi(t){var e=t.areaElement,i=t.state,r=i.width,n=i.height;(0,s.removeClass)(e,mi),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+n+"px"}function vi(t){return t.createElement("div",{key:"area_pieces",className:di},t.createElement("div",{className:pi}),t.createElement("div",{className:pi}),t.createElement("div",{className:pi}),t.createElement("div",{className:pi}))}var _i={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var i=t.props,r=i.target,s=i.dragArea,a=i.groupable,h=i.passDragArea,u=t.state,l=u.width,c=u.height,f=u.renderPoses,d=h?L("area","pass"):L("area");if(a)return[e.createElement("div",{key:"area",ref:(0,n.ref)(t,"areaElement"),className:d}),vi(e)];if(!r||!s)return[];var p=(0,o.createWarpMatrix)([0,0],[l,0],[0,c],[l,c],f[0],f[1],f[2],f[3]),m=p.length?Y(p,!0):"none";return[e.createElement("div",{key:"area",ref:(0,n.ref)(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:l+"px",height:c+"px",transformOrigin:"0 0",transform:m}}),vi(e)]},dragStart:function(t,e){var i=e.datas,r=e.clientX,n=e.clientY;if(!e.inputEvent)return!1;i.isDragArea=!1;var o=t.areaElement,a=t.state,h=a.moveableClientRect,u=a.renderPoses,l=a.rootMatrix,c=a.is3d,f=h.left,d=h.top,p=Z(u),m=p.left,g=p.top,v=p.width,_=p.height,y=bt(l,[r-f,n-d],c?4:3),b=y[0],E=y[1],x=[{left:m,top:g,width:v,height:(E-=g)-10},{left:m,top:g,width:(b-=m)-10,height:_},{left:m,top:g+E+10,width:v,height:_-E-10},{left:m+b+10,top:g,width:v-b-10,height:_}],T=[].slice.call(o.nextElementSibling.children);x.forEach((function(t,e){T[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),(0,s.addClass)(o,mi),a.disableNativeEvent=!0},drag:function(t,e){var i=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;i.isDragArea||(i.isDragArea=!0,gi(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var i=e.inputEvent,r=e.datas;if(!i)return!1;r.isDragArea||gi(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){gi(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&requestAnimationFrame((function(){e.disableNativeEvent=!1}))}},yi=_("origin",{render:function(t,e){var i=t.props.zoom,r=t.state,n=r.beforeOrigin,s=r.rotation;return[e.createElement("div",{className:L("control","origin"),style:it(s,i,n),key:"beforeOrigin"})]}});function bi(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Ei={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(t,e){var i=t.props.scrollContainer,r=void 0===i?t.getContainer():i,n=new l.default,s=Mt(r,!0);e.datas.dragScroll=n;var o=e.isControl?"controlGesto":"targetGesto",a=e.targets;n.on("scroll",(function(i){var r=i.container,n=i.direction,s=ct(t,e,{scrollContainer:r,direction:n}),o=a?"onScrollGroup":"onScroll";a&&(s.targets=a),dt(t,o,s)})).on("move",(function(i){var r=i.offsetX,n=i.offsetY;t[o].scrollBy(r,n,e.inputEvent,!1)})),n.dragStart(e,{container:s})},checkScroll:function(t,e){var i=e.datas.dragScroll;if(i){var r=t.props,n=r.scrollContainer,s=void 0===n?t.getContainer():n,o=r.scrollThreshold,a=void 0===o?0:o,h=r.getScrollPosition,u=void 0===h?bi:h;return i.drag(e,{container:s,threshold:a,getScrollPosition:function(t){return u({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,g(g({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,g(g({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,g(g({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,g(g({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,g(g({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,g(g({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,g(g({},e),{targets:t.props.targets}))}},xi={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},Ti=_("padding",{render:function(t,e){var i=t.props;if(i.dragArea)return[];var r=i.padding||{},n=r.left,s=void 0===n?0:n,a=r.top,h=void 0===a?0:a,u=r.right,l=void 0===u?0:u,c=r.bottom,f=void 0===c?0:c,d=t.state,p=d.renderPoses,m=[d.pos1,d.pos2,d.pos3,d.pos4],g=[];return s>0&&g.push([0,2]),h>0&&g.push([0,1]),l>0&&g.push([1,3]),f>0&&g.push([2,3]),g.map((function(t,i){var r=t[0],n=t[1],s=m[r],a=m[n],h=p[r],u=p[n],l=(0,o.createWarpMatrix)([0,0],[100,0],[0,100],[100,100],s,a,h,u);if(l.length)return e.createElement("div",{key:"padding"+i,className:L("padding"),style:{transform:Y(l,!0)}})}))}}),Si=["nw","ne","se","sw"];function wi(t,e){var i=t[0]+t[1],r=i>e?e/i:1;return t[0]*=r,t[1]=e-t[1]*r,t}var Ai=[1,2,5,6],Mi=[0,3,4,7],Oi=[1,-1,-1,1],Ri=[1,1,-1,-1];function Ci(t,e,i,r,n,s,o,a,h){void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=r),void 0===h&&(h=n);var u=[],l=!1,c=t.map((function(t,c){var f=e[c],d=f.horizontal,p=f.vertical;if(p&&!l&&(l=!0,u.push("/")),l){var m=Math.max(0,1===p?t[1]-o:h-t[1]);return u.push(Tt(m,n,i)),m}return m=Math.max(0,1===d?t[0]-s:a-t[0]),u.push(Tt(m,r,i)),m}));return{styles:u,raws:c}}function Pi(t){for(var e=[0,0],i=[0,0],r=t.length,n=0;n<r;++n){var s=t[n];s.sub&&(s.horizontal&&(0===e[1]&&(e[0]=n),e[1]=n-e[0]+1,i[0]=n+1),s.vertical&&(0===i[1]&&(i[0]=n),i[1]=n-i[0]+1))}return{horizontalRange:e,verticalRange:i}}function Ii(t,e,i,r,n,o){var a,h,u,l;void 0===o&&(o=[0,0]);var c=t.indexOf("/"),f=(c>-1?t.slice(0,c):t).length,d=t.slice(0,f),p=t.slice(f+1),m=d[0],g=void 0===m?"0px":m,_=d[1],y=void 0===_?g:_,b=d[2],E=void 0===b?g:b,x=d[3],T=void 0===x?y:x,S=p[0],w=void 0===S?g:S,A=p[1],M=void 0===A?w:A,O=p[2],R=void 0===O?w:O,C=p[3],P=void 0===C?M:C,I=[g,y,E,T].map((function(t){return(0,s.convertUnitSize)(t,e)})),N=[w,M,R,P].map((function(t){return(0,s.convertUnitSize)(t,i)})),D=I.slice(),L=N.slice();a=wi([D[0],D[1]],e),D[0]=a[0],D[1]=a[1],h=wi([D[3],D[2]],e),D[3]=h[0],D[2]=h[1],u=wi([L[0],L[3]],i),L[0]=u[0],L[3]=u[1],l=wi([L[1],L[2]],i),L[1]=l[0],L[2]=l[1];var k=D.slice(0,Math.max(o[0],d.length)),B=L.slice(0,Math.max(o[1],p.length));return v(k.map((function(t,e){var s=Si[e];return{horizontal:Oi[e],vertical:0,pos:[r+t,n+(-1===Ri[e]?i:0)],sub:!0,raw:I[e],direction:s}})),B.map((function(t,i){var s=Si[i];return{horizontal:0,vertical:Ri[i],pos:[r+(-1===Oi[i]?e:0),n+t],sub:!0,raw:N[i],direction:s}})))}function Ni(t,e,i,r,n){void 0===n&&(n=e.length);var s=Pi(t.slice(r)),o=s.horizontalRange,a=s.verticalRange,h=i-r,u=0;if(0===h)u=n;else if(h>0&&h<o[1])u=o[1]-h;else{if(!(h>=a[0]))return;u=a[0]+a[1]-h}t.splice(i,u),e.splice(i,u)}function Di(t,e,i,r,n,s,o,a,h,u,l){void 0===u&&(u=0),void 0===l&&(l=0);var c=Pi(t.slice(i)),f=c.horizontalRange,d=c.verticalRange;if(r>-1)for(var p=1===Oi[r]?s-u:a-s,m=f[1];m<=r;++m){var g=1===Ri[m]?l:h,v=0;if(r===m?v=s:0===m?v=u+p:-1===Oi[m]&&(v=a-(e[i][0]-u)),t.splice(i+m,0,{horizontal:Oi[m],vertical:0,pos:[v,g]}),e.splice(i+m,0,[v,g]),0===m)break}else if(n>-1){var _=1===Ri[n]?o-l:h-o;if(0===f[1]&&0===d[1]){var y=[u+_,l];t.push({horizontal:Oi[0],vertical:0,pos:y}),e.push(y)}var b=d[0];for(m=d[1];m<=n&&(v=1===Oi[m]?u:a,g=0,n===m?g=o:0===m?g=l+_:1===Ri[m]?g=e[i+b][1]:-1===Ri[m]&&(g=h-(e[i+b][1]-l)),t.push({horizontal:0,vertical:Ri[m],pos:[v,g]}),e.push([v,g]),0!==m);++m);}}function Li(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,i){return t.horizontal?e[i]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,i){return t.vertical?e[i]:null})).filter((function(t){return null!=t}))}}var ki=[[0,-1,"n"],[1,0,"e"]],Bi=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Fi(t,e,i){var r=t.props.clipRelative,n=t.state,s=n.width,a=n.height,h=e,u=h.type,l=h.poses,c="rect"===u,f="circle"===u;if("polygon"===u)return i.map((function(t){return Tt(t[0],s,r)+" "+Tt(t[1],a,r)}));if(c||"inset"===u){var d=i[1][1],p=i[3][0],m=i[7][0],g=i[5][1];if(c)return[d,p,g,m].map((function(t){return t+"px"}));var _=[d,s-p,a-g,m].map((function(t,e){return Tt(t,e%2?s:a,r)}));if(i.length>8){var y=(0,o.minus)(i[4],i[0]),b=y[0],E=y[1];_.push.apply(_,v(["round"],Ci(i.slice(8),l.slice(8),r,b,E,m,d,p,g).styles))}return _}if(f||"ellipse"===u){var x=i[0],T=Tt(Math.abs(i[1][1]-x[1]),f?Math.sqrt((s*s+a*a)/2):a,r);return(_=f?[T]:[Tt(Math.abs(i[2][0]-x[0]),s,r),T]).push("at",Tt(x[0],s,r),Tt(x[1],a,r)),_}}function ji(t,e,i,r){var n=[r,(r+e)/2,e],s=[t,(t+i)/2,i];return Bi.map((function(t){var e=t[0],i=t[1],r=t[2],o=n[e+1],a=s[i+1];return{vertical:Math.abs(i),horizontal:Math.abs(e),direction:r,pos:[o,a]}}))}function Gi(t,e,i,r,n){var o,a,h,u,l,c,f,d=n;if(!d){var p=pt(t),m=p.clipPath;d="none"!==m?m:p.clip}if(d&&"none"!==d&&"auto"!==d||(d=r)){var g=(0,s.splitBracket)(d),_=g.prefix,y=void 0===_?d:_,b=g.value,E=void 0===b?"":b,x="circle"===y,T=" ";if("polygon"===y){T=",";var S=(I=(0,s.splitComma)(E||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=t.split(" "),n=r[0],o=r[1];return{vertical:1,horizontal:1,pos:[(0,s.convertUnitSize)(n,e),(0,s.convertUnitSize)(o,i)]}}));return{type:y,clipText:d,poses:S,splitter:T}}if(x||"ellipse"===y){var w,A,M,O="",R="",C=0,P=0,I=(0,s.splitSpace)(E);x?(w=void 0===(o=I[0])?"50%":o,O=void 0===(a=I[2])?"50%":a,R=void 0===(h=I[3])?"50%":h,C=(0,s.convertUnitSize)(w,Math.sqrt((e*e+i*i)/2)),P=C):(A=void 0===(u=I[0])?"50%":u,M=void 0===(l=I[1])?"50%":l,O=void 0===(c=I[3])?"50%":c,R=void 0===(f=I[4])?"50%":f,C=(0,s.convertUnitSize)(A,e),P=(0,s.convertUnitSize)(M,i));var N=[(0,s.convertUnitSize)(O,e),(0,s.convertUnitSize)(R,i)];return S=v([{vertical:1,horizontal:1,pos:N,direction:"nesw"}],ki.slice(0,x?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[N[0]+t[0]*C,N[1]+t[1]*P]}}))),{type:y,clipText:d,radiusX:C,radiusY:P,left:N[0]-C,top:N[1]-P,poses:S,splitter:T}}if("inset"===y){var D=(I=(0,s.splitSpace)(E||"0 0 0 0")).indexOf("round"),L=(D>-1?I.slice(0,D):I).length,k=I.slice(L+1),B=I.slice(0,L),F=B[0],j=B[1],G=void 0===j?F:j,U=B[2],X=void 0===U?F:U,z=B[3],H=void 0===z?G:z,Y=[F,X].map((function(t){return(0,s.convertUnitSize)(t,i)})),W=Y[0],V=Y[1],$=[H,G].map((function(t){return(0,s.convertUnitSize)(t,e)})),q=$[0],Z=$[1],J=e-Z,K=i-V,Q=Ii(k,J-q,K-W,q,W);return{type:"inset",clipText:d,poses:S=v(ji(W,J,K,q),Q),top:W,left:q,right:J,bottom:K,radius:k,splitter:T}}if("rect"===y){T=",";var tt=(I=(0,s.splitComma)(E||"0px, "+e+"px, "+i+"px, 0px")).map((function(t){return(0,s.splitUnit)(t).value}));return{type:"rect",clipText:d,poses:S=ji(W=tt[0],Z=tt[1],V=tt[2],q=tt[3]),top:W,right:Z,bottom:V,left:q,values:I,splitter:T}}}}var Ui={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var i=t.props,r=i.customClipPath,n=i.defaultClipPath,a=i.clipArea,h=i.zoom,u=t.state,l=u.target,c=u.width,f=u.height,d=u.allMatrix,p=u.is3d,m=u.left,g=u.top,_=u.pos1,y=u.pos2,b=u.pos3,E=u.pos4,x=u.clipPathState,T=u.snapBoundInfos;if(!l)return[];var S=Gi(l,c,f,n||"inset",x||r);if(!S)return[];var w=p?4:3,A=S.type,M=S.poses.map((function(t){var e=$(d,t.pos,w);return[e[0]-m,e[1]-g]})),O=[],R=[],C="rect"===A,P="inset"===A,I="polygon"===A;if(C||P||I){var N=P?M.slice(0,8):M;R=N.map((function(t,i){var r=0===i?N[N.length-1]:N[i-1],n=(0,s.getRad)(r,t),o=tt(r,t);return e.createElement("div",{key:"clipLine"+i,className:L("line","clip-line","snap-control"),"data-clip-index":i,style:{width:o+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+n+"rad) scaleY("+h+")"}})}))}if(O=M.map((function(t,i){return e.createElement("div",{key:"clipControl"+i,className:L("control","clip-control","snap-control"),"data-clip-index":i,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+h+")"}})})),P&&O.push.apply(O,M.slice(8).map((function(t,i){return e.createElement("div",{key:"clipRadiusControl"+i,className:L("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+i,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+h+")"}})}))),"circle"===A||"ellipse"===A){var D=S.left,k=S.top,B=S.radiusX,F=S.radiusY,j=(0,o.minus)($(d,[D,k],w),$(d,[0,0],w)),G=j[0],U=j[1],X="none";if(!a){for(var z=Math.max(10,B/5,F/5),H=[],W=0;W<=z;++W){var V=2*Math.PI/z*W;H.push([B+(B-h)*Math.cos(V),F+(F-h)*Math.sin(V)])}H.push([B,-2]),H.push([-2,-2]),H.push([-2,2*F+2]),H.push([2*B+2,2*F+2]),H.push([2*B+2,-2]),H.push([B,-2]),X="polygon("+H.map((function(t){return t[0]+"px "+t[1]+"px"})).join(", ")+")"}O.push(e.createElement("div",{key:"clipEllipse",className:L("clip-ellipse","snap-control"),style:{width:2*B+"px",height:2*F+"px",clipPath:X,transform:"translate("+(-m+G)+"px, "+(-g+U)+"px) "+Y(d)}}))}if(a){var q=Z(v([_,y,b,E],M)),J=q.width,K=q.height,Q=q.left,et=q.top;(I||C||P)&&(H=P?M.slice(0,8):M,O.push(e.createElement("div",{key:"clipArea",className:L("clip-area","snap-control"),style:{width:J+"px",height:K+"px",transform:"translate("+Q+"px, "+et+"px)",clipPath:"polygon("+H.map((function(t){return t[0]-Q+"px "+(t[1]-et)+"px"})).join(", ")+")"}})))}return T&&["vertical","horizontal"].forEach((function(t){var i=T[t],r="horizontal"===t;i.isSnap&&R.push.apply(R,i.snap.posInfos.map((function(i,n){var s=i.pos,a=(0,o.minus)($(d,r?[0,s]:[s,0],w),[m,g]),u=(0,o.minus)($(d,r?[c,s]:[s,f],w),[m,g]);return Qe(e,"",a,u,h,"clip"+t+"snap"+n,"guideline")}))),i.isBound&&R.push.apply(R,i.bounds.map((function(i,n){var s=i.pos,a=(0,o.minus)($(d,r?[0,s]:[s,0],w),[m,g]),u=(0,o.minus)($(d,r?[c,s]:[s,f],w),[m,g]);return Qe(e,"",a,u,h,"clip"+t+"bounds"+n,"guideline","bounds","bold")})))})),v(O,R)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var i=t.props.dragWithClip;return!(void 0===i||i)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var i=t.state,r=t.props,n=r.defaultClipPath,s=r.customClipPath,o=i.target,a=i.width,h=i.height,u=e.inputEvent?e.inputEvent.target:null,l=u?u.getAttribute("class"):"",c=e.datas,f=Gi(o,a,h,n||"inset",s);if(!f)return!1;var d=f.clipText;return!1===dt(t,"onClipStart",ct(t,e,{clipType:f.type,clipStyle:d,poses:f.poses.map((function(t){return t.pos}))}))?(c.isClipStart=!1,!1):(c.isControl=l.indexOf("clip-control")>-1,c.isLine=l.indexOf("clip-line")>-1,c.isArea=l.indexOf("clip-area")>-1||l.indexOf("clip-ellipse")>-1,c.index=u?parseInt(u.getAttribute("data-clip-index"),10):-1,c.clipPath=f,c.isClipStart=!0,i.clipPathState=d,Bt(t,e),!0)},dragControl:function(t,e){var i=e.datas,r=e.originalDatas;if(!i.isClipStart)return!1;var n=r&&r.draggable||{},a=i,h=a.isControl,u=a.isLine,l=a.isArea,c=a.index,f=a.clipPath;if(!f)return!1;var d=n.isDrag?n.prevDist:Xt(e),p=d[0],m=d[1],g=t.props,_=t.state,y=_.width,b=_.height,E=!l&&!h&&!u,x=f.type,T=f.poses,S=f.splitter,w=T.map((function(t){return t.pos}));E&&(p=-p,m=-m);var A=!h||"nesw"===T[c].direction,M="inset"===x||"rect"===x,O=T.map((function(){return[0,0]}));if(h&&!A){var R=T[c],C=R.horizontal,P=R.vertical,I=[p*Math.abs(C),m*Math.abs(P)];O=function(t,e,i,r){var n=t[e],s=n.direction,o=n.sub,a=t.map((function(){return[0,0]})),h=s?s.split(""):[];if(r&&e<8){var u=h.filter((function(t){return"w"===t||"e"===t}))[0],l=h.filter((function(t){return"n"===t||"s"===t}))[0];a[e]=i,t.forEach((function(t,e){var r=t.direction;r&&(r.indexOf(u)>-1&&(a[e][0]=i[0]),r.indexOf(l)>-1&&(a[e][1]=i[1]))})),u&&(a[1][0]=i[0]/2,a[5][0]=i[0]/2),l&&(a[3][1]=i[1]/2,a[7][1]=i[1]/2)}else s&&!o?h.forEach((function(e){var r="n"===e||"s"===e;t.forEach((function(t,n){var s=t.direction,o=t.horizontal,h=t.vertical;s&&-1!==s.indexOf(e)&&(a[n]=[r||!o?0:i[0],r&&h?i[1]:0])}))})):a[e]=i;return a}(T,c,I,M)}else A&&(O=w.map((function(){return[p,m]})));var N=w.map((function(t,e){return(0,o.plus)(t,O[e])})),D=v(N);_.snapBoundInfos=null;var L="circle"===f.type,k="ellipse"===f.type;if(L||k){var B=Z(N),F=Math.abs(B.bottom-B.top),j=Math.abs(k?B.right-B.left:F),G=N[0][1]+F,U=N[0][0]-j,X=N[0][0]+j;L&&(D.push([X,B.bottom]),O.push([1,0])),D.push([B.left,G]),O.push([0,1]),D.push([U,B.bottom]),O.push([1,0])}var z=ne((g.clipHorizontalGuidelines||[]).map((function(t){return(0,s.convertUnitSize)(""+t,b)})),(g.clipVerticalGuidelines||[]).map((function(t){return(0,s.convertUnitSize)(""+t,y)})),y,b),H=[],Y=[];if(L||k)H=[D[4][0],D[2][0]],Y=[D[1][1],D[3][1]];else if(M){var W=[D[0],D[2],D[4],D[6]],V=[O[0],O[2],O[4],O[6]];H=W.filter((function(t,e){return V[e][0]})).map((function(t){return t[0]})),Y=W.filter((function(t,e){return V[e][1]})).map((function(t){return t[1]}))}else H=D.filter((function(t,e){return O[e][0]})).map((function(t){return t[0]})),Y=D.filter((function(t,e){return O[e][1]})).map((function(t){return t[1]}));for(var $=function(t){var e=Ue(z,g.clipTargetBounds&&{left:0,top:0,right:y,bottom:b},H,Y,{snapThreshold:5}),i=e.horizontal,r=e.vertical,n=i.offset,s=r.offset;if(!k&&!L||0!==O[0][0]||0!==O[0][1])return D.forEach((function(t,e){var i=O[e];i[0]&&(t[0]-=s),i[1]&&(t[1]-=n)})),"break";var o=Z(N),a=o.bottom-o.top,h=k?o.right-o.left:a;h-=r.isBound?Math.abs(s):0===r.snapIndex?-s:s,a-=i.isBound?Math.abs(n):0===i.snapIndex?-n:n,L&&(h=a=fe(r,i)>0?a:h);var u=D[0];D[1][1]=u[1]-a,D[2][0]=u[0]+h,D[3][1]=u[1]+a,D[4][0]=u[0]-h},q=0;q<2&&"break"!==$();++q);var J=Fi(t,f,N),K=x+"("+J.join(S)+")";return _.clipPathState=K,L||k?(H=[D[4][0],D[2][0]],Y=[D[1][1],D[3][1]]):M?(W=[D[0],D[2],D[4],D[6]],H=W.map((function(t){return t[0]})),Y=W.map((function(t){return t[1]}))):(H=D.map((function(t){return t[0]})),Y=D.map((function(t){return t[1]}))),_.snapBoundInfos=Ue(z,g.clipTargetBounds&&{left:0,top:0,right:y,bottom:b},H,Y,{snapThreshold:1}),dt(t,"onClip",ct(t,e,{clipEventType:"changed",clipType:x,poses:N,clipStyle:K,clipStyles:J,distX:p,distY:m})),!0},dragControlEnd:function(t,e){this.unset(t);var i=e.isDrag,r=e.datas,n=e.isDouble,s=r.isLine,o=r.isClipStart,a=r.isControl;return!!o&&(dt(t,"onClipEnd",ft(t,e,{})),n&&(a?function(t,e){var i=e.datas,r=i.clipPath,n=i.index,s=r,o=s.type,a=s.poses,h=s.splitter,u=a.map((function(t){return t.pos})),l=u.length;if("polygon"===o)a.splice(n,1),u.splice(n,1);else{if("inset"!==o)return;if(n<8)return;if(Ni(a,u,n,8,l),l===a.length)return}var c=Fi(t,r,u);dt(t,"onClip",ct(t,e,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(h)+")",distX:0,distY:0}))}(t,e):s&&function(t,e){var i=kt(t,e),r=i[0],n=i[1],s=e.datas,o=s.clipPath,a=s.index,h=o,u=h.type,l=h.poses,c=h.splitter,f=l.map((function(t){return t.pos}));if("polygon"===u)f.splice(a,0,[r,n]);else{if("inset"!==u)return;var d=Ai.indexOf(a),p=Mi.indexOf(a),m=l.length;if(Di(l,f,8,d,p,r,n,f[4][0],f[4][1],f[0][0],f[0][1]),m===l.length)return}var g=Fi(t,o,f);dt(t,"onClip",ct(t,e,{clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,e)),n||i)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Xi={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:(0,s.hasClass)(e.inputEvent.target,L("origin"))},dragControlStart:function(t,e){var i=e.datas;Bt(t,e);var r=ct(t,e,{dragStart:Je.dragStart(t,(new It).dragStart([0,0],e))}),n=dt(t,"onDragOriginStart",r);return i.startOrigin=t.state.transformOrigin,i.startTargetOrigin=t.state.targetOrigin,i.prevOrigin=[0,0],i.isDragOrigin=!0,!1===n?(i.isDragOrigin=!1,!1):r},dragControl:function(t,e){var i=e.datas,r=e.isPinch,n=e.isRequest;if(!i.isDragOrigin)return!1;var s=Xt(e),a=s[0],h=s[1],u=t.state,l=u.width,c=u.height,f=u.offsetMatrix,d=u.targetMatrix,p=u.is3d,m=t.props.originRelative,g=void 0===m||m,v=p?4:3,_=[a,h];if(n){var y=e.distOrigin;(y[0]||y[1])&&(_=y)}var b=(0,o.plus)(i.startOrigin,_),E=(0,o.plus)(i.startTargetOrigin,_),x=(0,o.minus)(_,i.prevOrigin),T=Wt(f,d,b,v),S=t.getRect(),w=Z(q(T,l,c,v)),A=[S.left-w.left,S.top-w.top];i.prevOrigin=_;var M=ct(t,e,{width:l,height:c,origin:b,dist:_,delta:x,transformOrigin:[Tt(E[0],l,g),Tt(E[1],c,g)].join(" "),drag:Je.drag(t,Pt(e,t.state,A,!!r,!1))});return dt(t,"onDragOrigin",M),M},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(dt(t,"onDragOriginEnd",ft(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var i=this.dragControl(t,e);return!!i&&(t.transformOrigin=i.transformOrigin,!0)},request:function(t){var e={},i=t.getRect(),r=0,n=0,s=i.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(o[0]+=t.deltaOrigin[0],o[1]+=t.deltaOrigin[1]):"origin"in t?(o[0]=t.origin[0]-s[0],o[1]=t.origin[1]-s[1]):("x"in t?r=t.x-i.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?n=t.y-i.top:"deltaY"in t&&(n+=t.deltaY)),{datas:e,distX:r,distY:n,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function zi(t,e,i,r,n){var o;if(void 0===r&&(r=[0,0]),n)o=n;else{var a=pt(t);o=a&&a.borderRadius||""}return Ii(!o||!n&&"0px"===o?[]:(0,s.splitSpace)(o),e,i,0,0,r)}function Hi(t,e,i,r,n,s){var o=t.state,a=o.width,h=o.height,u=Ci(s,n,t.props.roundRelative,a,h),l=u.raws,c=u.styles,f=Li(n,l),d=f.horizontals,p=f.verticals,m=c.join(" ");o.borderRadiusState=m,dt(t,"onRound",ct(t,e,{horizontals:d,verticals:p,borderRadius:m,width:a,height:h,delta:r,dist:i}))}var Yi={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var i=t.state,r=i.target,n=i.width,s=i.height,a=i.allMatrix,h=i.is3d,u=i.left,l=i.top,c=i.borderRadiusState,f=t.props,d=f.minRoundControls,p=void 0===d?[0,0]:d,m=f.maxRoundControls,g=void 0===m?[4,4]:m,v=f.zoom;if(!r)return null;var _=h?4:3,y=zi(r,n,s,p,c);if(!y)return null;var b=0,E=0;return y.map((function(t,i){E+=Math.abs(t.horizontal),b+=Math.abs(t.vertical);var r=(0,o.minus)($(a,t.pos,_),[u,l]),n=t.vertical?b<=g[1]:E<=g[0];return e.createElement("div",{key:"borderRadiusControl"+i,className:L("control","border-radius"),"data-radius-index":i,style:{display:n?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px) scale("+v+")"}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var i=e.inputEvent.target.getAttribute("class")||"";return i.indexOf("border-radius")>-1||i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var i=e.inputEvent,r=e.datas,n=i.target,s=n.getAttribute("class")||"",o=s.indexOf("border-radius")>-1,a=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,h=o?parseInt(n.getAttribute("data-radius-index"),10):-1,u=a?parseInt(n.getAttribute("data-line-index"),10):-1;if(!o&&!a)return!1;if(!1===dt(t,"onRoundStart",ct(t,e,{})))return!1;r.lineIndex=u,r.controlIndex=h,r.isControl=o,r.isLine=a,Bt(t,e);var l=t.props,c=l.roundRelative,f=l.minRoundControls,d=void 0===f?[0,0]:f,p=t.state,m=p.target,g=p.width,v=p.height;r.isRound=!0,r.prevDist=[0,0];var _=zi(m,g,v,d)||[];return r.controlPoses=_,p.borderRadiusState=Ci(_.map((function(t){return t.pos})),_,c,g,v).styles.join(" "),!0},dragControl:function(t,e){var i=e.datas;if(!i.isRound||!i.isControl||!i.controlPoses.length)return!1;var r=i.controlIndex,n=i.controlPoses,s=Xt(e),a=s[0],h=s[1],u=[a,h],l=(0,o.minus)(u,i.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,d=t.state,p=d.width,m=d.height,g=n[r],v=g.vertical,_=g.horizontal,y=n.map((function(t){var e=t.horizontal,i=t.vertical,r=[e*_*u[0],i*v*u[1]];if(e){if(1===f[0])return r;if(f[0]<4&&e!==_)return r}else{if(0===f[1])return r[1]=i*_*u[0]/p*m,r;if(v){if(1===f[1])return r;if(f[1]<4&&i!==v)return r}}return[0,0]}));y[r]=u;var b=n.map((function(t,e){return(0,o.plus)(t.pos,y[e])}));return i.prevDist=[a,h],Hi(t,e,u,l,n,b),!0},dragControlEnd:function(t,e){var i=t.state;i.borderRadiusState="";var r=e.datas,n=e.isDouble;if(!r.isRound)return!1;var s=i.width,o=i.height,a=r.isControl,h=r.controlIndex,u=r.isLine,l=r.lineIndex,c=r.controlPoses,f=c.map((function(t){return t.pos})),d=f.length,p=t.props.roundClickable;if(n&&(void 0===p||p)){if(a)Ni(c,f,h,0);else if(u){var m=kt(t,e);!function(t,e,i,r,n,s,o){var a=Li(t),h=a.horizontals,u=a.verticals,l=h.length,c=u.length,f=-1,d=-1;0===i?0===l?f=0:1===l&&(f=1):3===i&&(l<=2?f=2:l<=3&&(f=3)),2===i?0===c?d=0:c<4&&(d=3):1===i&&(c<=1?d=1:c<=2&&(d=2)),Di(t,e,0,f,d,r,n,s,o)}(c,f,l,m[0],m[1],s,o)}d!==c.length&&Hi(t,e,[0,0],[0,0],c,f)}return dt(t,"onRoundEnd",ft(t,e,{})),i.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},Wi={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,e){var i=t.state,r=i.is3d,n=i.target,a=i.targetMatrix,h=null==n?void 0:n.style.transform,u=r?"matrix3d("+a.join(",")+")":"matrix("+(0,o.convertMatrixtoCSS)(a,!0)+")";e.datas.startTransforms=h&&"none"!==h?(0,s.splitSpace)(h):[u]},resetTransform:function(t,e){e.datas.nextTransforms=e.datas.startTransforms,e.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ct(t,e,{setTransform:function(t){e.datas.startTransforms=(0,s.isArray)(t)?t:(0,s.splitSpace)(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ct(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),dt(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(t,e),dt(t,"onBeforeRender",ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){dt(t,"onBeforeRenderEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var i=this;this.dragStart(t,e);var r=Nt(t,"beforeRenderable",e),n=t.moveables,s=r.map((function(t,e){var r=n[e];return i.setTransform(r,t),i.fillDragStartParams(r,t)}));dt(t,"onBeforeRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:s}))},dragGroup:function(t,e){var i=this;this.drag(t,e);var r=Nt(t,"beforeRenderable",e),n=t.moveables,s=r.map((function(t,e){var r=n[e];return i.resetTransform(r,t),i.fillDragParams(r,t)}));dt(t,"onBeforeRenderGroup",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:s}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),dt(t,"onBeforeRenderGroupEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Vi={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,e){dt(t,"onRenderStart",ct(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){dt(t,"onRender",ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){dt(t,"onRenderEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){dt(t,"onRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){dt(t,"onRenderGroup",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,e){dt(t,"onRenderGroupEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}};function $i(t,e,i,r,n,s,o){var a="Start"===n,h=t.state.target,u=s.isRequest;if(!h||a&&r.indexOf("Control")>-1&&!u&&t.areaElement===s.inputEvent.target)return!1;var l=""+i+r+n,c=""+i+r+"Condition",f="End"===n,d=n.indexOf("After")>-1,p=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(n,!0,!1),""!==n||d||u||Et(t.state,s);var m=v([Wi],t[e].slice(),[Vi]);if(u){var _=s.requestAble;m.some((function(t){return t.name===_}))||m.push.apply(m,t.props.ables.filter((function(t){return t.name===_})))}if(!m.length)return!1;var y=m.filter((function(t){return t[l]})),b=s.datas;p&&y.forEach((function(e){e.unset&&e.unset(t)}));var E,x=s.inputEvent;f&&x&&(E=document.elementFromPoint(s.clientX,s.clientY)||x.target);var T=y.filter((function(e){var i=e.name,r=b[i]||(b[i]={});return a&&(r.isEventStart=!e[c]||e[c](t,s)),!!r.isEventStart&&e[l](t,g(g({},s),{datas:r,originalDatas:b,inputTarget:E}))})).length,S=a&&y.length&&!T;return(f||S)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach((function(t){t.state.gesto=null}))),p&&S&&y.forEach((function(e){e.unset&&e.unset(t)})),!t.isUnmounted&&!S&&((!a&&T&&!o||f)&&(t.updateRect(n,!0,!1),t.forceUpdate()),a||f||d||!T||o||$i(t,e,i,r,n+"After",s),!0)}function qi(t,e,i){var r=t.controlBox.getElement(),n=[];n.push(r),t.props.dragArea&&!t.props.dragTarget||n.push(e);var o=function(e){var i=e.inputEvent.target;return i===t.areaElement||!t.isMoveableElement(i)||(0,s.hasClass)(i,"moveable-area")||(0,s.hasClass)(i,"moveable-padding")};return Zi(t,n,"targetAbles",i,{dragStart:o,pinchStart:o})}function Zi(t,e,i,r,n){void 0===n&&(n={});var s=t.props,o=s.pinchOutside,a=s.pinchThreshold,h={container:window,pinchThreshold:a,pinchOutside:o},u=new f.default(e,h);return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(s){u.on(""+e+s,(function(o){var a=o.eventType;(!n[a]||n[a](o))&&$i(t,i,e,r,s,o)||o.stop()}))}))})),u}var Ji=function(){function t(t,e,i){var r=this;this.target=t,this.moveable=e,this.eventName=i,this.ables=[],this.onEvent=function(t){var e=r.eventName,i=r.moveable;i.state.disableNativeEvent||r.ables.forEach((function(r){r[e](i,{inputEvent:t})}))},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),Ki=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=g({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},st(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e.onPreventClick=function(t){t.stopPropagation(),(0,s.removeEvent)(window,"click",e.onPreventClick,!0)},e}m(e,t);var i=e.prototype;return i.render=function(){var t=this.props,e=this.state,i=t.edge,r=t.parentPosition,s=t.className,o=t.target,a=t.zoom,h=t.cspNonce,u=t.translateZ,l=t.cssStyled,f=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var d=r||{left:0,top:0},p=d.left,m=d.top,v=e.left,_=e.top,y=e.target,b=e.direction,E=e.renderPoses,x=t.targets,T=(x&&x.length||o)&&y,S=this.isDragging(),w={},A={createElement:c.createElement};return this.getEnabledAbles().forEach((function(t){w["data-able-"+t.name.toLowerCase()]=!0})),(0,c.createElement)(l,g({cspNonce:h,ref:(0,n.ref)(this,"controlBox"),className:L("control-box",-1===b?"reverse":"",S?"dragging":"")+" "+s},w,{onClick:this.onPreventClick,portalContainer:f,style:{position:"absolute",display:T?"block":"none",transform:"translate3d("+(v-p)+"px, "+(_-m)+"px, "+u+")","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),Qe(A,i?"n":"",E[0],E[1],a,0),Qe(A,i?"e":"",E[1],E[3],a,1),Qe(A,i?"w":"",E[0],E[2],a,2),Qe(A,i?"s":"",E[2],E[3],a,3))},i.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,i=t.container,r=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),i||e||r||this.updateRect("",!1,!0),this.updateCheckInput()},i.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},i.componentWillUnmount=function(){this.isUnmounted=!0,lt(this,"targetGesto"),lt(this,"controlGesto");var t=this.events;for(var e in t){var i=t[e];i&&i.destroy()}},i.getContainer=function(){var t=this.props,e=t.parentMoveable,i=t.wrapperMoveable;return t.container||i&&i.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},i.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(T)>-1},i.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},i.hitTest=function(t){var e,i=this.state,r=i.target,n=i.pos1,s=i.pos2,o=i.pos3,a=i.pos4,u=i.targetClientRect;if(!r)return 0;if(t instanceof Element){var l=t.getBoundingClientRect();e={left:l.left,top:l.top,width:l.width,height:l.height}}else e=g({width:0,height:0},t);var c=e.left,f=e.top,d=e.width,p=e.height,m=(0,h.fitPoints)([n,s,a,o],u),v=(0,h.getOverlapSize)(m,[[c,f],[c+d,f],[c+d,f+p],[c,f+p]]),_=(0,h.getAreaSize)(m);return v&&_?Math.min(100,v/_*100):0},i.isInside=function(t,e){var i=this.state,r=i.target,n=i.pos1,s=i.pos2,o=i.pos3,a=i.pos4,u=i.targetClientRect;return!!r&&(0,h.isInside)([t,e],(0,h.fitPoints)([n,s,a,o],u))},i.updateRect=function(t,e,i){void 0===i&&(i=!0);var r=this.props,n=r.parentMoveable,s=this.state.target||this.props.target,o=this.getContainer(),a=n?n.props.rootContainer:r.rootContainer;this.updateState(st(this.controlBox&&this.controlBox.getElement(),s,o,o,a||o),!n&&i)},i.isTargetChanged=function(t,e){var i=this.props,r=i.dragTarget||i.target,n=t.dragTarget||t.target,s=i.dragArea,o=t.dragArea;return!s&&n!==r||(e||s)&&o!==s},i.updateNativeEvents=function(t){var e=this,i=this.props.dragArea?this.areaElement:this.state.target,r=this.events,n=(0,s.getKeys)(r);if(this.isTargetChanged(t))for(var o in r){var a=r[o];a&&a.destroy(),r[o]=null}if(i){var h=this.enabledAbles;n.forEach((function(t){var n=mt(h,[t]),s=n.length>0,o=r[t];s?(o||(o=new Ji(i,e,t),r[t]=o),o.setAbles(n)):o&&(o.destroy(),r[t]=null)}))}},i.updateEvent=function(t){var e=this.controlBox.getElement(),i=this.targetAbles.length,r=this.controlAbles.length,n=this.props,s=n.dragTarget||n.target,o=this.isTargetChanged(t,!0),a=!i&&this.targetGesto||o;a&&(lt(this,"targetGesto"),this.updateState({gesto:null})),r||lt(this,"controlGesto"),s&&i&&!this.targetGesto&&(this.targetGesto=qi(this,s,"")),!this.controlGesto&&r&&(this.controlGesto=Zi(this,e,"controlAbles","Control")),a&&this.unsetAbles()},i.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},i.updateTarget=function(t){this.updateRect(t,!0)},i.getRect=function(){var t=this.state,e=ut(this.state),i=e[0],r=e[1],n=e[2],s=e[3],a=Z(e),h=t.width,u=t.height,l=a.width,c=a.height,f=a.left,d=a.top,p=[t.left,t.top],m=(0,o.plus)(p,t.origin);return{width:l,height:c,left:f,top:d,pos1:i,pos2:r,pos3:n,pos4:s,offsetWidth:h,offsetHeight:u,beforeOrigin:(0,o.plus)(p,t.beforeOrigin),origin:m,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},i.getManager=function(){return this},i.getRotation=function(){var t,e,i,r,n=this.state;return t=n.pos1,e=n.pos2,i=n.direction,r=(0,s.getRad)(t,e)/Math.PI*180,(r=i>=0?r:180-r)>=0?r:360+r},i.request=function(t,e,i){void 0===e&&(e={});var r=this.props,n=r.ables,s=r.groupable,o=n.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var a=this,h=o.request(this),u=i||e.isInstant,l=h.isControl?"controlAbles":"targetAbles",c=(s?"Group":"")+(h.isControl?"Control":""),f={request:function(e){return $i(a,l,"drag",c,"",g(g({},h.request(e)),{requestAble:t,isRequest:!0}),u),this},requestEnd:function(){return $i(a,l,"drag",c,"End",g(g({},h.requestEnd()),{requestAble:t,isRequest:!0}),u),this}};return $i(a,l,"drag",c,"Start",g(g({},h.requestStart(e)),{requestAble:t,isRequest:!0}),u),u?f.request(e).requestEnd():f},i.destroy=function(){this.componentWillUnmount()},i.updateRenderPoses=function(){var t=this.state,e=this.props,i=t.originalBeforeOrigin,r=t.transformOrigin,n=t.allMatrix,s=t.is3d,a=t.pos1,h=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,d=e.padding||{},p=d.left,m=void 0===p?0:p,g=d.top,v=void 0===g?0:g,_=d.bottom,y=void 0===_?0:_,b=d.right,E=void 0===b?0:b,x=s?4:3,T=e.groupable?i:(0,o.plus)(i,[c,f]);t.renderPoses=[(0,o.plus)(a,xt(n,[-m,-v],r,T,x)),(0,o.plus)(h,xt(n,[E,-v],r,T,x)),(0,o.plus)(u,xt(n,[-m,y],r,T,x)),(0,o.plus)(l,xt(n,[E,y],r,T,x))]},i.checkUpdate=function(){var t=this.props,e=t.target,i=t.container,r=t.parentMoveable,n=this.state,s=n.target,o=n.container;(s||e)&&(this.updateAbles(),(!gt(s,e)||!gt(o,i))&&(this.updateState({target:e,container:i}),r||!i&&!this.controlBox||this.updateRect("End",!1,!1)))},i.triggerEvent=function(t,e){var i=this.props[t];return i&&i(e)},i.useCSS=function(t,e){var i=this.props.customStyledMap,r=t+e;return i[r]||(i[r]=(0,d.default)(t,e)),i[r]},i.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},i.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var i=this.props,r=i.triggerAblesSimultaneously,n=t.filter((function(t){return t&&(t.always||i[t.name])})),s="drag"+e+"ControlStart",o=mt(n,["drag"+e+"Start","pinch"+e+"Start"],r),a=mt(n,[s],r);this.enabledAbles=n,this.targetAbles=o,this.controlAbles=a},i.updateState=function(t,e){if(e)this.setState(t);else{var i=this.state;for(var r in t)i[r]=t[r]}},i.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},i.renderAbles=function(){var t,e,i,r,n=this,s=this.props.triggerAblesSimultaneously,o={createElement:c.createElement};return(t=_t(mt(this.getEnabledAbles(),["render"],s).map((function(t){return(0,t.render)(n,o)||[]}))).filter((function(t){return t})),e=function(t){return t.key},i=[],r={},t.forEach((function(t,n){var s=e(t),o=r[s];o||(o=[],r[s]=o,i.push(o)),o.push(t)})),i).map((function(t){return t[0]}))},i.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},e}(c.PureComponent),Qi={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var i=t.props.targets||[];t.moveables=[];var r=t.state,s={left:r.left,top:r.top};return i.map((function(i,r){return e.createElement(Ki,{key:"moveable"+r,ref:(0,n.refs)(t,"moveables",r),target:i,origin:!1,cssStyled:t.props.cssStyled,customStyledMap:t.props.customStyledMap,parentMoveable:t,parentPosition:s})}))}},tr=_("clickable",{props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(t,e){e.isRequest||(0,s.addEvent)(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var i=t.state.target,r=e.inputEvent,n=e.inputTarget;if(r&&n&&!e.isDrag&&!t.isMoveableElement(n)){var s=i.contains(n);dt(t,"onClick",ct(t,e,{isDouble:e.isDouble,inputTarget:n,isTarget:i===n,containsTarget:s}))}},dragGroupEnd:function(t,e){this.endEvent(t);var i=e.inputEvent,r=e.inputTarget;if(i&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var n=t.props.targets,o=n.indexOf(r),a=o>-1,h=!1;-1===o&&(h=(o=(0,s.findIndex)(n,(function(t){return t.contains(r)})))>-1),dt(t,"onClickGroup",ct(t,e,{isDouble:e.isDouble,targets:n,inputTarget:r,targetIndex:o,isTarget:a,containsTarget:h}))}},dragControlEnd:function(t){this.endEvent(t)},dragGroupControlEnd:function(t){this.endEvent(t)},endEvent:function(t){var e=this;requestAnimationFrame((function(){e.unset(t)}))},unset:function(t){(0,s.removeEvent)(window,"click",t.onPreventClick,!0)}});function er(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),g(g({},t),{datas:e})}var ir=_("edgeDraggable",{dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var i=e.inputEvent.target;return(0,s.hasClass)(i,L("direction"))&&(0,s.hasClass)(i,L("line"))},dragControlStart:function(t,e){return Je.dragStart(t,er(e))},dragControl:function(t,e){return Je.drag(t,er(e))},dragControlEnd:function(t,e){return Je.dragEnd(t,er(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var i=e.inputEvent.target;return(0,s.hasClass)(i,L("direction"))&&(0,s.hasClass)(i,L("line"))},dragGroupControlStart:function(t,e){return Je.dragGroupStart(t,er(e))},dragGroupControl:function(t,e){return Je.dragGroup(t,er(e))},dragGroupControlEnd:function(t,e){return Je.dragGroupEnd(t,er(e))},unset:function(t){t.state.dragInfo=null}}),rr={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},nr=[Wi,xi,Ze,Ct,Je,ir,ai,hi,ui,fi,Ei,Ti,yi,Xi,Ui,Yi,Qi,rr,tr,_i,Vi],sr=nr.reduce((function(t,e){return g(g({},t),"events"in e?e.events:{})}),{}),or=nr.reduce((function(t,e){return g(g({},t),e.props)}),{}),ar=At(sr),hr=Object.keys(ar),ur=Object.keys(or);function lr(t,e){return Math.max.apply(Math,t.map((function(t){var i=t[0],r=t[1],n=t[2],s=t[3];return Math.max(i[e],r[e],n[e],s[e])})))}function cr(t,e){return Math.min.apply(Math,t.map((function(t){var i=t[0],r=t[1],n=t[2],s=t[3];return Math.min(i[e],r[e],n[e],s[e])})))}var fr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new u.default,e.moveables=[],e.transformOrigin="50% 50%",e}m(e,t);var i=e.prototype;return i.updateEvent=function(t){var e=this.state,i=this.props,r=t.dragTarget||e.target,n=i.dragTarget||this.areaElement;r!==n&&(lt(this,"targetGesto"),lt(this,"controlGesto"),e.target=null),e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=qi(this,n,"Group"),this.controlGesto=Zi(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var s=!gt(t.container,i.container);s&&(e.container=i.container);var o=this.differ.update(i.targets),a=o.added,h=o.changed,u=o.removed;(s||a.length||h.length||u.length)&&this.updateRect()},i.checkUpdate=function(){this.updateAbles()},i.updateRect=function(t,e,i){if(void 0===i&&(i=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,n=this.props,a=r.target||n.target;(!e||""!==t&&n.updateGroup)&&(this.rotation=n.defaultGroupRotate,this.transformOrigin=n.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var u=this.rotation,l=this.scale,c=function(t,e){if(!t.length)return[0,0,0,0];var i=t.map((function(t){return ut(t.state)})),r=R,n=R,a=0,h=0,u=(0,s.throttle)(e,M);if(u%90){var l=u/180*Math.PI,c=Math.tan(l),f=-1/c,d=[C,R],p=[C,R];i.forEach((function(t){t.forEach((function(t){var e=t[1]-c*t[0],i=t[1]-f*t[0];d[0]=Math.max(d[0],e),d[1]=Math.min(d[1],e),p[0]=Math.max(p[0],i),p[1]=Math.min(p[1],i)}))})),d.forEach((function(t){p.forEach((function(e){var i=(e-t)/(c-f),s=c*i+t;r=Math.min(r,i),n=Math.min(n,s)}))}));var m=i.map((function(t){var e=t[0],i=t[1],r=t[2],n=t[3];return[(0,o.rotate)(e,-l),(0,o.rotate)(i,-l),(0,o.rotate)(r,-l),(0,o.rotate)(n,-l)]}));a=lr(m,0)-cr(m,0),h=lr(m,1)-cr(m,1)}else if(r=cr(i,0),n=cr(i,1),a=lr(i,0)-r,h=lr(i,1)-n,u%180){var g=a;a=h,h=g}return[r,n,a,h]}(this.moveables,u),f=c[0],d=c[1],p=c[2],m=c[3],v="rotate("+u+"deg) scale("+(l[0]>=0?1:-1)+", "+(l[1]>=0?1:-1)+")";a.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+m+"px;transform:"+v,r.width=p,r.height=m;var _=this.getContainer(),y=st(this.controlBox.getElement(),a,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||_),b=[y.left,y.top],E=ut(y),x=E[0],T=E[1],S=E[2],w=E[3],A=(0,h.getMinMaxs)([x,T,S,w]),O=[A.minX,A.minY];y.pos1=(0,o.minus)(x,O),y.pos2=(0,o.minus)(T,O),y.pos3=(0,o.minus)(S,O),y.pos4=(0,o.minus)(w,O),y.left=f-y.left+O[0],y.top=d-y.top+O[1],y.origin=(0,o.minus)((0,o.plus)(b,y.origin),O),y.beforeOrigin=(0,o.minus)((0,o.plus)(b,y.beforeOrigin),O),y.originalBeforeOrigin=(0,o.plus)(b,y.originalBeforeOrigin);var P=y.targetClientRect,I=l[0]*l[1]>0?1:-1;P.top+=y.top-r.top,P.left+=y.left-r.left,a.style.transform="translate("+-O[0]+"px, "+-O[1]+"px) "+v,this.updateState(g(g({},y),{direction:I,beforeDirection:I}),i)}},i.getRect=function(){return g(g({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},i.triggerEvent=function(e,i,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,i)},i.updateAbles=function(){t.prototype.updateAbles.call(this,v(this.props.ables,[Qi]),"Group")},e.defaultProps=g(g({},Ki.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Ki),dr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}m(e,t);var i=e.prototype;return i.render=function(){var t=this,e=this.props,i=e.cspNonce,r=e.cssStyled,s=e.targets;return(0,c.createElement)(r,{cspNonce:i,ref:(0,n.ref)(this,"controlBox"),className:L("control-box")},s.map((function(e,i){return(0,c.createElement)(Ki,g({key:"moveable"+i,ref:(0,n.refs)(t,"moveables",i)},t.props,{target:e,wrapperMoveable:t}))})))},i.componentDidUpdate=function(){},i.updateRect=function(t,e,i){void 0===i&&(i=!0),this.moveables.forEach((function(r){r.updateRect(t,e,i)}))},i.getRect=function(){return g(g({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},i.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},i.dragStart=function(){return this},i.hitTest=function(){return 0},i.isInside=function(){return!1},i.isDragging=function(){return!1},i.updateRenderPoses=function(){},i.updateEvent=function(){},i.checkUpdate=function(){},i.triggerEvent=function(){},i.updateAbles=function(){},e}(Ki),pr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e}m(e,t);var i=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var i=e.css;i&&i.forEach((function(e){t[e]=!0}))}));var e=(0,s.getKeys)(t).join("\n");this.defaultStyled=(0,d.default)("div",(0,n.prefixCSS)(T,S+e))},e.getTotalAbles=function(){return v([xi,Qi,rr,_i],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,i=e.ables,r=e.props,o=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}(e,["ables","props"]),a=Ot(o.target||o.targets),h=function(t,e){var i=[];return t.forEach((function(t){t&&((0,s.isString)(t)?e[t]&&i.push.apply(i,e[t]):i.push(t))})),i}(a,this.selectorMap);this.refTargets=a;var u=h.length>1,l=v(t.getTotalAbles(),i||[]),f=g(g(g({},o),r||{}),{ables:l,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return u?o.individualGroupable?(0,c.createElement)(dr,g({key:"individual-group",ref:(0,n.ref)(this,"moveable")},f,{target:null,targets:h})):(0,c.createElement)(fr,g({key:"group",ref:(0,n.ref)(this,"moveable")},f,{target:null,targets:h})):(0,c.createElement)(Ki,g({key:"single",ref:(0,n.ref)(this,"moveable")},f,{target:h[0]}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var e=Ot(this.props.target||this.props.targets),i=this.refTargets.some((function(t,i){var r=e[i];return!(!t&&!r)&&t!==r})),r=t?{}:this.selectorMap,n={};this.refTargets.forEach((function(t){(0,s.isString)(t)&&(r[t]?n[t]=r[t]:(i=!0,n[t]=[].slice.call(document.querySelectorAll(t))))})),this.selectorMap=n,i&&this.forceUpdate()},i.getManager=function(){return this.moveable},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,i,r){var n,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);s>3&&o&&Object.defineProperty(e,i,o)}([(0,n.withMethods)(D)],e.prototype,"moveable",void 0),e}(c.PureComponent),mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.defaultAbles=nr,e}(pr);function gr(t){var e;return e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(pr),e.defaultAbles=t,e}const vr=mr},"./node_modules/react-simple-compat/dist/compat.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Component:()=>M,PureComponent:()=>O,createElement:()=>v,createPortal:()=>N,findDOMNode:()=>T,render:()=>I,version:()=>D});var r=i("./node_modules/@egjs/list-differ/dist/list-differ.esm.js"),n=i("./node_modules/@daybrush/utils/dist/utils.esm.js"),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)};function o(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var a=function(){return a=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},a.apply(this,arguments)};function h(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}function u(t,e){if(t===e)return!1;for(var i in t)if(!(i in e))return!0;for(var i in e)if(t[i]!==e[i])return!0;return!1}function l(t,e){var i=Object.keys(t),n=Object.keys(e),s=(0,r.diff)(i,n,(function(t){return t})),o={},a={},h={};return s.added.forEach((function(t){var i=n[t];o[i]=e[i]})),s.removed.forEach((function(e){var r=i[e];a[r]=t[r]})),s.maintained.forEach((function(r){var n=r[0],s=i[n],o=[t[s],e[s]];t[s]!==e[s]&&(h[s]=o)})),{added:o,removed:a,changed:h}}function c(t){t.forEach((function(t){t()}))}function f(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function d(t,e,i,r){return(0,n.isString)(t)||(0,n.isNumber)(t)?new b("text_"+t,e,i,r,null,{}):new("string"==typeof t.type?E:t.type.prototype.render?A:S)(t.type,e,i,r,t.ref,t.props)}function p(t){var e=[];return t.forEach((function(t){e=e.concat((0,n.isArray)(t)?p(t):t)})),e}function m(t){var e=t.className,i=h(t,["className"]);return null!=e&&(i.class=e),delete i.style,delete i.children,i}function g(t,e){if(!e)return t;for(var i in e)(0,n.isUndefined)(t[i])&&(t[i]=e[i]);return t}function v(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var n=e||{},s=n.key,o=n.ref,u=h(n,["key","ref"]);return{type:t,key:s,ref:o,props:a(a({},u),{children:p(i).filter((function(t){return null!=t&&!1!==t}))})}}var _=function(){function t(t,e,i,r,n,s){void 0===s&&(s={}),this.type=t,this.key=e,this.index=i,this.container=r,this.ref=n,this.props=s,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,i,r){if(this.base&&!(0,n.isString)(e)&&!r&&!this._should(e.props,i))return!1;this.original=e,this._setState(i);var s=this.props;return(0,n.isString)(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?s:{},i),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function y(t){var e={},i={};for(var r in t)0===r.indexOf("on")?i[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:i}}var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i._render=function(t){var e=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){i?e._mounted():e._updated()})),!0},i._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(_),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}o(e,t);var i=e.prototype;return i.addEventListener=function(t,e){var i=this.events;i[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,i[t])},i.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},i._should=function(t){return u(this.props,t)},i._render=function(t,e){var i=this,r=!this.base;if(r){var s=this._hasSVG();this._isSVG=s;var o=this.props.portalContainer;if(!o){var a=this.type;o=s?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)}this.base=o}C(this,this._providers,this.props.children,t,null);var h=this.base,u=y(e),c=u.attributes,f=u.events,d=y(this.props),p=d.attributes,g=d.events;return function(t,e,i){var r=l(t,e),n=r.added,s=r.removed,o=r.changed;for(var a in n)i.setAttribute(a,n[a]);for(var a in o)i.setAttribute(a,o[a][1]);for(var a in s)i.removeAttribute(a)}(m(c),m(p),h),function(t,e,i){var r=l(t,e),n=r.added,s=r.removed,o=r.changed;for(var a in s)i.removeEventListener(a);for(var a in n)i.addEventListener(a,n[a]);for(var a in o)i.removeEventListener(a),i.addEventListener(a,o[a][1]);for(var a in s)i.removeEventListener(a)}(f,g,this),function(t,e,i){var r=i.style,s=l(t,e),o=s.added,a=s.removed,h=s.changed;for(var u in o){var c=(0,n.decamelize)(u,"-");r.setProperty?r.setProperty(c,o[u]):r[c]=o[u]}for(var u in h)c=(0,n.decamelize)(u,"-"),r.setProperty?r.setProperty(c,h[u][1]):r[c]=h[u][1];for(var u in a)c=(0,n.decamelize)(u,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(e.style||{},this.props.style||{},h),t.push((function(){r?i._mounted():i._updated()})),!0},i._unmount=function(){var t=this.events,e=this.base;for(var i in t)e.removeEventListener(i,t[i]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},i._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=x(this.container);return t&&"ownerSVGElement"in t},e}(_);function x(t){if(!t)return null;var e=t.base;return e instanceof Node?e:x(t.container)}function T(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?T(e[0].base):null}var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i._render=function(t){var e=this.type(this.props);return C(this,this._providers,e?[e]:[],t),!0},i._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(_),w=function(t){function e(e){var i=t.call(this,"container","container",0,null)||this;return i.base=e,i}o(e,t);var i=e.prototype;return i._render=function(){return!0},i._unmount=function(){},e}(_),A=function(t){function e(e,i,r,n,s,o){return void 0===o&&(o={}),t.call(this,e,i,r,n,s,g(o,e.defaultProps))||this}o(e,t);var i=e.prototype;return i._should=function(t,e){return this.base.shouldComponentUpdate(g(t,this.type.defaultProps),e||this.base.state)},i._render=function(t,e,i){var r=this;this.props=g(this.props,this.type.defaultProps);var n=!this.base;n?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,o=s.state,a=s.render();a&&a.props&&!a.props.children.length&&(a.props.children=this.props.children),C(this,this._providers,a?[a]:[],t,i,null),t.push((function(){n?(r._mounted(),s.componentDidMount()):(r._updated(),s.componentDidUpdate(e,o))}))},i._setState=function(t){t&&(this.base.state=t)},i._unmount=function(){this._providers.forEach((function(t){t._unmount()})),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(_),M=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,i){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=a(a({},this.$_state),t),i?this.$_setState(e,i):this.$_timer=setTimeout((function(){r.$_timer=0,r.$_setState(e,i)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var i=[],r=this.$_provider;C(r.container,[r],[r.original],i,a(a({},this.state),this.$_state),e)&&(t&&i.push(t),c(i))},t}(),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.shouldComponentUpdate=function(t,e){return u(this.props,t)||u(this.state,e)},e}(M),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.componentDidMount=function(){var t=this.props,e=t.element,i=t.container;this._portalProvider=new w(i),P(e,i,this._portalProvider)},i.componentDidUpdate=function(){var t=this.props;P(t.element,t.container,this._portalProvider)},i.componentWillUnmount=function(){P(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(O);function C(t,e,i,s,o,a){var h=function(t,e,i){var s=i.map((function(t){return(0,n.isString)(t)?null:t.key})),o=f(e.map((function(t){return t.key}))),a=f(s),h=(0,r.diff)(o,a,(function(t){return t}));h.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),h.ordered.forEach((function(t){var i=t[0],r=t[1],n=e.splice(i,1)[0];e.splice(r,0,n);var s=T(n.base),o=T(e[r+1]&&e[r+1].base);s&&s.parentNode.insertBefore(s,o)})),h.added.forEach((function(r){e.splice(r,0,d(i[r],s[r],r,t))}));var u=h.maintained.filter((function(r){r[0];var o=r[1],a=i[o],h=e[o];return((0,n.isString)(a)?"text_"+a:a.type)!==h.type?(h._unmount(),e.splice(o,1,d(a,s[o],o,t)),!0):(h.index=o,!1)}));return function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r}(h.added,u.map((function(t){return t[0],t[1]})))}(t,e,i),u=e.filter((function(t,e){return t._update(s,i[e],o,a)})),l=x(t);return l&&h.reverse().forEach((function(i){var r=e[i],n=T(r.base);if(n&&l!==n&&!n.parentNode){var s=function(t,e){for(var i=t._providers,r=i.length,n=e.index+1;n<r;++n){var s=T(i[n].base);if(s)return s}return null}(t,r);l.insertBefore(n,s)}})),u.length>0}function P(t,e,i){void 0===i&&(i=e.__REACT_COMPAT__);var r=!!i;return i||(i=new w(e)),function(t,e,i){var r=[];C(t,t._providers,e,r,void 0),c(r)}(i,t?[t]:[]),r||(e.__REACT_COMPAT__=i),i}function I(t,e,i){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),P(t,e,r),i&&i()}function N(t,e){return v(R,{element:t,container:e})}var D="simple-1.1.0"},"./node_modules/store/dist/store.legacy.js":(t,e,i)=>{var r=i("./node_modules/store/src/store-engine.js"),n=i("./node_modules/store/storages/all.js"),s=[i("./node_modules/store/plugins/json2.js")];t.exports=r.createStore(n,s)},"./node_modules/store/plugins/json2.js":(t,e,i)=>{t.exports=function(){return i("./node_modules/store/plugins/lib/json2.js"),{}}},"./node_modules/store/plugins/lib/json2.js":()=>{"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(t){return t<10?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,r,n,s,o,a=gap,h=e[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(e,t,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(h)){for(s=h.length,i=0;i<s;i+=1)o[i]=str(i,h)||"null";return n=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,n}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(n=str(r=rep[i],h))&&o.push(quote(r)+(gap?": ":":")+n);else for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(n=str(r,h))&&o.push(quote(r)+(gap?": ":":")+n);return n=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;r<i;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,r,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(void 0!==(r=walk(n,i))?n[i]=r:delete n[i]);return reviver.call(t,e,n)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},"./node_modules/store/src/store-engine.js":(t,e,i)=>{var r=i("./node_modules/store/src/util.js"),n=r.slice,s=r.pluck,o=r.each,a=r.bind,h=r.create,u=r.isList,l=r.isFunction,c=r.isObject;t.exports={createStore:d};var f={version:"2.0.12",enabled:!1,get:function(t,e){var i=this.storage.read(this._namespacePrefix+t);return this._deserialize(i,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(i,r){t.call(e,e._deserialize(i),(r||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return d(this.storage,this.plugins,t)}};function d(t,e,i){i||(i=""),t&&!u(t)&&(t=[t]),e&&!u(e)&&(e=[e]);var r=i?"__storejs_"+i+"_":"",d=i?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(i))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:r,_namespaceRegexp:d,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var i=t.read(e)===e;return t.remove(e),i}catch(t){return!1}},_assignPluginFnProp:function(t,e){var i=this[e];this[e]=function(){var e=n(arguments,0),r=this;function s(){if(i)return o(arguments,(function(t,i){e[i]=t})),i.apply(r,e)}var a=[s].concat(e);return t.apply(r,a)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var i="";try{i=JSON.parse(t)}catch(e){i=t}return void 0!==i?i:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(u(t))o(t,(function(t){e._addPlugin(t)}));else if(!s(this.plugins,(function(e){return t===e}))){if(this.plugins.push(t),!l(t))throw new Error("Plugins must be function values that return objects");var i=t.call(this);if(!c(i))throw new Error("Plugins must return an object of function properties");o(i,(function(i,r){if(!l(i))throw new Error("Bad plugin property: "+r+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(i,r)}))}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;t&&(t.warn?t.warn:t.log).apply(t,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},m=h(p,f,{plugins:[]});return m.raw={},o(m,(function(t,e){l(t)&&(m.raw[e]=a(m,t))})),o(t,(function(t){m._addStorage(t)})),o(e,(function(t){m._addPlugin(t)})),m}},"./node_modules/store/src/util.js":(t,e,i)=>{var r=Object.assign?Object.assign:function(t,e,i,r){for(var n=1;n<arguments.length;n++)h(Object(arguments[n]),(function(e,i){t[i]=e}));return t},n=function(){if(Object.create)return function(t,e,i,n){var s=a(arguments,1);return r.apply(this,[Object.create(t)].concat(s))};{function t(){}return function(e,i,n,s){var o=a(arguments,1);return t.prototype=e,r.apply(this,[new t].concat(o))}}}(),s=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},o="undefined"!=typeof window?window:i.g;function a(t,e){return Array.prototype.slice.call(t,e||0)}function h(t,e){u(t,(function(t,i){return e(t,i),!1}))}function u(t,e){if(l(t)){for(var i=0;i<t.length;i++)if(e(t[i],i))return t[i]}else for(var r in t)if(t.hasOwnProperty(r)&&e(t[r],r))return t[r]}function l(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}t.exports={assign:r,create:n,trim:s,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:a,each:h,map:function(t,e){var i=l(t)?[]:{};return u(t,(function(t,r){return i[r]=e(t,r),!1})),i},pluck:u,isList:l,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:o}},"./node_modules/store/storages/all.js":(t,e,i)=>{t.exports=[i("./node_modules/store/storages/localStorage.js"),i("./node_modules/store/storages/oldFF-globalStorage.js"),i("./node_modules/store/storages/oldIE-userDataStorage.js"),i("./node_modules/store/storages/cookieStorage.js"),i("./node_modules/store/storages/sessionStorage.js"),i("./node_modules/store/storages/memoryStorage.js")]},"./node_modules/store/storages/cookieStorage.js":(t,e,i)=>{var r=i("./node_modules/store/src/util.js"),n=r.Global,s=r.trim;t.exports={name:"cookieStorage",read:function(t){if(!t||!u(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(o.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){t&&(o.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:a,remove:h,clearAll:function(){a((function(t,e){h(e)}))}};var o=n.document;function a(t){for(var e=o.cookie.split(/; ?/g),i=e.length-1;i>=0;i--)if(s(e[i])){var r=e[i].split("="),n=unescape(r[0]);t(unescape(r[1]),n)}}function h(t){t&&u(t)&&(o.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function u(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(o.cookie)}},"./node_modules/store/storages/localStorage.js":(t,e,i)=>{var r=i("./node_modules/store/src/util.js").Global;function n(){return r.localStorage}function s(t){return n().getItem(t)}t.exports={name:"localStorage",read:s,write:function(t,e){return n().setItem(t,e)},each:function(t){for(var e=n().length-1;e>=0;e--){var i=n().key(e);t(s(i),i)}},remove:function(t){return n().removeItem(t)},clearAll:function(){return n().clear()}}},"./node_modules/store/storages/memoryStorage.js":t=>{t.exports={name:"memoryStorage",read:function(t){return e[t]},write:function(t,i){e[t]=i},each:function(t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},remove:function(t){delete e[t]},clearAll:function(t){e={}}};var e={}},"./node_modules/store/storages/oldFF-globalStorage.js":(t,e,i)=>{var r=i("./node_modules/store/src/util.js").Global;t.exports={name:"oldFF-globalStorage",read:function(t){return n[t]},write:function(t,e){n[t]=e},each:s,remove:function(t){return n.removeItem(t)},clearAll:function(){s((function(t,e){delete n[t]}))}};var n=r.globalStorage;function s(t){for(var e=n.length-1;e>=0;e--){var i=n.key(e);t(n[i],i)}}},"./node_modules/store/storages/oldIE-userDataStorage.js":(t,e,i)=>{var r=i("./node_modules/store/src/util.js").Global;t.exports={name:"oldIE-userDataStorage",write:function(t,e){if(!a){var i=u(t);o((function(t){t.setAttribute(i,e),t.save(n)}))}},read:function(t){if(!a){var e=u(t),i=null;return o((function(t){i=t.getAttribute(e)})),i}},each:function(t){o((function(e){for(var i=e.XMLDocument.documentElement.attributes,r=i.length-1;r>=0;r--){var n=i[r];t(e.getAttribute(n.name),n.name)}}))},remove:function(t){var e=u(t);o((function(t){t.removeAttribute(e),t.save(n)}))},clearAll:function(){o((function(t){var e=t.XMLDocument.documentElement.attributes;t.load(n);for(var i=e.length-1;i>=0;i--)t.removeAttribute(e[i].name);t.save(n)}))}};var n="storejs",s=r.document,o=function(){if(!s||!s.documentElement||!s.documentElement.addBehavior)return null;var t,e,i;try{(e=new ActiveXObject("htmlfile")).open(),e.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),e.close(),t=e.w.frames[0].document,i=t.createElement("div")}catch(e){i=s.createElement("div"),t=s.body}return function(e){var r=[].slice.call(arguments,0);r.unshift(i),t.appendChild(i),i.addBehavior("#default#userData"),i.load(n),e.apply(this,r),t.removeChild(i)}}(),a=(r.navigator?r.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function u(t){return t.replace(/^\d/,"___$&").replace(h,"___")}},"./node_modules/store/storages/sessionStorage.js":(t,e,i)=>{var r=i("./node_modules/store/src/util.js").Global;function n(){return r.sessionStorage}function s(t){return n().getItem(t)}t.exports={name:"sessionStorage",read:s,write:function(t,e){return n().setItem(t,e)},each:function(t){for(var e=n().length-1;e>=0;e--){var i=n().key(e);t(s(i),i)}},remove:function(t){return n().removeItem(t)},clearAll:function(){return n().clear()}}},"./core/src/sn/AnalyzeTagArg.ts":function(t,e){"use strict";var i,r,n,s=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},o=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyzeTagArg=void 0,e.AnalyzeTagArg=class{constructor(){i.set(this,/;[^\n]*|(?<key>\w+)(?:\s|;[^\n]*\n)*=(?:\s|;[^\n]*\n)*(?:(?<val>[^\s"'#|;]+)|(["'#])(?<val2>.*?)\3)(?:\|(?:(?<def>[^\s"'#;]+)|(["'#])(?<def2>.*?)\6))?|(?<literal>[^\s;]+)/g),r.set(this,{}),n.set(this,!1)}go(t){if(s(this,r,{},"f"),s(this,n,!1,"f"),!t)return;let e=null;for(;e=o(this,i,"f").exec(t);){const t=e?.groups;t&&(t.key?o(this,r,"f")[t.key]={val:t.val??t.val2,def:t.def??t.def2}:t.literal&&("*"===t.literal?s(this,n,!0,"f"):o(this,r,"f")[t.literal]={val:"1"}))}}get hPrm(){return o(this,r,"f")}get isKomeParam(){return o(this,n,"f")}},i=new WeakMap,r=new WeakMap,n=new WeakMap},"./core/src/sn/Areas.ts":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Areas=void 0,e.Areas=class{constructor(){this.hAreas={}}clear(){this.hAreas={}}search(t){for(const e in this.hAreas)if(!(t<parseInt(e))&&t<=this.hAreas[e])return!0;return!1}record(t){if(!this.search(t)){for(const e in this.hAreas)if(this.hAreas[e]+1===t)return void(t+1 in this.hAreas?(this.hAreas[e]=this.hAreas[t+1],delete this.hAreas[t+1]):this.hAreas[e]=t);if(t+1 in this.hAreas)return this.hAreas[t]=this.hAreas[t+1],void delete this.hAreas[t+1];this.hAreas[t]=t}}erase(t){if(this.search(t)){if(t in this.hAreas)return this.hAreas[t]>t&&(this.hAreas[t+1]=this.hAreas[t]),void delete this.hAreas[t];for(const e in this.hAreas)if(!(t<parseInt(e)||this.hAreas[e]<t))return this.hAreas[e]===t||(this.hAreas[t+1]=this.hAreas[e]),void(this.hAreas[e]=t-1)}}get count(){return Object.keys(this.hAreas).length}toString(){let t="";const e=[];for(const t in this.hAreas)e.push(parseInt(t));return e.sort((function(t,e){return t-e})),e.forEach((e=>{t+=","+e+(e===this.hAreas[e])?"":0})),""!==t&&(t=t.slice(1)),t}}},"./core/src/sn/Button.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},d=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;const p=i("./node_modules/pixi.js/dist/esm/pixi.js"),m=i("./node_modules/pixi.js/dist/esm/pixi.js"),g=i("./core/src/sn/CmnLib.ts"),v=i("./core/src/sn/GrpLayer.ts"),_=i("./core/src/sn/Layer.ts"),y=i("./core/src/sn/DesignCast.ts");class b extends p.Container{constructor(t,e,i,o){super(),this.hArg=t,this.evtMng=e,this.resolve=i,this.canFocus=o,r.add(this),a.set(this,void 0),h.set(this,null),u.set(this,null),g.CmnLib.isDbg&&(this.makeDesignCast=t=>t(f(this,a,"f")),this.cvsResize=()=>f(this,a,"f").cvsResize()),this.name=JSON.stringify(t);let m={x:this.x=(0,g.uint)(t.left??0),y:this.y=(0,g.uint)(t.top??0),rotation:this.angle=(0,g.argChk_Num)(t,"rotation",this.angle),pivot_x:this.pivot.x=(0,g.argChk_Num)(t,"pivot_x",this.pivot.x),pivot_y:this.pivot.y=(0,g.argChk_Num)(t,"pivot_y",this.pivot.y),scale_x:this.scale.x=(0,g.argChk_Num)(t,"scale_x",this.scale.x),scale_y:this.scale.y=(0,g.argChk_Num)(t,"scale_y",this.scale.y)};const E=m.enabled=(0,g.argChk_Boolean)(t,"enabled",!0);if("text"in t){const h=(0,g.argChk_Num)(t,"height",30),u=new p.TextStyle({align:"center",dropShadow:!0,dropShadowAlpha:.7,dropShadowColor:"#ffffff",dropShadowBlur:7,dropShadowDistance:0,fill:"black",fontFamily:b.fontFamily,fontSize:h,padding:5});if(t.style)try{const e=JSON.parse(t.style);for(const t in e)u[t]=e[t]}catch(t){throw new Error(`[button] style指定が異常です。JSON文字列は「"」で囲んで下さい err:${t}`)}const c=new p.Text(t.text??"",u);c.alpha=(0,g.argChk_Num)(t,"alpha",c.alpha),c.width=(0,g.argChk_Num)(t,"width",100),c.height=h,t.height=h,m.type="text",m={...m,...u},m.alpha=c.alpha,m.text=c.text,m.width=c.width,m.height=c.height,d(this,a,new y.TxtBtnDesignCast(this,t,c),"f");let x=!1;if(t.b_pic&&(m.b_pic=t.b_pic,x=v.GrpLayer.csv2Sprites(t.b_pic,this,(t=>f(this,r,"m",l).call(this,t,c)),(e=>{_.Layer.setBlendmode(this,t),e&&i()}))),c.name=JSON.stringify(m),this.addChild(c),t.b_pic||_.Layer.setBlendmode(this,t),f(b,n,"f",s).call(b,this,c),!E)return void(x||i());const T=u.clone();if(t.style_hover)try{const e=JSON.parse(t.style_hover);for(const t in e)T[t]=e[t]}catch(t){throw new Error(`[button] style_hover指定が異常です。JSON文字列は「"」で囲んで下さい err:${t}`)}else T.fill="white";const S=T.clone();if(t.style_clicked)try{const e=JSON.parse(t.style_clicked);for(const t in e)S[t]=e[t]}catch(t){throw new Error(`[button] style_clicked指定が異常です。JSON文字列は「"」で囲んで下さい err:${t}`)}else S.dropShadow=!1;return e.button(t,this,(()=>c.style=u),(()=>!!o()&&(c.style=T,!0)),(()=>c.style=S)),void(x||i())}if(!t.pic)throw"textまたはpic属性は必須です";m.type="pic",d(this,a,new y.PicBtnDesignCast(this,t),"f"),v.GrpLayer.csv2Sprites(t.pic,this,(t=>f(this,r,"m",c).call(this,t,m)),(t=>{t&&i()}))||i()}static init(t){t.oCfg.debug.masume&&(d(b,n,((t,e)=>{const i=new m.Graphics;i.clear(),i.beginFill(8926088,.2),i.lineStyle(1,8926088,1),i.drawRect(e.x,e.y,e.width,e.height),i.endFill(),t.addChild(i)}),"f",s),d(b,n,((t,e,i,r)=>{const n=new m.Graphics;n.clear(),n.beginFill(8926088,.2),n.lineStyle(1,8926088,1),n.drawRect(e.x,e.y,i,r),n.endFill(),t.addChild(n)}),"f",o))}makeDesignCast(t){}showDesignCast(){f(this,a,"f").visible=!0}cvsResize(){}update_b_pic(t,e){const i=JSON.parse(e.name??"{}");f(this,h,"f")&&this.removeChild(f(this,h,"f")),this.hArg.b_pic=i.b_pic=t,e.name=JSON.stringify(i),t&&v.GrpLayer.csv2Sprites(t,this,(t=>f(this,r,"m",l).call(this,t,e)),(()=>_.Layer.setBlendmode(this,this.hArg)))}update_pic(t,e){const i=JSON.parse(e.name??"{}");f(this,u,"f")&&this.removeChild(f(this,u,"f")),this.hArg.pic=i.pic=t,e.name=JSON.stringify(i),t&&v.GrpLayer.csv2Sprites(t,this,(t=>f(this,r,"m",c).call(this,t,i)),(()=>_.Layer.setBlendmode(this,this.hArg)))}}e.Button=b,n=b,a=new WeakMap,h=new WeakMap,u=new WeakMap,r=new WeakSet,l=function(t,e){d(this,h,t,"f"),this.setChildIndex(t,0),t.alpha=e.alpha,t.setTransform(e.x,e.y,1,1,e.rotation,0,0,(t.width-e.width)/2,(t.height-e.height)/2)},c=function(t,e){d(this,u,t,"f"),e.alpha=t.alpha=(0,g.argChk_Num)(this.hArg,"alpha",t.alpha),f(this,a,"f").setSp(t);const i=t.width/3,r=t.height,s=t.texture.baseTexture,h=new p.Texture(s,new p.Rectangle(0,0,i,r)),l=new p.Texture(s,new p.Rectangle(i,0,i,r)),c=new p.Texture(s,new p.Rectangle(2*i,0,i,r)),m=()=>t.texture=h;m(),e.enabled&&this.evtMng.button(this.hArg,this,m,(()=>!!this.canFocus()&&(t.texture=c,!0)),(()=>t.texture=l)),"width"in this.hArg?(e.width=(0,g.uint)(this.hArg.width),this.scale.x*=e.width/i):e.width=i,"height"in this.hArg?(e.height=(0,g.uint)(this.hArg.height),this.scale.y*=e.height/i):e.height=i,t.name=JSON.stringify(e),f(b,n,"f",o).call(b,this,t,i,r)},b.fontFamily="'Hiragino Sans', 'Hiragino Kaku Gothic ProN', '游ゴシック Medium', meiryo, sans-serif",s={value:(t,e)=>{}},o={value:(t,e,i,r)=>{}}},"./core/src/sn/CallStack.ts":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CallStack=void 0,e.CallStack=class{constructor(t="",e=0,i=null){this.$fn=t,this.$idx=e,this.$hArg=i,this.toString=()=>`[fn:${this.$fn}, idx:${this.$idx}, hArg:${this.$hArg}]`}get fn(){return this.$fn}get idx(){return this.$idx}get csArg(){return this.$hArg}}},"./core/src/sn/CmnLib.ts":(t,e,i)=>{"use strict";function r(t){return parseInt(String(t),10)}Object.defineProperty(e,"__esModule",{value:!0}),e.CmnLib=e.getExt=e.getFn=e.argChk_Boolean=e.argChk_Num=e.addStyle=e.initStyle=e.cnvTweenArg=e.hMemberCnt=e.getDateStr=e.uint=e.int=void 0,e.int=r,e.uint=function(t){const e=parseInt(String(t),10);return e<0?-e:e},"toInt"in String.prototype||(String.prototype.toInt=function(){return r(this)}),"toUint"in String.prototype||(String.prototype.toUint=function(){const t=r(this);return t<0?-t:t}),e.getDateStr=function(t="/",e=" ",i=":",r=""){const n=new Date;return n.getFullYear()+t+String(100+n.getMonth()+1).slice(1,3)+t+String(100+n.getDate()).slice(1,3)+e+String(100+n.getHours()).slice(1,3)+i+String(100+n.getMinutes()).slice(1,3)+(""===r?"":r+String(n.getMilliseconds()))},e.hMemberCnt={alpha:0,height:0,rotation:0,scale_x:0,scale_y:0,pivot_x:0,pivot_y:0,width:0,x:0,y:0},e.cnvTweenArg=function(t,i){const r={};for(const n in e.hMemberCnt){if(!(n in t))continue;const e=String(t[n]),s=("="===e.charAt(0)?e.slice(1):e).split(","),o=r[n]=parseFloat(s[0]);s.length>1&&(r[n]+=Math.round(Math.random()*(parseFloat(s[1])-o+1))),"="===e.charAt(0)&&(r[n]+=parseFloat(i[n]))}return r};const n="/* SKYNovel */";function s(t,e,i){if(!(e in t))return t[e]=i;const r=t[e];if(null===r)return!1;const n=String(r);return t[e]="false"!==n&&Boolean(n)}e.initStyle=function(){const t=document.getElementsByTagName("head")[0];for(let e=t.children.length-1;e>=0;--e){const i=t.children[e];i instanceof HTMLStyleElement&&i.innerText.slice(0,14)===n&&t.removeChild(i)}},e.addStyle=function(t){const e=document.createElement("style");e.innerHTML=n+t,document.getElementsByTagName("head")[0].appendChild(e)},e.argChk_Num=function(t,e,i){const r=t[e];if(!(e in t)){if(isNaN(i))throw`[${t.タグ名}]属性 ${e} は必須です`;return t[e]=i,i}const n="0x"===String(r).slice(0,2)?parseInt(r):parseFloat(r);if(isNaN(n))throw`[${t.タグ名}]属性 ${e} の値【${r}】が数値ではありません`;return t[e]=n},e.argChk_Boolean=s;const o=/^[^\/\.]+$|[^\/]+(?=\.)/;e.getFn=function(t){return(t.match(o)??[""])[0]};const a=/\.([^\.]+)$/;e.getExt=function(t){return(t.match(a)??[""])[1]};const h=i("./node_modules/platform/platform.js");class u{static cvsResize(t){const e=u.cvsWidth,i=u.cvsHeight;let r=globalThis.innerWidth,n=globalThis.innerHeight;const o=(screen.orientation?.angle??0)%180==0?"p":"l";if(u.isMobile&&("p"===o&&r>n||"l"===o&&r<n)&&([r,n]=[n,r]),s(u.hDip,"expanding",!0)||u.stageW>r||u.stageH>n){u.stageW/u.stageH<=r/n?(u.cvsHeight=n,u.cvsWidth=u.stageW/u.stageH*n):(u.cvsWidth=r,u.cvsHeight=u.stageH/u.stageW*r),u.cvsScale=u.cvsWidth/u.stageW;const e=t.getBoundingClientRect();u.ofsPadLeft_Dom2PIXI=(u.isMobile?(globalThis.innerWidth-u.cvsWidth)/2:e.left)*(1-u.cvsScale),u.ofsPadTop_Dom2PIXI=(u.isMobile?(globalThis.innerHeight-u.cvsHeight)/2:e.top)*(1-u.cvsScale)}else u.cvsWidth=u.stageW,u.cvsHeight=u.stageH,u.cvsScale=1,u.ofsPadLeft_Dom2PIXI=0,u.ofsPadTop_Dom2PIXI=0;if(t.parentElement){const e=t.parentElement.style;e.position="relative";const i=t.style;e.width=i.width=`${u.cvsWidth}px`,e.height=i.height=`${u.cvsHeight}px`}return e!==u.cvsWidth||i!==u.cvsHeight}}e.CmnLib=u,u.stageW=0,u.stageH=0,u.ofsPadLeft_Dom2PIXI=0,u.ofsPadTop_Dom2PIXI=0,u.cvsWidth=0,u.cvsHeight=0,u.cvsScale=1,u.debugLog=!1,u.isSafari="Safari"===h.name,u.isFirefox="Firefox"===h.name,u.isMac=new RegExp("OS X").test(h.os?.family??""),u.isMobile=!new RegExp("(Windows|OS X)").test(h.os?.family??""),u.hDip={},u.isDbg=!1,u.isPackaged=!1,u.isRetina=!1,u.isDarkMode=!1,u.retinaRate=1,u.SN_ID="skynovel"},"./core/src/sn/CmnTween.ts":function(t,e,i){"use strict";var r,n,s=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.CmnTween=void 0;const o=i("./node_modules/@tweenjs/tween.js/dist/tween.esm.js");class a{static ease(t){if(!t)return t=>o.Easing.Linear.None(t);if(!(t in s(a,r,"f",n)))throw"異常なease指定です";return s(a,r,"f",n)[t]}}e.CmnTween=a,r=a,n={value:{"Back.In":t=>o.Easing.Back.In(t),"Back.InOut":t=>o.Easing.Back.InOut(t),"Back.Out":t=>o.Easing.Back.Out(t),"Bounce.In":t=>o.Easing.Bounce.In(t),"Bounce.InOut":t=>o.Easing.Bounce.InOut(t),"Bounce.Out":t=>o.Easing.Bounce.Out(t),"Circular.In":t=>o.Easing.Circular.In(t),"Circular.InOut":t=>o.Easing.Circular.InOut(t),"Circular.Out":t=>o.Easing.Circular.Out(t),"Cubic.In":t=>o.Easing.Cubic.In(t),"Cubic.InOut":t=>o.Easing.Cubic.InOut(t),"Cubic.Out":t=>o.Easing.Cubic.Out(t),"Elastic.In":t=>o.Easing.Elastic.In(t),"Elastic.InOut":t=>o.Easing.Elastic.InOut(t),"Elastic.Out":t=>o.Easing.Elastic.Out(t),"Exponential.In":t=>o.Easing.Exponential.In(t),"Exponential.InOut":t=>o.Easing.Exponential.InOut(t),"Exponential.Out":t=>o.Easing.Exponential.Out(t),"Linear.None":t=>o.Easing.Linear.None(t),"Quadratic.In":t=>o.Easing.Quadratic.In(t),"Quadratic.InOut":t=>o.Easing.Quadratic.InOut(t),"Quadratic.Out":t=>o.Easing.Quadratic.Out(t),"Quartic.In":t=>o.Easing.Quartic.In(t),"Quartic.InOut":t=>o.Easing.Quartic.InOut(t),"Quartic.Out":t=>o.Easing.Quartic.Out(t),"Quintic.In":t=>o.Easing.Quintic.In(t),"Quintic.InOut":t=>o.Easing.Quintic.InOut(t),"Quintic.Out":t=>o.Easing.Quintic.Out(t),"Sinusoidal.In":t=>o.Easing.Sinusoidal.In(t),"Sinusoidal.InOut":t=>o.Easing.Sinusoidal.InOut(t),"Sinusoidal.Out":t=>o.Easing.Sinusoidal.Out(t)}}},"./core/src/sn/Config.ts":function(t,e,i){"use strict";var r,n,s,o=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},a=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;const h=i("./core/src/sn/CmnLib.ts");class u{constructor(t){this.sys=t,this.oCfg={save_ns:"",coder:{len:864},window:{width:300,height:300},book:{title:"",creator:"",cre_url:"",publisher:"",pub_url:"",detail:"",version:"1.0"},log:{max_len:1024},init:{bg_color:0,tagch_msecwait:10,auto_msecpagewait:3500,escape:""},debug:{devtool:!1,token:!1,tag:!1,putCh:!1,debugLog:!1,baseTx:!1,masume:!1,variable:!1},code:{},debuger_token:""},this.userFnTail="",this.hPathFn2Exts={},r.set(this,!1),n.set(this,!1),s.set(this,/([^\/\s]+)\.([^\d]\w+)/)}static async generate(t){const e=new u(t),i=t.cur+"prj.json",r=await(await t.fetch(i)).text(),n=JSON.parse(t.decStr(i,r));return await e.load(n),e}async load(t){if(this.oCfg.save_ns=t?.save_ns??this.oCfg.save_ns,this.oCfg.coder=t?.coder??this.oCfg.coder,h.CmnLib.stageW=this.oCfg.window.width=Number(t?.window?.width??this.oCfg.window.width),h.CmnLib.stageH=this.oCfg.window.height=Number(t?.window?.height??this.oCfg.window.height),this.oCfg.book={...this.oCfg.book,...t.book},this.oCfg.log.max_len=t.log?.max_len?.max_len??this.oCfg.log.max_len,this.oCfg.init={...this.oCfg.init,...t.init},"init"in t)for(const t in this.oCfg.init){const e=String(this.oCfg.init[t]);"#"===e.charAt(0)&&(this.oCfg.init[t]=parseInt(e.slice(1),16))}if(this.oCfg.debug={...this.oCfg.debug,...t.debug},h.CmnLib.debugLog=this.oCfg.debug.debugLog,this.oCfg.debuger_token=t.debuger_token,await this.sys.loadPath(this.hPathFn2Exts,this),o(this,r,this.matchPath("^breakline$",u.EXT_SPRITE).length>0,"f"),o(this,n,this.matchPath("^breakpage$",u.EXT_SPRITE).length>0,"f"),this.sys.crypto)for(const t in this.hPathFn2Exts){const e=this.hPathFn2Exts[t];for(const t in e){if(":RIPEMD160"!==t.slice(-10))continue;const i=e[t].slice(e[t].lastIndexOf("/")+1),r=e[t.slice(0,-10)],n=await this.sys.fetch(r),s=await n.text();if(i!==this.sys.hash(s))throw`ファイル改竄エラーです fn:${r}`}}}get existsBreakline(){return a(this,r,"f")}get existsBreakpage(){return a(this,n,"f")}getNs(){return`skynovel.${this.oCfg.save_ns} - `}searchPath(t,e=""){if(!t)throw"[searchPath] fnが空です";if("http://"===t.slice(0,7))return t;if("downloads:/"===t.slice(0,11)){const e=this.sys.path_downloads+t.slice(11);return this.sys.ensureFileSync(e),e}if("userdata:/"===t.slice(0,10)){const e=this.sys.path_userdata+"storage/"+t.slice(10);return this.sys.ensureFileSync(e),e}const i=t.match(a(this,s,"f"));let r=i?i[1]:t;const n=i?i[2]:"";if(this.userFnTail){const t=r+"@@"+this.userFnTail;if(t in this.hPathFn2Exts)if(""===e)r=t;else for(let i in this.hPathFn2Exts[t])if(-1!==`|${e}|`.indexOf(`|${i}|`)){r=t;break}}const o=this.hPathFn2Exts[r];if(!o)throw`サーチパスに存在しないファイル【${t}】です`;let u="";if(!n){const i=(0,h.int)(o[":cnt"]);if(""===e){if(i>1)throw`指定ファイル【${t}】が複数マッチします。サーチ対象拡張子群【${e}】で絞り込むか、ファイル名を個別にして下さい。`;return t}const r=`|${e}|`;if(i>1){let i=0;for(const n in o)if(-1!==r.indexOf(`|${n}|`)&&++i>1)throw`指定ファイル【${t}】が複数マッチします。サーチ対象拡張子群【${e}】で絞り込むか、ファイル名を個別にして下さい。`}for(let t in o)if(-1!==r.indexOf(`|${t}|`))return o[t];throw`サーチ対象拡張子群【${e}】にマッチするファイルがサーチパスに存在しません。探索ファイル名=【${t}】`}if(""!==e&&-1===`|${e}|`.indexOf(`|${n}|`))throw`指定ファイルの拡張子【${n}】は、サーチ対象拡張子群【${e}】にマッチしません。探索ファイル名=【${t}】`;if(u=o[n],!u)throw`サーチパスに存在しない拡張子【${n}】です。探索ファイル名=【${t}】、サーチ対象拡張子群【${e}】`;return u}matchPath(t,e=""){const i=[],r=new RegExp(t),n=new RegExp(e);for(let t in this.hPathFn2Exts){if(-1===t.search(r))continue;const s=this.hPathFn2Exts[t];if(""===e){i.push(s);continue}const o={};let a=!1;for(const e in s)-1!==e.search(n)&&(o[e]=t,a=!0);a&&i.push(o)}return i}addPath(t,e){const i={};for(const t in e)i[t]=(":"===t.charAt(0)?"":this.sys.cur)+e[t];this.hPathFn2Exts[t]=i}}e.Config=u,r=new WeakMap,n=new WeakMap,s=new WeakMap,u.EXT_SPRITE="png|jpg|jpeg|json|svg|webp|mp4|webm",u.EXT_SCRIPT="sn|ssn",u.EXT_FONT="woff2|otf|ttf",u.EXT_SOUND="mp3|m4a|ogg|aac|flac|wav",u.EXT_HTML="htm|html"},"./core/src/sn/DebugMng.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},m=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.DebugMng=void 0;const g=i("./core/src/sn/CmnLib.ts"),v=i("./node_modules/platform/platform.js");class _{constructor(t,e,i){this.sys=t,r.add(this),u.set(this,!0),p(_,n,i,"f",s),p(_,n,e,"f",o),p(_,n,e.title,"f",a),_.myTrace=m(_,n,"m",f),e.log=t=>m(this,r,"m",l).call(this,t),e.trace=t=>m(this,r,"m",c).call(this,t),p(_,n,document.createElement("span"),"f",h),m(_,n,"f",h).hidden=!0,m(_,n,"f",h).textContent="",m(_,n,"f",h).style.cssText=`\tz-index: ${Number.MAX_SAFE_INTEGER};\n\t\t\tposition: absolute; left: 0; top: 0;\n\t\t\tcolor: black;\n\t\t\tbackground-color: rgba(255, 255, 255, 0.7);`,document.body.appendChild(m(_,n,"f",h))}destroy(){p(_,n,(()=>!1),"f",a),document.body.removeChild(m(_,n,"f",h)),_.myTrace=_.trace_beforeNew}static trace_beforeNew(t,e="E"){let i=`{${e}} `+t,r="";switch(e){case"D":r=`color:#${g.CmnLib.isDarkMode?"49F":"05A"};`;break;case"W":r="color:#FF8800;";break;case"F":r="color:#BB0000;";break;case"ET":throw i;case"E":return void console.error("%c"+i,"color:#FF3300;");default:r="color:black;",i=" "+i}console.info("%c"+i,r)}}e.DebugMng=_,n=_,u=new WeakMap,r=new WeakSet,l=function(t){let e="";return m(this,u,"f")&&(p(this,u,!1,"f"),e=`== ${v.description} ==\n`),this.sys.appendFile(this.sys.path_downloads+"log.txt",`${e}--- ${(0,g.getDateStr)("-","_","")} [fn:${m(_,n,"f",s).scriptFn} line:${m(_,n,"f",s).lineNum}] prj:${this.sys.cur}\n${t.text||`(text is ${t.text})`}\n`,(t=>{t&&console.log(t)})),!1},c=function(t){return _.myTrace(t.text||`(text is ${t.text})`,"I"),!1},f=function(t,e="E"){let i=`{${e}} `;m(_,n,"f",s)&&m(_,n,"f",s).lineNum>0&&(i+=`(fn:${m(_,n,"f",s).scriptFn} line:${m(_,n,"f",s).lineNum}) `),i+=t,m(_,n,"m",d).call(_,i,e);let r="";switch(e){case"D":r=`color:#${g.CmnLib.isDarkMode?"49F":"05A"};`;break;case"W":r="color:#F80;";break;case"F":r="color:#B00;";break;case"ET":case"E":if(m(_,n,"f",a).call(_,{text:t}),m(this,n,"f",o).dump_lay({}),m(this,n,"f",o).dump_val({}),m(_,n,"f",s).dumpErrForeLine(),m(this,n,"f",o).dump_stack({}),"ET"===e)throw i;return void console.error("%c"+i,"color:#F30;");default:r="",i=" "+i}console.info("%c"+i,r)},d=function(t,e){let i="";switch(e){case"D":i="color:#05A;";break;case"W":i="color:#F80;";break;case"F":i="color:#B00;";break;case"ET":case"E":i="color:#F30;";break;default:i=""}m(_,n,"f",h).innerHTML+=`<span style='${i}'>${t}</span><br/>`,m(_,n,"f",h).hidden=!1},s={value:void 0},o={value:void 0},a={value:void 0},h={value:void 0},_.myTrace=_.trace_beforeNew},"./core/src/sn/DesignCast.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},T=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},S=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PicBtnDesignCast=e.TxtBtnDesignCast=e.BtnDesignCast=e.TxtLayPadDesignCast=e.TxtLayDesignCast=e.GrpLayDesignCast=e.DesignCast=void 0;const w=i("./core/src/sn/CmnLib.ts"),A=i("./core/src/sn/Grammar.ts"),M=i("./core/src/sn/DebugMng.ts"),O=i("./core/src/sn/Config.ts"),R=i("./node_modules/pixi.js/dist/esm/pixi.js"),C=S(i("./node_modules/moveable/dist/moveable.esm.js"));class P{constructor(t,e=!1){this.bg_col=t,this.isLay=e,r.add(this),this.hArg={},this.id_tag="",this.hDesignArg={rotation:0,pivot_x:0,pivot_y:0,left:0,center:0,right:0,s_right:0,top:0,middle:0,bottom:0,s_bottom:0,width:0,height:0},c.set(this,void 0),v.set(this,(()=>{})),this.mov=null,this.div=null,this.lx=0,this.ly=0,this.rect=R.Rectangle.EMPTY,this.pivot=new R.Point(0,0),this.scale=new R.Point(1,1),this.rotation=0,this.oldFn=()=>"",this.rotatable=!0}static init(t,e,i,r,c,d,p){t.view.insertAdjacentHTML("beforebegin",`<div id="${x(P,n,"f",f)}" style="width: ${w.CmnLib.stageW*w.CmnLib.cvsScale}px; height: ${w.CmnLib.stageH*w.CmnLib.cvsScale}px; background: rgba(0,0,0,0); position: absolute; touch-action: none; user-select: none; display: none;"></div>`),T(P,n,document.getElementById(x(P,n,"f",f)),"f",s),P.divHint.classList.add("sn_design_hint"),document.body.appendChild(P.divHint),T(P,n,e,"f",o),T(P,n,i,"f",a),P.prpPrs=r,T(P,n,c,"f",h),T(P,n,d,"f",u),T(P,n,p,"f",l),(0,w.addStyle)("\n.sn_design_cast {\n\tposition: absolute; touch-action: none; user-select: none;\n\topacity: 0.6; border-radius: 8px;\n}\n\n.sn_design_cast.drag_border {\n\tline-height: 1.8;\n\tborder: dashed 5px #333;\n}\n\n.sn_design_hint {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\tpadding: 5px;\n\tborder-radius: 5px;\n\tbackground: #333;\n\tz-index: 10;\n\tcolor: #fff;\n\tfont-weight: bold;\n\tfont-size: 12px;\n\tdisplay: none;\n}\n")}static setHint(t,e,i,r){P.divHint.innerHTML=t;const n=window.getComputedStyle(P.divHint),s=parseFloat(n.width),o=parseFloat(n.height);P.divHint.style.cssText=`display: block; left: ${Math.max(10,r.lx+e-s)}px;\n\t\ttop: ${Math.max(10,r.ly+i-o-10)}px;`}static cvsResizeDesign(){const t=x(P,n,"f",s).style;t.width=w.CmnLib.stageW*w.CmnLib.cvsScale+"px",t.height=w.CmnLib.stageH*w.CmnLib.cvsScale+"px"}destroy(){this.div=null,this.mov?.destroy(),this.mov=null}gethArg(){return this.hArg}sethArg(t){if(!this.includeDesignArg(t))return;this.id_tag||(this.id_tag=t[":id_tag"]??""),this.hArg=t;const e=t[":id_dc"]??this.id_tag;x(P,n,"f",p)[e]=this;const i=this.hArg.layer??"";T(this,v,x(this,c,"f")||this.child||!i?()=>{}:()=>{const t=x(P,n,"f",l)[i].fore;this.lx=t.x*w.CmnLib.cvsScale,this.ly=t.y*w.CmnLib.cvsScale},"f")}includeDesignArg(t){for(const e in t)if(e in this.hDesignArg)return!0;return!1}getRect(){return R.Rectangle.EMPTY}cnvPosArg(t,e){return{}}cnvSizeArg(t,e){return{}}setPos(t,e){}setSize(t,e){}setOther(t){}adopt(t){this.child=t,T(t,c,this,"f")}static enterMode(){P.leaveMode(),x(P,n,"f",s).style.display="inline",T(P,n,0,"f",d),T(P,n,{},"f",p)}static allHide(){x(P,n,"f",m).forEach((t=>t.visible=!1))}set visible(t){this.div&&this.mov&&(this.div.style.display=t?"inline":"none",this.mov.updateTarget())}static leaveMode(){x(P,n,"f",s).textContent="",x(P,n,"f",s).style.display="none",x(P,n,"f",m).forEach((t=>t.destroy())),T(P,n,[],"f",m)}cvsResize(){x(this,r,"m",g).call(this),this.mov?.updateTarget()}onDragStart(){}make(){var t,e;const i=this.hArg[":id_dc"]??this.id_tag;x(P,n,"f",p)[i]=this;const h=this.div=document.createElement("div");h.id=x(P,n,"f",f)+"_"+T(t=P,n,(e=x(t,n,"f",d),++e),"f",d),h.classList.add("sn_design_cast"),h.dataset.id_dc=i,h.style.backgroundColor=`${this.bg_col}`,h.style.display="none",this.rect=this.getRect(),x(this,r,"m",g).call(this),(x(this,c,"f")?document.querySelector(`[data-id_dc="${x(this,c,"f").id_tag}"]`)??x(P,n,"f",s):x(P,n,"f",s)).appendChild(h);const l={aPos:[0,0],roDeg:0,trOrg:"",origin:[0,0]},v=()=>{l.aPos=[NaN,NaN],l.roDeg=this.rotation;const t=this.pivot.x*w.CmnLib.cvsScale,e=this.pivot.y*w.CmnLib.cvsScale;l.trOrg=`${t}px ${e}px`,l.origin=[t,e],Object.assign(this.mov,{verticalGuidelines:[],horizontalGuidelines:[]})},_=t=>{x(P,n,"f",o).send2Dbg("_changeCast",{...t,":id_tag":this.id_tag}),P.divHint.style.display="none"},y=()=>{const[t,e]=l.aPos;if(isNaN(t))return void(P.divHint.style.display="none");const i=(0,w.int)(this.rect.x+=t/w.CmnLib.cvsScale+this.pivot.x),r=(0,w.int)(this.rect.y+=e/w.CmnLib.cvsScale+this.pivot.y);this.setPos(i,r);const n=(0,w.uint)(this.rect.width),s=(0,w.uint)(this.rect.height);this.setSize(n,s),_({...this.cnvPosArg(i,r),...this.cnvSizeArg(n,s)})};let b;this.mov=new C.default(document.body,{target:h,draggable:!0,resizable:!0,rotatable:this.rotatable,originDraggable:this.rotatable,snappable:!0}).on("dragStart",(t=>{v(),this.onDragStart();const e=this.child?.mov;e&&(b=e.target,e.isInside(t.clientX,t.clientY)&&(e.target=void 0))})).on("drag",(t=>{l.aPos=t.beforeTranslate,this.procDragHint(t,t.left,t.top)})).on("dragEnd",(()=>{y(),this.child?.mov&&(this.child.mov.target=b),x(this,c,"f")?.mov&&(x(this,c,"f").mov.target=x(this,c,"f").div)})).on("resizeStart",v).on("resize",(t=>{h.style.width=`${t.width}px`,h.style.height=`${t.height}px`,l.aPos=t.drag.beforeTranslate,this.rect.width=t.width/w.CmnLib.cvsScale,this.rect.height=t.height/w.CmnLib.cvsScale,this.procResizeHint(t,t.drag.left,t.drag.top)})).on("resizeEnd",y).on("rotateStart",(t=>{v(),t.set(l.roDeg)})).on("rotate",(t=>{l.roDeg=t.beforeRotate,P.setHint((0,w.int)(l.roDeg)+"度",t.drag.left,t.drag.top,this)})).on("rotateEnd",(()=>{this.rotation=l.roDeg,this.setOther({}),_({rotation:(0,w.int)(l.roDeg)})})).on("dragOriginStart",(()=>v)).on("dragOrigin",(t=>{l.trOrg=t.transformOrigin,l.origin=t.origin})).on("dragOriginEnd",(()=>{const[t,e]=l.origin;l.trOrg=`${t}px ${e}px`;const i=this.pivot.x=t/w.CmnLib.cvsScale,r=this.pivot.y=e/w.CmnLib.cvsScale;this.setOther({});const n=(0,w.int)(this.rect.x+i),s=(0,w.int)(this.rect.y+r);this.setPos(n,s),_({...this.cnvPosArg(n,s),pivot_x:(0,w.int)(i),pivot_y:(0,w.int)(r)})})).on("render",(()=>{const{aPos:t,roDeg:e,trOrg:i}=l;h.style.transformOrigin=i,h.style.transform=`translate(${t[0]}px, ${t[1]}px) rotate(${e}deg)`})),x(P,n,"f",m).push(this),h.addEventListener("dragenter",(()=>h.classList.add("drag_border"))),h.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")})),h.addEventListener("dragleave",(()=>h.classList.remove("drag_border"))),h.addEventListener("drop",(t=>{t.stopPropagation(),t.preventDefault(),h.classList.remove("drag_border");const e=t.dataTransfer;if(!e||0===e.files.length)return;const i=e.files[0],r={":id_tag":this.id_tag,fn:(0,w.getFn)(i.name),ext:(0,w.getExt)(i.name),url:"",buf:new ArrayBuffer(0),old_fn:this.oldFn(),old_url:x(P,n,"f",u).searchPath(this.oldFn(),O.Config.EXT_SPRITE)};i.arrayBuffer().then((t=>{r.buf=t;try{r.url=x(P,n,"f",a).cnvPath4Dbg(x(P,n,"f",u).searchPath(i.name,O.Config.EXT_SPRITE))}catch{}x(P,n,"f",o).send2Dbg("_dropFile",r)})).catch((t=>console.error("drop2dc %o",t)))})),h.addEventListener("dblclick",(t=>{t.preventDefault(),x(P,n,"f",o).send2Dbg("_focusScript",this.hArg)}))}procDragHint(t,e,i){const[r,n]=t.beforeTranslate;P.setHint(`(${(0,w.int)(this.rect.x+r/w.CmnLib.cvsScale)}, ${(0,w.int)(this.rect.y+n/w.CmnLib.cvsScale)})`,e,i,this)}procResizeHint(t,e,i){P.setHint(`(${(0,w.int)(t.drag.left)}, ${(0,w.int)(t.drag.top)})<br/>${(0,w.int)(this.rect.width)} x ${(0,w.int)(this.rect.height)}`,e,i,this)}static replaceToken(t){const e=t[":id_tag"],i=x(P,n,"f",p)[e];if(!document.querySelector(`div[data-id_dc='${e}']`)||!i)return;const r=t[":token"];x(P,n,"f",a).replace(t[":idx_tkn"],r);const[s,o]=(0,A.tagToken2Name_Args)(r);i.child&&(i.child.hArg[":token"]=i.hArg[":token"]),x(P,n,"f",h).go(o);const u=x(P,n,"f",h).hPrm;if("pivot_x"in u||"pivot_y"in u){const e=Number(P.prpPrs.getValAmpersand(u.pivot_x.val??"0")),n=Number(P.prpPrs.getValAmpersand(u.pivot_y.val??"0"));(isNaN(e)||isNaN(n))&&M.DebugMng.myTrace(`pivot_xかpivot_yが数値ではありません\n(fn:${t[":path"].slice(13)} ln:${t[":ln"]})\n${r}`,"F"),i.pivot.set(e,n)}if("left"in u||"top"in u||"x"in u||"y"in u){const e=(0,w.int)(P.prpPrs.getValAmpersand(u.left.val??u.x.val??"0")),n=(0,w.int)(P.prpPrs.getValAmpersand(u.top.val??u.y.val??"0"));(isNaN(e)||isNaN(n))&&M.DebugMng.myTrace(`widthかheightが数値ではありません\n(fn:${t[":path"].slice(13)} ln:${t[":ln"]})\n${r}`,"F"),i.rect.x=e-i.pivot.x,i.rect.y=n-i.pivot.y,i.setPos(e,n)}if("width"in u||"height"in u){const e=(0,w.int)(P.prpPrs.getValAmpersand(u.width.val??"0")),n=(0,w.int)(P.prpPrs.getValAmpersand(u.height.val??"0"));(isNaN(e)||isNaN(n))&&M.DebugMng.myTrace(`widthかheightが数値ではありません\n(fn:${t[":path"].slice(13)} ln:${t[":ln"]})\n${r}`,"F"),i.rect.width=e,i.rect.height=n,i.setSize(e,n)}if("scale_x"in u||"scale_y"in u){const e=Number(P.prpPrs.getValAmpersand(u.scale_x.val??"0")),n=Number(P.prpPrs.getValAmpersand(u.scale_y.val??"0"));(isNaN(e)||isNaN(n))&&M.DebugMng.myTrace(`scale_xかscale_yが数値ではありません\n(fn:${t[":path"].slice(13)} ln:${t[":ln"]})\n${r}`,"F"),i.scale.set(e,n)}if("rotation"in u){const e=Number(P.prpPrs.getValAmpersand(u.rotation.val??"0"));isNaN(e)&&M.DebugMng.myTrace(`rotationが数値ではありません\n(fn:${t[":path"].slice(13)} ln:${t[":ln"]})\n${r}`,"F"),i.rotation=e}i.setOther(u),i.cvsResize()}}e.DesignCast=P,n=P,c=new WeakMap,v=new WeakMap,r=new WeakSet,g=function(){x(this,v,"f").call(this),this.div&&Object.assign(this.div.style,{left:`${this.lx+this.rect.x*w.CmnLib.cvsScale}px`,top:`${this.ly+this.rect.y*w.CmnLib.cvsScale}px`,width:this.rect.width*w.CmnLib.cvsScale+"px",height:this.rect.height*w.CmnLib.cvsScale+"px",transformOrigin:`${this.pivot.x*w.CmnLib.cvsScale}px ${this.pivot.y*w.CmnLib.cvsScale}px`,transform:`scale(${this.scale.x}, ${this.scale.y}) rotate(${this.rotation}deg)`})},s={value:void 0},o={value:void 0},a={value:void 0},h={value:void 0},u={value:void 0},l={value:void 0},P.divHint=document.createElement("div"),f={value:"DesignMode"},d={value:0},p={value:{}},m={value:[]},e.GrpLayDesignCast=class extends P{constructor(t,e){super("#29e",!0),this.spLay=t,this.gl=e,_.set(this,void 0),this.oldFn=()=>this.hArg.fn??""}setSp(t){T(this,_,t,"f")}getRect(){return new R.Rectangle(this.spLay.x,this.spLay.y,x(this,_,"f")?.width??0,x(this,_,"f")?.height??0)}cnvPosArg(t,e){return{left:t,top:e}}cnvSizeArg(t,e){return{width:t,height:e}}setPos(t,e){this.spLay.x=t,this.spLay.y=e}setSize(t,e){x(this,_,"f").width=t,x(this,_,"f").height=e}setOther(t){if("fn"in t){const e=P.prpPrs.getValAmpersand(t.fn.val??"");this.gl.lay({fn:e})}this.spLay.pivot.copyFrom(this.pivot),this.spLay.scale.copyFrom(this.scale),this.spLay.angle=this.rotation}},_=new WeakMap,e.TxtLayDesignCast=class extends P{constructor(t,e){super("#29e",!0),this.spLay=t,this.ts=e,this.hDesignArg={rotation:0,pivot_x:0,pivot_y:0,left:0,center:0,right:0,s_right:0,top:0,middle:0,bottom:0,s_bottom:0,width:0,height:0,pl:0,pr:0,pt:0,pb:0}}getRect(){const t=this.ts.getInfTL();return new R.Rectangle(this.spLay.x,this.spLay.y,t.$width,t.$height)}cnvPosArg(t,e){return{left:t,top:e}}cnvSizeArg(t,e){return{width:t,height:e}}setPos(t,e){this.spLay.position.set(t,e),this.ts.lay(this.cnvPosArg(t,e))}setSize(t,e){this.ts.lay(this.cnvSizeArg(t,e))}setOther(t){this.child?.setOther(t),this.spLay.pivot.copyFrom(this.pivot),this.spLay.scale.copyFrom(this.scale),this.spLay.angle=this.rotation}},e.TxtLayPadDesignCast=class extends P{constructor(t){super("#9e2"),this.ts=t,y.add(this),this.rotatable=!1}getRect(){const t=this.ts.getInfTL();return new R.Rectangle(t.pad_left,t.pad_top,t.$width-t.pad_left-t.pad_right,t.$height-t.pad_top-t.pad_bottom)}cnvPosArg(t,e){return{pl:t,pt:e}}cnvSizeArg(t,e){const i=this.ts.getInfTL();return{pr:i.$width-i.pad_left-t,pb:i.$height-i.pad_top-e}}setPos(t,e){this.ts.lay(this.cnvPosArg(t,e))}setSize(t,e){this.ts.lay({...this.cnvSizeArg(t,e),":redraw":!0})}setOther(t){const e=this.ts.getInfTL();if(("pl"in t||"pt"in t)&&(this.setPos(this.rect.x=parseFloat(P.prpPrs.getValAmpersand(t.pl?.val??`${e.pad_left}`)),this.rect.y=parseFloat(P.prpPrs.getValAmpersand(t.pt?.val??`${e.pad_top}`))),this.cvsResize()),"pr"in t||"pb"in t){this.ts.lay({pr:parseFloat(P.prpPrs.getValAmpersand(t.pr?.val??`${e.pad_right}`)),pb:parseFloat(P.prpPrs.getValAmpersand(t.pb?.val??`${e.pad_bottom}`))});const i=this.getRect();this.setSize(this.rect.width=i.width,this.rect.height=i.height),this.cvsResize()}}procDragHint(t,e,i){const[r,n]=t.beforeTranslate;x(this,y,"m",b).call(this,e,i,r,n)}procResizeHint(t,e,i){const[r,n]=t.drag.beforeTranslate;x(this,y,"m",b).call(this,e,i,r,n)}},y=new WeakSet,b=function(t,e,i,r){const n=this.rect.x,s=this.rect.y,o=this.rect.width,a=this.rect.height,h=this.ts.getInfTL(),u=(0,w.int)(n+i/w.CmnLib.cvsScale),l=(0,w.int)(s+r/w.CmnLib.cvsScale),c=(0,w.int)(h.$width-u-o),f=(0,w.int)(h.$height-l-a),d=t=>"&nbsp;".repeat(t);P.setHint(d(11)+`上幅=${l}<br/>\n\t\t\t左幅=${u+d(10)}右幅=${c}<br/>`+d(5)+`内側 ${(0,w.int)(o)} x ${(0,w.int)(a)}<br/>`+d(10)+`下幅=${f}`,t,e,this)};class I extends P{constructor(t,e){super("#e92"),this.btn=t,this.hArg=e,this.pivot.x=(0,w.argChk_Num)(e,"pivot_x",this.pivot.x),this.pivot.y=(0,w.argChk_Num)(e,"pivot_y",this.pivot.y),this.scale.x=(0,w.argChk_Num)(e,"scale_x",this.scale.x),this.scale.y=(0,w.argChk_Num)(e,"scale_y",this.scale.y),this.rotation=(0,w.argChk_Num)(e,"rotation",this.rotation),this.sethArg(e)}cnvPosArg(t,e){return{left:t,top:e}}cnvSizeArg(t,e){return{width:t,height:e}}setPos(t,e){this.btn.x=t,this.btn.y=e}setOther(t){this.btn.pivot.copyFrom(this.pivot),this.btn.scale.copyFrom(this.scale),this.btn.angle=this.rotation}onDragStart(){const t=this.btn.parent.children.filter((t=>t!==this.btn));Object.assign(this.mov,{verticalGuidelines:t.map((t=>this.lx+t.x*w.CmnLib.cvsScale)),horizontalGuidelines:t.map((t=>this.ly+t.y*w.CmnLib.cvsScale))})}}e.BtnDesignCast=I,e.TxtBtnDesignCast=class extends I{constructor(t,e,i){super(t,e),this.txt=i,this.oldFn=()=>this.hArg.b_pic??"",(0,w.argChk_Boolean)(e,"design",!0)||(this.setPos=()=>{},this.setSize=()=>{})}getRect(){return new R.Rectangle(this.btn.x,this.btn.y,this.txt.width,this.txt.height)}setSize(t,e){this.txt.width=t,this.txt.height=e}setOther(t){if(super.setOther(t),"b_pic"in t){const e=P.prpPrs.getValAmpersand(t.b_pic.val??"");this.btn.update_b_pic(e,this.txt)}}},e.PicBtnDesignCast=class extends I{constructor(t,e){super(t,e),E.set(this,void 0),this.oldFn=()=>this.hArg.pic??""}setSp(t){T(this,E,t,"f")}getRect(){return new R.Rectangle(this.btn.x,this.btn.y,x(this,E,"f").width,x(this,E,"f").height)}setSize(t,e){x(this,E,"f").width=t,x(this,E,"f").height=e}setOther(t){if(super.setOther(t),"pic"in t){const e=P.prpPrs.getValAmpersand(t.pic.val??"");this.btn.update_pic(e,x(this,E,"f"))}}},E=new WeakMap},"./core/src/sn/EventListenerCtn.ts":function(t,e,i){"use strict";var r,n=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},s=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.EventListenerCtn=void 0;const o=i("./node_modules/pixi.js/dist/esm/pixi.js");e.EventListenerCtn=class{constructor(){r.set(this,[])}add(t,e,i,s={}){if(t instanceof o.BaseTexture)switch(e){case"loaded":case"update":case"error":case"dispose":t.on(e,i,s),n(this,r,"f").push((()=>t.off(e,i,s)))}else{if(t instanceof o.utils.EventEmitter)return t.on(e,i,s),void n(this,r,"f").push((()=>t.off(e,i,s)));t.addEventListener(e,i,s),n(this,r,"f").push((()=>t.removeEventListener(e,i,{capture:s.capture??!1})))}}clear(){n(this,r,"f").forEach((t=>t())),s(this,r,[],"f")}},r=new WeakMap},"./core/src/sn/EventMng.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C,P,I,N,D,L,k,B,F,j,G,U=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},X=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.EventMng=void 0;const z=i("./core/src/sn/CmnLib.ts"),H=i("./core/src/sn/TxtLayer.ts"),Y=i("./core/src/sn/EventListenerCtn.ts"),W=i("./core/src/sn/Button.ts"),V=i("./core/src/sn/FocusMng.ts"),$=i("./node_modules/@tweenjs/tween.js/dist/tween.esm.js"),q=i("./node_modules/pixi.js/dist/esm/pixi.js"),Z=i("./core/src/sn/Config.ts"),{GamepadListener:J}=i("./node_modules/gamepad.js/gamepad.js");e.EventMng=class{constructor(t,e,i,g,S,O,C,P,B){if(this.cfg=t,this.hTag=e,this.appPixi=i,this.main=g,this.layMng=S,this.val=O,this.sndMng=C,this.scrItr=P,this.sys=B,r.add(this),n.set(this,new Y.EventListenerCtn),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),h.set(this,new J({analog:!1,deadZone:.3})),u.set(this,new V.FocusMng),l.set(this,(t=>{})),p.set(this,!1),m.set(this,!1),v.set(this,{}),_.set(this,{}),y.set(this,!1),b.set(this,!1),E.set(this,(t=>U(this,v,"f")[t]??U(this,_,"f")[t])),T.set(this,(()=>{X(this,T,(()=>{}),"f"),this.scrItr.firstWait()})),w.set(this,((t,e)=>{})),A.set(this,new Y.EventListenerCtn),I.set(this,(()=>this.layMng.goTxt())),L.set(this,(()=>{})),G.set(this,{Alt:0,Meta:0,Control:0,ArrowDown:0,End:0,Enter:0,Escape:0," ":0,GoBack:0}),e.clear_event=t=>U(this,r,"m",M).call(this,t),e.event=t=>U(this,r,"m",R).call(this,t),e.l=t=>U(this,r,"m",N).call(this,t),e.p=t=>U(this,r,"m",D).call(this,t),e.s=()=>(this.scrItr.recodePage(),U(this,r,"m",x).call(this,(()=>{}),!1,!0),!0),e.set_cancel_skip=()=>U(this,r,"m",k).call(this),e.set_focus=t=>this.set_focus(t),e.wait=t=>U(this,r,"m",F).call(this,t),e.waitclick=()=>U(this,r,"m",j).call(this),C.setEvtMng(this),P.setOtherObj(this,S),H.TxtLayer.setEvtMng(g,this),S.setEvtMng(this),B.setFire(((t,e)=>this.fire(t,e))),z.CmnLib.isDbg){const t={pause:()=>{if(X(this,y,!0,"f"),!U(this,b,"f"))return;const t={};this.scrItr.recodeDesign(t),this.sys.callHook("_enterDesign",t),this.sys.send2Dbg("_enterDesign",t)},stopOnBreakpoint:()=>X(this,y,!0,"f"),stopOnDataBreakpoint:()=>X(this,y,!0,"f"),continue:()=>X(this,y,!1,"f"),disconnect:()=>X(this,y,!1,"f")};t.attach=t.stopOnEntry=t.stopOnStep=t.stopOnStepIn=t.stopOnStepOut=t.stopOnBackstep=t.pause,B.addHook((e=>t[e]?.()))}let $="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAyBAMAAABYG2ONAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGuGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDgtMTlUMDM6MDk6MjUrMDk6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA4LTE5VDIzOjUyOjI5KzA5OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA4LTE5VDIzOjUyOjI5KzA5OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5ZjM1YWNlLTc0NzMtNGI3My05OGJjLWQ1OTk4ZDk5MjQzNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphY2U0MDcwOS04ZTQxLTQ1YjYtYTMwZi05NDU1YWM1OTAwMmEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphY2U0MDcwOS04ZTQxLTQ1YjYtYTMwZi05NDU1YWM1OTAwMmEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFjZTQwNzA5LThlNDEtNDViNi1hMzBmLTk0NTVhYzU5MDAyYSIgc3RFdnQ6d2hlbj0iMjAyMC0wOC0xOVQwMzowOToyNSswOTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA3Mzg4MzYwLWJjMjctNDRkZi1hMTYwLTk5N2M4ODNmYTA0ZCIgc3RFdnQ6d2hlbj0iMjAyMC0wOC0xOVQyMjo0NTozNiswOTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI5ZjM1YWNlLTc0NzMtNGI3My05OGJjLWQ1OTk4ZDk5MjQzNiIgc3RFdnQ6d2hlbj0iMjAyMC0wOC0xOVQyMzo1MjoyOSswOTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WWAYXwAAACdQTFRF////PDIlPDIlPDIlPDIlPDIlPDIlPDIlPDIlPDIlPDIlPDIlPDIlCOA6SAAAAA10Uk5TACB/MID/EJBA8NCwYDCdv6cAAABoSURBVHgBYxicYBQIKZEIlJmMSQWGTKS7a8RpGdUyqmVUy6iWUS3y7zGBAlwai+wnrOZwTA2FgBnE220F0RFlQLwWtq1gLdtI8SI7SEc4acFyMjQ08gBpgWzlAEKkgayoBJJj7AAuCQAm1kUjHh83WgAAAABJRU5ErkJggg==";try{$=t.searchPath("hint",Z.Config.EXT_SPRITE)}catch{}X(this,s,new W.Button({enabled:!1,text:"hint",style:'{"fill": "white", "fontSize": "21px"}',b_pic:$,width:80,design:!1},this,(()=>{}),(()=>!1)),"f"),U(this,s,"f").visible=!1,i.stage.addChild(U(this,s,"f"));const K=U(this,s,"f").getBounds();X(this,o,U(this,s,"f").x-K.x,"f"),X(this,a,U(this,s,"f").y-K.y,"f"),i.stage.interactive=!0,z.CmnLib.isMobile?i.stage.on("pointerdown",(t=>this.fire("click",t))):U(this,n,"f").add(i.stage,"pointerdown",(t=>{switch(t.data.button){case 0:this.fire("click",t);break;case 1:this.fire("middleclick",t)}})),U(this,n,"f").add(window,"keydown",(t=>U(this,r,"m",c).call(this,t))),U(this,n,"f").add(i.view,"contextmenu",(t=>U(this,r,"m",f).call(this,t)));const Q=t=>{z.CmnLib.isDarkMode=t.matches,O.setVal_Nochk("tmp","const.sn.isDarkMode",z.CmnLib.isDarkMode)},tt=globalThis.matchMedia("(prefers-color-scheme: dark)");Q(tt),tt.addEventListener("change",(t=>{Q(t),this.fire("sn:chgDarkMode",t)})),"WheelEvent"in window&&(U(this,n,"f").add(i.view,"wheel",(t=>U(this,r,"m",d).call(this,t)),{passive:!0}),X(this,l,(t=>t.addEventListener("wheel",(t=>U(this,r,"m",d).call(this,t)),{passive:!0})),"f"),X(this,w,((t,e)=>t.add(i.view,"wheel",(t=>{t.isComposing||t.deltaY<=0||(t.stopPropagation(),e())}))),"f")),z.CmnLib.debugLog&&(U(this,h,"f").on("gamepad:connected",(t=>console.log(`👺<'gamepad:connected' index:${t.detail.index} id:${t.detail.gamepad.id}`))),U(this,h,"f").on("gamepad:disconnected",(t=>console.log(`👺<'gamepad:disconnected' index:${t.detail.index} id:${t.detail.gamepad.id}`))));const et=["","ArrowUp","","ArrowLeft","","ArrowRight","","ArrowDown",""],it=[0,0];U(this,h,"f").on("gamepad:axis",(t=>{if(!document.hasFocus()||0!==t.detail.stick)return;it[t.detail.axis]=t.detail.value;const e=3*(it[1]+1)+(it[0]+1),i=et[e];if(!i)return;const r=U(this,u,"f").getFocus();(!r||r instanceof q.Container?globalThis:r).dispatchEvent(new KeyboardEvent("keydown",{key:i,bubbles:!0})),!r||r instanceof q.Container||"range"===r.getAttribute("type")&&r.dispatchEvent(new InputEvent("input",{bubbles:!0}))})),U(this,h,"f").on("gamepad:button",(t=>{if(document.hasFocus()&&0!==t.detail.value)if(t.detail.button%2==0){const t=U(this,u,"f").getFocus();(!t||t instanceof q.Container?globalThis:t).dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",bubbles:!0}))}else i.view.dispatchEvent(new Event("contextmenu"))})),U(this,h,"f").start(),U(this,n,"f").add(window,"keyup",(t=>{t.isComposing||t.key in U(this,G,"f")&&(U(this,G,"f")[t.key]=0)})),O.defTmp("const.sn.key.alternate",(()=>U(this,G,"f").Alt>0)),O.defTmp("const.sn.key.command",(()=>U(this,G,"f").Meta>0)),O.defTmp("const.sn.key.control",(()=>U(this,G,"f").Control>0)),O.defTmp("const.sn.key.end",(()=>U(this,G,"f").End>0)),O.defTmp("const.sn.key.escape",(()=>U(this,G,"f").Escape>0)),O.defTmp("const.sn.key.back",(()=>U(this,G,"f").GoBack>0))}resvFlameEvent(t){t.addEventListener("keydown",(t=>U(this,r,"m",c).call(this,t))),t.addEventListener("contextmenu",(t=>U(this,r,"m",f).call(this,t))),U(this,l,"f").call(this,t)}destroy(){U(this,u,"f").destroy(),U(this,n,"f").clear()}fire(t,e){if(U(this,y,"f"))return;if(!U(this,b,"f"))return;const i=t.toLowerCase();if(z.CmnLib.debugLog&&console.log(`👺 fire<(key:\`${i}\` type:${e.type} e:%o)`,{...e}),"enter"===i){const t=U(this,u,"f").getFocus();if(t&&t instanceof q.Container)return void t.emit("pointerdown",new Event("pointerdown"))}const r=U(this,E,"f").call(this,i);if(r)"wheel"!==i.slice(-5)&&e.preventDefault?.(),e.stopPropagation(),"dom="!==i.slice(0,4)&&this.layMng.clickTxtLay(),X(this,b,!1,"f"),r(e),U(this,s,"f").visible=!1;else if("swipe"===i.slice(0,5)){const t=e;globalThis.scrollBy(-(t.deltaX??0),-(t.deltaY??0))}}popLocalEvts(){const t=U(this,v,"f");return X(this,v,{},"f"),t}pushLocalEvts(t){X(this,v,t,"f")}waitEvent(t,e=!0,i=!1){if(e&&i)throw"canskipとglobalを同時にtrue指定できません";if(this.val.getVal("tmp:sn.skip.enabled")){if(this.val.getVal("tmp:sn.skip.all")||this.scrItr.isNextKidoku)return t(),!1;U(this,L,"f").call(this)}return U(this,r,"m",x).call(this,t,e,i),!0}button(t,e,i,n,o){t.fn||t.label||this.main.errScript("fnまたはlabelは必須です"),e.interactive=e.buttonMode=!0;const a=t.key?.toLowerCase()??" ";t.fn||(t.fn=this.scrItr.scriptFn);const h=(0,z.argChk_Boolean)(t,"global",!1);h?U(this,_,"f")[a]=()=>this.main.resumeByJumpOrCall(t):U(this,v,"f")[a]=()=>this.main.resumeByJumpOrCall(t);const l=e;l.on("pointerdown",(t=>this.fire(a,t)));const c=t.hint?()=>U(this,r,"m",S).call(this,t,e):()=>{},f=()=>{i(),U(this,s,"f").visible=!1},d=()=>(c(),n());if(l.on("pointerover",d),l.on("pointerout",(()=>{U(this,u,"f").isFocus(e)?d():f()})),l.on("pointerdown",o),l.on("pointerup",z.CmnLib.isMobile?f:()=>{U(this,u,"f").isFocus(e)?d():f()}),U(this,u,"f").add(e,d,f),t.clickse&&(this.cfg.searchPath(t.clickse,Z.Config.EXT_SOUND),l.on("pointerdown",(()=>{const e={fn:t.clickse,join:!1};t.clicksebuf&&(e.buf=t.clicksebuf),this.hTag.playse(e)}))),t.enterse&&(this.cfg.searchPath(t.enterse,Z.Config.EXT_SOUND),l.on("pointerover",(()=>{const e={fn:t.enterse,join:!1};t.entersebuf&&(e.buf=t.entersebuf),this.hTag.playse(e)}))),t.leavese&&(this.cfg.searchPath(t.leavese,Z.Config.EXT_SOUND),l.on("pointerout",(()=>{const e={fn:t.leavese,join:!1};t.leavesebuf&&(e.buf=t.leavesebuf),this.hTag.playse(e)}))),t.onenter){const e=a+t.onenter.toLowerCase(),i={fn:t.fn,label:t.onenter,call:!0,key:e};h?U(this,_,"f")[e]=()=>this.main.resumeByJumpOrCall(i):U(this,v,"f")[e]=()=>this.main.resumeByJumpOrCall(i),l.on("pointerover",(t=>this.fire(e,t)))}if(t.onleave){const e=a+t.onleave.toLowerCase(),i={fn:t.fn,label:t.onleave,call:!0,key:e};h?U(this,_,"f")[e]=()=>this.main.resumeByJumpOrCall(i):U(this,v,"f")[e]=()=>this.main.resumeByJumpOrCall(i),l.on("pointerout",(t=>this.fire(e,t)))}this.sndMng.loadAheadSnd(t)}waitLimitedEvent(t,e){U(this,I,"f").call(this),this.val.saveKidoku();const i=()=>{U(this,A,"f").clear(),e()};if(this.val.getVal("tmp:sn.skip.enabled")){if(this.val.getVal("tmp:sn.skip.all")||this.scrItr.isNextKidoku)return i(),!1;U(this,L,"f").call(this)}return!(0,z.argChk_Boolean)(t,"canskip",!0)||(U(this,A,"f").add(window,"pointerdown",(t=>{t.stopPropagation(),i()})),U(this,A,"f").add(window,"keydown",(t=>{t.isComposing||(t.stopPropagation(),i())})),U(this,w,"f").call(this,U(this,A,"f"),i),!0)}set_focus(t){const e=t.add;if("dom="===e?.slice(0,4)){const i=U(this,r,"m",P).call(this,e);if(0===i.el.length&&(0,z.argChk_Boolean)(t,"need_err",!0))throw`HTML内にセレクタ（${i.sel}）に対応する要素が見つかりません。存在しない場合を許容するなら、need_err=false と指定してください`;return i.el.forEach((t=>U(this,u,"f").add(t,(()=>!!U(this,r,"m",C).call(this,t)&&(t.focus(),!0)),(()=>{})))),!1}const i=t.del;if("dom="===i?.slice(0,4)){const e=U(this,r,"m",P).call(this,i);if(0===e.el.length&&(0,z.argChk_Boolean)(t,"need_err",!0))throw`HTML内にセレクタ（${e.sel}）に対応する要素が見つかりません。存在しない場合を許容するなら、need_err=false と指定してください`;return e.el.forEach((t=>U(this,u,"f").remove(t))),!1}const n=t.to;if(!n)throw"[set_focus] add か to は必須です";switch(n){case"null":U(this,u,"f").blur();break;case"next":U(this,u,"f").next();break;case"prev":U(this,u,"f").prev()}return!1}isSkipKeyDown(){if(this.scrItr.skip4page)return!0;for(const t in U(this,G,"f"))if(2===U(this,G,"f")[t])return!0;return!1}},n=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,E=new WeakMap,T=new WeakMap,w=new WeakMap,A=new WeakMap,I=new WeakMap,L=new WeakMap,G=new WeakMap,r=new WeakSet,c=function(t){if(t.isComposing)return;t.key in U(this,G,"f")&&(U(this,G,"f")[t.key]=t.repeat?2:1);const e=(t.altKey?"Alt"===t.key?"":"alt+":"")+(t.ctrlKey?"Control"===t.key?"":"ctrl+":"")+(t.shiftKey?"Shift"===t.key?"":"shift+":"")+t.key;this.fire(e,t)},f=function(t){const e=(t.altKey?"Alt"===t.key?"":"alt+":"")+(t.ctrlKey?"Control"===t.key?"":"ctrl+":"")+(t.shiftKey?"Shift"===t.key?"":"shift+":"")+"rightclick";this.fire(e,t),t.preventDefault()},d=function(t){if(t.isComposing)return;if(U(this,p,"f"))return void X(this,m,!0,"f");X(this,p,!0,"f"),U(this,r,"m",g).call(this);const e=(t.altKey?"alt+":"")+(t.ctrlKey?"ctrl+":"")+(t.shiftKey?"shift+":"")+(t.deltaY>0?"downwheel":"upwheel");this.fire(e,t)},g=function t(){setTimeout((()=>{if(U(this,m,"f"))return X(this,m,!1,"f"),void U(this,r,"m",t).call(this);X(this,p,!1,"f")}),250)},x=function(t,e=!0,i=!0){U(this,I,"f").call(this),this.val.saveKidoku(),e?(U(this,v,"f").click=t,U(this,v,"f").enter=t,U(this,v,"f").arrowdown=t,U(this,v,"f")["wheel.y>0"]=t):(delete U(this,v,"f").click,delete U(this,v,"f").enter,delete U(this,v,"f").arrowdown,delete U(this,v,"f")["wheel.y>0"]),X(this,E,i?t=>U(this,v,"f")[t]??U(this,_,"f")[t]:t=>U(this,v,"f")[t],"f"),X(this,b,!0,"f"),U(this,T,"f").call(this)},S=function(t,e){const i=U(this,s,"f"),r=i.children[1];if(!r)return;r.text=t.hint;const n=e.name?.includes('"b_pic":'),h=e.name?.includes('"pic":'),u="link"===t.タグ名;i.parent?.removeChild(i),(u?e.parent:e).addChild(i),(0,z.argChk_Boolean)(t,"hint_tate",!1)?i.setTransform(h?e.width/e.scale.x:(n?(i.width-e.width)/2-U(this,o,"f"):0)+(u?e.x:0)+e.width,h?e.height/2/e.scale.y:n?i.height/2:(u?e.y:0)+e.height/2+U(this,a,"f"),1,1,1.570796327,0,0,i.width/2,i.height-2*U(this,o,"f")):i.setTransform(h?(e.width-i.width+U(this,o,"f"))/2:n?0:(u?e.x:0)+(e.width-i.width)/2,h?0:n?(i.height-e.height)/2:u?e.y:0,1,1,0,0,0,-U(this,o,"f")/2,i.height-10),i.visible=!0},M=function(t){const e=(0,z.argChk_Boolean)(t,"global",!1),i=U(this,e?_:v,"f");for(const t in i)U(this,r,"m",O).call(this,t,i[t]);return X(this,e?_:v,{},"f"),X(this,b,!1,"f"),!1},O=function(t,e){"dom="===t.slice(0,4)&&U(this,r,"m",P).call(this,t).el.forEach((t=>t.removeEventListener("click",e)))},R=function(t){const e=t.key;if(!e)throw"keyは必須です";const i=e.toLowerCase(),s=(0,z.argChk_Boolean)(t,"call",!1),o=(0,z.argChk_Boolean)(t,"global",!1)?U(this,_,"f"):U(this,v,"f");if((0,z.argChk_Boolean)(t,"del",!1)){if(t.fn||t.label||s)throw"fn/label/callとdelは同時指定できません";return U(this,r,"m",O).call(this,e,o[i]),delete o[i],!1}if(t.fn??=this.scrItr.scriptFn,"dom="===e.slice(0,4)){const i=U(this,r,"m",P).call(this,e);if(0===i.el.length){if((0,z.argChk_Boolean)(t,"need_err",!0))throw`HTML内にセレクタ（${i.sel}）に対応する要素が見つかりません。存在しない場合を許容するなら、need_err=false と指定してください`;return!1}let s=["click","keydown"];switch(i.el[0].type??""){case"checkbox":case"range":s=["input"];break;case"text":case"textarea":s=["input","change"]}s.forEach(((t,s)=>i.el.forEach((o=>{U(this,n,"f").add(o,t,(r=>{if(!U(this,b,"f")||this.layMng.getFrmDisabled(i.id))return;if("keydown"===t&&"Enter"!==r.key)return;const n=o.dataset;for(const t in n)n.hasOwnProperty(t)&&this.val.setVal_Nochk("tmp",`sn.event.domdata.${t}`,n[t]);this.fire(e,r)})),0===s&&U(this,u,"f").add(o,(()=>!!U(this,r,"m",C).call(this,o)&&(o.focus(),!0)),(()=>{}))}))))}return o[i]=()=>this.main.resumeByJumpOrCall(t),!1},C=function(t){if(null===t.offsetParent)return!1;let e=t;do{if("none"===getComputedStyle(e).display||"false"===e.dataset.focus||e?.disabled)return!1;e=e.parentElement}while(null!==e);return!0},P=function(t){const e=t.indexOf(":");let i="";if(e>=0){const r=t.slice(4,e),n=`const.sn.frm.${r}`;if(!this.val.getVal(`tmp:${n}`,0))throw`HTML【${r}】が読み込まれていません`;const s=document.getElementById(r).contentWindow;return i=t.slice(e+1),{el:s.document.querySelectorAll(i),id:r,sel:i}}return i=t.slice(4),{el:document.querySelectorAll(i),id:"",sel:i}},N=function(t){if(this.scrItr.skip4page)return!1;if(!this.val.getVal("tmp:sn.tagL.enabled"))return U(this,I,"f").call(this),!1;if(this.val.getVal("tmp:sn.skip.enabled"))if(this.val.getVal("tmp:sn.skip.all")||this.scrItr.isNextKidoku){if("ps".includes(String(this.val.getVal("sys:sn.skip.mode"))))return!1}else U(this,L,"f").call(this);return this.val.getVal("tmp:sn.auto.enabled")?U(this,r,"m",F).call(this,{time:Number(this.scrItr.isKidoku?this.val.getVal("sys:sn.auto.msecLineWait_Kidoku"):this.val.getVal("sys:sn.auto.msecLineWait"))}):((0,z.argChk_Boolean)(t,"visible",!0)&&this.layMng.breakLine(),U(this,r,"m",x).call(this,(()=>this.main.resume())),!0)},D=function(t){if(this.scrItr.recodePage(),this.val.getVal("tmp:sn.skip.enabled"))if(this.val.getVal("tmp:sn.skip.all")||this.scrItr.isNextKidoku){if("s"===String(this.val.getVal("sys:sn.skip.mode")))return U(this,I,"f").call(this),!1}else U(this,L,"f").call(this);return this.val.getVal("tmp:sn.auto.enabled")?U(this,r,"m",F).call(this,{time:Number(this.scrItr.isKidoku?this.val.getVal("sys:sn.auto.msecPageWait_Kidoku"):this.val.getVal("sys:sn.auto.msecPageWait"))}):((0,z.argChk_Boolean)(t,"visible",!0)&&this.layMng.breakPage(),U(this,r,"m",x).call(this,this.layMng.getCurrentTxtlayFore()&&(0,z.argChk_Boolean)(t,"er",!1)?()=>{this.hTag.er(t),this.main.resume()}:()=>this.main.resume()),!0)},k=function(){return X(this,L,(()=>{X(this,L,(()=>{}),"f"),this.val.setVal_Nochk("tmp","sn.tagL.enabled",!0),this.val.setVal_Nochk("tmp","sn.skip.enabled",!1),this.val.setVal_Nochk("tmp","sn.auto.enabled",!1),this.layMng.setNormalWaitTxtLayer()}),"f"),U(this,r,"m",B).call(this),!1},B=function(){const t=this.scrItr.lenCallStk;for(let e=0;e<t;++e){const t=this.scrItr.getCallStk(e);if(!t)continue;const i=t.hEvt1Time;i&&(delete i.Click,delete i.Enter,delete i.ArrowDown,delete i["wheel.y>0"])}},F=function(t){if(this.scrItr.skip4page)return!1;if(this.val.getVal("tmp:sn.skip.enabled")){if(this.val.getVal("tmp:sn.skip.all")||this.scrItr.isNextKidoku)return!1;U(this,L,"f").call(this)}const e=new $.Tween({}).to({},(0,z.uint)((0,z.argChk_Num)(t,"time",NaN))).onComplete((()=>{e.stop(),this.main.resume()})).start();return this.waitEvent((()=>e.end()),(0,z.argChk_Boolean)(t,"canskip",!0),(0,z.argChk_Boolean)(t,"global",!1))},j=function(){if(this.scrItr.skip4page)return!1;if(this.val.getVal("tmp:sn.skip.enabled")){if(this.val.getVal("tmp:sn.skip.all")||this.scrItr.isNextKidoku)return!1;U(this,L,"f").call(this)}return U(this,r,"m",x).call(this,(()=>this.main.resume())),!0}},"./core/src/sn/FocusMng.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},l=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.FocusMng=void 0;const c=i("./core/src/sn/CmnLib.ts"),f=i("./node_modules/pixi.js/dist/esm/pixi.js");e.FocusMng=class{constructor(){r.add(this),n.set(this,[]),s.set(this,-1),a.set(this,c.CmnLib.debugLog?t=>console.log(`👾 <FocusMng idx:${t} btn:%o`,u(this,n,"f")[t].btn):()=>{})}destroy(){l(this,n,[],"f"),l(this,s,-1,"f")}add(t,e,i){if(u(this,n,"f").findIndex((e=>e.btn===t))>=0)return;if(t instanceof f.Container)return t.on("pointerdown",(()=>{for(let e=u(this,n,"f").length-1;e>=0;--e)if(u(this,n,"f")[e].btn===t)return void l(this,s,e,"f");l(this,s,-1,"f")})),void u(this,n,"f").push({btn:t,on:e,off:i});t.addEventListener("focus",(()=>{for(let e=u(this,n,"f").length-1;e>=0;--e)if(u(this,n,"f")[e].btn===t)return void l(this,s,e,"f");l(this,s,-1,"f")}));let a=t=>{},h="button"===t.localName||"a"===t.localName?t=>!t.isTrusted&&"Enter"===t.key:t=>"Enter"===t.key;const c=t;switch(c.type??""){case"checkbox":a=()=>c.checked=!c.checked;break;case"":t.querySelectorAll("input[type]").length>0&&(a=e=>u(this,r,"m",o).call(this,t,e.key),h=()=>!1);break;case"range":a=t=>{t.isTrusted||("ArrowUp"===t.key?c.stepUp():c.stepDown())};break;case"text":case"textarea":a=t=>{if(t.isTrusted)return;let e=(c.selectionStart??0)+("ArrowUp"===t.key?-1:1);e<0&&(e=0),c.setSelectionRange(e,e)}}t.addEventListener("keydown",(e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key||(e.stopPropagation(),e.stopImmediatePropagation(),h(e)?t.dispatchEvent(new MouseEvent("click")):a(e))}),{passive:!0}),t.hasAttribute("tabindex")||(t.tabIndex=0),u(this,n,"f").push({btn:t,on:e,off:i})}remove(t){var e;const i=u(this,n,"f").findIndex((e=>e.btn===t));i<0||(u(this,n,"f").splice(i,1),0===u(this,n,"f").length?l(this,s,-1,"f"):i<=u(this,s,"f")&&l(this,s,(e=u(this,s,"f"),--e),"f"))}isFocus(t){return!(u(this,s,"f")<0)&&u(this,n,"f")[u(this,s,"f")].btn===t}prev(){var t;u(this,r,"m",h).call(this);const e=u(this,n,"f").length;if(0!==e){l(this,s,(t=u(this,s,"f"),--t),"f")<0&&l(this,s,e-1,"f");for(let t=e;t>=1;--t){const i=(u(this,s,"f")+t)%e;if(u(this,n,"f")[i].on())return l(this,s,i,"f"),void u(this,a,"f").call(this,i)}l(this,s,-1,"f")}}next(){var t;u(this,r,"m",h).call(this);const e=u(this,n,"f").length;if(0!==e){l(this,s,(t=u(this,s,"f"),++t),"f")>=e&&l(this,s,0,"f");for(let t=0;t<e;++t){const i=(u(this,s,"f")+t)%e;if(u(this,n,"f")[i].on())return l(this,s,i,"f"),void u(this,a,"f").call(this,i)}l(this,s,-1,"f")}}getFocus(){if(u(this,s,"f")<0)return null;u(this,r,"m",h).call(this),u(this,s,"f")>=u(this,n,"f").length&&l(this,s,0,"f");const t=u(this,n,"f")[u(this,s,"f")];return t.on()?t.btn:null}blur(){u(this,r,"m",h).call(this),l(this,s,-1,"f"),globalThis.focus()}},n=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakSet,o=function(t,e){const i=t.querySelectorAll("input[type]"),r=i.length;for(let t=0;t<r;++t)if(i[t].checked){i[(t+r+("ArrowUp"===e?-1:1))%r].checked=!0;break}},h=function(){for(let t=u(this,n,"f").length-1;t>=0;--t){const e=u(this,n,"f")[t];e.btn instanceof f.Container&&!e.btn.parent?u(this,n,"f").splice(t,1):e.off()}}},"./core/src/sn/FrameMng.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},g=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.FrameMng=void 0;const v=i("./core/src/sn/CmnLib.ts"),_=i("./core/src/sn/CmnTween.ts"),y=i("./core/src/sn/Config.ts"),b=i("./node_modules/@tweenjs/tween.js/dist/tween.esm.js"),E=i("./node_modules/pixi.js/dist/esm/pixi.js");e.FrameMng=class{constructor(t,e,i,l,g,v,_){this.cfg=t,this.appPixi=i,this.val=l,this.main=g,this.sys=v,this.hTwInf=_,r.add(this),n.set(this,void 0),s.set(this,Object.create(null)),a.set(this,Object.create(null)),h.set(this,Object.create(null)),u.set(this,Object.create(null)),e.add_frame=t=>m(this,r,"m",o).call(this,t),e.let_frame=t=>m(this,r,"m",c).call(this,t),e.set_frame=t=>m(this,r,"m",f).call(this,t),e.frame=t=>m(this,r,"m",d).call(this,t),e.tsy_frame=t=>m(this,r,"m",p).call(this,t)}setEvtMng(t){g(this,n,t,"f")}destroy(){for(const t in m(this,s,"f")){const e=m(this,s,"f")[t];e.parentElement.removeChild(e)}g(this,s,Object.create(null),"f")}getFrmDisabled(t){return m(this,a,"f")[t]}cvsResize(){const t=this.sys.reso4frame*v.CmnLib.cvsScale;for(const e in m(this,s,"f")){const i=m(this,s,"f")[e],r=Number(this.val.getVal(`const.sn.frm.${e}.x`)),n=Number(this.val.getVal(`const.sn.frm.${e}.y`)),o=Number(this.val.getVal(`const.sn.frm.${e}.width`)),a=Number(this.val.getVal(`const.sn.frm.${e}.height`));i.style.left=this.sys.ofsLeft4frm+r*t+"px",i.style.top=this.sys.ofsTop4frm+n*t+"px",i.width=String(o*t),i.height=String(a*t)}}},n=new WeakMap,s=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,r=new WeakSet,o=function(t){const e=t.id;if(!e)throw"idは必須です";const i=t.src;if(!i)throw"srcは必須です";const o=`const.sn.frm.${e}`;if(this.val.getVal(`tmp:${o}`))throw`frame【${e}】はすでにあります`;const c=(0,v.argChk_Num)(t,"alpha",1),f=(0,v.argChk_Num)(t,"scale_x",1),d=(0,v.argChk_Num)(t,"scale_y",1),p=(0,v.argChk_Num)(t,"rotate",0),g=(0,v.argChk_Boolean)(t,"visible",!0),_=t.b_color?` background-color: ${t.b_color};`:"",b=m(this,r,"m",l).call(this,t),x=this.sys.reso4frame*v.CmnLib.cvsScale;this.appPixi.view.insertAdjacentHTML("beforebegin",`<iframe id="${e}" sandbox="allow-scripts allow-same-origin" style="opacity: ${c}; position: absolute; left:${this.sys.ofsLeft4frm+b.x*x}px; top: ${this.sys.ofsTop4frm+b.y*x}px; z-index: 1; ${_} border: 0px; overflow: hidden; display: ${g?"inline":"none"}; transform: scale(${f}, ${d}) rotate(${p}deg);" width="${b.width*x}" height="${b.height*x}"></iframe>`);const T=this.cfg.searchPath(i,y.Config.EXT_HTML),S=(new E.Loader).add({name:i,url:T,xhrType:E.LoaderResource.XHR_RESPONSE_TYPE.TEXT});return this.sys.crypto&&S.use(((t,e)=>{try{t.data=this.sys.decStr(t.extension,t.data)}catch(e){this.main.errScript(`[add_frame]Html ロード失敗です src:${t.name} ${e}`,!1)}e?.()})),S.load(((t,r)=>{const l=document.getElementById(e);m(this,s,"f")[e]=l,m(this,a,"f")[e]=!1,l.srcdoc=String(r[i]?.data).replace("sn_repRes();","").replace(/\s(?:src|href)=(["'])(\S+)\1/g,((t,e,i)=>"../"===i.slice(0,3)?this.sys.cur+i.slice(4):t.replace(e,e+T.slice(0,T.lastIndexOf("/")+1)))),l.onload=()=>{this.val.setVal_Nochk("tmp",o,!0),this.val.setVal_Nochk("tmp",o+".alpha",c),this.val.setVal_Nochk("tmp",o+".x",b.x),this.val.setVal_Nochk("tmp",o+".y",b.y),this.val.setVal_Nochk("tmp",o+".scale_x",f),this.val.setVal_Nochk("tmp",o+".scale_y",d),this.val.setVal_Nochk("tmp",o+".rotate",p),this.val.setVal_Nochk("tmp",o+".width",b.width),this.val.setVal_Nochk("tmp",o+".height",b.height),this.val.setVal_Nochk("tmp",o+".visible",g);const t=l.contentWindow;m(this,n,"f").resvFlameEvent(t),t.sn_repRes?.((t=>{const e=(t.dataset.src??"").replace(/(.+\/|\..+)/g,""),i=m(this,u,"f")[e];if(i)return void(t.src=i);const r=m(this,h,"f")[e];if(r)return void r.push(t);m(this,h,"f")[e]=[t];const n=this.cfg.searchPath(e,y.Config.EXT_SPRITE),s=(new E.Loader).add({name:e,url:n,xhrType:E.LoaderResource.XHR_RESPONSE_TYPE.BUFFER});this.sys.crypto&&s.use(((t,e)=>{this.sys.dec(t.extension,t.data).then((i=>{"bin"===t.extension?(t.data=i,i instanceof HTMLImageElement&&(t.type=E.LoaderResource.TYPE.IMAGE),e?.()):e?.()})).catch((e=>this.main.errScript(`Graphic ロード失敗です fn:${t.name} ${e}`,!1)))})),s.load(((t,e)=>{for(const t in e){const i=m(this,u,"f")[t]=e[t].data.src;m(this,h,"f")[t].forEach((t=>t.src=i)),delete m(this,h,"f")[t]}}))})),this.main.resume()}})),!0},l=function(t){const e={...t},i=this.sys.resolution;return new DOMRect((0,v.argChk_Num)(e,"x",0)*i,(0,v.argChk_Num)(e,"y",0)*i,(0,v.argChk_Num)(e,"width",v.CmnLib.stageW)*i,(0,v.argChk_Num)(e,"height",v.CmnLib.stageH)*i)},c=function(t){const e=t.id;if(!e)throw"idは必須です";const i=document.getElementById(e);if(!i)throw`id【${e}】はフレームではありません`;const r=`const.sn.frm.${e}`;if(!this.val.getVal(`tmp:${r}`))throw`frame【${e}】が読み込まれていません`;const n=t.var_name;if(!n)throw"var_nameは必須です";const s=i.contentWindow;if(!s.hasOwnProperty(n))throw`frame【${e}】に変数/関数【${n}】がありません。変数は var付きにして下さい`;const o=s[n];return this.val.setVal_Nochk("tmp",r+"."+n,(0,v.argChk_Boolean)(t,"function",!1)?o():o),!1},f=function(t){const e=t.id;if(!e)throw"idは必須です";const i=document.getElementById(e);if(!i)throw`id【${e}】はフレームではありません`;const r=`const.sn.frm.${e}`;if(!this.val.getVal(`tmp:${r}`))throw`frame【${e}】が読み込まれていません`;const n=t.var_name;if(!n)throw"var_nameは必須です";const s=t.text;if(!s)throw"textは必須です";return this.val.setVal_Nochk("tmp",r+"."+n,s),i.contentWindow[n]=s,!1},d=function(t){const e=t.id;if(!e)throw"idは必須です";const i=document.getElementById(e);if(!i)throw`id【${e}】はフレームではありません`;const n=`const.sn.frm.${e}`;if(!this.val.getVal(`tmp:${n}`))throw`frame【${e}】が読み込まれていません`;if("alpha"in t){const e=String(t.alpha);i.style.opacity=e,this.val.setVal_Nochk("tmp",n+".alpha",e)}const s=m(this,r,"m",l).call(this,t),o=this.sys.reso4frame*v.CmnLib.cvsScale;if(("x"in t||"y"in t)&&(i.style.left=this.sys.ofsLeft4frm+s.x*o+"px",i.style.top=this.sys.ofsTop4frm+s.y*o+"px",this.val.setVal_Nochk("tmp",n+".x",s.x),this.val.setVal_Nochk("tmp",n+".y",s.y)),"scale_x"in t||"scale_y"in t||"rotate"in t){const e=(0,v.argChk_Num)(t,"scale_x",1),r=(0,v.argChk_Num)(t,"scale_y",1),s=(0,v.argChk_Num)(t,"rotate",0);i.style.transform=`scale(${e}, ${r}) rotate(${s}deg)`,this.val.setVal_Nochk("tmp",n+".scale_x",e),this.val.setVal_Nochk("tmp",n+".scale_y",r),this.val.setVal_Nochk("tmp",n+".rotate",s)}if("width"in t&&(i.width=String(s.width*o),this.val.setVal_Nochk("tmp",n+".width",s.width)),"height"in t&&(i.height=String(s.height*o),this.val.setVal_Nochk("tmp",n+".height",s.height)),"visible"in t){const e=(0,v.argChk_Boolean)(t,"visible",!0);i.style.display=e?"inline":"none",this.val.setVal_Nochk("tmp",n+".visible",e)}if("b_color"in t&&(i.style.backgroundColor=t.b_color),"disabled"in t){const r=m(this,a,"f")[e]=(0,v.argChk_Boolean)(t,"disabled",!0);i.contentDocument.body.querySelectorAll("input,select").forEach((t=>t.disabled=r))}return!1},p=function(t){const e=t.id;if(!e)throw"idは必須です";const i=document.getElementById(e);if(!i)throw`id【${e}】はフレームではありません`;const n=`const.sn.frm.${e}`;if(!this.val.getVal(`tmp:${n}`,0))throw`frame【${e}】が読み込まれていません`;const s={};"alpha"in t&&(s.a=i.style.opacity),("x"in t||"y"in t||"scale_x"in t||"scale_y"in t||"rotate"in t)&&(s.x=Number(this.val.getVal(`tmp:${n}.x`)),s.y=Number(this.val.getVal(`tmp:${n}.y`)),s.sx=Number(this.val.getVal(`tmp:${n}.scale_x`)),s.sy=Number(this.val.getVal(`tmp:${n}.scale_y`)),s.r=Number(this.val.getVal(`tmp:${n}.rotate`))),"width"in t&&(s.w=this.val.getVal(`tmp:${n}.width`)),"height"in t&&(s.h=this.val.getVal(`tmp:${n}.height`));const o=(0,v.cnvTweenArg)(t,s),a={},h=(0,v.argChk_Num)(t,"repeat",1);let u=()=>{};"alpha"in t&&(a.a=(0,v.argChk_Num)(o,"alpha",0),u=()=>{i.style.opacity=s.a,this.val.setVal_Nochk("tmp","alpha",s.a)});let c=()=>{};const f=m(this,r,"m",l).call(this,o),d=this.sys.reso4frame*v.CmnLib.cvsScale;("x"in t||"y"in t||"scale_x"in t||"scale_y"in t||"rotate"in t)&&(a.x=f.x,a.y=f.y,a.sx=(0,v.argChk_Num)(o,"scale_x",1),a.sy=(0,v.argChk_Num)(o,"scale_y",1),a.r=(0,v.argChk_Num)(o,"rotate",0),c=()=>{i.style.left=this.sys.ofsLeft4frm+s.x*d+"px",i.style.top=this.sys.ofsTop4frm+s.y*d+"px",i.style.transform=`scale(${s.sx}, ${s.sy}) rotate(${s.r}deg)`,this.val.setVal_Nochk("tmp",n+".x",s.x),this.val.setVal_Nochk("tmp",n+".y",s.y),this.val.setVal_Nochk("tmp",n+".scale_x",s.sx),this.val.setVal_Nochk("tmp",n+".scale_y",s.sy),this.val.setVal_Nochk("tmp",n+".rotate",s.r)});let p=()=>{};"width"in t&&(a.w=f.width,p=()=>{i.width=s.w*d+"px",this.val.setVal_Nochk("tmp",n+".width",s.w)});let g=()=>{};"height"in t&&(a.h=f.height,g=()=>{i.height=s.h*d+"px",this.val.setVal_Nochk("tmp",n+".height",s.h)}),this.appPixi.stage.interactive=!1;const y=`frm\n${t.id}`,E=new b.Tween(s).to(a,(0,v.argChk_Num)(t,"time",NaN)*(Boolean(this.val.getVal("tmp:sn.skip.enabled"))?0:1)).delay((0,v.argChk_Num)(t,"delay",0)).easing(_.CmnTween.ease(t.ease)).repeat(0===h?1/0:h-1).yoyo((0,v.argChk_Boolean)(t,"yoyo",!1)).onUpdate((()=>{u(),c(),p(),g()})).onComplete((()=>{this.appPixi.stage.interactive=!0;const t=this.hTwInf[y];t&&(delete this.hTwInf[y],t.tw?.stop(),t.resume&&this.main.resume(),t.onEnd?.())}));if("chain"in t){const e=this.hTwInf[t.chain??""];if(!e||!e.tw)throw`${t.chain}は存在しない・または終了したトゥイーンです`;delete e.onEnd,e.tw.chain(E)}else E.start();return this.hTwInf[y]={tw:E,resume:!1},!1}},"./core/src/sn/Grammar.ts":function(t,e,i){"use strict";var r,n,s,o,a,h=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},u=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.Grammar=e.splitAmpersand=e.tagToken2Name=e.tagToken2Name_Args=e.REG_TAG=void 0;const l=i("./core/src/sn/RubySpliter.ts");e.REG_TAG=/(?<name>[^\s;\]]+)/,e.tagToken2Name_Args=function(t){const i=e.REG_TAG.exec(t.slice(1,-1))?.groups;if(!i)throw`タグ記述【${t}】異常です(タグ解析)`;const r=i.name;return[r,t.slice(1+r.length,-1)]},e.tagToken2Name=function(t){const i=e.REG_TAG.exec(t.slice(1))?.groups;if(!i)throw`タグ記述【${t}】異常です(タグ解析)`;return i.name},e.splitAmpersand=function(t){const e=t.replaceAll("==","＝").replaceAll("!=","≠").split("="),i=e.length;if(i<2||i>3)throw"「&計算」書式では「=」指定が一つか二つ必要です";if("&"===e[1].charAt(0))throw"「&計算」書式では「&」指定が不要です";return{name:e[0].replaceAll("＝","==").replaceAll("≠","!="),text:e[1].replaceAll("＝","==").replaceAll("≠","!="),cast:3===i?e[2].trim():null}},e.Grammar=class{constructor(){r.set(this,void 0),n.set(this,new RegExp("")),s.set(this,""),o.set(this,""),a.set(this,void 0),this.replaceScr_C2M_And_let_ml=(t,e=0)=>{if(h(this,a,"f")){for(let i=t.len-1;i>=e;--i){const e=t.aToken[i];if(this.REG_TOKEN_NOTXT.lastIndex=0,this.REG_TOKEN_NOTXT.test(e.charAt(0)))continue;const r=t.aLNum[i],s=e.match(h(this,n,"f"));if(!s)continue;let o=1;for(let e=s.length-1;e>=0;--e){let n=s[e];const u=h(this,a,"f")[n.charAt(0)];u&&(n=u+("]"===u.slice(-1)?"":`'${n.slice(1,-1)}']`)),t.aToken.splice(i,o,n),t.aLNum.splice(i,o,r),o=0}}t.len=t.aToken.length}},this.setEscape("")}setEscape(t){if(h(this,a,"f")&&t in h(this,a,"f"))throw"[エスケープ文字] char【"+t+"】が登録済みの括弧マクロまたは一文字マクロです";const e=t??"\\";this.REG_TOKEN=new RegExp((t?`\\${t}\\S|`:"")+"\\n+|\\t+|\\[let_ml\\s+[^\\]]+\\].+?(?=\\[endlet_ml[\\]\\s])|\\[(?:[^\"'#;\\]]+|"+(e?`(?:"(?:\\${e}["'#\\n]|[^"])*"|'(?:\\${e}["'#\\n]|[^'])*'|\\#(?:\\${e}["'#\\n]|[^#])*\\#)`:"([\"'#]).*?\\1")+"|;[^\\n]*)*?]|;[^\\n]*|&[^&\\n]+&|&&?[^;\\n\\t&]+|^\\*\\w+"+`|[^\\n\\t\\[;${t?`\\${t}`:""}]+`,"gs"),l.RubySpliter.setEscape(t),u(this,r,new RegExp(`[\\w\\s;[\\]*=&｜《》${t?`\\${t}`:""}]`),"f"),this.REG_TOKEN_NOTXT=new RegExp(`[\\n\\t;\\[*&${t?`\\${t}`:""}]`)}bracket2macro(t,e,i){const n=t.name;if(!n)throw"[bracket2macro] nameは必須です";const s=t.text;if(!s)throw"[bracket2macro] textは必須です";if(2!==s.length)throw"[bracket2macro] textは括弧の前後を示す二文字を指定してください";u(this,a,h(this,a,"f")??{},"f");const o=s.charAt(0),l=s.charAt(1);if(o in h(this,a,"f"))throw"[bracket2macro] text【"+o+"】が登録済みの括弧マクロまたは一文字マクロです";if(l in h(this,a,"f"))throw"[bracket2macro] text【"+l+"】が登録済みの括弧マクロまたは一文字マクロです";if(h(this,r,"f").lastIndex=0,h(this,r,"f").test(o))throw"[bracket2macro] text【"+o+"】は括弧マクロに使用できない文字です";if(h(this,r,"f").lastIndex=0,h(this,r,"f").test(l))throw"[bracket2macro] text【"+l+"】は括弧マクロに使用できない文字です";h(this,a,"f")[l]="0",h(this,a,"f")[o]=`[${n} text=`,this.addC2M(`\\${o}[^\\${l}]*\\${l}`,`\\${o}\\${l}`),this.replaceScr_C2M_And_let_ml(e,i)}char2macro(t,e,i,n){const s=t.char;if(!s)throw"[char2macro] charは必須です";if(u(this,a,h(this,a,"f")??{},"f"),s in h(this,a,"f"))throw"[char2macro] char【"+s+"】が登録済みの括弧マクロまたは一文字マクロです";if(h(this,r,"f").lastIndex=0,h(this,r,"f").test(s))throw"[char2macro] char【"+s+"】は一文字マクロに使用できない文字です";const o=t.name;if(!o)throw"[char2macro] nameは必須です";if(!(o in e))throw`[char2macro] 未定義のタグ又はマクロ[${o}]です`;h(this,a,"f")[s]=`[${o}]`,this.addC2M(`\\${s}`,`\\${s}`),this.replaceScr_C2M_And_let_ml(i,n)}addC2M(t,e){u(this,s,h(this,s,"f")+`${t}|`,"f"),u(this,o,h(this,o,"f")+`${e}`,"f"),u(this,n,new RegExp(`(${h(this,s,"f")}[^${h(this,o,"f")}]+)`,"g"),"f")}},r=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap},"./core/src/sn/GrpLayer.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},T=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.GrpLayer=void 0;const S=i("./core/src/sn/Layer.ts"),w=i("./core/src/sn/CmnLib.ts"),A=i("./core/src/sn/Config.ts"),M=i("./node_modules/pixi.js/dist/esm/pixi.js"),O=i("./core/src/sn/EventListenerCtn.ts"),R=i("./core/src/sn/DesignCast.ts");class C extends S.Layer{constructor(){super(),f.set(this,new R.GrpLayDesignCast(this.spLay,this)),d.set(this,""),p.set(this,""),m.set(this,""),this.lay=t=>this.laySub(t,(t=>{t&&x(C,r,"f",o).resume()})),g.set(this,0),v.set(this,0),this.record=()=>Object.assign(super.record(),{sBkFn:x(this,p,"f"),sBkFace:x(this,m,"f"),idc_hArg:x(this,f,"f").gethArg()}),this.dump=()=>super.dump()+`, "pic":"${x(this,d,"f")}"`,w.CmnLib.isDbg&&(this.setSp=t=>x(this,f,"f").setSp(t),this.cvsResize=()=>{super.cvsResize(),x(this,f,"f").cvsResize()})}static init(t,e,i,n){T(C,r,t,"f",o),T(C,r,e,"f",a),T(C,r,i,"f",h);const s=()=>{const t=x(C,r,"f",u)*x(C,r,"f",l);for(const e in C.hFn2VElm)C.hFn2VElm[e].volume=t};n.setNoticeChgVolume((t=>{T(C,r,t,"f",u),s()}),(t=>{T(C,r,t,"f",l),s()})),x(C,r,"f",h).crypto&&T(C,r,x(C,r,"m",b),"f",_)}static setEvtMng(t){T(C,r,t,"f",c)}static destroy(){x(C,r,"f",n).clear(),T(C,r,{},"f",s),C.hFn2ResAniSpr={},C.hFn2VElm={}}setSp(t){}laySub(t,e){const i=t.fn,r=t.face??"";if(x(this,f,"f").sethArg(t),!i)return super.lay(t),this.spLay.children.length>0&&this.setPos(t),T(this,p,"","f"),T(this,d,T(this,m,r,"f"),"f"),e(!1),!1;const n="fn"in t,s="face"in t;this.clearLay({filter:"true"}),n&&T(this,p,i,"f"),s&&T(this,m,r,"f"),super.lay(t),t.dx=0,t.dy=0;const o=C.csv2Sprites(T(this,d,i+(r?","+r:""),"f"),this.spLay,(e=>{("width"in t||"height"in t)&&(e.width=(0,w.argChk_Num)(t,"width",0),e.height=(0,w.argChk_Num)(t,"height",0)),T(this,g,e.width,"f"),T(this,v,e.height,"f"),S.Layer.setXY(e,t,this.spLay,!0),this.setSp(e)}),(i=>{S.Layer.setBlendmode(this.spLay,t),e(i)}));return o||e(!1),o}get width(){return x(this,g,"f")}get height(){return x(this,v,"f")}static csv2Sprites(t,e,i,n=(()=>{})){let u=!1;if("data:"===t.slice(0,5)){const r=()=>{const r=M.Sprite.from(t);e?.addChild(r),i(r),n(u)};return t in M.utils.TextureCache?r():(u=!0,(new M.Loader).add(t,t).load(r)),u}const l=[],c=new M.Loader;t.split(",").forEach(((t,e)=>{if(!t)throw"face属性に空要素が含まれます";const n=x(C,r,"f",s)[t]||{fn:t,dx:0,dy:0,blendmode:M.BLEND_MODES.NORMAL},o=0===e?i:t=>{t.x=n.dx,t.y=n.dy,t.blendMode=n.blendmode};if(l.push({fn:n.fn,fnc:o}),n.fn in C.hFn2ResAniSpr)return;if(n.fn in M.utils.TextureCache)return;if(n.fn in M.Loader.shared.resources)return;u=!0;const f=x(C,r,"f",a).searchPath(n.fn,A.Config.EXT_SPRITE),d=x(this,r,"f",h).crypto?{xhrType:".json"===f.slice(-5)?M.LoaderResource.XHR_RESPONSE_TYPE.TEXT:M.LoaderResource.XHR_RESPONSE_TYPE.BUFFER}:{};c.add({...d,name:n.fn,url:f})}));const f=t=>{for(const i of l){const n=x(C,r,"m",E).call(C,i.fn,t);e?.addChild(n),i.fnc(n)}n(u)};return u?c.use(((t,e)=>{x(this,r,"f",h).dec(t.extension,t.data).then((i=>x(C,r,"f",_).call(C,i,t,(()=>e?.())))).catch((e=>x(this,r,"f",o).errScript(`Graphic ロード失敗です fn:${t.name} ${e}`,!1)))})).load(((t,e)=>f(e))):f({}),u}static wv(t){const e=t.fn;if(!e)throw"fnは必須です";const i=C.hFn2VElm[e];if(!i||i.loop)return!1;if(i.ended)return delete C.hFn2VElm[e],!1;const n=()=>{i.removeEventListener("ended",n),delete C.hFn2VElm[e],x(this,r,"f",o).resume()};return i.addEventListener("ended",n,{once:!0,passive:!0}),x(C,r,"f",c).waitEvent((()=>{i.pause(),n()}),(0,w.argChk_Boolean)(t,"canskip",!0),(0,w.argChk_Boolean)(t,"global",!1))}setPos(t){S.Layer.setXY(0===this.spLay.children.length?this.spLay:this.spLay.children[0],t,this.spLay,!0)}static add_face(t){const e=t.name;if(!e)throw"nameは必須です";if(e in x(C,r,"f",s))throw"一つのname（"+e+"）に対して同じ画像を複数割り当てられません";const i=t.fn??e;return x(C,r,"f",s)[e]={fn:i,dx:(0,w.argChk_Num)(t,"dx",0)*w.CmnLib.retinaRate,dy:(0,w.argChk_Num)(t,"dy",0)*w.CmnLib.retinaRate,blendmode:S.Layer.getBlendmodeNum(t.blendmode||"")},!1}static clearFace2Name(){T(C,r,{},"f",s)}clearLay(t){super.clearLay(t);for(const t of this.spLay.removeChildren())t.destroy();T(this,p,"","f"),T(this,m,"","f"),T(this,d,"","f")}playback(t,e){if(super.playback(t,e),""===t.sBkFn&&""===t.sBkFace)return T(this,p,t.sBkFn,"f"),T(this,m,t.sBkFace,"f"),void x(this,f,"f").sethArg(t.idc_hArg);e.push(new Promise((e=>this.laySub({fn:t.sBkFn,face:t.sBkFace,left:t.x,top:t.y,alpha:t.alpha,blendmode:t.blendMode,rotation:t.rotation,scale_x:t.scale_x,scale_y:t.scale_y},(i=>{this.spLay.position.set(t.x,t.y),e()})))))}makeDesignCast(t){this.spLay.visible&&t(x(this,f,"f"))}cvsResize(){super.cvsResize()}showDesignCast(){x(this,f,"f").visible=!0}}e.GrpLayer=C,r=C,f=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=function(t){const e=/([^\d]+)\d+\.(\w+)/.exec(t[0]);if(!e)return;const i=e[1].length,r=-e[2].length-1;t.sort(((t,e)=>(0,w.int)(t.slice(i,r))>(0,w.int)(e.slice(i,r))?1:-1))},b=function(t,e,i){if(e.data=t,"bin"===e.extension&&(t instanceof HTMLImageElement?(e.texture=M.Texture.fromLoader(t,e.url,e.name),e.type=M.LoaderResource.TYPE.IMAGE,URL.revokeObjectURL(t.src)):t instanceof HTMLVideoElement&&(t.volume=x(C,r,"f",u),C.hFn2VElm[e.name]=t,e.type=M.LoaderResource.TYPE.VIDEO,URL.revokeObjectURL(t.src))),"json"!==e.extension)return void i();if("string"!=typeof t)return void i();const n=e.data=JSON.parse(t);if(e.type=M.LoaderResource.TYPE.JSON,!n.meta?.image)return void i();const s=(0,w.getFn)(n.meta.image),l=x(C,r,"f",a).searchPath(s,A.Config.EXT_SPRITE);(new M.Loader).use(((t,e)=>{x(this,r,"f",h).dec(t.extension,t.data).then((i=>{t.data=i,i instanceof HTMLImageElement&&(t.type=M.LoaderResource.TYPE.IMAGE,URL.revokeObjectURL(i.src)),e?.()})).catch((e=>x(this,r,"f",o).errScript(`Graphic ロード失敗です dec2res4Cripto fn:${t.name} ${e}`,!1)))})).add({name:s,url:l,xhrType:M.LoaderResource.XHR_RESPONSE_TYPE.BUFFER}).load(((t,s)=>{for(const i in t.resources){const s=M.Texture.from(t.resources[i].data).baseTexture,o=Object.values(n.frames);x(C,r,"m",y).call(C,o),C.hFn2ResAniSpr[e.name]={aTex:o.map((t=>new M.Texture(s,new M.Rectangle(t.frame.x,t.frame.y,t.frame.w,t.frame.h)))),meta:n.meta}}i()}))},E=function(t,e){const i=C.hFn2ResAniSpr[t];if(i){const t=new M.AnimatedSprite(i.aTex);return t.animationSpeed=i.meta.animationSpeed??1,t.play(),t}return t in M.utils.TextureCache?M.Sprite.from(t):t in C.hFn2VElm?M.Sprite.from(C.hFn2VElm[t]):t in e?new M.Sprite(e[t].texture):new M.Sprite},n={value:new O.EventListenerCtn},s={value:{}},o={value:void 0},a={value:void 0},h={value:void 0},u={value:1},l={value:1},c={value:void 0},C.hFn2ResAniSpr={},_={value:(t,e,i)=>{switch(e.type){case M.LoaderResource.TYPE.JSON:const t=e.spritesheet._frameKeys;x(C,r,"m",y).call(C,t),C.hFn2ResAniSpr[e.name]={aTex:t.map((t=>M.Texture.from(t))),meta:e.data.meta};break;case M.LoaderResource.TYPE.VIDEO:const i=e.data;i.volume=x(C,r,"f",u),C.hFn2VElm[e.name]=i}i()}},C.hFn2VElm={}},"./core/src/sn/Layer.ts":function(t,e,i){"use strict";var r,n,s=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;const o=i("./node_modules/pixi.js/dist/esm/pixi.js"),a=i("./core/src/sn/CmnLib.ts");class h{constructor(){this.layname="",this.name_="",this.spLay=new o.Sprite(o.Texture.EMPTY)}set name(t){this.name_=t}get name(){return this.name_}get alpha(){return this.spLay.alpha}set alpha(t){this.spLay.alpha=t}get height(){return this.spLay.height}get rotation(){return this.spLay.angle}set rotation(t){this.spLay.angle=t}get scale_x(){return this.spLay.scale.x}set scale_x(t){this.spLay.scale.x=t}get scale_y(){return this.spLay.scale.y}set scale_y(t){this.spLay.scale.y=t}get width(){return this.spLay.width}get x(){return this.spLay.x}set x(t){this.spLay.x=t}get y(){return this.spLay.y}set y(t){this.spLay.y=t}destroy(){}lay(t){return"alpha"in t&&(this.spLay.alpha=(0,a.argChk_Num)(t,"alpha",1)),h.setBlendmode(this.spLay,t),("pivot_x"in t||"pivot_y"in t)&&this.spLay.pivot.set((0,a.argChk_Num)(t,"pivot_x",this.spLay.pivot.x),(0,a.argChk_Num)(t,"pivot_y",this.spLay.pivot.y)),"rotation"in t&&(this.spLay.angle=(0,a.argChk_Num)(t,"rotation",0)),("scale_x"in t||"scale_y"in t)&&this.spLay.scale.set((0,a.argChk_Num)(t,"scale_x",this.spLay.scale.x),(0,a.argChk_Num)(t,"scale_y",this.spLay.scale.y)),"visible"in t&&(this.spLay.visible=(0,a.argChk_Boolean)(t,"visible",!0)),!1}static setBlendmode(t,e){const i=e.blendmode;if(!i)return;const r=h.getBlendmodeNum(i);t&&(t.blendMode=r),t.children.forEach((t=>{t&&(t.blendMode=r)}))}static getBlendmodeNum(t){if(!t)return o.BLEND_MODES.NORMAL;const e=s(h,r,"f",n)[t];if(void 0!==e)return e;throw`${t} はサポートされない blendmode です`}clearLay(t){this.spLay.alpha=1,this.spLay.blendMode=o.BLEND_MODES.NORMAL,this.spLay.pivot.set(0,0),this.spLay.angle=0,this.spLay.scale.set(1,1),(0,a.argChk_Boolean)(t,"filter",!1)&&(this.spLay.filters=[])}copy(t,e){const i=this.name_;this.playback(t.record(),e),this.name=i}record(){return{name:this.name_,idx:this.spLay.parent.getChildIndex(this.spLay),alpha:this.spLay.alpha,blendMode:this.spLay.blendMode,rotation:this.spLay.angle,scale_x:this.spLay.scale.x,scale_y:this.spLay.scale.y,pivot_x:this.spLay.pivot.x,pivot_y:this.spLay.pivot.y,x:this.spLay.x,y:this.spLay.y,visible:this.spLay.visible}}playback(t,e){this.name=t.name,this.clearLay({filter:"true"}),this.spLay.alpha=t.alpha,this.spLay.blendMode=t.blendMode,this.spLay.angle=t.rotation,this.spLay.scale.set(t.scale_x,t.scale_y),this.spLay.pivot.set(t.pivot_x,t.pivot_y),this.spLay.position.set(t.x,t.y),this.spLay.visible=t.visible}snapshot(t,e){t.render(this.spLay,{clear:!1}),e()}snapshot_end(){}makeDesignCast(t){}makeDesignCastChildren(t){}showDesignCast(){}showDesignCastChildren(){}cvsResize(){}cvsResizeChildren(){}dump(){return` "idx":${this.spLay.parent.getChildIndex(this.spLay)}, "visible":"${this.spLay.visible}", "left":${this.spLay.x}, "top":${this.spLay.y}, "alpha":${this.spLay.alpha}, "rotation":${this.spLay.angle}, "name":"${this.name_}", "scale_x":${this.spLay.scale.x}, "scale_y":${this.spLay.scale.y}`}static setXY(t,e,i,r=!1,n=!1){if(e.pos)return void h.setXYByPos(t,e.pos,i);const s=t.getBounds(),o=i.scale.x<0?-i.scale.x:i.scale.x,u=1===o?s.width:s.width*o,l=i.scale.y<0?-i.scale.y:i.scale.y,c=1===l?s.height:s.height*l;let f=i.x;"left"in e?(f=(0,a.argChk_Num)(e,"left",0),f>-1&&f<1&&(f*=a.CmnLib.stageW)):"center"in e?(f=(0,a.argChk_Num)(e,"center",0),f>-1&&f<1&&(f*=a.CmnLib.stageW),f-=(n?u/3:u)/2):"right"in e?(f=(0,a.argChk_Num)(e,"right",0),f>-1&&f<1&&(f*=a.CmnLib.stageW),f-=n?u/3:u):"s_right"in e&&(f=(0,a.argChk_Num)(e,"s_right",0),f>-1&&f<1&&(f*=a.CmnLib.stageW),f=a.CmnLib.stageW-f-(n?u/3:u)),i.x=(0,a.int)((i.scale.x<0?f+(n?u/3:u):f)*a.CmnLib.retinaRate);let d=i.y;"top"in e?(d=(0,a.argChk_Num)(e,"top",0),d>-1&&d<1&&(d*=a.CmnLib.stageH)):"middle"in e?(d=(0,a.argChk_Num)(e,"middle",0),d>-1&&d<1&&(d*=a.CmnLib.stageH),d-=c/2):"bottom"in e?(d=(0,a.argChk_Num)(e,"bottom",0),d>-1&&d<1&&(d*=a.CmnLib.stageH),d-=c):"s_bottom"in e&&(d=(0,a.argChk_Num)(e,"s_bottom",0),d>-1&&d<1&&(d*=a.CmnLib.stageH),d=a.CmnLib.stageH-d-c),i.y=(0,a.int)((i.scale.y<0?d+c:d)*a.CmnLib.retinaRate),r&&("left"in e||"center"in e||"right"in e||"s_right"in e||"top"in e||"middle"in e||"bottom"in e||"s_bottom"in e||h.setXYByPos(t,"c",i))}static setXYByPos(t,e,i){if("stay"===e)return;if(null===t)throw"setXYByPos base === null";if(null===i)throw"setXYByPos result === null";const r=t.getBounds(),n=i.scale.x<0?-i.scale.x:i.scale.x,s=1===n?r.width:r.width*n,o=i.scale.y<0?-i.scale.y:i.scale.y,h=1===o?r.height:r.height*o;let u=0;u=e&&"c"!==e?"r"===e?a.CmnLib.stageW-.5*s:"l"===e?.5*s:(0,a.int)(e)*a.CmnLib.retinaRate:.5*a.CmnLib.stageW,i.x=(0,a.int)(u-.5*s),i.y=a.CmnLib.stageH-h,i.scale.x<0&&(i.x+=s),i.scale.y<0&&(i.y+=h)}static setXYCenter(t){const e=t.getBounds();t.x=.5*(a.CmnLib.stageW-e.width),t.y=.5*(a.CmnLib.stageH-e.height)}}e.Layer=h,r=h,n={value:{normal:o.BLEND_MODES.NORMAL,add:o.BLEND_MODES.ADD,multiply:o.BLEND_MODES.MULTIPLY,screen:o.BLEND_MODES.SCREEN}}},"./core/src/sn/LayerMng.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C,P,I,N,D,L,k,B,F,j,G,U,X,z,H,Y,W,V,$,q,Z,J,K,Q,tt,et,it,rt,nt,st,ot,at,ht,ut,lt,ct,ft,dt,pt,mt,gt,vt,_t,yt,bt,Et,xt=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},Tt=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.LayerMng=void 0;const St=i("./core/src/sn/CmnLib.ts"),wt=i("./core/src/sn/CmnTween.ts"),At=i("./core/src/sn/Pages.ts"),Mt=i("./core/src/sn/GrpLayer.ts"),Ot=i("./core/src/sn/TxtLayer.ts"),Rt=i("./core/src/sn/RubySpliter.ts"),Ct=i("./core/src/sn/TxtStage.ts"),Pt=i("./core/src/sn/FrameMng.ts"),It=i("./core/src/sn/Button.ts"),Nt=i("./core/src/sn/DesignCast.ts"),Dt=i("./node_modules/@tweenjs/tween.js/dist/tween.esm.js"),Lt=i("./node_modules/pixi.js/dist/esm/pixi.js");class kt{constructor(t,e,i,n,A,F,j,G,Z,Q){this.cfg=t,this.hTag=e,this.appPixi=i,this.val=n,this.main=A,this.scrItr=F,this.sys=j,this.sndMng=G,this.alzTagArg=Z,this.prpPrs=Q,r.add(this),s.set(this,void 0),o.set(this,new Lt.Container),a.set(this,new Lt.Container),h.set(this,void 0),u.set(this,(()=>(0,Dt.update)())),l.set(this,{attach:t=>(Nt.DesignCast.leaveMode(),!1),continue:t=>(Nt.DesignCast.leaveMode(),!1),disconnect:t=>(Nt.DesignCast.leaveMode(),!1),_enterDesign:t=>(Nt.DesignCast.enterMode(),xt(this,x,"f").forEach((t=>{const e=xt(this,E,"f")[t].fore;e.makeDesignCastChildren((t=>t.make())),e.makeDesignCast((t=>t.make()))})),xt(this,r,"m",d).call(this,xt(this,T,"f")),!1),_replaceToken:(t,e)=>(Nt.DesignCast.replaceToken(e),!1),_selectNode:(t,e)=>(xt(this,r,"m",d).call(this,e.node),!1)}),c.set(this,""),f.set(this,""),this.getFrmDisabled=t=>xt(this,h,"f").getFrmDisabled(t),p.set(this,null),m.set(this,void 0),v.set(this,((t,e=this.getCurrentTxtlayForeNeedErr(),i=!0)=>e.tagCh("｜　《"+t+"》"))),this.goTxt=()=>{},this.breakLine=()=>{},this.breakPage=()=>{},E.set(this,{}),x.set(this,[]),T.set(this,""),S.set(this,""),O.set(this,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform sampler2D rule;\nuniform float vague;\nuniform float tick;\n\nuniform vec4 inputPixel;\nuniform highp vec4 outputFrame;\nvec2 getUV(vec2 coord) {\n\treturn coord * inputPixel.xy / outputFrame.zw;\n}\n\nvoid main(void) {\n\tvec4 fg = texture2D(uSampler, vTextureCoord);\n\tvec4 ru = texture2D(rule, getUV(vTextureCoord));\n\n\tfloat v = ru.r - tick;\n\tif (abs(v) < vague) {\n\t\tfloat f_a = fg.a *(0.5 +v /vague *0.5);\n\n\t\tgl_FragColor.rgb = fg.rgb *f_a;\n\t\tgl_FragColor.a = f_a;\n\t}\n\telse {\n\t\tgl_FragColor = (v >= 0.0)? fg : vec4(0);\n\t}\n}"),R.set(this,{rule:Lt.Texture.EMPTY,vague:0,tick:0}),C.set(this,new Lt.Filter(void 0,xt(this,O,"f"),xt(this,R,"f"))),P.set(this,Lt.RenderTexture.create({width:St.CmnLib.stageW,height:St.CmnLib.stageH})),I.set(this,new Lt.Sprite(xt(this,P,"f"))),N.set(this,Lt.RenderTexture.create({width:St.CmnLib.stageW,height:St.CmnLib.stageH})),D.set(this,new Lt.Sprite(xt(this,N,"f"))),L.set(this,[]),B.set(this,{tw:null,resume:!1}),H.set(this,{}),K.set(this,(t=>{throw xt(this,rt,"f").call(this),0})),tt.set(this,(t=>{throw xt(this,rt,"f").call(this),0})),it.set(this,void 0),rt.set(this,(()=>{throw"文字レイヤーがありません。文字表示や操作する前に、[add_lay layer=（レイヤ名） class=txt]で文字レイヤを追加して下さい"})),st.set(this,{text:""}),ot.set(this,[]);const et=document.getElementById(St.CmnLib.SN_ID),nt=()=>{St.CmnLib.cvsResize(et)&&(this.cvsResizeDesign(),xt(this,f,"f")?xt(this,x,"f").forEach((t=>xt(this,E,"f")[t].fore.cvsResizeChildren())):xt(this,x,"f").forEach((t=>xt(this,E,"f")[t].fore.cvsResize())),xt(this,h,"f").cvsResize())};if(St.CmnLib.isMobile)globalThis.addEventListener("orientationchange",nt,{passive:!0});else{let t=0;globalThis.addEventListener("resize",(()=>{t||(t=setTimeout((()=>{t=0,nt()}),500))}),{passive:!0})}St.CmnLib.cvsResize(et),Ot.TxtLayer.init(t,e,n,(t=>this.recText(t)),(t=>xt(this,E,"f")[t.layname].fore===t)),Mt.GrpLayer.init(A,t,j,G),It.Button.init(t),Tt(this,h,new Pt.FrameMng(this.cfg,this.hTag,this.appPixi,this.val,A,this.sys,xt(this,H,"f")),"f"),j.hFactoryCls.grp=()=>new Mt.GrpLayer,j.hFactoryCls.txt=()=>new Ot.TxtLayer,e.loadplugin=t=>xt(this,r,"m",y).call(this,t),e.snapshot=t=>xt(this,r,"m",_).call(this,t),e.add_lay=t=>xt(this,r,"m",b).call(this,t),e.clear_lay=t=>xt(this,r,"m",M).call(this,t),e.finish_trans=()=>xt(this,r,"m",X).call(this),e.lay=t=>xt(this,r,"m",w).call(this,t),e.trans=t=>xt(this,r,"m",k).call(this,t),e.wt=t=>xt(this,r,"m",U).call(this,t),e.quake=t=>xt(this,r,"m",z).call(this,t),e.stop_quake=t=>e.finish_trans(t),e.wq=t=>e.wt(t),e.pause_tsy=t=>xt(this,r,"m",$).call(this,t),e.resume_tsy=t=>xt(this,r,"m",q).call(this,t),e.stop_tsy=t=>xt(this,r,"m",V).call(this,t),e.tsy=t=>xt(this,r,"m",Y).call(this,t),e.wait_tsy=t=>xt(this,r,"m",W).call(this,t),e.ch=t=>xt(this,r,"m",J).call(this,t),e.clear_text=t=>xt(this,r,"m",at).call(this,t),e.current=t=>xt(this,tt,"f").call(this,t),e.endlink=t=>xt(this,r,"m",ht).call(this,t),e.er=t=>xt(this,r,"m",ut).call(this,t),e.graph=t=>xt(this,r,"m",lt).call(this,t),e.link=t=>xt(this,r,"m",ct).call(this,t),e.r=t=>xt(this,r,"m",ft).call(this,t),e.rec_ch=t=>xt(this,r,"m",pt).call(this,t),e.rec_r=()=>xt(this,r,"m",dt).call(this),e.reset_rec=t=>xt(this,r,"m",mt).call(this,t),e.ruby2=t=>xt(this,r,"m",gt).call(this,t),e.span=t=>xt(this,r,"m",vt).call(this,t),e.tcy=t=>xt(this,r,"m",_t).call(this,t),e.add_face=t=>Mt.GrpLayer.add_face(t),e.wv=t=>Mt.GrpLayer.wv(t),e.dump_lay=t=>xt(this,r,"m",yt).call(this,t),e.enable_event=t=>xt(this,r,"m",bt).call(this,t),e.button=t=>xt(this,r,"m",Et).call(this,t),t.existsBreakline&&(this.breakLine=()=>xt(this,v,"f").call(this,'grp｜{"id":"break","pic":"breakline"}')),t.existsBreakpage&&(this.breakPage=()=>xt(this,v,"f").call(this,'grp｜{"id":"break","pic":"breakpage"}'));const wt=new Lt.Graphics;wt.beginFill(t.oCfg.init.bg_color,1),wt.lineStyle(0,t.oCfg.init.bg_color),wt.drawRect(0,0,St.CmnLib.stageW,St.CmnLib.stageH),wt.endFill(),xt(this,o,"f").addChild(wt.clone()),xt(this,a,"f").addChild(wt),xt(this,a,"f").visible=!1,Tt(this,s,this.appPixi.stage,"f"),xt(this,s,"f").addChild(xt(this,a,"f")),xt(this,s,"f").addChild(xt(this,o,"f")),xt(this,s,"f").addChild(xt(this,I,"f")),xt(this,s,"f").addChild(xt(this,D,"f")),this.appPixi.ticker.add(xt(this,u,"f"));const At=(t,e)=>{xt(this,r,"m",g).call(this,Number(e))};At(0,n.getVal("sys:TextLayer.Back.Alpha",1)),n.defValTrg("sys:TextLayer.Back.Alpha",At);const Rt=(t,e)=>It.Button.fontFamily=e;Rt(0,n.getVal("tmp:sn.button.fontFamily",It.Button.fontFamily)),n.defValTrg("tmp:sn.button.fontFamily",Rt),n.defTmp("const.sn.log.json",(()=>JSON.stringify(xt(this,st,"f").text?[...xt(this,ot,"f"),xt(this,st,"f")]:xt(this,ot,"f")))),n.defTmp("const.sn.last_page_text",(()=>this.getCurrentTxtlayFore()?.pageText??"")),St.CmnLib.isDbg&&(Nt.DesignCast.init(this.appPixi,j,F,Q,Z,this.cfg,xt(this,E,"f")),this.cvsResizeDesign=()=>Nt.DesignCast.cvsResizeDesign(),j.addHook(((t,e)=>{xt(this,l,"f")[t]?.(t,e)&&delete xt(this,l,"f")[t]})))}cvsResizeDesign(){}cover(t,e=0){xt(this,p,"f")&&(xt(this,s,"f").removeChild(xt(this,p,"f")),xt(this,p,"f").destroy(),Tt(this,p,null,"f")),t&&(Tt(this,p,new Lt.Graphics,"f"),xt(this,p,"f").beginFill(e),xt(this,p,"f").lineStyle(0,e),xt(this,p,"f").drawRect(0,0,St.CmnLib.stageW,St.CmnLib.stageH),xt(this,p,"f").endFill(),xt(this,s,"f").addChild(xt(this,p,"f")))}setEvtMng(t){Tt(this,m,t,"f"),xt(this,h,"f").setEvtMng(t),Mt.GrpLayer.setEvtMng(t)}before_destroy(){for(const t in xt(this,E,"f"))xt(this,E,"f")[t].destroy()}destroy(){Mt.GrpLayer.destroy(),Rt.RubySpliter.destroy(),Ct.TxtStage.destroy(),xt(this,h,"f").destroy(),this.stopAllTw(),this.appPixi.ticker.remove(xt(this,u,"f")),Tt(kt,n,10,"f",Z)}stopAllTw(){Tt(this,H,{},"f"),(0,Dt.removeAll)()}clearBreak(){this.getCurrentTxtlayFore()&&(this.clearBreak=()=>xt(this,v,"f").call(this,"del｜break"),this.clearBreak())}clickTxtLay(){if(!this.getCurrentTxtlayFore())return;const t=xt(this,r,"m",F).call(this),e=t.length;for(let i=0;i<e;++i){const e=t[i],r=xt(this,E,"f")[e];if(r.fore instanceof Ot.TxtLayer&&!r.fore.click())break}}static get msecChWait(){return xt(kt,n,"f",Z)}static set msecChWait(t){Tt(kt,n,t,"f",Z)}setNormalWaitTxtLayer(){Tt(kt,n,this.scrItr.normalWait,"f",Z)}getCurrentTxtlayForeNeedErr(){return xt(this,rt,"f").call(this),this.getCurrentTxtlayFore()}getCurrentTxtlayFore(){if(xt(this,it,"f"))return xt(this,it,"f").fore}recText(t,e=!1){const i=xt(this,st,"f");if(e)return i.text&&(i.text=String(i.text).replaceAll("</span><span class='sn_ch'>",""),xt(this,ot,"f").push(i)>this.cfg.oCfg.log.max_len&&Tt(this,ot,xt(this,ot,"f").slice(-this.cfg.oCfg.log.max_len),"f")),void Tt(this,st,{text:""},"f");i.text=t.replace(/\\`/,"`"),this.val.setVal_Nochk("save","const.sn.sLog",String(this.val.getVal("const.sn.log.json")))}record(){const t={};return xt(this,x,"f").forEach((e=>{const i=xt(this,E,"f")[e];t[e]={cls:i.cls,fore:i.fore.record(),back:i.back.record()}})),t}playback(t,e){Tt(this,ot,JSON.parse(String(this.val.getVal("save:const.sn.sLog"))),"f"),Tt(this,st,{text:""},"f");const i=[],r=[];for(const e in t){const n=t[e];r.push({layer:e,idx:n.fore.idx});const s=xt(this,E,"f")[e]??=new At.Pages(e,n.cls,xt(this,o,"f"),xt(this,a,"f"),{},this.sys,this.val,{isWait:!1});s.fore.playback(n.fore,i),s.back.playback(n.back,i)}const n=xt(this,o,"f").children.length;Promise.allSettled(i).then((()=>{r.sort((function(t,e){return t.idx<e.idx?-1:t.idx>e.idx?1:0})),r.forEach((t=>{const e=xt(this,E,"f")[t.layer];if(!e)return;const i=n>t.idx?t.idx:n-1;xt(this,o,"f").setChildIndex(e.fore.spLay,i),xt(this,a,"f").setChildIndex(e.back.spLay,i)})),e()})).catch((t=>console.error("fn:LayerMng.ts playback e:%o",t)))}}e.LayerMng=kt,n=kt,s=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,v=new WeakMap,E=new WeakMap,x=new WeakMap,T=new WeakMap,S=new WeakMap,O=new WeakMap,R=new WeakMap,C=new WeakMap,P=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,L=new WeakMap,B=new WeakMap,H=new WeakMap,K=new WeakMap,tt=new WeakMap,it=new WeakMap,rt=new WeakMap,st=new WeakMap,ot=new WeakMap,r=new WeakSet,d=function(t){var e,i;e=this,i=this,[{set value(t){Tt(e,c,t,"f")}}.value,{set value(t){Tt(i,f,t,"f")}}.value=""]=t.split("/");const r=xt(this,E,"f")[xt(this,c,"f")];r&&(Nt.DesignCast.allHide(),xt(this,f,"f")?r.fore.showDesignCastChildren():r.fore.showDesignCast())},g=function(t){xt(this,r,"m",F).call(this).forEach((e=>{const i=xt(this,E,"f")[e];i.fore instanceof Ot.TxtLayer&&(i.fore.chgBackAlpha(t),i.back.chgBackAlpha(t))}))},_=function(t){const e=t.fn?"userdata:/"===t.fn.slice(0,10)?t.fn:`downloads:/${t.fn+(0,St.getDateStr)("-","_","","_")}.png`:`downloads:/snapshot${(0,St.getDateStr)("-","_","","_")}.png`,i=this.cfg.searchPath(e);if(this.sys.canCapturePage(i))return!1;const n=(0,St.getExt)(i),h=t.b_color??this.cfg.oCfg.init.bg_color,u=(0,Lt.autoDetectRenderer)({width:(0,St.argChk_Num)(t,"width",St.CmnLib.stageW),height:(0,St.argChk_Num)(t,"height",St.CmnLib.stageH),backgroundAlpha:h>16777216&&"png"===n?0:1,antialias:(0,St.argChk_Boolean)(t,"smoothing",!1),preserveDrawingBuffer:!0,backgroundColor:16777215&(0,St.uint)(h),autoDensity:!0}),l=[],c="back"!==t.page?"fore":"back";return xt(this,B,"f").tw?l.push(new Promise((t=>{xt(this,a,"f").visible=!0,xt(this,L,"f").forEach((t=>u.render(t,{clear:!1}))),xt(this,a,"f").visible=!1,xt(this,I,"f").visible=!0,xt(this,o,"f").filters=xt(this,D,"f").filters,xt(this,o,"f").visible=!0,u.render(xt(this,o,"f"),{clear:!1}),xt(this,o,"f").visible=!1,xt(this,o,"f").filters=[],t()}))):xt(this,r,"m",F).call(this,t.layer).forEach((t=>l.push(new Promise((e=>xt(this,E,"f")[t][c].snapshot(u,(()=>e()))))))),Promise.all(l).then((async()=>{const e=Lt.RenderTexture.create({width:u.width,height:u.height,transform:!0});u.render(xt(this,s,"f"),{renderTexture:e}),await this.sys.savePic(i,u.plugins.extract.base64(Lt.Sprite.from(e))),xt(this,B,"f").tw||xt(this,r,"m",F).call(this,t.layer).forEach((t=>xt(this,E,"f")[t][c].snapshot_end())),u.destroy(!0)})),!1},y=function(t){const e=t.fn;if(!e)throw"fnは必須です";const i=(0,St.argChk_Boolean)(t,"join",!0);if("css"!==(0,St.getExt)(e))throw"サポートされない拡張子です";return(async()=>{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok.");(0,St.addStyle)(await t.text()),i&&this.main.resume()})(),i},b=function(t){const e=t.layer;if(!e)throw"layerは必須です";if(e.includes(","))throw"layer名に「,」は使えません";if(e in xt(this,E,"f"))throw`layer【${e}】はすでにあります`;const i=t.class;if(!i)throw"clsは必須です";const s={isWait:!1};switch(xt(this,E,"f")[e]=new At.Pages(e,i,xt(this,o,"f"),xt(this,a,"f"),t,this.sys,this.val,s),xt(this,x,"f").push(e),i){case"txt":xt(this,T,"f")||(Tt(this,rt,(()=>{}),"f"),Tt(this,K,xt(this,r,"m",Q),"f"),Tt(this,tt,xt(this,r,"m",et),"f"),this.hTag.current({layer:e}),this.goTxt=()=>{this.val.getVal("sn.skip.enabled")?Tt(kt,n,0,"f",Z):this.setNormalWaitTxtLayer(),xt(this,r,"m",F).call(this).forEach((t=>{const e=xt(this,E,"f")[t];e.fore instanceof Ot.TxtLayer&&xt(this,v,"f").call(this,"gotxt｜",e.fore,!1)}))}),this.val.setVal_Nochk("save","const.sn.layer."+(e??xt(this,T,"f"))+".enabled",!0);break;case"grp":if(xt(this,S,"f"))break;Tt(this,S,e,"f")}return this.scrItr.recodeDesign(t),s.isWait},w=function(t){const e=xt(this,r,"m",nt).call(this,t),i=xt(this,E,"f")[e],n=i.back.spLay,s=i.fore.spLay;if((0,St.argChk_Boolean)(t,"float",!1))xt(this,a,"f").setChildIndex(n,xt(this,a,"f").children.length-1),xt(this,o,"f").setChildIndex(s,xt(this,o,"f").children.length-1),xt(this,r,"m",A).call(this);else if(t.index)(0,St.argChk_Num)(t,"index",0)&&(xt(this,a,"f").setChildIndex(n,t.index),xt(this,o,"f").setChildIndex(s,t.index),xt(this,r,"m",A).call(this));else if(t.dive){const i=t.dive;let h=0;if(e===i)throw"[lay] 属性 layerとdiveが同じ【"+i+"】です";const u=xt(this,E,"f")[i];if(!u)throw"[lay] 属性 dive【"+i+"】が不正です。レイヤーがありません";const l=u.back,c=u.fore,f=xt(this,a,"f").getChildIndex(l.spLay),d=xt(this,o,"f").getChildIndex(c.spLay);h=f<d?f:d,h>xt(this,a,"f").getChildIndex(n)&&--h,xt(this,o,"f").setChildIndex(s,h),xt(this,a,"f").setChildIndex(n,h),xt(this,r,"m",A).call(this)}return t[":id_tag"]=i.fore.name.slice(0,-7),this.scrItr.recodeDesign(t),i.lay(t)},A=function(){Tt(this,x,xt(this,r,"m",G).call(this),"f")},M=function(t){return xt(this,r,"m",j).call(this,t,(e=>{const i=xt(this,E,"f")[xt(this,r,"m",nt).call(this,{layer:e})];"both"===t.page?(i.fore.clearLay(t),i.back.clearLay(t)):i.getPage(t).clearLay(t)})),!1},k=function(t){xt(this,r,"m",X).call(this);const e=wt.CmnTween.ease(t.ease);Tt(this,L,[],"f");const i={};xt(this,r,"m",F).call(this,t.layer).forEach((t=>i[t]=!0)),xt(this,r,"m",F).call(this).forEach((t=>xt(this,L,"f").push(xt(this,E,"f")[t][i[t]?"back":"fore"].spLay))),xt(this,P,"f").resize(St.CmnLib.stageW,St.CmnLib.stageH),this.appPixi.renderer.render(xt(this,a,"f"),{renderTexture:xt(this,P,"f")}),xt(this,N,"f").resize(St.CmnLib.stageW,St.CmnLib.stageH),this.appPixi.renderer.render(xt(this,o,"f"),{renderTexture:xt(this,N,"f")});const n=()=>{xt(this,a,"f").visible=!0,xt(this,L,"f").forEach((t=>{this.appPixi.renderer.render(t,{renderTexture:xt(this,P,"f"),clear:!1})})),xt(this,a,"f").visible=!1,xt(this,I,"f").visible=!0,xt(this,o,"f").visible=!0,this.appPixi.renderer.render(xt(this,o,"f"),{renderTexture:xt(this,N,"f")}),xt(this,o,"f").visible=!1,xt(this,D,"f").visible=!0};xt(this,D,"f").alpha=1;const s=()=>{var t,e;this.appPixi.ticker&&this.appPixi.ticker.remove(n),t=this,e=this,[{set value(e){Tt(t,o,e,"f")}}.value,{set value(t){Tt(e,a,t,"f")}}.value]=[xt(this,a,"f"),xt(this,o,"f")];const r=[];for(const t in xt(this,E,"f")){const e=xt(this,E,"f")[t];if(i[t]){e.transPage(r);continue}const n=xt(this,o,"f").getChildIndex(e.back.spLay);xt(this,o,"f").removeChild(e.back.spLay),xt(this,a,"f").removeChild(e.fore.spLay),xt(this,o,"f").addChildAt(e.fore.spLay,n),xt(this,a,"f").addChildAt(e.back.spLay,n)}Promise.allSettled(r),xt(this,o,"f").visible=!0,xt(this,a,"f").visible=!1,xt(this,I,"f").visible=!1,xt(this,D,"f").visible=!1,xt(this,B,"f").tw?.stop(),xt(this,B,"f").resume&&this.main.resume(),Tt(this,B,{tw:null,resume:!1},"f")};Tt(this,B,{tw:null,resume:!1},"f");const h=(0,St.argChk_Num)(t,"time",0);if(0===h||xt(this,m,"f").isSkipKeyDown())return s(),!1;const u="glsl"in t;if(!u&&!("rule"in t))return xt(this,D,"f").filters=[],xt(this,B,"f").tw=new Dt.Tween(xt(this,D,"f")).to({alpha:0},h).delay((0,St.argChk_Num)(t,"delay",0)).easing(e).onComplete(s).start(),this.appPixi.ticker.add(n),!1;const l=u?new Lt.Filter(void 0,t.glsl,xt(this,R,"f")):xt(this,C,"f");if(l.uniforms.vague=(0,St.argChk_Num)(t,"vague",.04),l.uniforms.tick=0,xt(this,B,"f").tw=new Dt.Tween(l.uniforms).to({tick:1},h).delay((0,St.argChk_Num)(t,"delay",0)).easing(e).onComplete(s),xt(this,D,"f").filters=[l],u)return xt(this,B,"f").tw.start(),this.appPixi.ticker.add(n),!1;if(!t.rule)throw"ruleが指定されていません";return Mt.GrpLayer.csv2Sprites(t.rule,null,(t=>{l.uniforms.rule=t.texture,t.destroy(),xt(this,B,"f").tw?.start(),this.appPixi.ticker.add(n)})),!1},F=function(t=""){return t?t.split(","):xt(this,x,"f")},j=function(t,e){const i=xt(this,r,"m",F).call(this,t.layer);return i.forEach((t=>{if(!t)return;const i=xt(this,E,"f")[t];if(!i)throw"存在しないlayer【"+t+"】です";e(t,i)})),i},G=function(t=""){return xt(this,r,"m",F).call(this,t).sort(((t,e)=>{const i=xt(this,o,"f").getChildIndex(xt(this,E,"f")[t].fore.spLay),r=xt(this,o,"f").getChildIndex(xt(this,E,"f")[e].fore.spLay);return i<r?-1:i>r?1:0}))},U=function(t){return!!xt(this,B,"f").tw&&(xt(this,B,"f").resume=!0,xt(this,m,"f").waitLimitedEvent(t,(()=>xt(this,r,"m",X).call(this))))},X=function(){return xt(this,B,"f").tw?.end(),!1},z=function(t){if(xt(this,r,"m",X).call(this),this.val.getVal("tmp:sn.skip.enabled"))return!1;if(xt(this,m,"f").isSkipKeyDown())return!1;const e=[];xt(this,r,"m",F).call(this,t.layer).forEach((t=>{e.push(xt(this,E,"f")[t].fore.spLay)})),xt(this,N,"f").resize(St.CmnLib.stageW,St.CmnLib.stageH);const i=()=>{xt(this,o,"f").visible=!0,e.forEach((t=>this.appPixi.renderer.render(t,{renderTexture:xt(this,N,"f"),clear:!1}))),xt(this,o,"f").visible=!1};xt(this,D,"f").visible=!0,xt(this,D,"f").alpha=1;const n=wt.CmnTween.ease(t.ease),s=(0,St.uint)((0,St.argChk_Num)(t,"hmax",10)),a=(0,St.uint)((0,St.argChk_Num)(t,"vmax",10)),h=0===s?()=>{}:()=>xt(this,D,"f").x=Math.round(Math.random()*s*2)-s,u=0===a?()=>{}:()=>xt(this,D,"f").y=Math.round(Math.random()*a*2)-a;xt(this,D,"f").filters=[];const l=(0,St.argChk_Num)(t,"repeat",1),c=new Dt.Tween(xt(this,D,"f")).to({x:0,y:0},(0,St.argChk_Num)(t,"time",NaN)).delay((0,St.argChk_Num)(t,"delay",0)).easing(n).onUpdate((()=>{h(),u()})).repeat(0===l?1/0:l-1).yoyo((0,St.argChk_Boolean)(t,"yoyo",!1)).onComplete((()=>{this.appPixi.ticker?.remove(i),xt(this,o,"f").visible=!0,xt(this,D,"f").visible=!1,xt(this,D,"f").x=0,xt(this,D,"f").y=0,xt(this,B,"f").tw?.stop(),xt(this,B,"f").resume&&this.main.resume(),Tt(this,B,{tw:null,resume:!1},"f")})).start();return Tt(this,B,{tw:c,resume:!1},"f"),this.appPixi.ticker.add(i),!1},Y=function(t){if(!t.layer)throw"layerは必須です";const e=xt(this,r,"m",nt).call(this,t),i=xt(this,E,"f")[e].fore,n=(0,St.cnvTweenArg)(t,i),s=(0,St.argChk_Num)(t,"repeat",1),o=t.name??t.layer,a=new Dt.Tween(i).to(n,(0,St.argChk_Num)(t,"time",NaN)*(xt(this,m,"f").isSkipKeyDown()||Boolean(this.val.getVal("tmp:sn.skip.enabled"))?0:1)).delay((0,St.argChk_Num)(t,"delay",0)).easing(wt.CmnTween.ease(t.ease)).repeat(0===s?1/0:s-1).yoyo((0,St.argChk_Boolean)(t,"yoyo",!1)).onComplete((()=>{const t=xt(this,H,"f")[o];t&&(delete xt(this,H,"f")[o],t.tw?.stop(),t.resume&&this.main.resume(),t.onEnd?.())}));if("chain"in t){const e=xt(this,H,"f")[t.chain??""];if(!e?.tw)throw`${t.chain}は存在しない・または終了したトゥイーンです`;delete e.onEnd,e.tw.chain(a)}else a.start();const h=(0,St.argChk_Boolean)(t,"arrive",!1),u=(0,St.argChk_Boolean)(t,"backlay",!1);return xt(this,H,"f")[o]={tw:a,resume:!1,onEnd:()=>{if(h&&Object.assign(i,n),u){const t=xt(this,E,"f")[e].back.spLay;for(const e in St.hMemberCnt)t[e]=i[e]}}},!1},W=function(t){const e="id"in t?`frm\n${t.id}`:t.name??t.layer;if(!e)throw"トゥイーンが指定されていません";const i=xt(this,H,"f")[e];return!!i?.tw&&(i.resume=xt(this,m,"f").waitEvent((()=>i.tw?.end()),(0,St.argChk_Boolean)(t,"canskip",!0),(0,St.argChk_Boolean)(t,"global",!1)))},V=function(t){const e="id"in t?`frm\n${t.id}`:t.name??t.layer;if(!e)throw"トゥイーンが指定されていません";return xt(this,H,"f")[e]?.tw?.end(),!1},$=function(t){const e="id"in t?`frm\n${t.id}`:t.name??t.layer;if(!e)throw"トゥイーンが指定されていません";return xt(this,H,"f")[e]?.tw?.pause(),!1},q=function(t){const e="id"in t?`frm\n${t.id}`:t.name??t.layer;if(!e)throw"トゥイーンが指定されていません";return xt(this,H,"f")[e]?.tw?.resume(),!1},J=function(t){const e=t.text;if(!e)throw"textは必須です";let i=(0,St.argChk_Num)(t,"wait",-1);i>0&&this.val.getVal("tmp:sn.skip.enabled")&&(i=0),t.wait=i;const r=xt(this,K,"f").call(this,t);delete t.text,i>=0&&xt(this,v,"f").call(this,"add｜"+JSON.stringify(t),r);const n=(0,St.argChk_Boolean)(t,"record",!0),s=this.val.doRecLog();return n||this.val.setVal_Nochk("save","sn.doRecLog",n),r.tagCh(e.replaceAll("[r]","\n")),n||this.val.setVal_Nochk("save","sn.doRecLog",s),i>=0&&xt(this,v,"f").call(this,"add_close｜",r),!1},Q=function(t){const e=xt(this,r,"m",nt).call(this,t,xt(this,T,"f")),i=xt(this,E,"f")[e].getPage(t);if(!(i instanceof Ot.TxtLayer))throw e+"はTxtLayerではありません";return i},et=function(t){const e=t.layer;if(!e)throw"[current] layerは必須です";if(Tt(this,it,xt(this,E,"f")[e],"f"),!(xt(this,it,"f").getPage(t)instanceof Ot.TxtLayer))throw`${e}はTxtLayerではありません`;return this.recText("",!0),Tt(this,T,e,"f"),this.val.setVal_Nochk("save","const.sn.mesLayer",e),xt(this,r,"m",F).call(this).forEach((t=>{const i=xt(this,E,"f")[t];i.fore instanceof Ot.TxtLayer&&(i.fore.isCur=i.back.isCur=t===e)})),!1},nt=function(t,e=""){const i=t.layer??e;if(i.includes(","))throw"layer名に「,」は使えません";if(!(i in xt(this,E,"f")))throw"属性 layer【"+i+"】が不正です。レイヤーがありません";return t.layer=i},at=function(t){const e=xt(this,K,"f").call(this,t);return t.layer===xt(this,T,"f")&&"fore"===t.page&&this.recText("",!0),e.clearText(),!1},ht=function(t){return xt(this,v,"f").call(this,"endlink｜",xt(this,K,"f").call(this,t)),!1},ut=function(t){return(0,St.argChk_Boolean)(t,"rec_page_break",!0)&&this.recText("",!0),xt(this,it,"f")&&(xt(this,it,"f").fore.clearLay(t),xt(this,it,"f").back.clearLay(t)),!1},lt=function(t){if(!t.pic)throw"[graph] picは必須です";return t.text="｜　《grp｜"+JSON.stringify(t)+"》",xt(this,r,"m",J).call(this,t)},ct=function(t){return t.style??="background-color: rgba(255,0,0,0.5);",t.style_hover??="background-color: rgba(255,0,0,0.9);",t.style_clicked??=t.style,xt(this,v,"f").call(this,"link｜"+JSON.stringify(t),xt(this,K,"f").call(this,t)),!1},ft=function(t){return t.text="\n",xt(this,r,"m",J).call(this,t)},dt=function(){return this.recText("\n"),!1},pt=function(t){return Tt(this,st,t,"f"),this.recText(t.text??""),!1},mt=function(t){return Tt(this,ot,[],"f"),Tt(this,st,{text:t.text??""},"f"),this.val.setVal_Nochk("save","const.sn.sLog",t.text?`[{text:"${t.text}"}]`:"[]"),!1},gt=function(t){const e=t.t;if(!e)throw"[ruby2] tは必須です";const i=t.r;if(!i)throw"[ruby2] rは必須です";return t.text="｜"+e+"《"+i+"》",xt(this,r,"m",J).call(this,t)},vt=function(t){return xt(this,v,"f").call(this,"span｜"+JSON.stringify(t),xt(this,K,"f").call(this,t)),!1},_t=function(t){if(!t.t)throw"[tcy] tは必須です";return t.text="｜　｜《tcy｜"+t.t+"｜"+(t.r??"")+"》",xt(this,r,"m",J).call(this,t)},yt=function(t){return console.group("🥟 [dump_lay]"),xt(this,r,"m",F).call(this,t.layer).forEach((t=>{const e=xt(this,E,"f")[t];try{console.info(`%c${e.fore.name.slice(0,-7)} %o`,`color:#${St.CmnLib.isDarkMode?"49F":"05A"};`,JSON.parse(`{"back":{${e.back.dump()}}, "fore":{${e.fore.dump()}}}`))}catch(t){console.error("dump_lay err:%o",t),console.error(`   back:${e.back.dump()}`),console.error(`   fore:${e.fore.dump()}`)}})),console.groupEnd(),!1},bt=function(t){const e=xt(this,r,"m",nt).call(this,t,xt(this,T,"f")),i=(0,St.argChk_Boolean)(t,"enabled",!0);return xt(this,K,"f").call(this,t).enabled=i,this.val.setVal_Nochk("save","const.sn.layer."+e+".enabled",i),!1},Et=function(t){return At.Pages.argChk_page(t,"back"),t.clicksebuf??="SYS",t.entersebuf??="SYS",t.leavesebuf??="SYS",t.fn||(t.fn=this.scrItr.scriptFn),xt(this,K,"f").call(this,t).addButton(t),this.scrItr.recodeDesign(t),!1},Z={value:10}},"./core/src/sn/Main.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},w=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;const A=i("./core/src/sn/CmnLib.ts"),M=i("./core/src/sn/Config.ts"),O=i("./core/src/sn/Grammar.ts"),R=i("./core/src/sn/AnalyzeTagArg.ts"),C=i("./core/src/sn/PropParser.ts"),P=i("./core/src/sn/DebugMng.ts"),I=i("./core/src/sn/Variable.ts"),N=i("./core/src/sn/SoundMng.ts"),D=i("./core/src/sn/LayerMng.ts"),L=i("./core/src/sn/EventMng.ts"),k=i("./core/src/sn/ScriptIterator.ts"),B=i("./node_modules/pixi.js/dist/esm/pixi.js");e.Main=class{constructor(t){this.sys=t,r.add(this),n.set(this,void 0),s.set(this,void 0),o.set(this,Object.create(null)),a.set(this,void 0),h.set(this,void 0),u.set(this,void 0),l.set(this,void 0),c.set(this,void 0),f.set(this,void 0),d.set(this,void 0),p.set(this,(()=>{})),m.set(this,new R.AnalyzeTagArg),g.set(this,!1),_.set(this,(()=>w(this,p,"f").call(this))),y.set(this,((t=w(this,r,"m",E))=>{w(this,x,"f")||(w(this,f,"f").clearBreak(),S(this,p,t,"f"),this.resume=(t=w(this,r,"m",E))=>{S(this,p,t,"f")},w(this,l,"f").noticeBreak(!1))})),this.resume=w(this,y,"f"),this.stop=()=>{S(this,p,(()=>{}),"f"),this.resume=w(this,y,"f"),w(this,l,"f").noticeBreak(!0)},b.set(this,!0),x.set(this,!1),this.isDestroyed=()=>w(this,x,"f"),T.set(this,void 0),B.utils.skipHello(),M.Config.generate(t).then((t=>S(this,n,t,"f"))).then((()=>w(this,r,"m",v).call(this))).catch((t=>console.error("load err fn:prj.json e:%o",t)))}errScript(t,e=!0){if(this.stop(),P.DebugMng.myTrace(t),A.CmnLib.debugLog&&console.log("🍜 SKYNovel err!"),e)throw t}resumeByJumpOrCall(t){t.url?globalThis.open(t.url):(w(this,a,"f").setVal_Nochk("tmp","sn.eventArg",t.arg??""),w(this,a,"f").setVal_Nochk("tmp","sn.eventLabel",t.label??""),(0,A.argChk_Boolean)(t,"call",!1)?(w(this,l,"f").subIdxToken(),this.resume((()=>w(this,o,"f").call(t)))):(w(this,o,"f").clear_event({}),this.resume((()=>w(this,o,"f").jump(t)))))}setLoop(t,e=""){S(this,b,t,"f")?this.resume():this.stop(),this.sys.setTitleInfo(e?` -- ${e}中`:"")}async destroy(t=0){w(this,x,"f")||(S(this,x,!0,"f"),w(this,g,"f")&&(this.stop(),S(this,b,!1,"f"),await w(this,f,"f").before_destroy(),t>0&&await new Promise((e=>setTimeout(e,t))),S(this,o,{},"f"),w(this,d,"f").destroy(),w(this,l,"f").destroy(),w(this,f,"f").destroy(),w(this,c,"f").destroy(),w(this,s,"f").ticker.remove(w(this,_,"f")),w(this,T,"f")&&w(this,s,"f")&&w(this,s,"f").view.parentElement.insertBefore(w(this,T,"f"),w(this,s,"f").view),B.utils.clearTextureCache(),w(this,s,"f").destroy(!0)))}},n=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,x=new WeakMap,T=new WeakMap,r=new WeakSet,v=async function(){const t={width:w(this,n,"f").oCfg.window.width,height:w(this,n,"f").oCfg.window.height,backgroundColor:w(this,n,"f").oCfg.init.bg_color,resolution:globalThis.devicePixelRatio??1,autoResize:!0},e=document.getElementById(A.CmnLib.SN_ID);e&&(S(this,T,e.cloneNode(!0),"f"),w(this,T,"f").id=A.CmnLib.SN_ID,t.view=e),S(this,s,new B.Application(t),"f"),e||(document.body.appendChild(w(this,s,"f").view),w(this,s,"f").view.id=A.CmnLib.SN_ID),S(this,a,new I.Variable(w(this,n,"f"),w(this,o,"f")),"f"),S(this,h,new C.PropParser(w(this,a,"f"),w(this,n,"f").oCfg.init.escape??"\\"),"f"),await Promise.all(this.sys.init(w(this,o,"f"),w(this,s,"f"),w(this,a,"f"),this)),w(this,o,"f").title({text:w(this,n,"f").oCfg.book.title||"SKYNovel"}),S(this,u,new N.SoundMng(w(this,n,"f"),w(this,o,"f"),w(this,a,"f"),this,this.sys),"f"),S(this,l,new k.ScriptIterator(w(this,n,"f"),w(this,o,"f"),this,w(this,a,"f"),w(this,m,"f"),(()=>w(this,r,"m",E).call(this)),w(this,h,"f"),w(this,u,"f"),this.sys),"f"),S(this,c,new P.DebugMng(this.sys,w(this,o,"f"),w(this,l,"f")),"f"),S(this,f,new D.LayerMng(w(this,n,"f"),w(this,o,"f"),w(this,s,"f"),w(this,a,"f"),this,w(this,l,"f"),this.sys,w(this,u,"f"),w(this,m,"f"),w(this,h,"f")),"f"),S(this,d,new L.EventMng(w(this,n,"f"),w(this,o,"f"),w(this,s,"f"),this,w(this,f,"f"),w(this,a,"f"),w(this,u,"f"),w(this,l,"f"),this.sys),"f"),w(this,s,"f").ticker.add(w(this,_,"f")),this.resumeByJumpOrCall({fn:"main"}),S(this,g,!0,"f")},E=function(){for(;w(this,b,"f");){let t=w(this,l,"f").nextToken();if(!t)break;const e=t.charCodeAt(0);if(9!==e)if(10!==e){if(91===e){if(w(this,l,"f").isBreak(t))return;try{const e=(t.match(/\n/g)??[]).length;if(e>0&&w(this,l,"f").addLineNum(e),w(this,l,"f").タグ解析(t)){this.stop();break}continue}catch(e){if(e instanceof Error){const i=e;let r=`タグ解析中例外 mes=${i.message}(${i.name})`;r=`[${(0,O.tagToken2Name)(t)}]`+r,this.errScript(r,!1)}else this.errScript(String(e),!1);return}}if(38===e)try{if("&"!==t.slice(-1)){if(w(this,l,"f").isBreak(t))return;const e=(0,O.splitAmpersand)(t.slice(1));e.name=w(this,h,"f").getValAmpersand(e.name),e.text=String(w(this,h,"f").parse(e.text)),w(this,o,"f").let(e);continue}if("&"===t.charAt(1))throw new Error("「&表示&」書式では「&」指定が不要です");t=String(w(this,h,"f").parse(t.slice(1,-1)))}catch(t){return void this.errScript(t instanceof Error?`& 変数操作・表示 mes=${t.message}(${t.name})`:t,!1)}else{if(59===e)continue;if(42===e&&t.length>1)continue}try{w(this,f,"f").getCurrentTxtlayForeNeedErr().tagCh(t)}catch(t){return void this.errScript(t instanceof Error?`文字表示 mes=${t.message}(${t.name})`:t,!1)}}else w(this,l,"f").addLineNum(t.length)}}},"./core/src/sn/Pages.ts":function(t,e,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},s=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.Pages=void 0;const o=i("./core/src/sn/CmnLib.ts");class a{constructor(t,e,i,h,u,l,c,f){this.cls_=e,r.set(this,void 0),this.lay=t=>this.getPage(t).lay(t),this.getPage=t=>"back"!==a.argChk_page(t,"fore")?s(this,r,"f").fore:s(this,r,"f").back;const d=l.hFactoryCls[e];if(!d)throw`属性 class【${e}】が不正です`;n(this,r,{fore:d(),back:d()},"f"),s(this,r,"f").fore.layname=s(this,r,"f").back.layname=t;const p=u[":id_tag"]=`layer:${t} cls:${e}`;s(this,r,"f").fore.name=`${p} page:A`,s(this,r,"f").back.name=`${p} page:B`,i.addChild(this.fore.spLay),h.addChild(this.back.spLay),(0,o.argChk_Boolean)(u,"visible",!0),(0,o.argChk_Boolean)(u,"visible",!0),f.isWait=this.fore.lay(u)||this.back.lay(u);const m=`const.sn.lay.${t}`;c.setVal_Nochk("tmp",m,!0),c.defTmp(m+".fore.alpha",(()=>s(this,r,"f").fore.alpha)),c.defTmp(m+".back.alpha",(()=>s(this,r,"f").back.alpha)),c.defTmp(m+".fore.height",(()=>s(this,r,"f").fore.height)),c.defTmp(m+".back.height",(()=>s(this,r,"f").back.height)),c.defTmp(m+".fore.visible",(()=>s(this,r,"f").fore.spLay.visible)),c.defTmp(m+".back.visible",(()=>s(this,r,"f").back.spLay.visible)),c.defTmp(m+".fore.width",(()=>s(this,r,"f").fore.width)),c.defTmp(m+".back.width",(()=>s(this,r,"f").back.width)),c.defTmp(m+".fore.x",(()=>s(this,r,"f").fore.x)),c.defTmp(m+".back.x",(()=>s(this,r,"f").back.x)),c.defTmp(m+".fore.y",(()=>s(this,r,"f").fore.y)),c.defTmp(m+".back.y",(()=>s(this,r,"f").back.y))}destroy(){s(this,r,"f").fore.destroy(),s(this,r,"f").back.destroy()}static argChk_page(t,e){const i=t.page??e;if("fore"===i)return t.page=i;if("back"===i)return t.page=i;throw Error("属性 page【"+i+"】が不正です")}get cls(){return this.cls_}get fore(){return s(this,r,"f").fore}get back(){return s(this,r,"f").back}transPage(t){[s(this,r,"f").back,s(this,r,"f").fore]=[s(this,r,"f").fore,s(this,r,"f").back],s(this,r,"f").back.copy(s(this,r,"f").fore,t)}}e.Pages=a,r=new WeakMap},"./core/src/sn/PropParser.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),p=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),m=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&d(e,t,i);return p(e,t),e},g=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},v=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.PropParser=void 0;const _=m(i("./node_modules/parsimmon/build/parsimmon.umd.min.js")),y=i("./core/src/sn/CmnLib.ts");class b{constructor(t,e="\\"){function i(t){const e=[];return t.forEach((t=>e.push((t instanceof RegExp?_.regex(t):_.string(t)).trim(_.optWhitespace)))),_.alt.apply(null,e)}function n(t,e){const i=_.lazy((()=>_.seq(t,i).or(e)));return i}function c(t,e){let i=_.lazy((()=>e.chain((e=>_.seq(t,_.of(e),i).or(_.of(e))))));return i}function f(t,e){return _.seqMap(e,_.seq(t,e).many(),((t,e)=>e.reduce(((t,e)=>[e[0],t,e[1]]),t)))}this.val=t,r.add(this),s.set(this,null),a.set(this,{"!num!":t=>t.shift(),"!str!":t=>g(this,r,"m",l).call(this,t.shift()),"!bool!":t=>t.shift(),"!":t=>{const e=t.shift();return"!bool!"===e[0]?!Boolean(e[1]):!("true"===String(g(this,r,"m",o).call(this,e)))},"~":t=>~Number(g(this,r,"m",o).call(this,t.shift())),"**":t=>Number(g(this,r,"m",o).call(this,t.shift()))**Number(g(this,r,"m",o).call(this,t.shift())),"*":t=>Number(g(this,r,"m",o).call(this,t.shift()))*Number(g(this,r,"m",o).call(this,t.shift())),"/":t=>Number(g(this,r,"m",o).call(this,t.shift()))/Number(g(this,r,"m",o).call(this,t.shift())),"¥":t=>Math.floor(g(this,a,"f")["/"](t)),"%":t=>Number(g(this,r,"m",o).call(this,t.shift()))%Number(g(this,r,"m",o).call(this,t.shift())),"+":t=>{const e=g(this,r,"m",o).call(this,t.shift()),i=g(this,r,"m",o).call(this,t.shift());return"[object String]"===Object.prototype.toString.call(e)||"[object String]"===Object.prototype.toString.call(i)?String(e)+String(i):Number(e)+Number(i)},"-":t=>Number(g(this,r,"m",o).call(this,t.shift()))-Number(g(this,r,"m",o).call(this,t.shift())),int:t=>(0,y.int)(g(this,r,"m",h).call(this,t.shift())),parseInt:t=>(0,y.int)(g(this,a,"f").Number(t)),Number:t=>{const e=g(this,r,"m",o).call(this,t.shift());return"[object String]"!==Object.prototype.toString.call(e)?Number(e):g(this,r,"m",h).call(this,g(this,s,"f").parse(String(e)).value)},ceil:t=>Math.ceil(g(this,r,"m",h).call(this,t.shift())),floor:t=>Math.floor(g(this,r,"m",h).call(this,t.shift())),round:t=>Math.round(g(this,r,"m",h).call(this,t.shift())),"<<":t=>Number(g(this,r,"m",o).call(this,t.shift()))<<Number(g(this,r,"m",o).call(this,t.shift())),">>":t=>Number(g(this,r,"m",o).call(this,t.shift()))>>Number(g(this,r,"m",o).call(this,t.shift())),">>>":t=>Number(g(this,r,"m",o).call(this,t.shift()))>>>Number(g(this,r,"m",o).call(this,t.shift())),"<":t=>Number(g(this,r,"m",o).call(this,t.shift()))<Number(g(this,r,"m",o).call(this,t.shift())),"<=":t=>Number(g(this,r,"m",o).call(this,t.shift()))<=Number(g(this,r,"m",o).call(this,t.shift())),">":t=>Number(g(this,r,"m",o).call(this,t.shift()))>Number(g(this,r,"m",o).call(this,t.shift())),">=":t=>Number(g(this,r,"m",o).call(this,t.shift()))>=Number(g(this,r,"m",o).call(this,t.shift())),"==":t=>{const e=g(this,r,"m",o).call(this,t.shift()),i=g(this,r,"m",o).call(this,t.shift());return null!=e||null!=i||e&&i?String(e)===String(i):e==i},"!=":t=>!g(this,a,"f")["=="](t),"===":t=>{const e=g(this,r,"m",o).call(this,t.shift()),i=g(this,r,"m",o).call(this,t.shift());return Object.prototype.toString.call(e)==Object.prototype.toString.call(i)&&String(e)===String(i)},"!==":t=>!g(this,a,"f")["==="](t),"&":t=>Number(g(this,r,"m",o).call(this,t.shift()))&Number(g(this,r,"m",o).call(this,t.shift())),"^":t=>Number(g(this,r,"m",o).call(this,t.shift()))^Number(g(this,r,"m",o).call(this,t.shift())),"|":t=>Number(g(this,r,"m",o).call(this,t.shift()))|Number(g(this,r,"m",o).call(this,t.shift())),"&&":t=>"true"===String(g(this,r,"m",o).call(this,t.shift()))&&"true"===String(g(this,r,"m",o).call(this,t.shift())),"||":t=>"true"===String(g(this,r,"m",o).call(this,t.shift()))||"true"===String(g(this,r,"m",o).call(this,t.shift())),"?":t=>{const e=t.shift();let i=!1;if("!bool!"===e[0])i=Boolean(e[1]);else{const t=String(g(this,r,"m",o).call(this,e));i="true"!==t&&"false"!==t?0!==(0,y.int)(t):"true"===t}const n=t.shift();if(":"!==n[0])throw Error("(PropParser)三項演算子の文法エラーです。: が見つかりません");return g(this,r,"m",o).call(this,n[i?1:2])},":":()=>{throw Error("(PropParser)三項演算子の文法エラーです。? が見つかりません")}}),u.set(this,/(\$((tmp|sys|save|mp):)?[^\s!--\/:-@[-^`{-~]+|\#\{[^\}]+})/g),this.getValAmpersand=t=>"&"===t.charAt(0)?String(this.parse(t.slice(1))):t;const d=_.alt(_.alt(_.regex(/-?(0|[1-9][0-9]*)\.[0-9]+/),_.regex(/0x[0-9a-fA-F]+/)).map(Number),_.alt(_.regex(/-?(0|[1-9][0-9]*)/)).map((t=>(0,y.int)(t)))).map((t=>["!num!",t])).desc("number"),p=_.string("null").map((()=>["!str!",null])),m=_.regex(/(true|false)/).map((t=>["!bool!","true"===t])).desc("boolean"),b=_.regex(new RegExp(`(?:"(?:\\${e}["'#\\n]|[^"])*"|'(?:\\${e}["'#\\n]|[^'])*'|\\#(?:\\${e}["'#\\n]|[^#])*\\#)`)).map((t=>["!str!",t.slice(1,-1).replaceAll(e,"")])).desc("string"),E=/\[[^\]]+\]/g,x=_.regex(/-?(?:(?:tmp|sys|save|mp):)?[^\s!-\/:-@[-^`{-~]+(?:\.[^\s!-\/:-@[-^`{-~]+|\[[^\]]+\])*(?:@str)?/).map((t=>{const e=String(t).replace(E,(t=>"."+this.parse(t.slice(1,-1))));if("-"===e.charAt(0)){const t=this.val.getVal(e.slice(1));if(null==t||"null"===String(t))throw Error("(PropParser)数値以外に-符号がついています");return["!num!",-Number(t)]}const i=this.val.getVal(e);return null==i?["!str!",i]:"boolean"==typeof i?["!bool!",i]:"[object String]"===Object.prototype.toString.call(i)?["!str!",String(i)]:["!num!",Number(i)]})).desc("string"),T=_.lazy((()=>_.string("(").then(g(this,s,"f")).skip(_.string(")")).or(d).or(p).or(m).or(b).or(x))),S=[{type:n,ops:i([/[A-Za-z_][A-Za-z0-9_]*(?=\()/])},{type:n,ops:i([/(!(?!=)|~)/])},{type:c,ops:i(["**"])},{type:f,ops:i(["*","/","¥","%"])},{type:f,ops:i(["+","-"])},{type:f,ops:i([/(>>>|<<|>>)/])},{type:f,ops:i([/(<=|<|>=|>)/])},{type:f,ops:i([/(===|!==|==|!=)/])},{type:f,ops:i([/&(?!&)/])},{type:f,ops:i(["^"])},{type:f,ops:i([/\|(?!\|)/])},{type:f,ops:i(["&&"])},{type:f,ops:i(["||"])},{type:c,ops:i([":"])},{type:c,ops:i(["?"])}].reduce(((t,e)=>e.type(e.ops,t)),T);v(this,s,S.trim(_.optWhitespace),"f")}parse(t){const e=g(this,s,"f").parse(t);if(!e.status)throw Error("(PropParser)文法エラー【"+t+"】");const i=e.value;return"!str!"===i[0]?g(this,r,"m",l).call(this,i[1]):g(this,r,"m",o).call(this,i)}static getValName(t){const e=g(this,n,"f",c).exec(t.trim())?.groups;if(e)return{scope:e.scope||"tmp",name:g(b,n,"m",f).call(b,e.name),at:e.at??""}}}e.PropParser=b,n=b,s=new WeakMap,a=new WeakMap,u=new WeakMap,r=new WeakSet,o=function t(e){const i=e.shift();if(i instanceof Array)return g(this,r,"m",t).call(this,i);const n=g(this,a,"f")[i];return n?n(e):Object(null)},h=function(t){const e=g(this,r,"m",o).call(this,t);if("[object Number]"!==Object.prototype.toString.call(e))throw Error("(PropParser)引数【"+e+"】が数値ではありません");return Number(e)},l=function(t){return null==t?t:String(t).replace(g(this,u,"f"),(t=>"$"===t.charAt(0)?this.val.getVal(t.slice(1)):this.parse(t.slice(2,-1))))},f=function(t){let e=0,i=0;for(;;){if(e=t.indexOf('["'),e<0){if(e=t.indexOf("['"),e<0)break;i=t.indexOf("']",e+2)}else i=t.indexOf('"]',e+2);if(i<0)break;t=t.slice(0,e)+"."+t.slice(e+2,i)+t.slice(i+2),e=i-2}return t},c={value:/^((?<scope>\w+?):)?(?<name>[^\s :@]+)(?<at>\@str)?$/}},"./core/src/sn/RubySpliter.ts":function(t,e){"use strict";var i,r,n,s,o=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},a=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.RubySpliter=void 0;class h{constructor(){n.set(this,(()=>{}))}static setting(t){t.sesame&&o(h,i,t.sesame,"f",r)}static getSesame(){return a(h,i,"f",r)}static destroy(){o(h,i,"ヽ","f",r)}init(t){o(this,n,t,"f")}static setEscape(t){o(h,i,new RegExp((t?`(?<ce>\\${t}\\S)|`:"")+"｜(?<str>[^《\\n]+)《(?<ruby>[^》\\n]+)》|(?:(?<kan>[⺀-⿟々〇〻㐀-鿿豈-﫿]+[ぁ-ヿ]*|[^　｜《》\\n])《(?<kan_ruby>[^》\\n]+)》)|(?<txt>[\ud800-\udbff][\udc00-\udfff]|[^　｜《》]+(?=｜)|[^　｜《》]*[ぁ-ヿ](?=[⺀-⿟々〇〻㐀-鿿豈-﫿]+《)|.)","gs"),"f",s)}putTxt(t){let e=null;for(;e=a(h,i,"f",s).exec(t);){const t=e?.groups;if(!t)continue;const i=t.ruby;if(i){this.putTxtRb(t.str,i);continue}const r=t.kan_ruby;r?this.putTxtRb(t.kan,r):t.ce?a(this,n,"f").call(this,t.ce.slice(1),""):Array.from(t.txt??"").forEach((t=>a(this,n,"f").call(this,t,"")))}}putTxtRb(t,e){const s=Array.from(t),o=s.length;if("*"===e.charAt(0)&&e.length<=2){const t="center｜"+("*"===e?a(h,i,"f",r):e.charAt(1));for(let e=0;e<o;++e)a(this,n,"f").call(this,s[e],t);return}if(1===o||-1===e.indexOf(" "))return void a(this,n,"f").call(this,t,e.replaceAll("\t"," "));const u=e.split(" "),l=u.length,c=l>o?l:o;for(let t=0;t<c;++t)a(this,n,"f").call(this,t<o?s[t]:"",t<l?u[t].replaceAll("\t"," "):"")}}e.RubySpliter=h,i=h,n=new WeakMap,r={value:"ヽ"},s={value:void 0}},"./core/src/sn/ScriptIterator.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C,P,I,N,D,L,k,B,F,j,G,U,X,z,H,Y,W,V,$,q,Z,J,K,Q,tt,et,it,rt,nt,st,ot,at,ht,ut,lt,ct,ft,dt,pt,mt,gt,vt,_t,yt,bt,Et,xt,Tt,St,wt,At,Mt,Ot,Rt,Ct,Pt=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},It=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptIterator=void 0;const Nt=i("./core/src/sn/CmnLib.ts"),Dt=i("./core/src/sn/Config.ts"),Lt=i("./core/src/sn/CallStack.ts"),kt=i("./core/src/sn/Grammar.ts"),Bt=i("./node_modules/pixi.js/dist/esm/pixi.js"),Ft=i("./core/src/sn/DebugMng.ts");var jt;!function(t){t[t.running=0]="running",t[t.wait=1]="wait",t[t.break=2]="break",t[t.breaking=3]="breaking",t[t.step=4]="step",t[t.stepping=5]="stepping",t[t.stepouting=6]="stepouting",t[t.stepout=7]="stepout"}(jt||(jt={}));class Gt{constructor(t,e,i,w,I,z,q,J,K){if(this.cfg=t,this.hTag=e,this.main=i,this.val=w,this.alzTagArg=I,this.runAnalyze=z,this.prpPrs=q,this.sndMng=J,this.sys=K,r.add(this),s.set(this,{aToken:[""],len:1,aLNum:[1]}),o.set(this,""),a.set(this,0),h.set(this,0),this.addLineNum=t=>It(this,h,Pt(this,h,"f")+t,"f"),u.set(this,[]),this.getCallStk=t=>Pt(this,u,"f")[t].csArg,l.set(this,new kt.Grammar),this.firstWait=()=>{},f.set(this,{disconnect:()=>{It(Gt,n,{},"f",E),It(Gt,n,{},"f",x),this.isBreak=()=>!1,Pt(this,f,"f").continue({}),It(this,T,jt.running,"f")},restart:()=>this.isBreak=()=>!1,add_break:t=>Pt(this,r,"m",c).call(this,t.fn,t.o),data_break:t=>{Pt(this,T,"f")===jt.running&&(It(this,T,jt.wait,"f"),this.main.setLoop(!1,`変数 ${t.dataId}【${t.old_v}】→【${t.new_v}】データブレーク`),this.sys.callHook("stopOnDataBreakpoint",{}),this.sys.send2Dbg("stopOnDataBreakpoint",{}))},set_func_break:t=>{It(Gt,n,{},"f",x),t.a.forEach((t=>Pt(Gt,n,"f",x)[t.name]=1)),this.sys.send2Dbg(t.ri,{})},stack:t=>this.sys.send2Dbg(t.ri,{a:Pt(this,r,"m",A).call(this)}),eval:t=>{this.sys.send2Dbg(t.ri,{v:this.prpPrs.parse(t.txt)})},continue:()=>{Pt(this,r,"m",b).call(this)||(It(this,a,Pt(this,a,"f")-Pt(this,r,"a",y),"f"),It(this,T,jt.breaking,"f"),this.main.setLoop(!0),this.main.resume())},stepover:t=>Pt(this,r,"m",g).call(this,t),stepin:()=>{if(Pt(this,r,"m",b).call(this))return;const t=Pt(this,s,"f").aToken[Pt(this,a,"f")-Pt(this,r,"a",y)];this.sys.callHook("stopOnStep"+(Pt(this,bt,"f").test(t)?"In":""),{}),It(this,a,Pt(this,a,"f")-Pt(this,r,"a",y),"f"),It(this,T,Pt(this,T,"f")===jt.wait?jt.step:jt.stepping,"f"),this.main.setLoop(!0),this.main.resume()},stepout:t=>{Pt(this,r,"m",b).call(this)||(this.lenCallStk>0?Pt(this,r,"m",v).call(this,!0):Pt(this,r,"m",g).call(this,t))},pause:()=>{It(this,T,jt.step,"f"),this.main.setLoop(!1,"一時停止"),this.sys.send2Dbg("stopOnStep",{})},stopOnEntry:()=>{It(this,T,jt.step,"f"),this.main.setLoop(!1,"一時停止"),this.sys.send2Dbg("stopOnEntry",{})}}),d.set(this,(t=>this.cfg.searchPath(t,Dt.Config.EXT_SCRIPT))),m.set(this,(t=>(this.sys.pathBaseCnvSnPath4Dbg+Pt(this,d,"f").call(this,t)).replace(Pt(Gt,n,"f",p),`$1/prj/$2/${Pt(this,o,"f")}$3`))),this.cnvPath4Dbg=t=>this.sys.pathBaseCnvSnPath4Dbg+t.replace("/crypto_prj/","/prj/"),_.set(this,0),T.set(this,jt.running),this.isBreak=t=>!1,M.set(this,(t=>{})),O.set(this,void 0),R.set(this,void 0),D.set(this,(()=>{})),L.set(this,(()=>{})),k.set(this,""),B.set(this,{}),this.noticeBreak=t=>{},F.set(this,5),j.set(this,[-1]),$.set(this,""),Z.set(this,""),this.nextToken=()=>"",Q.set(this,(t=>{})),et.set(this,/(\*{2,})(.*)/),it.set(this,/\[macro\s/),rt.set(this,/\[endmacro[\s\]]/),nt.set(this,/^\[let_ml\s/g),st.set(this,/^\[endlet_ml\s*]/g),at.set(this,Object.create(null)),lt.set(this,/^\[(call|loadplugin)\s/),ct.set(this,/\bfn\s*=\s*[^\s\]]+/),ft.set(this,(()=>{for(let t=Pt(this,s,"f").len-1;t>=0;--t){const e=Pt(this,s,"f").aToken[t];if(Pt(this,lt,"f").lastIndex=0,!Pt(this,lt,"f").test(e))continue;const[i,r]=(0,kt.tagToken2Name_Args)(e);this.alzTagArg.go(r);const n=this.alzTagArg.hPrm.fn;if(!n)continue;const o=n.val;if(!o||"*"!==o.slice(-1))continue;const a="loadplugin"===i?"css":"sn",h=this.cfg.matchPath("^"+o.slice(0,-1)+".*",a);Pt(this,s,"f").aToken.splice(t,1,"\t","; "+e),Pt(this,s,"f").aLNum.splice(t,1,NaN,NaN);for(const i of h){const r=e.replace(Pt(this,ct,"f"),"fn="+decodeURIComponent((0,Nt.getFn)(i[a])));Pt(this,s,"f").aToken.splice(t,0,r),Pt(this,s,"f").aLNum.splice(t,0,NaN)}}Pt(this,s,"f").len=Pt(this,s,"f").aToken.length})),pt.set(this,!1),yt.set(this,"call"),bt.set(this,/\[(call)\b/),Tt.set(this,!1),wt.set(this,{hSave:{},hPages:{},aIfStk:[-1]}),Rt.set(this,[]),Ct.set(this,-1),e.let_ml=t=>Pt(this,r,"m",C).call(this,t),e.dump_stack=()=>Pt(this,r,"m",P).call(this),e.dump_script=t=>Pt(this,r,"m",N).call(this,t),e.else=e.elsif=e.endif=()=>Pt(this,r,"m",G).call(this),e.if=t=>Pt(this,r,"m",U).call(this,t),e.call=t=>Pt(this,r,"m",X).call(this,t),e.jump=t=>Pt(this,r,"m",H).call(this,t),e.page=t=>Pt(this,r,"m",Y).call(this,t),e.pop_stack=t=>Pt(this,r,"m",W).call(this,t),e.return=()=>Pt(this,r,"m",V).call(this),e.bracket2macro=t=>Pt(this,r,"m",gt).call(this,t),e.char2macro=t=>Pt(this,r,"m",vt).call(this,t),e.endmacro=()=>Pt(this,r,"m",V).call(this),e.macro=t=>Pt(this,r,"m",_t).call(this,t),e.load=t=>Pt(this,r,"m",Et).call(this,t),e.reload_script=t=>Pt(this,r,"m",St).call(this,t),e.record_place=()=>Pt(this,r,"m",At).call(this),e.save=t=>Pt(this,r,"m",Ot).call(this,t),t.oCfg.debug.token&&It(this,Q,(t=>console.log(`🌱 トークン fn:${Pt(this,o,"f")} idxToken:${Pt(this,a,"f")} ln:${Pt(this,h,"f")} token【${t}】`)),"f"),w.defTmp("const.sn.vctCallStk.length",(()=>Pt(this,u,"f").length)),Pt(this,l,"f").setEscape(t.oCfg.init.escape),Nt.CmnLib.isDbg){K.addHook(((t,e)=>Pt(this,f,"f")[t]?.(e))),this.isBreak=Pt(this,r,"m",S);const t=this.analyzeInit;this.analyzeInit=()=>{this.analyzeInit=()=>{},this.sys.send2Dbg("hi",{})},Pt(this,f,"f").auth=e=>{const i=e.hBreakpoint.hFn2hLineBP;for(const t in i)Pt(this,r,"m",c).call(this,t,i[t]);if(It(Gt,n,{},"f",x),e.hBreakpoint.aFunc.forEach((t=>Pt(Gt,n,"f",x)[t.name]=1)),e.stopOnEntry){for(;;){let t=this.nextToken();if(!t)break;const e=t.charCodeAt(0);if(91===e)break;if(38===e)break;if(42===e&&1===t.length)break;10===e&&It(this,h,Pt(this,h,"f")+t.length,"f")}this.sys.callHook("stopOnEntry",{}),this.analyzeInit=t,this.analyzeInit()}else this.firstWait=()=>{this.sys.callHook("stopOnEntry",{})},this.analyzeInit=t,this.analyzeInit()}}else this.recodeDesign=()=>{};t.oCfg.debug.tag&&It(this,M,(t=>console.log(`🌲 タグ解析 fn:${Pt(this,o,"f")} lnum:${Pt(this,h,"f")} [${t} %o]`,this.alzTagArg.hPrm)),"f")}get scriptFn(){return Pt(this,o,"f")}subIdxToken(){var t;It(this,a,(t=Pt(this,a,"f"),--t),"f")}get lineNum(){return Pt(this,h,"f")}get lenCallStk(){return Pt(this,u,"f").length}get lastHArg(){return Pt(this,u,"f")[this.lenCallStk-1].csArg}destroy(){this.isBreak=()=>!1}タグ解析(t){const[e,i]=(0,kt.tagToken2Name_Args)(t),r=this.hTag[e];if(!r)throw`未定義のタグ【${e}】です`;this.alzTagArg.go(i),Pt(this,M,"f").call(this,e);const n=this.alzTagArg.hPrm;if(n.cond){const t=n.cond.val;if(!t||"&"===t.charAt(0))throw"属性condは「&」が不要です";const e=this.prpPrs.parse(t),i=String(e);if("null"===i||"undefined"===i)return!1;if(!e)return!1}let s={};const o=Pt(this,u,"f").length;if(this.alzTagArg.isKomeParam){if(0===o)throw"属性「*」はマクロのみ有効です";if(!this.lastHArg)throw"属性「*」はマクロのみ有効です";s={...s,...this.lastHArg}}for(const t in n){let e=n[t].val;if(e&&"%"===e.charAt(0)){if(0===o)throw"属性「%」はマクロ定義内でのみ使用できます（そのマクロの引数を示す簡略文法であるため）";const i=this.lastHArg[e.slice(1)];if(i){s[t]=i;continue}if(e=n[t].def,!e||"null"===e)continue}if(e=this.prpPrs.getValAmpersand(e??""),"undefined"!==e){s[t]=e;continue}const i=n[t].def;void 0!==i&&(e=this.prpPrs.getValAmpersand(i),"undefined"!==e&&(s[t]=e))}return s.タグ名=e,r(s)}setOtherObj(t,e){It(this,O,t,"f"),It(this,R,e,"f")}dumpErrForeLine(){if(0===Pt(this,a,"f"))return console.group(`🥟 Error line (from 0 rows before) fn:${Pt(this,o,"f")}`),void console.groupEnd();let t="";for(let e=Pt(this,a,"f")-1;e>=0&&(t=Pt(this,s,"f").aToken[e]+t,!((t.match(/\n/g)??[]).length>=Pt(this,F,"f")));--e);const e=t.split("\n").slice(-Pt(this,F,"f")),i=e.length;console.group(`🥟 Error line (from ${i} rows before) fn:${Pt(this,o,"f")}`);const n=String(Pt(this,h,"f")).length,u=Pt(this,r,"m",I).call(this,Pt(this,s,"f"),Pt(this,a,"f"));for(let t=0;t<i;++t){const r=Pt(this,h,"f")-i+t+1,s=`${String(r).padStart(n," ")}: %c`,o=e[t],a=o.length>75?o.slice(0,75)+"…":o;t===i-1?console.info(s+a.slice(0,u.col_s)+"%c"+a.slice(u.col_s),"color: black; background-color: skyblue;","color: black; background-color: pink;"):console.info(s+a,"color: black; background-color: skyblue;")}console.groupEnd()}analyzeInit(){const t=Pt(this,r,"m",ot).call(this,Pt(this,s,"f"),Boolean(this.val.getVal("mp:const.sn.macro.name")),Pt(this,h,"f"),Pt(this,Z,"f"),Pt(this,a,"f"));It(this,a,t.idx,"f"),It(this,h,t.ln,"f"),this.runAnalyze()}get isKidoku(){return Pt(this,pt,"f")}get isNextKidoku(){let t=Pt(this,o,"f"),e=Pt(this,a,"f"),i=Pt(this,s,"f").len;if(Pt(this,u,"f").length>0){const r=Pt(this,u,"f")[0];t=r.fn,e=r.idx;const n=Pt(this,at,"f")[t];n&&(i=n.len)}const r=this.val.getAreaKidoku(t);return!!r&&e!==i&&r.search(e)}get normalWait(){return Pt(this,pt,"f")?this.val.getVal("sys:sn.tagCh.doWait_Kidoku")?(0,Nt.uint)(this.val.getVal("sys:sn.tagCh.msecWait_Kidoku")):0:this.val.getVal("sys:sn.tagCh.doWait")?(0,Nt.uint)(this.val.getVal("sys:sn.tagCh.msecWait")):0}get skip4page(){return Pt(this,Tt,"f")}recodePage(){var t;if(It(this,Tt,!1,"f"),!this.val.getVal("save:sn.doRecLog"))return;const{fn:e,idx:i}=Pt(this,r,"m",Mt).call(this),n=i-1,s=n+":"+e,o=Pt(this,Rt,"f").findIndex((t=>t.key===s));if(o>-1)return void It(this,Ct,o,"f");const a={key:s,fn:e,idx:n,retFn:e,retIdx:0,retMark:{...Pt(this,wt,"f")}};if(Pt(this,Ct,"f")>=0){const t=Pt(this,Rt,"f")[Pt(this,Ct,"f")];a.retFn=t.fn,a.retIdx=t.idx+1}It(this,Ct,(t=Pt(this,Ct,"f"),++t),"f")===Pt(this,Rt,"f").length?Pt(this,Rt,"f").push(a):Pt(this,Rt,"f")[Pt(this,Ct,"f")]=a}recodeDesign(t){let e="",i=0;const n=Pt(this,u,"f").length;if(t.design_unit&&n>0){const t=Pt(this,u,"f")[n-1];e=t.fn,i=t.idx}else e=Pt(this,o,"f"),i=Pt(this,a,"f");t[":path"]=Pt(this,m,"f").call(this,e);const s=Pt(this,r,"m",I).call(this,Pt(this,at,"f")[e],i);t[":ln"]=s.ln,t[":col_s"]=s.col_s,t[":col_e"]=s.col_e;const h=i-1;t[":idx_tkn"]=h,t[":token"]=Pt(this,at,"f")[e].aToken[h],this.sys.send2Dbg("_recodeDesign",t)}replace(t,e){Pt(this,s,"f").aToken[t]=e}}e.ScriptIterator=Gt,n=Gt,s=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,_=new WeakMap,T=new WeakMap,M=new WeakMap,O=new WeakMap,R=new WeakMap,D=new WeakMap,L=new WeakMap,k=new WeakMap,B=new WeakMap,F=new WeakMap,j=new WeakMap,$=new WeakMap,Z=new WeakMap,Q=new WeakMap,et=new WeakMap,it=new WeakMap,rt=new WeakMap,nt=new WeakMap,st=new WeakMap,at=new WeakMap,lt=new WeakMap,ct=new WeakMap,ft=new WeakMap,pt=new WeakMap,yt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,Ct=new WeakMap,r=new WeakSet,c=function(t,e){Pt(Gt,n,"f",E)[Pt(this,m,"f").call(this,t)]=e},g=function(t){if(Pt(this,r,"m",b).call(this))return;const e=Pt(this,s,"f").aToken[Pt(this,a,"f")-Pt(this,r,"a",y)];Pt(this,bt,"f").test(e)?Pt(this,r,"m",v).call(this,!1):(this.sys.callHook("stopOnStep",{}),Pt(this,f,"f").stepin(t))},v=function(t){this.sys.callHook("stopOnStep"+(t?"Out":""),{}),It(this,_,this.lenCallStk-(t?1:0),"f"),It(this,a,Pt(this,a,"f")-Pt(this,r,"a",y),"f"),It(this,T,t?jt.stepout:jt.stepouting,"f"),this.main.setLoop(!0),this.main.resume()},y=function(){return Pt(this,T,"f")===jt.break||Pt(this,T,"f")===jt.step?1:0},b=function(){return!(Pt(this,a,"f")<Pt(this,s,"f").len||(this.sys.callHook("stopOnEntry",{}),this.main.setLoop(!1,"スクリプト終端です"),0))},S=function(t){switch(Pt(this,T,"f")){case jt.stepouting:Pt(this,r,"m",w).call(this),It(this,T,jt.stepout,"f");break;case jt.stepout:if(this.lenCallStk!==Pt(this,_,"f"))break;return It(this,T,jt.step,"f"),this.main.setLoop(!1,"ステップ実行"),this.sys.send2Dbg("stopOnStep",{}),!0;case jt.stepping:Pt(this,r,"m",w).call(this),It(this,T,jt.step,"f");break;case jt.step:return Pt(this,r,"m",w).call(this),this.main.setLoop(!1,"ステップ実行"),this.sys.send2Dbg("stopOnStep",{}),!0;case jt.breaking:Pt(this,r,"m",w).call(this),It(this,T,jt.running,"f");break;default:if((0,kt.tagToken2Name)(t)in Pt(Gt,n,"f",x))return It(this,T,jt.break,"f"),this.main.setLoop(!1,`関数 ${t} ブレーク`),this.sys.callHook("stopOnBreakpoint",{}),this.sys.send2Dbg("stopOnBreakpoint",{}),!0;{const t=Pt(Gt,n,"f",E)[Pt(this,m,"f").call(this,Pt(this,o,"f"))];if(!t)break;const e=t[Pt(this,h,"f")];if(!e)break;if(e.condition){if(!this.prpPrs.parse(e.condition))break}else if("hitCondition"in e&&--e.hitCondition>0)break;const i=Pt(this,T,"f")===jt.running;It(this,T,jt.break,"f"),this.main.setLoop(!1,i?(e.condition?"条件":"ヒットカウント")+"ブレーク":"ステップ実行");const r=i?"stopOnBreakpoint":"stopOnStep";this.sys.callHook(r,{}),this.sys.send2Dbg(r,{})}return!0}return!1},w=function(){const t=Pt(Gt,n,"f",E)[(0,Nt.getFn)(Pt(this,o,"f"))]?.[Pt(this,h,"f")];t?.hitCondition&&--t.hitCondition},A=function(){const t=Pt(this,T,"f")===jt.breaking?1:0,e=Pt(this,s,"f").aToken[Pt(this,a,"f")-1+t],i=Pt(this,m,"f").call(this,Pt(this,o,"f")),n=(0,kt.tagToken2Name)(e),h=n?`[${n}]`:e,l=this.val.getVal("mp:const.sn.macro")??"{}";if(0===Pt(this,a,"f"))return[{fn:i,ln:1,col:1,nm:h,ma:l}];const c=Pt(this,r,"m",I).call(this,Pt(this,s,"f"),Pt(this,a,"f")),f=[{fn:i,ln:c.ln,col:c.col_s+1,nm:h,ma:l}],d=Pt(this,u,"f").length;if(0===d)return f;for(let t=d-1;t>=0;--t){const e=Pt(this,u,"f")[t];if(!e.csArg)continue;const i=Pt(this,at,"f")[e.fn],n=i.aToken[e.idx-1],s=Pt(this,r,"m",I).call(this,i,e.idx),o=(0,kt.tagToken2Name)(n);f.push({fn:Pt(this,m,"f").call(this,e.fn),ln:s.ln,col:s.col_s+1,nm:o?`[${o}]`:n,ma:e.csArg.hMp["const.sn.macro"]??"{}"})}return f},C=function(t){var e;if(!t.name)throw"nameは必須です";let i="";const r=Pt(this,s,"f").len;for(;Pt(this,a,"f")<r&&(i=Pt(this,s,"f").aToken[Pt(this,a,"f")],""===i);It(this,a,(e=Pt(this,a,"f"),++e),"f"));return t.text=i,t.cast="str",this.hTag.let(t),It(this,a,Pt(this,a,"f")+2,"f"),It(this,h,Pt(this,h,"f")+(i.match(/\n/g)??[]).length,"f"),!1},P=function(){if(0===Pt(this,a,"f"))return console.group(`🥟 [dump_stack] スクリプト現在地 fn:${Pt(this,o,"f")} line:1 col:0`),console.groupEnd(),!1;const t=Pt(this,r,"m",I).call(this,Pt(this,s,"f"),Pt(this,a,"f")),e=`スクリプト現在地 fn:${Pt(this,o,"f")} line:${t.ln} col:${t.col_s+1}`;console.group(`🥟 [dump_stack] ${e}`);const i=Pt(this,u,"f").length;if(i>0){console.info(e);for(let t=i-1;t>=0;--t){const e=Pt(this,u,"f")[t];if(!e.csArg)continue;const n=e.csArg.hMp,s=n?n["タグ名"]:null,o=e.csArg.タグ名,a=Pt(this,r,"m",I).call(this,Pt(this,at,"f")[e.fn],e.idx);console.info(`${i-t}つ前のコール元 fn:${e.fn} line:${a.ln} col:${a.col_s+1}`+(s?"（["+s+"]マクロ内）":" ")+`で [${o} ...]をコール`)}}return console.groupEnd(),!1},I=function(t,e){const i={ln:1,col_s:0,col_e:0};if(!t)return i;let r=e-1;const n=i.ln=t.aLNum[r];for(;t.aLNum[r]===n;){if("\n"!==t.aToken[r].charAt(0)){const e=t.aToken[r].length;i.col_e>0&&(i.col_s+=e),i.col_e+=e}if(--r<0)break}return i},N=function(t){const e=t.set_fnc;if(!e)throw"set_fncは必須です";if(It(this,D,globalThis[e],"f"),!Pt(this,D,"f")){if((0,Nt.argChk_Boolean)(t,"need_err",!0))throw`HTML内に関数${e}が見つかりません`;return It(this,D,(()=>{}),"f"),!1}this.noticeBreak=t=>{Pt(this,k,"f")!==Pt(this,o,"f")&&(It(this,k,Pt(this,o,"f"),"f"),Pt(this,D,"f").call(this,Pt(this,B,"f")[Pt(this,o,"f")]=Pt(this,B,"f")[Pt(this,o,"f")]??Pt(this,s,"f").aToken.join(""))),Pt(this,L,"f").call(this,Pt(this,h,"f"),t)},this.noticeBreak(!0);const i=t.break_fnc;if(!i)return!1;if(It(this,L,globalThis[i],"f"),!Pt(this,L,"f")){if((0,Nt.argChk_Boolean)(t,"need_err",!0))throw`HTML内に関数${i}が見つかりません`;It(this,L,(()=>{}),"f")}return!1},G=function(){if(-1===Pt(this,j,"f")[0])throw"ifブロック内ではありません";return It(this,a,Pt(this,j,"f")[0],"f"),Pt(this,j,"f").shift(),!1},U=function(t){var e,i;const r=t.exp;if(!r)throw"expは必須です";if("&"===r.charAt(0))throw"属性expは「&」が不要です";let n=0,o=this.prpPrs.parse(r)?Pt(this,a,"f"):-1;const u=Pt(this,s,"f").aLNum[Pt(this,a,"f")];let l=Pt(this,h,"f")-(u||0);const c=Pt(this,s,"f").len;for(;Pt(this,a,"f")<c;It(this,a,(e=Pt(this,a,"f"),++e),"f")){const t=Pt(this,s,"f").aLNum[Pt(this,a,"f")];Pt(this,s,"f").aLNum[Pt(this,a,"f")]=(t||0)+l;const e=Pt(this,s,"f").aToken[Pt(this,a,"f")];if(!e)continue;const r=e.charCodeAt(0);if(10===r){It(this,h,Pt(this,h,"f")+e.length,"f");continue}if(91!==r)continue;const[u,c]=(0,kt.tagToken2Name_Args)(e);if(!(u in this.hTag))throw`未定義のタグ[${u}]です`;switch(this.alzTagArg.go(c),u){case"if":++n;break;case"elsif":if(n>0)break;if(o>-1)break;const t=this.alzTagArg.hPrm.exp.val??"";if("&"===t.charAt(0))throw"属性expは「&」が不要です";this.prpPrs.parse(t)&&(o=Pt(this,a,"f")+1);break;case"else":if(n>0)break;-1===o&&(o=Pt(this,a,"f")+1);break;case"endif":if(n>0){--n;break}return-1===o?(It(this,a,(i=Pt(this,a,"f"),++i),"f"),Pt(this,s,"f").aLNum[Pt(this,a,"f")]+=l):(Pt(this,j,"f").unshift(Pt(this,a,"f")+1),It(this,a,o,"f"),It(this,h,Pt(this,s,"f").aLNum[Pt(this,a,"f")],"f")),!1}}throw"[endif]がないままスクリプト終端です"},X=function(t){(0,Nt.argChk_Boolean)(t,"count",!1)||Pt(this,r,"m",mt).call(this);const e=t.fn;return e&&Pt(this,d,"f").call(this,e),Pt(this,r,"m",z).call(this,{hEvt1Time:Pt(this,O,"f").popLocalEvts(),hMp:this.val.cloneMp()}),(0,Nt.argChk_Boolean)(t,"clear_local_event",!1)&&this.hTag.clear_event({}),Pt(this,r,"m",J).call(this,e,t.label),!0},z=function(t){Pt(this,s,"f").aLNum[Pt(this,a,"f")]=Pt(this,h,"f"),Pt(this,$,"f")||(t.resvToken="",Pt(this,r,"m",q).call(this)),Pt(this,u,"f").push(new Lt.CallStack(Pt(this,o,"f"),Pt(this,a,"f"),t)),Pt(this,j,"f").unshift(-1)},H=function(t){return(0,Nt.argChk_Boolean)(t,"count",!0)||Pt(this,r,"m",mt).call(this),Pt(this,j,"f")[0]=-1,Pt(this,r,"m",J).call(this,t.fn,t.label),!0},Y=function(t){var e,i;if(-1===Pt(this,Ct,"f"))return!1;if((0,Nt.argChk_Boolean)(t,"clear",!1))return It(this,Rt,[],"f"),It(this,Ct,-1,"f"),!1;const n=t.to;if(!n)throw"clearかtoは必須です";switch(n){case"prev":Pt(this,Ct,"f")>0&&It(this,Ct,(e=Pt(this,Ct,"f"),--e),"f");break;case"next":const t=Pt(this,Rt,"f").length;Pt(this,Ct,"f")<t-1&&It(this,Ct,(i=Pt(this,Ct,"f"),++i),"f");break;default:throw`属性to「${n}」は異常です`}const s=Pt(this,Rt,"f")[Pt(this,Ct,"f")],{fn:o,idx:a}=Pt(this,r,"m",Mt).call(this);return s.key!==a+":"+o&&Pt(this,r,"m",xt).call(this,{fn:s.retFn,index:s.retIdx},s.retMark)},W=function(t){if((0,Nt.argChk_Boolean)(t,"clear",!1))It(this,u,[],"f");else if(!Pt(this,u,"f").pop())throw"[pop_stack] スタックが空です";return Pt(this,r,"m",q).call(this),It(this,j,[-1],"f"),this.val.setMp({}),!1},V=function(){const t=Pt(this,u,"f").pop();if(!t)throw"[return] スタックが空です";const e=t.csArg;if(!e)return!1;Pt(this,j,"f").shift();const i=e.hMp;i&&this.val.setMp(i);const n=e.resvToken;return n?this.nextToken=()=>(Pt(this,r,"m",q).call(this),n):Pt(this,r,"m",q).call(this),e.hEvt1Time&&Pt(this,O,"f").pushLocalEvts(e.hEvt1Time),t.fn in Pt(this,at,"f")?(Pt(this,r,"m",ut).call(this,t),!1):(Pt(this,r,"m",J).call(this,t.fn,"",t.idx),!0)},q=function(){It(this,$,"","f"),this.nextToken=Pt(this,r,"m",K)},J=function(t="",e="",i=0){if(t||e||this.main.errScript("[jump系] fnまたはlabelは必須です"),e?("*"!==e.charAt(0)&&this.main.errScript("[jump系] labelは*で始まります"),It(this,Z,e,"f"),"**"!==Pt(this,Z,"f").slice(0,2)&&It(this,a,i,"f")):(It(this,Z,"","f"),It(this,a,i,"f")),!t)return void this.analyzeInit();const n=Pt(this,d,"f").call(this,t);if(t===Pt(this,o,"f"))return void this.analyzeInit();It(this,o,t,"f");const u=Pt(this,at,"f")[Pt(this,o,"f")];if(u)return It(this,s,u,"f"),void this.analyzeInit();(new Bt.Loader).add({name:Pt(this,o,"f"),url:n}).use(((t,e)=>{try{t.data=this.sys.decStr(t.extension,t.data)}catch(e){this.main.errScript(`[jump系]snロード失敗です fn:${t.name} ${e}`,!1)}e?.()})).load(((e,i)=>{this.nextToken=Pt(this,r,"m",K),It(this,h,1,"f"),Pt(this,r,"m",ht).call(this,i[t].data),this.hTag.record_place({}),this.main.resume((()=>this.analyzeInit()))})),this.main.stop()},K=function(){var t;if(Pt(this,r,"m",tt).call(this))return"";Pt(this,r,"m",dt).call(this),Pt(this,s,"f").aLNum[Pt(this,a,"f")]||=Pt(this,h,"f");const e=Pt(this,s,"f").aToken[Pt(this,a,"f")];return Pt(this,Q,"f").call(this,e),It(this,a,(t=Pt(this,a,"f"),++t),"f"),e},tt=function(){return!(Pt(this,a,"f")<Pt(this,s,"f").len||(this.main.errScript("スクリプト終端です"),0))},ot=function(t,e,i,n,s){const o=t.aToken.length;if(!n){if(Pt(this,r,"m",tt).call(this))return{idx:s,ln:i};if(t.aLNum[s])i=t.aLNum[s];else{i=1;for(let e=0;e<s;++e){t.aLNum[e]||=i;const r=t.aToken[e];10===r.charCodeAt(0)?i+=r.length:i+=(r.match(/\n/g)??[]).length}t.aLNum[s]=i}return{idx:s,ln:i}}t.aLNum[0]=1;const a=n.match(Pt(this,et,"f"));if(a){n=a[1];let r=s;switch(a[2]){case"before":for(;t.aToken[--r]!==n;)0===r&&Ft.DebugMng.myTrace("[jump系 無名ラベルbefore] "+i+"行目以前で"+(e?"マクロ内に":"")+"ラベル【"+n+"】がありません","ET"),e&&t.aToken[r].search(Pt(this,it,"f"))>-1&&Ft.DebugMng.myTrace("[jump系 無名ラベルbefore] マクロ内にラベル【"+n+"】がありません","ET");return{idx:r+1,ln:t.aLNum[r]};case"after":for(;t.aToken[++r]!==n;)r===o&&Ft.DebugMng.myTrace("[jump系 無名ラベルafter] "+i+"行目以後でマクロ内にラベル【"+n+"】がありません","ET"),t.aToken[r].search(Pt(this,rt,"f"))>-1&&Ft.DebugMng.myTrace("[jump系 無名ラベルafter] "+i+"行目以後でマクロ内にラベル【"+n+"】がありません","ET");return{idx:r+1,ln:t.aLNum[r]};default:Ft.DebugMng.myTrace("[jump系] 無名ラベル指定【label="+n+"】が間違っています","ET")}}i=1;const h=new RegExp("^"+n.replaceAll("*","\\*")+"(?:\\s|;|\\[|$)");let u=!1;for(let e=0;e<o;++e){t.aLNum[e]||=i;const r=t.aToken[e],n=r.charCodeAt(0);if(10!==n){if(42!==n)91===n&&(i+=(r.match(/\n/g)??[]).length,u?(Pt(this,st,"f").lastIndex=0,Pt(this,st,"f").test(r)&&(u=!1)):(Pt(this,nt,"f").lastIndex=0,Pt(this,nt,"f").test(r)&&(u=!0)));else if(r.search(h)>-1)return{idx:e+1,ln:i}}else i+=r.length}if(u)throw"[let_ml]の終端・[endlet_ml]がありません";throw Ft.DebugMng.myTrace(`[jump系] ラベル【${n}】がありません`,"ET"),"Dummy"},ht=function(t){const e=t.replace(/(\r\n|\r)/g,"\n").match(Pt(this,l,"f").REG_TOKEN)??[];for(let t=e.length-1;t>=0;--t){const i=e[t];if(Pt(this,nt,"f").lastIndex=0,Pt(this,nt,"f").test(i)){const r=i.indexOf("]")+1;if(0===r)throw"[let_ml]で閉じる【]】がありません";const n=i.slice(0,r),s=i.slice(r);e.splice(t,1,n,s)}}It(this,s,{aToken:e,len:e.length,aLNum:[]},"f");let i="";try{i="ScriptIterator.replaceScriptChar2macro",Pt(this,l,"f").replaceScr_C2M_And_let_ml(Pt(this,s,"f")),i="ScriptIterator.replaceScript_Wildcard",Pt(this,ft,"f").call(this)}catch(t){if(t instanceof Error){const e=t;i+=`例外 mes=${e.message}(${e.name})`}else i=t;this.main.errScript(i,!1)}Pt(this,at,"f")[Pt(this,o,"f")]=Pt(this,s,"f"),this.val.loadScrWork(Pt(this,o,"f"))},ut=function(t){It(this,o,t.fn,"f"),It(this,a,t.idx,"f");const e=Pt(this,at,"f")[Pt(this,o,"f")];e&&It(this,s,e,"f"),It(this,h,Pt(this,s,"f").aLNum[t.idx],"f")},dt=function(){const t=this.val.getAreaKidoku(Pt(this,o,"f"));if(!t)throw`recordKidoku fn:'${Pt(this,o,"f")}' (areas === null)`;Pt(this,u,"f").length>0?t.record(Pt(this,a,"f")):(It(this,pt,t.search(Pt(this,a,"f")),"f"),this.val.setVal_Nochk("tmp","const.sn.isKidoku",Pt(this,pt,"f")),Pt(this,pt,"f")||t.record(Pt(this,a,"f")))},mt=function(){this.val.getAreaKidoku(Pt(this,o,"f"))?.erase(Pt(this,a,"f")),It(this,pt,!1,"f")},gt=function(t){return Pt(this,l,"f").bracket2macro(t,Pt(this,s,"f"),Pt(this,a,"f")),!1},vt=function(t){return Pt(this,l,"f").char2macro(t,this.hTag,Pt(this,s,"f"),Pt(this,a,"f")),!1},_t=function(t){var e,i;const n=t.name;if(!n)throw"nameは必須です";if(n in this.hTag)throw`[${n}]はタグかすでに定義済みのマクロです`;const u=Pt(this,h,"f"),l=new Lt.CallStack(Pt(this,o,"f"),Pt(this,a,"f"));for(It(this,yt,Pt(this,yt,"f")+"|"+n,"f"),It(this,bt,new RegExp(`\\[(${Pt(this,yt,"f")})\\b`),"f"),this.hTag[n]=e=>(e.design_unit=t.design_unit,Pt(this,r,"m",z).call(this,{...e,hMp:this.val.cloneMp()}),this.val.setMp(e),this.val.setVal_Nochk("mp","const.sn.macro",JSON.stringify(t)),this.val.setVal_Nochk("mp","const.sn.me_call_scriptFn",Pt(this,o,"f")),It(this,h,u,"f"),Pt(this,r,"m",ut).call(this,l),!1);Pt(this,a,"f")<Pt(this,s,"f").len;It(this,a,(e=Pt(this,a,"f"),++e),"f")){Pt(this,s,"f").aLNum[Pt(this,a,"f")]||=Pt(this,h,"f");const t=Pt(this,s,"f").aToken[Pt(this,a,"f")];if(t.search(Pt(this,rt,"f"))>-1)return It(this,a,(i=Pt(this,a,"f"),++i),"f"),!1;const e=t.charCodeAt(0);10===e?It(this,h,Pt(this,h,"f")+t.length,"f"):91===e&&It(this,h,Pt(this,h,"f")+(t.match(/\n/g)??[]).length,"f")}throw`マクロ[${n}]定義の終端・[endmacro]がありません`},Et=function(t){if(!("place"in t))throw"placeは必須です";const e=Number(t.place);if("fn"in t!="label"in t)throw"fnとlabelはセットで指定して下さい";const i=this.val.getMark(e);if(!i)throw`place【${e}】は存在しません`;return Pt(this,r,"m",xt).call(this,t,i)},xt=function(t,e,i=!0){this.hTag.clear_event({}),this.val.mark2save(e),this.val.setMp({}),Pt(this,R,"f").recText("",!0),i&&this.sndMng.playLoopFromSaveObj(),(0,Nt.argChk_Boolean)(t,"do_rec",!0)&&It(this,wt,{hSave:this.val.cloneSave(),hPages:{...e.hPages},aIfStk:[...e.aIfStk]},"f");const n={enabled:this.val.getVal("save:const.sn.autowc.enabled"),text:this.val.getVal("save:const.sn.autowc.text"),time:Number(this.val.getVal("save:const.sn.autowc.time"))};this.hTag.autowc(n);const s=String(this.val.getVal("save:const.sn.scriptFn")),h=Number(this.val.getVal("save:const.sn.scriptIdx"));return It(this,j,[...Pt(this,wt,"f").aIfStk],"f"),It(this,u,[],"f"),Pt(this,R,"f").cover(!0),Pt(this,R,"f").stopAllTw(),"index"in t?(Pt(this,R,"f").playback(Pt(this,wt,"f").hPages,(()=>{Pt(this,R,"f").cover(!1),It(this,Tt,!0,"f"),Pt(this,r,"m",J).call(this,t.fn??s,"",t.index??h)})),!0):(delete Pt(this,at,"f")[s],Pt(this,R,"f").playback(Pt(this,wt,"f").hPages,"label"in t?()=>{Pt(this,R,"f").cover(!1),It(this,o,s,"f"),It(this,a,h,"f"),this.hTag.call({fn:t.fn,label:t.label})}:()=>{Pt(this,R,"f").cover(!1),Pt(this,r,"m",J).call(this,s,"",h)}),!0)},St=function(t){const e=this.val.getMark(0);return delete Pt(this,at,"f")[(0,Nt.getFn)(e.hSave["const.sn.scriptFn"])],t.do_rec=!1,Pt(this,r,"m",xt).call(this,t,e,!1)},At=function(){if(this.main.isDestroyed())return!1;const{fn:t,idx:e}=Pt(this,r,"m",Mt).call(this);return this.val.setVal_Nochk("save","const.sn.scriptFn",t),this.val.setVal_Nochk("save","const.sn.scriptIdx",e),It(this,wt,{hSave:this.val.cloneSave(),hPages:Pt(this,R,"f").record(),aIfStk:Pt(this,j,"f").slice(Pt(this,u,"f").length)},"f"),!1},Mt=function(){const t=Pt(this,u,"f").length;if(0===t)return{fn:Pt(this,o,"f"),idx:Pt(this,a,"f")};const e=Pt(this,u,"f")[t-1];return{fn:e.fn,idx:e.idx}},Ot=function(t){if(!("place"in t))throw"placeは必須です";const e=Number(t.place);delete t.タグ名,delete t.place,t.text=(t.text??"").replace(/^(<br\/>)+/,""),Pt(this,wt,"f").json=t,this.val.setMark(e,Pt(this,wt,"f"));const i=Number(this.val.getVal("sys:const.sn.save.place"));return e===i&&this.val.setVal_Nochk("sys","const.sn.save.place",i+1),!1},p={value:/(.+)\/crypto_prj\/([^\/]+)\/[^\.]+(\.\w+)/},E={value:{}},x={value:{}}},"./core/src/sn/SoundMng.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},P=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.SoundMng=void 0;const I=i("./core/src/sn/CmnLib.ts"),N=i("./core/src/sn/CmnTween.ts"),D=i("./core/src/sn/Config.ts"),L=i("./node_modules/@pixi/sound/dist/pixi-sound.esm.js"),k=i("./node_modules/pixi.js/dist/esm/pixi.js"),B=i("./node_modules/@tweenjs/tween.js/dist/tween.esm.js");class F{constructor(t,e,i,n,u){this.cfg=t,this.val=i,this.main=n,this.sys=u,r.add(this),s.set(this,{}),o.set(this,{}),a.set(this,void 0),_.set(this,(()=>{L.sound.volumeAll=Number(this.val.getVal("sys:sn.sound.global_volume",1)),P(this,_,(()=>{}),"f")})),e.volume=t=>C(this,r,"m",h).call(this,t),e.fadebgm=t=>C(this,r,"m",f).call(this,t),e.fadeoutbgm=t=>C(this,r,"m",l).call(this,t),e.fadeoutse=t=>C(this,r,"m",c).call(this,t),e.fadese=t=>C(this,r,"m",d).call(this,t),e.playbgm=t=>C(this,r,"m",p).call(this,t),e.playse=t=>C(this,r,"m",g).call(this,t),e.stop_allse=()=>C(this,r,"m",y).call(this),e.stopbgm=t=>C(this,r,"m",b).call(this,t),e.stopse=t=>C(this,r,"m",E).call(this,t),e.wb=t=>C(this,r,"m",x).call(this,t),e.wf=t=>C(this,r,"m",T).call(this,t),e.stopfadese=t=>C(this,r,"m",S).call(this,t),e.wl=t=>C(this,r,"m",w).call(this,t),e.ws=t=>C(this,r,"m",A).call(this,t),e.xchgbuf=t=>C(this,r,"m",M).call(this,t),this.val.setVal_Nochk("save","const.sn.loopPlaying","{}"),i.setVal_Nochk("tmp","const.sn.sound.codecs",JSON.stringify(L.utils.supported))}setEvtMng(t){P(this,a,t,"f")}setNoticeChgVolume(t,e){this.val.defValTrg("sys:sn.sound.global_volume",((e,i)=>t(L.sound.volumeAll=Number(i)))),this.val.defValTrg("sys:sn.sound.movie_volume",((t,i)=>e(Number(i)))),this.val.setVal_Nochk("sys","sn.sound.global_volume",this.val.getVal("sys:sn.sound.global_volume",1)),this.val.setVal_Nochk("sys","sn.sound.movie_volume",this.val.getVal("sys:sn.sound.movie_volume",1))}loadAheadSnd(t){[t.clickse,t.enterse,t.leavese].forEach((t=>{t&&!L.sound.exists(t)&&C(this,r,"m",v).call(this,t,{preload:!0,autoPlay:!1})}))}playLoopFromSaveObj(){const t=String(this.val.getVal("save:const.sn.loopPlaying","{}"));if(this.val.flush(),"{}"===t)return void C(this,r,"m",y).call(this);const e=[];P(this,o,JSON.parse(t),"f");for(const t in C(this,o,"f")){const i="save:const.sn.sound."+t+".",n={fn:String(this.val.getVal(i+"fn")),buf:t,join:!1,loop:!0,volume:Number(this.val.getVal(i+"volume")),start_ms:Number(this.val.getVal(i+"start_ms")),end_ms:Number(this.val.getVal(i+"end_ms")),ret_ms:Number(this.val.getVal(i+"ret_ms"))};e.push((()=>{"BGM"===n.buf?C(this,r,"m",p).call(this,n):C(this,r,"m",g).call(this,n)}))}C(this,r,"m",y).call(this),e.forEach((t=>t()))}}e.SoundMng=F,n=F,s=new WeakMap,o=new WeakMap,a=new WeakMap,_=new WeakMap,r=new WeakSet,h=function(t){const e="const.sn.sound."+(t.buf??"SE")+".volume",i=C(this,r,"m",u).call(this,t,1);return Number(this.val.getVal("sys:"+e))!==i&&(this.val.setVal_Nochk("sys",e,i),this.val.flush(),t.time=0,t.volume=Number(this.val.getVal("save:"+e)),C(this,r,"m",d).call(this,t))},u=function(t,e){const i=(0,I.argChk_Num)(t,"volume",e);return i<0?0:i>1?1:i},l=function(t){return t.volume=0,C(this,r,"m",f).call(this,t)},c=function(t){return t.volume=0,C(this,r,"m",d).call(this,t)},f=function(t){return t.buf="BGM",C(this,r,"m",d).call(this,t)},d=function(t){C(this,r,"m",S).call(this,t);const e=t.buf??"SE",i=C(this,s,"f")[e];if(!i?.playing()||!i.snd)return!1;const n="const.sn.sound."+e+".volume",o=C(this,r,"m",u).call(this,t,NaN);this.val.setVal_Nochk("save",n,o);const a=o*Number(this.val.getVal("sys:"+n,1)),h=(0,I.argChk_Boolean)(t,"stop",0===o);if(h&&(C(this,r,"m",R).call(this,e),this.val.setVal_Nochk("save","const.sn.sound."+e+".fn","")),this.val.flush(),0===(0,I.argChk_Num)(t,"time",NaN))return i.snd.volume=a,h&&C(this,r,"m",E).call(this,t),!1;const l=N.CmnTween.ease(t.ease),c=(0,I.argChk_Num)(t,"repeat",1);return i.twFade=new B.Tween({v:i.snd.volume}).to({v:a},(0,I.argChk_Num)(t,"time",NaN)).delay((0,I.argChk_Num)(t,"delay",0)).easing(l).repeat(0===c?1/0:c-1).yoyo((0,I.argChk_Boolean)(t,"yoyo",!1)).onUpdate((t=>{i.playing()&&(i.snd.volume=t.v)})).onComplete((()=>{const e=C(this,s,"f")[t.buf=i.now_buf];e?.twFade&&(delete e.twFade,h&&C(this,r,"m",E).call(this,t),e.resumeFade&&this.main.resume())})).start(),!1},p=function(t){return t.buf="BGM",t.canskip=!1,(0,I.argChk_Boolean)(t,"loop",!0),C(this,r,"m",g).call(this,t)},g=function(t){const e=t.buf??"SE";C(this,r,"m",E).call(this,{buf:e});const i=t.fn;if(!i)throw"[playse] fnは必須です(buf="+e+")";if((0,I.argChk_Boolean)(t,"canskip",!0)&&C(this,a,"f").isSkipKeyDown())return!1;const o=(0,I.argChk_Boolean)(t,"loop",!1);C(this,r,"m",O).call(this,e,o);const h="const.sn.sound."+e+".";this.val.setVal_Nochk("save",h+"fn",i);const l=C(this,r,"m",u).call(this,t,1);this.val.setVal_Nochk("save",h+"volume",l);const c=l*Number(this.val.getVal("sys:"+h+"volume",1)),f=(0,I.argChk_Num)(t,"start_ms",0),d=(0,I.argChk_Num)(t,"end_ms",C(F,n,"f",m)),p=(0,I.argChk_Num)(t,"ret_ms",0);if(f<0)throw`[playse] start_ms:${f} が負の値です`;if(p<0)throw`[playse] ret_ms:${p} が負の値です`;if(d>0){if(f>=d)throw`[playse] start_ms:${f} >= end_ms:${d} は異常値です`;if(p>=d)throw`[playse] ret_ms:${p} >= end_ms:${d} は異常値です`}this.val.setVal_Nochk("save",h+"start_ms",f),this.val.setVal_Nochk("save",h+"end_ms",d),this.val.setVal_Nochk("save",h+"ret_ms",p),this.val.flush();const g=L.sound.find(i),y=C(this,s,"f")[e]={now_buf:e,snd:g,loop:o,start_ms:f,end_ms:d,ret_ms:p,resume:!1,playing:()=>!0,onend:()=>{const e=C(this,s,"f")[t.buf=y.now_buf];e&&(delete C(this,s,"f")[t.buf],e.playing=()=>!1,C(this,r,"m",S).call(this,t),e.resume&&this.main.resume())}},b={loop:o,volume:c,speed:(0,I.argChk_Num)(t,"speed",1),sprites:{},loaded:(t,e)=>{if(t)return void this.main.errScript(`Sound ロード失敗ですa fn:${i} ${t}`,!1);if(!e)return;const r=C(this,s,"f")[y.now_buf];r&&(r.snd=e)}};let x="";if(f>0||d<C(F,n,"f",m)){x=`${i};${f};${d};${p}`;const t=b.sprites[x]={start:f/1e3,end:d/1e3};b.preload=!0;const e=b.loaded;b.loaded=(r,s)=>{if(r)return void this.main.errScript(`Sound ロード失敗ですb fn:${i} ${r}`,!1);if(!s)return;const o=s.duration;if(e?.(r,s),t.end<0){if(t.end+=o,s.removeSprites(x),s.addSprites(x,t),t.start>=t.end)throw`[playse] start_ms:${f} >= end_ms:${d}(${1e3*t.end}) は異常値です`;if(p>=1e3*t.end)throw`[playse] ret_ms:${p} >= end_ms:${d}(${1e3*t.end}) は異常値です`}if(t.start>=o)throw`[playse] start_ms:${f} >= 音声ファイル再生時間:${o} は異常値です`;if(d!==C(F,n,"f",m)&&t.end>=o)throw`[playse] end_ms:${d} >= 音声ファイル再生時間:${o} は異常値です`;s.play(x,b.complete)}}else b.autoPlay=!0;if(o?0!==p&&(b.loop=!1,b.complete=t=>{const e=t.duration,n=`${i};loop2;${d};${p}`,o={preload:!0,loop:!0,volume:c,speed:b.speed,sprites:{},loaded:(t,e)=>{if(!e)return;const i=C(this,s,"f")[y.now_buf];i&&(i.snd=e),e.play(n)}},a=o.sprites[n]={start:p/1e3,end:d/1e3};if(a.end<0&&(a.end+=e,t.removeSprites(n),t.addSprites(n,a)),a.start>=e)throw`[playse] ret_ms:${p} >= 音声ファイル再生時間:${e} は異常値です`;C(this,r,"m",v).call(this,i,o)}):b.complete=()=>C(this,s,"f")[y.now_buf]?.onend(),C(this,_,"f").call(this),g){if(g.volume=c,x)C(this,r,"m",v).call(this,i,b);else if(g.isPlayable){const t=g.options.source;t instanceof ArrayBuffer&&0!==t.byteLength?y.snd=L.Sound.from({...b,url:g.options.url,source:g.options.source}):C(this,r,"m",v).call(this,i,b)}return!1}const T=(0,I.argChk_Boolean)(t,"join",!0);if(T){const t=b.loaded;b.loaded=(e,i)=>{this.main.resume(),t?.(e,i)}}return C(this,r,"m",v).call(this,i,b),T},v=function(t,e){const i=this.cfg.searchPath(t,D.Config.EXT_SOUND);if(".bin"!==i.slice(-4))return e.url=i,void L.Sound.from(e);(new k.Loader).add({name:t,url:i,xhrType:k.LoaderResource.XHR_RESPONSE_TYPE.BUFFER}).use(((t,e)=>{this.sys.dec(t.extension,t.data).then((i=>{t.data=i,e?.()})).catch((e=>this.main.errScript(`Sound ロード失敗です fn:${t.name} ${e}`,!1)))})).load(((i,r)=>{e.source=r[t]?.data,L.Sound.from(e)}))},y=function(){L.sound.removeAll();for(const t in C(this,s,"f"))C(this,r,"m",E).call(this,{buf:t});return P(this,s,{},"f"),!1},b=function(t){return t.buf="BGM",C(this,r,"m",E).call(this,t)},E=function(t){const e=t.buf??"SE";return C(this,r,"m",S).call(this,t),C(this,r,"m",R).call(this,e),C(this,s,"f")[e]?.snd?.stop(),!1},x=function(t){return t.buf="BGM",C(this,r,"m",T).call(this,t)},T=function(t){const e=t.buf??"SE",i=C(this,s,"f")[e];return!(!i?.twFade||!i.playing())&&(i.resumeFade=C(this,a,"f").waitEvent((()=>C(this,r,"m",S).call(this,t)),(0,I.argChk_Boolean)(t,"canskip",!0),(0,I.argChk_Boolean)(t,"global",!1)))},S=function(t){const e=t.buf??"SE";return C(this,s,"f")[e]?.twFade?.stop().end(),!1},w=function(t){return t.buf="BGM",C(this,r,"m",A).call(this,t)},A=function(t){const e=t.buf??"SE",i=C(this,s,"f")[e];return!(!i?.playing()||i.loop)&&(i.resume=C(this,a,"f").waitEvent((()=>{t.buf=i.now_buf,C(this,r,"m",E).call(this,t);const e=C(this,s,"f")[t.buf];e?.playing()&&!e.loop&&e.onend()}),(0,I.argChk_Boolean)(t,"canskip",!1),(0,I.argChk_Boolean)(t,"global",!1)))},M=function(t){const e=t.buf??"SE",i=t.buf2??"SE";if(e===i)return!1;const r=C(this,s,"f")[e];r&&(r.now_buf=i);const n=C(this,s,"f")[i];n&&(n.now_buf=e),[C(this,s,"f")[e],C(this,s,"f")[i]]=[n,r];const a="const.sn.sound."+e+".",h=Number(this.val.getVal("save:"+a+"volume")),u=Number(this.val.getVal("save:"+a+"fn")),l="const.sn.sound."+i+".",c=Number(this.val.getVal("save:"+l+"volume")),f=Number(this.val.getVal("save:"+l+"fn"));return this.val.setVal_Nochk("save",a+"volume",c),this.val.setVal_Nochk("save",l+"volume",h),this.val.setVal_Nochk("save",a+"fn",f),this.val.setVal_Nochk("save",l+"fn",u),e in C(this,o,"f")==i in C(this,o,"f")&&(e in C(this,o,"f")?(delete C(this,o,"f")[e],C(this,o,"f")[i]=0):(delete C(this,o,"f")[i],C(this,o,"f")[e]=0),this.val.setVal_Nochk("save","const.sn.loopPlaying",JSON.stringify(C(this,o,"f")))),this.val.flush(),!1},O=function(t,e){e?(C(this,o,"f")[t]=0,this.val.setVal_Nochk("save","const.sn.loopPlaying",JSON.stringify(C(this,o,"f"))),this.val.flush()):C(this,r,"m",R).call(this,t)},R=function(t){delete C(this,o,"f")[t],this.val.setVal_Nochk("save","const.sn.loopPlaying",JSON.stringify(C(this,o,"f"))),this.val.flush()},m={value:999e3}},"./core/src/sn/SysBase.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},m=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.SysBase=void 0;const g=i("./core/src/sn/CmnLib.ts"),v=i("./node_modules/socket.io-client/build/cjs/index.js");class _{constructor(t={},e){this.hPlg=t,this.arg=e,this.hFactoryCls={},this.fetch=t=>fetch(t),this.resolution=1,this.reso4frame=1,this.data={sys:{},mark:{},kidoku:{}},this.extPort=3776,n.set(this,null),s.set(this,{auth:t=>{t.t===this.cfg.oCfg.debuger_token?this.toast("接続"):this.end()},continue:()=>this.toast("再生"),disconnect:()=>this.toast("切断"),restart:t=>{this.send2Dbg(t?.ri??"",{}),this.end(),this.run()},pause:()=>this.toast("一時停止"),stopOnEntry:()=>this.toast("一時停止"),stopOnDataBreakpoint:()=>this.toast("注意"),stopOnBreakpoint:()=>this.toast("注意"),stopOnStep:()=>this.toast("一歩進む"),stopOnStepIn:()=>this.toast("ステップイン"),stopOnStepOut:()=>this.toast("ステップアウト"),stopOnBackstep:()=>this.toast("一歩戻る"),_addPath:t=>this.cfg.addPath(t.fn,t.o)}),this.pathBaseCnvSnPath4Dbg="",a.set(this,[]),this.callHook=(t,e)=>{},this.send2Dbg=(t,e)=>{p(this,n,"f")?.emit("data",t,e)},this.copyBMFolder=(t,e)=>{},this.eraseBMFolder=t=>{},this.close=()=>!1,this._export=()=>!1,this._import=()=>!1,this.navigate_to=()=>!1,this.title=t=>{const e=t.text;if(!e)throw"[title] textは必須です";return m(this,h,e,"f"),this.titleSub(p(this,h,"f")+p(this,u,"f")),!1},h.set(this,""),this.tgl_full_scr=()=>!1,this.update_check=()=>!1,this.window=()=>!1,u.set(this,""),l.set(this,((t,e)=>({ret:e.toString(),ext_num:0}))),c.set(this,{1:{ext:"jpeg",fnc:t=>p(this,f,"f").call(this,t),mime:"image/jpeg"},2:{ext:"png",fnc:t=>p(this,f,"f").call(this,t),mime:"image/png"},3:{ext:"svg",fnc:t=>p(this,f,"f").call(this,t),mime:"image/svg+xml"},4:{ext:"webp",fnc:t=>p(this,f,"f").call(this,t),mime:"image/webp"},10:{ext:"mp3",fnc:t=>t.arrayBuffer(),mime:"audio/mpeg"},11:{ext:"m4a",fnc:t=>t.arrayBuffer(),mime:"audio/aac"},12:{ext:"ogg",fnc:t=>t.arrayBuffer(),mime:"audio/ogg"},13:{ext:"aac",fnc:t=>t.arrayBuffer(),mime:"audio/aac"},14:{ext:"flac",fnc:t=>t.arrayBuffer(),mime:"audio/flac"},15:{ext:"wav",fnc:t=>t.arrayBuffer(),mime:"audio/wav"},20:{ext:"mp4",fnc:t=>p(this,d,"f").call(this,t),mime:"video/mp4"},21:{ext:"webm",fnc:t=>p(this,d,"f").call(this,t),mime:"video/webm"},22:{ext:"ogv",fnc:t=>p(this,d,"f").call(this,t),mime:"video/ogv"}}),f.set(this,(t=>new Promise(((e,i)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t=>i(t),r.src=URL.createObjectURL(t)})))),d.set(this,(t=>new Promise(((e,i)=>{const r=document.createElement("video");r.addEventListener("error",(()=>i(r?.error?.message??""))),r.addEventListener("canplay",(()=>e(r))),r.src=URL.createObjectURL(t)})))),this.enc=t=>t,this.stk=()=>"",this.hash=t=>"",this.isApp=!1,this.$path_downloads="",this.$path_userdata="",this.canCapturePage=t=>!1,this.ofsLeft4frm=0,this.ofsTop4frm=0}async loaded(t,e){const i=t.snsys_pre;return delete t.snsys_pre,i?.init({addTag:()=>{},addLayCls:()=>{},searchPath:()=>"",getVal:()=>({}),resume:()=>{},render:()=>{},setDec:t=>m(this,l,t,"f"),setEnc:t=>this.enc=t,getStK:t=>this.stk=t,getHash:t=>this.hash=t})}get cur(){return this.arg.cur}get crypto(){return this.arg.crypto}async loadPath(t,e){this.cfg=e}initVal(t,e,i){}flush(){}async run(){}init(t,e,i,r){this.val=i,this.appPixi=e;let n="";try{this.val.setSys(this),n="sys",n+=Number(this.val.getVal("sys:TextLayer.Back.Alpha",1)),n="kidoku",this.val.saveKidoku()}catch(t){console.error(`セーブデータ（${n}）が壊れています。一度クリアする必要があります %o`,t)}t.close=t=>this.close(t),t.export=t=>this._export(t),t.import=t=>this._import(t),t.navigate_to=t=>this.navigate_to(t),t.title=t=>this.title(t),t.toggle_full_screen=t=>this.tgl_full_scr(t),t.update_check=t=>this.update_check(t),t.window=t=>this.window(t),i.setVal_Nochk("tmp","const.sn.isApp",(()=>this.isApp)),i.setVal_Nochk("tmp","const.sn.isDbg",(()=>g.CmnLib.isDbg)),i.setVal_Nochk("tmp","const.sn.isPackaged",(()=>g.CmnLib.isPackaged)),i.setVal_Nochk("sys",_.VALNM_CFG_NS,this.cfg.oCfg.save_ns),i.flush(),g.CmnLib.isDbg&&this.attach_debug(r),this.hFactoryCls={};const s=[];for(const e in this.hPlg)s.push(this.hPlg[e].init({addTag:(e,i)=>{if(t[e])throw`すでに定義済みのタグ[${e}]です`;t[e]=i},addLayCls:(t,e)=>{if(this.hFactoryCls[t])throw`すでに定義済みのレイヤcls【${t}】です`;this.hFactoryCls[t]=e},searchPath:(t,e="")=>this.cfg.searchPath(t,e),getVal:i.getVal,resume:()=>r.resume(),render:(t,e,i=!1)=>this.appPixi.renderer.render(t,{renderTexture:e,clear:i}),setDec:t=>m(this,l,t,"f"),setEnc:t=>this.enc=t,getStK:t=>this.stk=t,getHash:t=>this.hash=t}));return s}attach_debug(t){this.attach_debug=()=>{};const e=document.createElement("style");e.innerHTML="/* SKYNovel Dbg */\n.sn_BounceInOut { animation: sn_kfBounceInOut linear 1.5s; }\n@keyframes sn_kfBounceInOut{\n0%\t{opacity: 0;\ttransform: scaleX(0.30) scaleY(0.30);}\n10%\t{opacity: 1;\ttransform: scaleX(1.10) scaleY(1.10);}\n20%\t{\t\t\t\ttransform: scaleX(0.95) scaleY(0.95);}\n30%\t{\t\t\t\ttransform: scaleX(1.00) scaleY(1.00);}\n70%\t{opacity: 1;}\n100%{opacity: 0;}\n}\n.sn_BounceIn { animation: sn_kfBounceIn linear 0.3s; }\n@keyframes sn_kfBounceIn{\n0%\t{opacity: 0;\ttransform: scaleX(0.30) scaleY(0.30);}\n50%\t{opacity: 1;\ttransform: scaleX(1.10) scaleY(1.10);}\n100%{\t\t\t\ttransform: scaleX(0.95) scaleY(0.95);}\n}\n.sn_HopIn { animation: sn_kfHopIn linear 0.8s; }\n@keyframes sn_kfHopIn{\n0%\t{transform:\ttranslate(0px,   0px);}\n15% {transform:\ttranslate(0px, -25px);}\n30% {transform:\ttranslate(0px,   0px);}\n45% {transform:\ttranslate(0px, -15px);}\n60% {transform:\ttranslate(0px,   0px);}\n75% {transform:\ttranslate(0px,  -5px);}\n100%{transform:\ttranslate(0px,   0px);}\n}",document.getElementsByTagName("head")[0].appendChild(e),this.addHook(((t,e)=>p(this,s,"f")[t]?.(e))),m(this,n,(0,v.io)(`http://localhost:${this.extPort}`),"f"),p(this,n,"f").on("data",((t,e)=>{this.callHook(t,e)})).on("disconnect",(()=>t.setLoop(!0))),this.callHook=(t,e)=>p(this,a,"f").forEach((i=>i(t,e)))}end(){p(this,n,"f")?.disconnect(),m(this,n,null,"f")}toast(t){const e=document.getElementById(g.CmnLib.SN_ID);if(!e)return;const i=e.parentNode;i.querySelectorAll(".sn_BounceIn, .sn_HopIn").forEach((t=>i.removeChild(t)));const n=document.createElement("img"),s=p(_,r,"f",o)[t];n.src=`data:image/svg+xml;base64,${s.dat}`;const a=Math.min(g.CmnLib.stageW,g.CmnLib.stageH)/4*g.CmnLib.cvsScale;n.width=n.height=a,n.style.cssText=`position: absolute;\nleft: ${(g.CmnLib.stageW-a)/2*g.CmnLib.cvsScale+a*(s.dx??0)}px;\ntop: ${(g.CmnLib.stageH-a)/2*g.CmnLib.cvsScale+a*(s.dy??0)}px;`,n.classList.add("sn_toast",s.ease??"sn_BounceInOut"),s.ease||n.addEventListener("animationend",(()=>i.removeChild(n)),{once:!0,passive:!0}),i.insertBefore(n,e)}setFire(t){this.fire=t}addHook(t){p(this,a,"f").push(t)}titleSub(t){}setTitleInfo(t){m(this,u,t,"f"),this.titleSub(p(this,h,"f")+p(this,u,"f"))}decStr(t,e){return p(this,l,"f").call(this,t,e).ret}async dec(t,e){const{ret:i,ext_num:r}=p(this,l,"f").call(this,t,e),n=p(this,c,"f")[r];return n?.fnc?await n.fnc(new Blob([i],{type:n.mime})):i}get path_downloads(){return this.$path_downloads}get path_userdata(){return this.$path_userdata}async savePic(t,e){}async appendFile(t,e,i){}async ensureFileSync(t){}resizeFrames(){const t=this.appPixi.view.getBoundingClientRect(),e=document.getElementsByTagName("iframe"),i=e.length;for(let r=0;r<i;++r){const i=e[r],n=`const.sn.frm.${i.id}`;i.style.left=this.ofsLeft4frm+t.left+Number(this.val.getVal(`tmp:${n}.x`))*this.reso4frame+"px",i.style.top=this.ofsTop4frm+t.top+Number(this.val.getVal(`tmp:${n}.y`))*this.reso4frame+"px",i.width=String(Number(this.val.getVal(`tmp:${n}.width`))*this.reso4frame),i.height=String(Number(this.val.getVal(`tmp:${n}.height`))*this.reso4frame)}}}e.SysBase=_,r=_,n=new WeakMap,s=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,_.VALNM_CFG_NS="const.sn.cfg.ns",o={value:{接続:{dx:-1,dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtNjQwIDMyMGMwIDE3Ni43My0xNDMuMjcgMzIwLTMyMCAzMjBzLTMyMC0xNDMuMjctMzIwLTMyMCAxNDMuMjctMzIwIDMyMC0zMjAgMzIwIDE0My4yNyAzMjAgMzIweiIvPjxwYXRoIGlkPSJiIiBkPSJtMCAyOTJ2NTUuODhoMTI3LjEzYzEyLjM3IDQ2IDU0LjEyIDc5Ljg3IDEwNCA3OS44N2g3Ny44N3YtMjE1LjYyYy00Ni43MyAwLTcyLjY4IDAtNzcuODggMC00OS43NCAwLTkxLjYyIDMzLjg3LTEwMy45OSA3OS44Ny0xNi45NSAwLTU5LjMzIDAtMTI3LjEzIDB6Ii8+PHBhdGggaWQ9ImMiIGQ9Im01MTIuODggMjkyYy0xMi4zOC00Ni01NC4xMy03OS44Ny0xMDQtNzkuODctNS4yMSAwLTMxLjIxIDAtNzggMHYyMTUuNzRoNzcuODdjNDkuODggMCA5MS43NS0zMy44NyAxMDQtNzkuODdoMTI3LjI1di01NmMtNzYuMjcgMC0xMTguNjUgMC0xMjcuMTIgMHoiLz48L2RlZnM+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9IiMzYWFiZDIiIHhsaW5rOmhyZWY9IiNiIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYiIvPjx1c2UgZmlsbD0iIzNhYWJkMiIgeGxpbms6aHJlZj0iI2MiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNjIi8+PC9zdmc+"},切断:{dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtNjQwIDMyMGMwIDE3Ni43My0xNDMuMjcgMzIwLTMyMCAzMjBzLTMyMC0xNDMuMjctMzIwLTMyMCAxNDMuMjctMzIwIDMyMC0zMjAgMzIwIDE0My4yNyAzMjAgMzIweiIvPjxwYXRoIGlkPSJiIiBkPSJtMTkxLjUzIDIyMS4yNGMtNDUuNjggMC04NC4wMSAzMS4wNC05NS4zIDczLjE2LTYuNDEgMC0zOC40OSAwLTk2LjIzIDB2NTEuMjFoOTYuMjNjMTEuMyA0Mi4xMSA0OS42MyA3My4xNiA5NS4zIDczLjE2aDcxLjMzdi00OC4yNGg1My43OHYtMTAxLjA1aC01My43OHYtNDguMjRjLTQyLjggMC02Ni41NyAwLTcxLjMzIDB6Ii8+PHBhdGggaWQ9ImMiIGQ9Im00NDguNDcgMjIxLjIzYy00Ljc2IDAtMjguNTMgMC03MS4zMyAwdjE5Ny41M2g3MS4zM2M0NS42OCAwIDgzLjk5LTMxLjA0IDk1LjI5LTczLjE1aDk2LjI0di01MS4yMWgtOTYuMjRjLTMzLjA4LTQ4Ljc4LTY0Ljg0LTczLjE3LTk1LjI5LTczLjE3eiIvPjwvZGVmcz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0iI2RmNTY1NiIgeGxpbms6aHJlZj0iI2IiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNiIi8+PHVzZSBmaWxsPSIjZGY1NjU2IiB4bGluazpocmVmPSIjYyIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2MiLz48L3N2Zz4="},再生:{dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0yNTguODMgMTExLjA1Yy0xLjI5Ljc5LTIuOTMuODMtNC4yNi4wNC0xLjI5LS43NC0yLjExLTIuMTItMi4xMS0zLjY3IDAtNy4xNiAwLTQyLjk3IDAtMTA3LjQzczAtMTAwLjI3IDAtMTA3LjQzYzAtMS41My44Mi0yLjkzIDIuMTEtMy42OCAxLjMzLS43NiAyLjk3LS43MiA0LjI2LjA0IDE4IDEwLjc1IDE2MiA5Ni43MSAxODAgMTA3LjQ2IDEuMjkuNzMgMi4wNSAyLjE0IDIuMDUgMy42MSAwIDEuNDktLjc2IDIuODgtMi4wNSAzLjYzLTM2IDIxLjQ5LTE2MiA5Ni42OS0xODAgMTA3LjQzeiIvPjwvZGVmcz48cGF0aCBkPSJtMTU0LjU3IDE3MC4xOWgzNDYuMTV2MzA3LjY5aC0zNDYuMTV6IiBmaWxsPSIjZmZmIi8+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48L3N2Zz4="},一時停止:{dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0yMDAgMTAwdi0yMDBoODB2MjAwem0xNjAgMHYtMjAwaDgwdjIwMHoiLz48L2RlZnM+PHBhdGggZD0ibTE0Ny40OSAxODAuNDFoMzUyLjR2MjgyLjY5aC0zNTIuNHoiIGZpbGw9IiNmZmYiLz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjwvc3ZnPg=="},注意:{ease:"sn_HopIn",dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMzQzLjM0IDI5LjJjLTEwLjM3LTE3Ljk3LTM2LjMxLTE3Ljk3LTQ2LjY5IDAtMjkuMyA1MC43NS0yNjMuNyA0NTYuNzQtMjkzIDUwNy40OS0xMC4zNyAxNy45NyAyLjU5IDQwLjQ0IDIzLjM0IDQwLjQ0aDU4Ni4wMWMyMC43NSAwIDMzLjcyLTIyLjQ2IDIzLjM1LTQwLjQ0LTU4LjYtMTAxLjUtMjYzLjctNDU2Ljc0LTI5My4wMS01MDcuNDl6bS0yMy4zNCA0ODIuODNjLTE0LjUyIDAtMjYuMjktMi43MS0yNi4yOS02LjA2IDAtNC4yMSAwLTM3Ljg2IDAtNDIuMDcgMC0zLjM1IDExLjc3LTYuMDcgMjYuMjktNi4wN3MyNi4yOSAyLjcyIDI2LjI5IDYuMDd2NDIuMDdjLTcuODQgNC4wNC0xNi42MSA2LjA2LTI2LjI5IDYuMDZ6bTIxLjk5LTEwMy44NGMwIDUuNDMtOS44NSA5LjgzLTIxLjk5IDkuODMtMTIuMTUgMC0yMS45OS00LjQtMjEuOTktOS44MyAwLS4xMy4wNy0uMjUuMDgtLjM4LTEuMzctMTcuNTYtMTIuMy0xNTguMDYtMTMuNjctMTc1LjYyIDAtNS40MyAxNS45My05Ljg0IDM1LjU4LTkuODRzMzUuNTggNC40MSAzNS41OCA5Ljg0Yy0uOTEgMTEuNy01LjQ3IDcwLjI1LTEzLjY3IDE3NS42Mi4wNi4xNi4wOC4yOS4wOC4zOHoiLz48L2RlZnM+PHBhdGggZD0ibTI0MS4yOSAxOTEuNDRoMTQ1LjQ5djM1MS42NmgtMTQ1LjQ5eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iI2QyYmYzYSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+"},一歩進む:{ease:"sn_BounceIn",dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem0zNzYuOTMgOTEuOTdjMC01My41MSAwLTgzLjI0IDAtODkuMTktLjE1LjE0LS4yNS4zNC0uNDQuNDUtMTYuMTEgOS42Mi0xNDQuOTUgODYuNTQtMTYxLjA2IDk2LjE1LTEuMTUuNjktMi42Mi43My0zLjgxLjAyLTEuMTUtLjY0LTEuODktMS44OS0xLjg5LTMuMjggMC02LjQxIDAtMzguNDQgMC05Ni4xMSAwLTU3LjY5IDAtODkuNzQgMC05Ni4xNSAwLTEuMzUuNzQtMi42MiAxLjg5LTMuMjkgMS4xOS0uNjggMi42Ni0uNjQgMy44MS4wNCAxNi4xMSA5LjYyIDE0NC45NSA4Ni41NCAxNjEuMDYgOTYuMTYuMTkuMS4yOS4zMS40NC40NSAwLTYuMTMgMC0zNi43NyAwLTkxLjkyaDUzLjMydjE4Ni42N3oiLz48L2RlZnM+PHBhdGggZD0ibTE0Ny40OSAxNTQuMmgzNTIuNHYzMDguOWgtMzUyLjR6IiBmaWxsPSIjZmZmIi8+PHVzZSBmaWxsPSIjMmUyZTJlIiB4bGluazpocmVmPSIjYSIvPjx1c2UgZmlsbD0ibm9uZSIgeGxpbms6aHJlZj0iI2EiLz48L3N2Zz4="},一歩戻る:{ease:"sn_BounceIn",dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjBjMCAxNzYuNzIgMTQzLjI4IDMyMCAzMjAgMzIwczMyMC0xNDMuMjggMzIwLTMyMC0xNDMuMjgtMzIwLTMyMC0zMjAtMzIwIDE0My4yOC0zMjAgMzIwem00MzAuMjcgOTYuMTRjMCAxLjM1LS43NCAyLjYyLTEuODkgMy4yOC0xLjE5LjY5LTIuNjYuNjUtMy44MS0uMDMtMTYuMTEtOS42Mi0xNDQuOTUtODYuNTQtMTYxLjA1LTk2LjE2LS4yLS4xLS4yOS0uMzEtLjQ1LS40NXY5MS45MmgtNTMuMzJ2LTE4Ni42N2g1My4zMnY4OS4xOWMuMTYtLjE0LjI1LS4zNC40NS0uNDUgMTYuMS05LjYyIDE0NC45NC04Ni41NCAxNjEuMDUtOTYuMTYgMS4xNS0uNjggMi42Mi0uNzIgMy44MS0uMDEgMS4xNS42NCAxLjg5IDEuODkgMS44OSAzLjI4djk2LjExeiIvPjwvZGVmcz48cGF0aCBkPSJtMTQ3LjQ5IDE1NC4yaDM1Mi40djMwOC45aC0zNTIuNHoiIGZpbGw9IiNmZmYiLz48dXNlIGZpbGw9IiMyZTJlMmUiIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSBmaWxsPSJub25lIiB4bGluazpocmVmPSIjYSIvPjwvc3ZnPg=="},ステップイン:{ease:"sn_BounceIn",dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMTkuOTljMCAxNzYuNzQgMTQzLjI3IDMyMC4wMSAzMjAuMDEgMzIwLjAxIDE3Ni43MiAwIDMxOS45OS0xNDMuMjcgMzE5Ljk5LTMyMC4wMSAwLTE3Ni43Mi0xNDMuMjctMzE5Ljk5LTMxOS45OS0zMTkuOTktMTc2Ljc0IDAtMzIwLjAxIDE0My4yNy0zMjAuMDEgMzE5Ljk5em0xNTMuMDUtMjkuNzIgNTUuMTItNTUuMTMgMTExLjg0IDExMS44MiAxMTEuODItMTExLjgyIDU1LjEyIDU1LjEyLTE2Ni45NCAxNjYuOTd6Ii8+PC9kZWZzPjxwYXRoIGQ9Im0xNDcuNDkgMTU0LjJoMzUyLjR2MzA4LjloLTM1Mi40eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iIzJlMmUyZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+"},ステップアウト:{ease:"sn_BounceIn",dat:"PHN2ZyBoZWlnaHQ9IjY0MCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDY0MCA2NDAiIHdpZHRoPSI2NDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJtMCAzMjAuMDFjMCAxNzYuNzIgMTQzLjI3IDMxOS45OSAzMTkuOTkgMzE5Ljk5IDE3Ni43NCAwIDMyMC4wMS0xNDMuMjcgMzIwLjAxLTMxOS45OSAwLTE3Ni43NC0xNDMuMjctMzIwLjAxLTMyMC4wMS0zMjAuMDEtMTc2LjcyIDAtMzE5Ljk5IDE0My4yNy0zMTkuOTkgMzIwLjAxem0zMTkuOTktMjYuOTgtMTExLjgyIDExMS44My01NS4xMi01NS4xMyAxNjYuOTQtMTY2Ljk2IDE2Ni45NiAxNjYuOTYtNTUuMTIgNTUuMTN6Ii8+PC9kZWZzPjxwYXRoIGQ9Im0xNDcuNDkgMTU0LjJoMzUyLjR2MzA4LjloLTM1Mi40eiIgZmlsbD0iI2ZmZiIvPjx1c2UgZmlsbD0iIzJlMmUyZSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIGZpbGw9Im5vbmUiIHhsaW5rOmhyZWY9IiNhIi8+PC9zdmc+"}}}},"./core/src/sn/SysWeb.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},c=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.SysWeb=void 0;const f=i("./core/src/sn/SysBase.ts"),d=i("./core/src/sn/CmnLib.ts"),p=i("./core/src/sn/Main.ts"),m=i("./node_modules/store/dist/store.legacy.js");i("./node_modules/devtools-detect/index.js");class g extends f.SysBase{constructor(t={},e={cur:"prj/",crypto:!1,dip:""}){super(t,e),r.add(this),n.set(this,""),o.set(this,!1),a.set(this,":"),this.run=async()=>{if(c(this,h,"f")){const t=10;c(this,h,"f").destroy(t),await new Promise((e=>setTimeout(e,t)))}l(this,h,new p.Main(this),"f")},h.set(this,void 0),this.pathBaseCnvSnPath4Dbg="${pathbase}/",this._export=()=>((async()=>{const t=JSON.stringify({sys:this.data.sys,mark:this.data.mark,kidoku:this.data.kidoku}),e=this.crypto?await this.enc(t):t,i=new Blob([e],{type:"text/json"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=(this.crypto?"":"no_crypto_")+this.cfg.getNs()+(0,d.getDateStr)("-","_","")+".swpd",r.click(),d.CmnLib.debugLog&&console.log("プレイデータをエクスポートしました"),setTimeout((()=>this.fire("sn:exported",new Event("click"))),10)})(),!1),this._import=()=>(new Promise(((t,e)=>{const i=document.createElement("input");i.type="file",i.accept=".swpd, text/plain",i.onchange=()=>{i.files?t(i.files[0].path):e()},i.click()})).then((t=>new Promise((e=>{const i=new FileReader;i.readAsText(t),i.onload=()=>e(i.result)})))).then((async t=>{const e=JSON.parse(this.crypto?this.decStr("json",t):t);if(!e.sys||!e.mark||!e.kidoku)throw new Error("異常なプレイデータです");e.sys[f.SysBase.VALNM_CFG_NS]===this.cfg.oCfg.save_ns?(this.data.sys=e.sys,this.data.mark=e.mark,this.data.kidoku=e.kidoku,this.flush(),this.val.updateData(e),d.CmnLib.debugLog&&console.log("プレイデータをインポートしました"),this.fire("sn:imported",new Event("click"))):console.error(`別のゲーム【プロジェクト名=${e.sys[f.SysBase.VALNM_CFG_NS]}】のプレイデータです`)})).catch((t=>console.error(`異常なプレイデータです ${t.message}`))),!1),this.navigate_to=t=>{const e=t.url;if(!e)throw"[navigate_to] urlは必須です";return globalThis.open(e,"_blank"),!1},u.set(this,{});const i=e.cur.split("/");l(this,n,i.length>2?i.slice(0,-2).join("/")+"/":"","f"),globalThis.onload=async()=>this.loaded(t,e)}async loaded(t,e){await super.loaded(t,e);const i="requestFullscreen"in document.body?()=>{(l(this,o,!Boolean(document.fullscreenElement),"f")?document.body.requestFullscreen():document.exitFullscreen()).then((()=>c(this,r,"m",s).call(this)))}:()=>{const t=document;(l(this,o,!Boolean(t.webkitFullscreenElement),"f")?t.body.webkitRequestFullscreen():t.webkitCancelFullScreen()).then((()=>c(this,r,"m",s).call(this)))};this.tgl_full_scr=t=>{if(!t.key)return i(),!1;const e=t.key.toLowerCase();return document.addEventListener("keydown",(t=>{(t.altKey?"Alt"===t.key?"":"alt+":"")+(t.ctrlKey?"Control"===t.key?"":"ctrl+":"")+(t.shiftKey?"Shift"===t.key?"":"shift+":"")+t.key.toLowerCase()===e&&(t.stopPropagation(),i())}),{passive:!0}),!1},document.querySelectorAll("[data-prj]").forEach((t=>{const e=t.attributes.getNamedItem("data-prj");e&&t.addEventListener("click",(()=>this.runSN(e.value)),{passive:!0})})),document.querySelectorAll("[data-reload]").forEach((t=>t.addEventListener("click",(()=>this.run()),{passive:!0}))),e.dip&&(d.CmnLib.hDip=JSON.parse(e.dip));const a=new URLSearchParams(location.search),h=a.get("dip");if(h&&(d.CmnLib.hDip={...d.CmnLib.hDip,...JSON.parse(h.replaceAll("%2C",","))}),!(0,d.argChk_Boolean)(d.CmnLib.hDip,"oninit_run",!0))return;(0,d.argChk_Boolean)(d.CmnLib.hDip,"dbg",!1)&&(d.CmnLib.isDbg=!0,this.fetch=t=>fetch(t,{mode:"cors"})),this.extPort=(0,d.argChk_Num)(d.CmnLib.hDip,"port",this.extPort);const u=a.get("cur");u&&(e.cur=c(this,n,"f")+u+"/"),this.run()}runSN(t){this.arg.cur=c(this,n,"f")+t+"/",c(this,a,"f")!==this.arg.cur&&(l(this,a,this.arg.cur,"f"),this.run())}stop(){c(this,h,"f")&&(c(this,h,"f").destroy(),l(this,h,null,"f"))}async loadPath(t,e){await super.loadPath(t,e);const i=this.arg.cur+"path.json",r=await fetch(i);if(!r.ok)throw Error(r.statusText);const n=await r.text(),s=JSON.parse(this.decStr(i,n));for(const e in s){const i=t[e]=s[e];for(const t in i)":cnt"!==t&&(i[t]=this.arg.cur+i[t])}}initVal(t,e,i){const r=document.location.hostname;e["const.sn.isDebugger"]="localhost"===r||"127.0.0.1"===r,this.val.defTmp("const.sn.displayState",(()=>c(this,o,"f")));const n=this.cfg.getNs();this.flush=this.crypto?async()=>{m.set(n+"sys_",this.enc(JSON.stringify(this.data.sys))),m.set(n+"mark_",this.enc(JSON.stringify(this.data.mark))),m.set(n+"kidoku_",this.enc(JSON.stringify(this.data.kidoku)))}:()=>{m.set(n+"sys",this.data.sys),m.set(n+"mark",this.data.mark),m.set(n+"kidoku",this.data.kidoku)};const s=n+(this.arg.crypto?"sys_":"sys");if(e["const.sn.isFirstBoot"]=void 0===m.get(s))return this.data.sys=t.sys,this.data.mark=t.mark,this.data.kidoku=t.kidoku,this.flush(),void i(this.data);if(!this.crypto)return this.data.sys=m.get(n+"sys"),this.data.mark=m.get(n+"mark"),this.data.kidoku=m.get(n+"kidoku"),void i(this.data);let a="";try{a="sys",this.data.sys=JSON.parse(this.decStr("json",m.get(n+"sys_"))),a+=Number(this.val.getVal("sys:TextLayer.Back.Alpha",1)),a="mark",this.data.mark=JSON.parse(this.decStr("json",m.get(n+"mark_"))),a="kidoku",this.data.kidoku=JSON.parse(this.decStr("json",m.get(n+"kidoku_")))}catch(t){console.error(`セーブデータ（${a}）が壊れています。一度クリアする必要があります %o`,t)}i(this.data)}init(t,e,i,r){return super.init(t,e,i,r),this.cfg.oCfg.debug.devtool||window.addEventListener("devtoolschange",(t=>{t.detail.isOpen&&(console.error("DevToolは禁止されています。許可する場合は【プロジェクト設定】の【devtool】をONに。"),r.destroy())}),{once:!0,passive:!0}),[]}titleSub(t){document.title=t,document.querySelectorAll("[data-title]").forEach((e=>e.textContent=t))}async savePic(t,e){const i=document.createElement("a");i.href=e,i.download=t,i.click(),d.CmnLib.debugLog&&console.log("画像ファイルをダウンロードします")}async appendFile(t,e,i){const r=(c(this,u,"f")[t]??"")+e;c(this,u,"f")[t]=r;const n=new Blob([r],{type:"text/json"}),s=document.createElement("a");s.href=URL.createObjectURL(n),s.download=t,s.click()}}e.SysWeb=g,n=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,r=new WeakSet,s=function(){const t=c(this,o,"f"),e=screen.width/d.CmnLib.stageW,i=screen.height/d.CmnLib.stageH,r=e<i?e:i;this.reso4frame=t?r:1,this.ofsLeft4frm=t?(screen.width-d.CmnLib.stageW*this.reso4frame*d.CmnLib.cvsScale)/2:0,this.ofsTop4frm=t?(screen.height-d.CmnLib.stageH*this.reso4frame*d.CmnLib.cvsScale)/2:0,this.resizeFrames()}},"./core/src/sn/TxtLayer.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C,P,I,N,D,L,k,B,F,j,G,U,X,z,H,Y,W,V,$,q,Z,J,K=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},Q=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.TxtLayer=void 0;const tt=i("./core/src/sn/Layer.ts"),et=i("./core/src/sn/CmnLib.ts"),it=i("./core/src/sn/TxtStage.ts"),rt=i("./core/src/sn/Config.ts"),nt=i("./core/src/sn/RubySpliter.ts"),st=i("./core/src/sn/GrpLayer.ts"),ot=i("./core/src/sn/Button.ts"),at=i("./core/src/sn/LayerMng.ts"),ht=i("./node_modules/pixi.js/dist/esm/pixi.js");class ut extends tt.Layer{constructor(){super(),r.add(this),g.set(this,{fontsize:24,$width:0,$height:0,pad_left:0,pad_right:0,pad_top:0,pad_bottom:0}),v.set(this,0),_.set(this,0),y.set(this,!1),b.set(this,null),E.set(this,""),x.set(this,new it.TxtStage(K(this,g,"f"),this.spLay,(()=>this.canFocus()))),T.set(this,new nt.RubySpliter),S.set(this,new ht.Container),A.set(this,""),M.set(this,!0),R.set(this,""),I.set(this,""),N.set(this,(t=>"")),D.set(this,(t=>t)),L.set(this,""),k.set(this,new RegExp("[　]")),this.isCur=!1,B.set(this,(()=>"")),F.set(this,""),G.set(this,!1),U.set(this,((t,e)=>{K(ut,n,"f",s).oCfg.debug.putCh&&console.log(`🖊 文字表示 text:\`${t}\` ruby:\`${e}\` name:\`${this.name_}\``);const i=e.split("｜");let h="";const u=K(ut,n,"f",f).isSkipKeyDown();switch(i.length){case 1:if(Q(this,G,!0,"f"),"\n"===t){if(K(this,W,"f"))return h=K(this,W,"f").slice(-1)[0],K(this,r,"m",Z).call(this),K(this,Y,"f").push(ut.rec("<br/>")),K(this,Y,"f").push(h),Q(this,W,K(this,Y,"f"),"f"),void Q(this,Y,[],"f");K(this,H,"f")?(Q(this,H,!1,"f"),h="<ruby>　<rt>　</rt></ruby><br/>"):h="<br/>";break}K(this,H,"f")&&(Q(this,H,!1,"f"),""===e&&(e="　")),h=K(this,r,"m",X).call(this,t,e,u,K(this,F,"f"));break;case 2:switch(i[0]){case"start":case"left":case"center":case"right":case"justify":case"121":case"even":case"1ruby":Q(this,H,!1,"f"),Q(this,G,!0,"f"),h=K(this,r,"m",X).call(this,t,i[1],u,i[0]);break;case"gotxt":if(K(this,r,"m",Z).call(this),this.isCur&&K(ut,n,"f",a).call(ut,K(this,Y,"f").join("").replace(/^<ruby>　<rt>　<\/rt><\/ruby>(<br\/>)+/,"").replace(/style='(anim\S+ \S+?;\s*)+/g,"style='").replace(/( style=''| data-(add|arg|cmd)='.+?'|\n+|\t+)/g,"").replace(/class='sn_ch .+?'/g,"class='sn_ch'").replaceAll("class='offrec'","style='display: none;'").replaceAll("`","\\`")),!K(this,G,"f"))return;return K(this,x,"f").goTxt([...K(this,Y,"f"),K(this,r,"m",X).call(this,"　","",!1,"")]),Q(this,G,!1,"f"),void Q(this,z,0,"f");case"add":{const t=JSON.parse(i[1]);if(t.style??="",K(this,r,"m",q).call(this,t),K(this,W,"f"))K(this,r,"m",Z).call(this);else{u&&Q(this,z,0,"f");const e=Number(t.wait??-1),i=0===e?"":` sn_ch_in_${K(this,A,"f")}`,r=e<0?"":` animation-duration: ${e}ms;`;K(this,Y,"f").push(`<span class='sn_ch${i}' style='animation-delay: ${K(this,z,"f")}ms;${r} ${t.style}' data-add='${JSON.stringify(t)}'>`)}Q(this,W,K(this,Y,"f"),"f"),Q(this,Y,[],"f")}return;case"add_close":return void K(this,r,"m",Z).call(this);case"grp":Q(this,G,!0,"f");{u&&Q(this,z,0,"f");const t=(i[1]?i[1].slice(0,-1)+",":"{")+`"delay": ${K(this,z,"f")}}`;K(this,M,"f")&&Q(this,z,K(this,z,"f")+(K(ut,n,"f",d)?0:at.LayerMng.msecChWait),"f");const e=JSON.parse(t);if(e.style??="","id"in e||(e.id=K(this,Y,"f").length),"break"===e.id)return void K(this,x,"f").dispBreak(e.pic);h=`<span data-cmd='grp' data-id='${e.id}' data-arg='${t}'`;const r=Number(e.wait??-1),s=r<0?"":` animation-duration: ${r}ms;`;if(h+=` class='sn_ch${0===r?"":` sn_ch_in_${K(this,A,"f")}`}' style='animation-delay: ${K(this,z,"f")}ms;${s} ${e.style}' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>　</span>`,K(this,H,"f")&&(Q(this,H,!1,"f"),h=`<ruby>${h}<rt>　</rt></ruby>`),K(this,Y,"f").slice(-1)[0]===h)return}break;case"del":if("break"!==i[1])throw"文字レイヤdelコマンドは、現在id=breakのみサポートします";return void it.TxtStage.delBreak();case"span":K(this,r,"m",Z).call(this),Q(this,G,!0,"f");{const t=JSON.parse(i[1]);if(K(this,r,"m",q).call(this,t),!t.style)return;u&&Q(this,z,0,"f");const e=Number(t.wait??-1),n=0===e?"":` sn_ch_in_${K(this,A,"f")}`,s=e<0?"":` animation-duration: ${e}ms;`;K(this,Y,"f").push(`<span class='sn_ch${n}' style='animation-delay: ${K(this,z,"f")}ms;${s} ${t.style}' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>`),Q(this,W,K(this,Y,"f"),"f"),Q(this,Y,[],"f")}return;case"link":K(this,r,"m",Z).call(this),Q(this,G,!0,"f");{const t=JSON.parse(i[1]);t.style??="",K(this,r,"m",q).call(this,t),u&&Q(this,z,0,"f");const e=Number(t.wait??-1),n=0===e?"":` sn_ch_in_${K(this,A,"f")}`,s=e<0?"":` animation-duration: ${e}ms;`;Q(this,V,` data-cmd='link' data-arg='${i[1]}'`,"f"),K(this,Y,"f").push(`<span${K(this,V,"f")} class='sn_ch${n}' style='animation-delay: ${K(this,z,"f")}ms;${s} ${t.style}' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>`),Q(this,W,K(this,Y,"f"),"f"),Q(this,Y,[],"f")}return;case"endlink":return Q(this,G,!0,"f"),K(this,W,"f")&&Q(this,Y,K(this,Y,"f").map((t=>t.replace(/ data-cmd='linkrsv'/,K(this,V,"f")))),"f"),void K(this,r,"m",Z).call(this);default:Q(this,G,!0,"f"),h=K(this,r,"m",X).call(this,t,e,u,K(this,F,"f"))}break;case 3:if(Q(this,H,!1,"f"),Q(this,G,!0,"f"),"tcy"!==i[0])throw`異常な値です putCh(text: ${t}, ruby: ${e})`;{K(ut,n,"f",o).doRecLog()&&Q(this,J,K(this,J,"f")+(t+(e?`《${e}》`:"")),"f");const r=i[1],s=r.length>1?K(this,Y,"f").length+1:"",a=et.CmnLib.isSafari?i[2].replace(/[A-Za-z0-9]/g,(t=>String.fromCharCode(t.charCodeAt(0)+65248))):i[2];u&&Q(this,z,0,"f");const l=this.mkStyle_r_align(r,a,K(this,F,"f"));h=a?K(this,W,"f")?`<ruby><span data-tcy='${s}' style='\n\t\t\t\t\t\t\t\ttext-combine-upright: all;\n\t\t\t\t\t\t\t\t-webkit-text-combine: horizontal;\n\t\t\t\t\t\t\t\t${K(this,N,"f").call(this,r)}\n\t\t\t\t\t\t\t' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}' data-cmd='linkrsv'>${r}</span><rt${l}>${a}</rt></ruby>`:`<span class='sn_ch sn_ch_in_${K(this,A,"f")}' style='animation-delay: ${K(this,z,"f")}ms;'><ruby><span data-tcy='${s}' style='\n\t\t\t\t\t\t\t\t\ttext-combine-upright: all;\n\t\t\t\t\t\t\t\t\t-webkit-text-combine: horizontal;\n\t\t\t\t\t\t\t\t\t${K(this,N,"f").call(this,r)}\n\t\t\t\t\t\t\t\t' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>${r}</span><rt${l}>${a}</rt></ruby></span>`:K(this,W,"f")?`<span data-tcy='${s}' style='\n\t\t\t\t\t\t\ttext-combine-upright: all;\n\t\t\t\t\t\t\t-webkit-text-combine: horizontal;\n\t\t\t\t\t\t\t${K(this,N,"f").call(this,r)}\n\t\t\t\t\t\t' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}' data-cmd='linkrsv'>${r}</span>`:`<span data-tcy='${s}' style='\n\t\t\t\t\t\t\ttext-combine-upright: all;\n\t\t\t\t\t\t\t-webkit-text-combine: horizontal;\n\t\t\t\t\t\t\tanimation-delay: ${K(this,z,"f")}ms;\n\t\t\t\t\t\t\theight: 1em;\n\t\t\t\t\t\t\t${K(this,N,"f").call(this,r)}\n\t\t\t\t\t\t' class='sn_ch sn_ch_in_${K(this,A,"f")}' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>${r}</span>`,K(this,M,"f")&&Q(this,z,K(this,z,"f")+(K(ut,n,"f",d)?K(ut,n,"f",p)[t.charAt(0)]??0:at.LayerMng.msecChWait),"f")}}K(this,Y,"f").push(ut.rec(h))})),z.set(this,0),H.set(this,!0),Y.set(this,[]),W.set(this,null),V.set(this,""),$.set(this,{ch_in_style:"",ch_out_style:"",r_align:""}),this.click=()=>!this.spLay.interactiveChildren||!this.spLay.visible||K(this,x,"f").skipChIn(),J.set(this,""),this.addButton=t=>new Promise((e=>{t.key=`btn=[${K(this,S,"f").children.length}] `+this.name_,t[":id_tag"]=t.key.slice(0,-7),(0,et.argChk_Boolean)(t,"hint_tate",K(this,x,"f").tategaki);const i=new ot.Button(t,K(ut,n,"f",f),(()=>e()),(()=>this.canFocus()));i.name=JSON.stringify(t).replaceAll('"',"'"),K(this,S,"f").addChild(i)})),this.record=()=>Object.assign(super.record(),{enabled:this.enabled,r_align:K(this,F,"f"),b_do:null===K(this,b,"f")?null:K(this,b,"f")instanceof ht.Sprite?"Sprite":"Graphics",b_pic:K(this,E,"f"),b_color:K(this,v,"f"),b_alpha:K(this,_,"f"),b_alpha_isfixed:K(this,y,"f"),ffs:K(this,I,"f"),txs:K(this,x,"f").record(),strNoFFS:K(this,L,"f"),btns:K(this,S,"f").children.map((t=>t.name))}),this.spLay.addChild(K(this,x,"f")),K(this,T,"f").init(K(this,U,"f")),this.spLay.addChild(K(this,S,"f")),K(this,S,"f").name="cntBtn";const t=16*et.CmnLib.retinaRate;this.lay({style:`width: ${et.CmnLib.stageW}px; height: ${et.CmnLib.stageH}px; font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', '游ゴシック Medium', meiryo, sans-serif; color: white; font-size: 24px; line-height: 1.5; padding: ${t}px;`,in_style:"default",out_style:"default",back_clear:"true"})}static init(t,e,i,r,c){Q(ut,n,t,"f",s),it.TxtStage.init(t),Q(ut,n,i,"f",o),Q(ut,n,r,"f",a),Q(ut,n,c,"f",h),i.setDoRecProc(ut.chgDoRec),e.autowc=t=>K(ut,n,"m",m).call(ut,t),e.autowc({enabled:"false",text:"",time:""}),e.ch_in_style=t=>K(ut,n,"m",u).call(ut,t),e.ch_out_style=t=>K(ut,n,"m",l).call(ut,t),it.TxtStage.initChStyle(),(0,et.initStyle)();let f="";t.matchPath(".+",rt.Config.EXT_FONT).forEach((t=>{for(const e in t)f+=`\n@font-face {\n\tfont-family: '${t[e]}';\n\tsrc: url('${K(this,n,"f",s).searchPath(t[e],rt.Config.EXT_FONT)}');\n}\n`})),f+="\n.sn_tx {\n\tpointer-events: none;\n\tuser-select: none;\n\t-webkit-touch-callout: none;\n\tbox-sizing: border-box;\n}\n.sn_ch {\n\tposition: relative;\n\tdisplay: inline-block;\n}\n",(0,et.addStyle)(f),K(ut,n,"m",u).call(ut,{name:"default",wait:500,alpha:0,x:"=0.3",y:"=0",scale_x:1,scale_y:1,rotate:0,join:!0,ease:"ease-out"}),K(ut,n,"m",l).call(ut,{name:"default",wait:0,alpha:0,x:"=0",y:"=0",scale_x:1,scale_y:1,rotate:0,join:!1,ease:"ease-out"})}static setEvtMng(t,e){Q(ut,n,t,"f",c),Q(ut,n,e,"f",f),it.TxtStage.setEvtMng(e)}destroy(){K(this,b,"f")&&(this.spLay.removeChild(K(this,b,"f")).destroy(),Q(this,b,null,"f")),this.clearText(),K(this,x,"f").destroy(),Q(ut,n,!1,"f",d),Q(ut,n,{},"f",p),ut.rec=t=>t}set name(t){this.name_=t,K(this,x,"f").name=t}get name(){return this.name_}cvsResize(){K(this,x,"f").cvsResize()}cvsResizeChildren(){K(this,S,"f").children.forEach((t=>t.cvsResize()))}lay(t){return super.lay(t),tt.Layer.setXY(this.spLay,t,this.spLay),t[":id_tag"]=this.name_.slice(0,-7),nt.RubySpliter.setting(t),K(this,r,"m",P).call(this,t),K(this,x,"f").lay(t),"r_align"in t&&Q(this,F,t.r_align??"","f"),Q(this,B,et.CmnLib.isSafari?K(this,x,"f").tategaki?(t,e)=>`text-align: start; height: ${e}em; padding-top: ${t}; padding-bottom: ${t};`:(t,e)=>`text-align: start; width: ${e}em; padding-left: ${t}; padding-right: ${t};`:K(this,x,"f").tategaki?t=>`text-align: justify; text-align-last: justify; padding-top: ${t}; padding-bottom: ${t};`:t=>`text-align: justify; text-align-last: justify; padding-left: ${t}; padding-right: ${t};`,"f"),et.CmnLib.isFirefox&&(this.mkStyle_r_align=K(this,r,"m",j)),"alpha"in t&&K(this,S,"f").children.forEach((t=>t.alpha=this.spLay.alpha)),K(this,r,"m",w).call(this,t),K(this,r,"m",O).call(this,t),K(this,r,"m",C).call(this,t,(t=>{t&&K(ut,n,"f",c).resume()}))}get width(){return K(this,x,"f").getWidth()}get height(){return K(this,x,"f").getHeight()}chgBackAlpha(t){const e=K(this,y,"f")?K(this,_,"f"):t*K(this,_,"f");if(K(this,b,"f")instanceof ht.Graphics){K(this,b,"f")&&(this.spLay.removeChild(K(this,b,"f")),K(this,b,"f").destroy());const t=Q(this,b,new ht.Graphics,"f");t.name="back(color)",t.beginFill(K(this,v,"f")),t.lineStyle(void 0),t.drawRect(0,0,K(this,g,"f").$width,K(this,g,"f").$height),t.endFill(),this.spLay.addChildAt(t,0)}K(this,b,"f")&&(K(this,b,"f").visible=e>0,K(this,b,"f").alpha=e)}static chgDoRec(t){ut.rec=t?t=>t:t=>`<span class='offrec'>${t}</span>`}mkStyle_r_align(t,e,i){if(!i)return"";const r=2*t.length;if(r-e.length<0)return` style='text-align: ${i};'`;let n="";switch(i){case"justify":n=K(this,B,"f").call(this,"0",r);break;case"121":n=K(this,B,"f").call(this,`calc(${(r-e.length)/(2*e.length)}em)`,r);break;case"even":n=K(this,B,"f").call(this,`calc(${(r-e.length)/(e.length+1)}em)`,r);break;case"1ruby":n=K(this,B,"f").call(this,"1em",r);break;default:n=`text-align: ${i};`}return` style='${n}'`}tagCh(t){K(this,T,"f").putTxt(t)}clearText(){this.spLay.addChild(Q(this,x,K(this,x,"f").reNew(),"f")),Q(this,z,0,"f"),Q(this,H,!0,"f"),Q(this,Y,[],"f"),Q(this,W,null,"f"),Q(this,J,"","f"),K(ut,n,"f",a).call(ut,"",!0)}get pageText(){return K(this,J,"f").replace("《　》","")}get enabled(){return this.spLay.interactiveChildren}set enabled(t){this.spLay.interactiveChildren=t}canFocus(){return(this.spLay.interactiveChildren??!1)&&this.spLay.visible&&K(ut,n,"f",h).call(ut,this)}clearLay(t){super.clearLay(t),this.clearText(),K(this,S,"f").removeChildren().forEach((t=>t.destroy()))}playback(t,e){super.playback(t,e),this.enabled=t.enabled,Q(this,F,t.r_align,"f"),this.cvsResize(),Q(this,_,t.b_alpha,"f"),Q(this,y,t.b_alpha_isfixed,"f"),e.push(new Promise((e=>{K(this,r,"m",C).call(this,t.b_do?"Sprite"===t.b_do?{b_pic:t.b_pic}:{b_color:t.b_color}:{b_pic:""},(t=>{t&&e()}))||e()}))),K(this,r,"m",P).call(this,t),K(this,x,"f").playback(t.txs);const i=t.btns;e=e.concat(i.map((t=>this.addButton(JSON.parse(t.replaceAll("'",'"'))))))}snapshot(t,e){t.render(this.spLay,void 0,!1),K(this,x,"f").snapshot(t,e)}snapshot_end(){K(this,x,"f").snapshot_end()}makeDesignCast(t){this.spLay.visible&&K(this,x,"f").makeDesignCast(t)}makeDesignCastChildren(t){this.spLay.visible&&K(this,S,"f").children.forEach((e=>e.makeDesignCast(t)))}showDesignCast(){K(this,x,"f").showDesignCast()}showDesignCastChildren(){K(this,S,"f").children.forEach((t=>t.showDesignCast()))}dump(){return K(this,U,"f").call(this,"","gotxt｜"),super.dump()+`, "enabled":"${this.enabled}", ${K(this,x,"f").dump()}, "b_pic":"${K(this,E,"f")}", "b_color":"${K(this,v,"f")}", "b_alpha":${K(this,_,"f")}, "b_alpha_isfixed":"${K(this,y,"f")}", "b_width":${K(this,g,"f").$width}, "b_height":${K(this,g,"f").$height}, "pixi_obj":[${this.spLay.children.map((t=>`{"class":"${t instanceof ht.Sprite?"Sprite":t instanceof ht.Graphics?"Graphics":t instanceof ht.Container?"Container":"?"}", "name":"${t.name}", "alpha":${t.alpha}, "x":${t.x}, "y":${t.y}, "visible":"${t.visible}"}`)).join(",")}], "button":[${K(this,S,"f").children.map((t=>t.children[0].name)).join(",")}]`}}e.TxtLayer=ut,n=ut,g=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,E=new WeakMap,x=new WeakMap,T=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,R=new WeakMap,I=new WeakMap,N=new WeakMap,D=new WeakMap,L=new WeakMap,k=new WeakMap,B=new WeakMap,F=new WeakMap,G=new WeakMap,U=new WeakMap,z=new WeakMap,H=new WeakMap,Y=new WeakMap,W=new WeakMap,V=new WeakMap,$=new WeakMap,J=new WeakMap,r=new WeakSet,u=function(t){const e=it.TxtStage.ch_in_style(t),i="="===e.x.charAt(0)?100*e.nx+"%":`${e.nx}px`,r="="===e.y.charAt(0)?100*e.ny+"%":`${e.ny}px`,n=t.name;return(0,et.addStyle)(`\n.sn_ch_in_${n} {\n\tposition: relative;\n\tdisplay: inline-block;\n}\n.go_ch_in_${n} {\n\topacity: ${e.alpha};\n\tposition: relative;\n\tdisplay: inline-block;\n\tanimation: sn_ch_in_${n} ${e.wait}ms ${e.ease} 0s both;\n}\n@keyframes sn_ch_in_${n} {\n\tfrom {transform: rotate(${e.rotate}deg) scale(${e.scale_x}, ${e.scale_y}) translate(${i}, ${r});}\n\tto {opacity: 1; transform: none;}\n}\n`),!1},l=function(t){const e=it.TxtStage.ch_out_style(t),i="="===e.x.charAt(0)?100*e.nx+"%":`${e.nx}px`,r="="===e.y.charAt(0)?100*e.ny+"%":`${e.ny}px`,n=t.name;return(0,et.addStyle)(`\n.go_ch_out_${n} {\n\tposition: relative;\n\tdisplay: inline-block;\n\tanimation: go_ch_out_${n} ${e.wait}ms ${e.ease} 0s both;\n}\n@keyframes go_ch_out_${n} {\n\tto {\n\t\topacity: ${e.alpha};\n\t\ttransform: rotate(${e.rotate}deg) scale(${e.scale_x}, ${e.scale_y}) translate(${i}, ${r});\n\t}\n`),!1},m=function(t){Q(ut,n,(0,et.argChk_Boolean)(t,"enabled",K(ut,n,"f",d)),"f",d),K(ut,n,"f",o).setVal_Nochk("save","const.sn.autowc.enabled",K(ut,n,"f",d));const e=t.text;if("text"in t!="time"in t)throw"[autowc] textとtimeは同時指定必須です";if(K(ut,n,"f",o).setVal_Nochk("save","const.sn.autowc.text",e),!e)return K(ut,n,"f",o).setVal_Nochk("save","const.sn.autowc.time",""),!1;const i=e.length;if(K(ut,n,"f",d)&&0===i)throw'[autowc] enabled === false かつ text === "" は許されません';const r=String(t.time).split(",");if(r.length!==i)throw"[autowc] text文字数とtimeに記述された待ち時間（コンマ区切り）は同数にして下さい";return Q(ut,n,{},"f",p),r.forEach(((t,i)=>K(ut,n,"f",p)[e[i]]=(0,et.uint)(t))),K(ut,n,"f",o).setVal_Nochk("save","const.sn.autowc.time",t.time),!1},w=function(t){const e=t.in_style;if(!e)return;const i=it.TxtStage.getChInStyle(e);if(!i)throw`存在しないin_style【${e}】です`;Q(this,A,e,"f"),Q(this,M,i.join,"f")},O=function(t){const e=t.out_style;if(e){if(!it.TxtStage.getChOutStyle(e))throw`存在しないout_style【${e}】です`;Q(this,R,e,"f")}},C=function(t,e){if("back_clear"in t)return(0,et.argChk_Boolean)(t,"back_clear",!1)&&(Q(this,v,0,"f"),Q(this,_,0,"f"),Q(this,y,!1,"f"),Q(this,E,"","f")),e(!1),!1;Q(this,_,(0,et.argChk_Num)(t,"b_alpha",K(this,_,"f")),"f"),Q(this,y,(0,et.argChk_Boolean)(t,"b_alpha_isfixed",K(this,y,"f")),"f");const i=(K(this,y,"f")?1:Number(K(ut,n,"f",o).getVal("sys:TextLayer.Back.Alpha")))*K(this,_,"f");if(t.b_pic){if(K(this,E,"f")!==t.b_pic)return Q(this,E,t.b_pic,"f"),K(this,b,"f")&&(this.spLay.removeChild(K(this,b,"f")),K(this,b,"f").destroy()),st.GrpLayer.csv2Sprites(K(this,E,"f"),this.spLay,(t=>{Q(this,b,t,"f"),t.name="back(pic)",t.visible=i>0,t.alpha=i,K(this,x,"f").setSize(t.width,t.height),this.spLay.setChildIndex(t,0),e(!0)}))}else if("b_color"in t){Q(this,v,parseInt(t.b_color||"0"),"f"),K(this,b,"f")&&(this.spLay.removeChild(K(this,b,"f")),K(this,b,"f").destroy()),Q(this,E,"","f");const e=Q(this,b,new ht.Graphics,"f");e.name="back(color)",e.beginFill(K(this,v,"f")),e.lineStyle(void 0),e.drawRect(0,0,K(this,g,"f").$width,K(this,g,"f").$height),e.endFill(),this.spLay.addChildAt(e,0)}return K(this,b,"f")&&(K(this,b,"f").visible=i>0,K(this,b,"f").alpha=i),e(!1),!1},P=function(t){"noffs"in t&&(Q(this,L,t.noffs??"","f"),Q(this,k,new RegExp(`[　${K(this,L,"f")}]`),"f")),"ffs"in t&&(Q(this,I,K(this,I,"f")??"","f"),""===K(this,I,"f")?(Q(this,N,(()=>""),"f"),Q(this,D,(t=>t),"f")):(Q(this,N,(t=>K(this,k,"f").test(t)?"":` font-feature-settings: ${K(this,I,"f")};`),"f"),Q(this,D,(t=>K(this,k,"f").test(t)?t:`<span style='font-feature-settings: ${K(this,I,"f")};'>${t}</span>`),"f")))},j=function(t,e,i){if(!i)return"";const r=2*t.length;if(r-e.length<0)return` style='text-align: ${i};'`;let n="";switch(i){case"left":case"right":n="ruby-align: start;";break;case"center":n="ruby-align: center;";break;case"justify":n="ruby-align: space-between;";break;case"121":n="ruby-align: space-around;";break;case"even":const t=(r-e.length)/(e.length+1);n="ruby-align: space-between; "+(K(this,x,"f").tategaki?`padding-top: ${t}em; padding-bottom: ${t}em;`:`padding-left: ${t}em; padding-right: ${t}em;`);break;case"1ruby":n="ruby-align: space-between; "+(K(this,x,"f").tategaki?"padding-top: 1em; padding-bottom: 1em;":"padding-left: 1em; padding-right: 1em;");break;default:n=`text-align: ${i};`}return` style='${n}'`},X=function(t,e,i,r){" "===t&&(t="&nbsp;"),K(ut,n,"f",o).doRecLog()&&Q(this,J,K(this,J,"f")+(t+(e?`《${e}》`:"")),"f");let s="";const a=this.mkStyle_r_align(t,e,r);return i&&Q(this,z,0,"f"),s=e?K(this,W,"f")?`<ruby style='${K(this,N,"f").call(this,t)}' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}' data-cmd='linkrsv'>${t}<rt${a}>${e}</rt></ruby>`:`<span class='sn_ch sn_ch_in_${K(this,A,"f")}' style='animation-delay: ${K(this,z,"f")}ms;${K(this,N,"f").call(this,t)}'><ruby data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>${t}<rt${a}>${e}</rt></ruby></span>`:K(this,W,"f")?K(this,D,"f").call(this,t):`<span class='sn_ch sn_ch_in_${K(this,A,"f")}' style='animation-delay: ${K(this,z,"f")}ms;${K(this,N,"f").call(this,t)}' data-add='{"ch_in_style":"${K(this,A,"f")}", "ch_out_style":"${K(this,R,"f")}"}'>${t}</span>`,K(this,M,"f")&&Q(this,z,K(this,z,"f")+(K(ut,n,"f",d)?K(ut,n,"f",p)[t.charAt(0)]??0:at.LayerMng.msecChWait),"f"),s},q=function(t){K(this,$,"f").ch_in_style=K(this,A,"f"),K(this,r,"m",w).call(this,t),K(this,$,"f").ch_out_style=K(this,R,"f"),K(this,r,"m",O).call(this,t),K(this,$,"f").r_align=K(this,F,"f"),"r_align"in t&&Q(this,F,t.r_align,"f")},Z=function(){K(this,W,"f")&&(K(this,W,"f").push(K(this,Y,"f"),"</span>"),Q(this,Y,Array.prototype.concat.apply([],K(this,W,"f")),"f"),Q(this,W,null,"f"),K(this,r,"m",w).call(this,{in_style:K(this,$,"f").ch_in_style}),K(this,r,"m",O).call(this,{out_style:K(this,$,"f").ch_out_style}),Q(this,F,K(this,$,"f").r_align,"f"))},s={value:void 0},o={value:void 0},a={value:void 0},h={value:void 0},c={value:void 0},f={value:void 0},d={value:!1},p={value:{}},ut.rec=t=>t},"./core/src/sn/TxtStage.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C,P,I,N,D,L,k,B,F,j,G,U,X,z=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},H=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.TxtStage=void 0;const Y=i("./core/src/sn/CmnLib.ts"),W=i("./core/src/sn/CmnTween.ts"),V=i("./core/src/sn/GrpLayer.ts"),$=i("./core/src/sn/DebugMng.ts"),q=i("./core/src/sn/DesignCast.ts"),Z=i("./node_modules/pixi.js/dist/esm/pixi.js"),J=i("./node_modules/@tweenjs/tween.js/dist/tween.esm.js");class K extends Z.Container{constructor(t,e,i){super(),this.infTL=t,this.spLay=e,this.canFocus=i,r.add(this),h.set(this,document.createElement("span")),u.set(this,new Z.Container),l.set(this,new Z.Graphics),c.set(this,new q.TxtLayDesignCast(this.spLay,this)),f.set(this,new q.TxtLayPadDesignCast(this)),p.set(this,0),m.set(this,!1),g.set(this,0),v.set(this,0),b.set(this,void 0),E.set(this,[]),x.set(this,[]),T.set(this,0),M.set(this,null),O.set(this,new Z.Rectangle),R.set(this,/animation\-duration: (?<ms>\d+)ms;/),C.set(this,(()=>{})),I.set(this,!1),B.set(this,0),j.set(this,"Quadratic.Out"),G.set(this,"Quadratic.Out"),X.set(this,null),z(this,h,"f").classList.add("sn_tx"),z(this,h,"f").style.position="absolute",z(K,n,"f",o).parentElement.appendChild(z(this,h,"f")),this.addChild(z(this,u,"f")),this.addChild(z(this,l,"f")),z(this,l,"f").name="grpDbgMasume",z(this,c,"f").adopt(z(this,f,"f"))}static init(t){H(K,n,t,"f",s),H(K,n,document.getElementById(Y.CmnLib.SN_ID),"f",o),H(K,n,/[、。，．）］｝〉」』】〕”〟ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ！？!?‼⁉・ーゝゞヽヾ々]/,"f",S),H(K,n,/[［（｛〈「『【〔“〝]/,"f",w),H(K,n,/[─‥…]/,"f",A)}static setEvtMng(t){H(K,n,t,"f",a)}static destroy(){H(K,n,{backgroundColor:0,borderBottomWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,marginBottom:0,marginLeft:0,marginRight:0,marginTop:0},"f",_),H(K,n,Object.create(null),"f",N),H(K,n,Object.create(null),"f",L),H(K,n,new Z.Container,"f",k)}getInfTL(){return this.infTL}lay(t){const e=z(this,h,"f").style;if(t.style){const i=document.createElement("span");i.style.cssText=t.style;const r=i.style.length;for(let t=0;t<r;++t){const r=i.style[t];r in z(K,n,"f",_)?$.DebugMng.myTrace(`${r}は指定できません`,"W"):e[r]=i.style[r]}!i.style.opacity&&"alpha"in t&&(e.opacity=String(this.spLay.alpha))}else"alpha"in t&&(e.opacity=String(this.spLay.alpha));if("width"in t&&(e.width=(t.width??"0")+"px"),"height"in t&&(e.height=(t.height??"0")+"px"),"pl"in t&&(e.paddingLeft=(t.pl??"0")+"px"),"pr"in t&&(e.paddingRight=(t.pr??"0")+"px"),"pt"in t&&(e.paddingTop=(t.pt??"0")+"px"),"pb"in t&&(e.paddingBottom=(t.pb??"0")+"px"),z(this,r,"m",d).call(this),z(this,c,"f").sethArg(t),H(this,p,this.spLay.position.x-(Y.CmnLib.isSafari&&!Y.CmnLib.isMobile&&z(this,m,"f")?this.infTL.pad_left+this.infTL.pad_right:0),"f"),e.transformOrigin=`${this.spLay.pivot.x}px ${this.spLay.pivot.y}px`,this.cvsResize(),e.display=this.spLay.visible?"inline":"none",e.textShadow=t.filter??e.textShadow??"",":redraw"in t&&z(this,T,"f")>0){const t=[z(this,h,"f").innerHTML.replace(/(animation-delay: )\d+ms/g,"$10ms"),"<span class='sn_ch' data-add='{\"ch_in_style\":\"default\"}'>　</span>"];z(this,r,"m",U).call(this),this.goTxt(t)}}cvsResize(){const t=z(this,h,"f").style;t.left=z(this,p,"f")*Y.CmnLib.cvsScale+"px",t.top=this.spLay.position.y*Y.CmnLib.cvsScale+"px",t.transform=`rotate(${this.spLay.angle}deg) scale(${this.spLay.scale.x*Y.CmnLib.cvsScale}, ${this.spLay.scale.y*Y.CmnLib.cvsScale}`,z(this,c,"f").cvsResize(),z(this,f,"f").cvsResize()}get tategaki(){return z(this,m,"f")}getWidth(){return this.infTL.$width}getHeight(){return this.infTL.$height}setSize(t,e){this.infTL.$width=t,this.infTL.$height=e,z(this,h,"f").style.width=this.infTL.$width+"px",z(this,h,"f").style.height=this.infTL.$height+"px"}goTxt(t){var e;z(K,n,"f",k).visible=!1;const i=z(this,x,"f").length;z(K,n,"f",s).oCfg.debug.masume&&0===i&&(Y.CmnLib.debugLog&&console.log(`🍌 masume ${this.name} v:${this.visible} l:${this.x} t:${this.y} a:${this.alpha} pl:${this.infTL.pad_left} pr:${this.infTL.pad_right} pt:${this.infTL.pad_top} pb:${this.infTL.pad_bottom} w:${this.infTL.$width} h:${this.infTL.$height}`),z(this,l,"f").clear(),z(this,l,"f").beginFill(3407616,.2),z(this,l,"f").lineStyle(1,3407616,1),z(this,l,"f").drawRect(-this.infTL.pad_left,-this.infTL.pad_top,this.infTL.$width,this.infTL.$height),z(this,l,"f").endFill(),z(this,l,"f").beginFill(13311,.2),z(this,l,"f").lineStyle(2,13311,1),z(this,l,"f").drawRect(0,0,this.infTL.$width-this.infTL.pad_left-this.infTL.pad_right,this.infTL.$height-this.infTL.pad_top-this.infTL.pad_bottom),z(this,l,"f").endFill()),0===i?z(this,h,"f").innerHTML=[...t].join(""):z(this,h,"f").insertAdjacentHTML("beforeend",t.slice(z(this,T,"f")).join("")),H(this,T,t.length,"f");let o=0,c=2;do{const t=H(this,x,z(this,r,"m",F).call(this,z(this,h,"f")),"f");if(o=t.length,1!==Y.CmnLib.cvsScale){const e=Y.CmnLib.ofsPadLeft_Dom2PIXI+parseFloat(z(this,h,"f").style.left)*(1-Y.CmnLib.cvsScale),i=Y.CmnLib.ofsPadTop_Dom2PIXI+parseFloat(z(this,h,"f").style.top)*(1-Y.CmnLib.cvsScale);for(let r=0;r<o;++r){const n=t[r].rect;n.x-=e,n.y-=i,n.x/=Y.CmnLib.cvsScale,n.y/=Y.CmnLib.cvsScale,n.width/=Y.CmnLib.cvsScale,n.height/=Y.CmnLib.cvsScale}}if(o<2)break;let e=-1/0;for(;c<o;++c){const i=t[c];if("<rt"===i.elm.outerHTML.slice(0,3))continue;const r=this.tategaki?i.rect.y:i.rect.x;if(e<r){e=r;continue}if(e=-1/0,z(K,n,"f",A).test(t[c-1].ch)&&t[c-1].ch===i.ch)Y.CmnLib.debugLog&&console.log(`🎴追い出し（分割禁止）ch:${i.ch}`),--c;else{if(z(K,n,"f",w).test(t[c-1].ch))Y.CmnLib.debugLog&&console.log(`🎴追い出し（行末禁則）前ch:${t[c-1].ch}`),--c;else{if(!z(K,n,"f",S).test(i.ch))continue;for(Y.CmnLib.debugLog&&console.log(`🎴追い出し（行頭禁則 A）前ch:${i.ch}`);c>0&&z(K,n,"f",S).test(t[--c].ch);)Y.CmnLib.debugLog&&console.log(`🎴　　　　（行頭禁則 A）前ch:${t[c].ch}`)}for(;c>0&&z(K,n,"f",w).test(t[c-1].ch);)Y.CmnLib.debugLog&&console.log(`🎴追い出し（行末禁則 B）前ch:${t[c-1].ch}`),--c}const s=t[c].elm.parentElement,a=document.createElement("br");s.classList.contains("sn_tx")?s.insertBefore(a,t[c].elm):s.parentElement.insertBefore(a,s),c+=2,o=-1;break}}while(o<0);const f=Y.CmnLib.debugLog?(t,e)=>console.log(`🍌 masume ch:${t.ch} x:${e.x} y:${e.y} w:${e.width} h:${e.height}`):()=>{},d=z(K,n,"f",s).oCfg.debug.masume?(t,e)=>{f(t,e),z(this,l,"f").beginFill(6737151,.5),z(this,l,"f").lineStyle(2,16724736,1),z(this,l,"f").drawRect(e.x,e.y,e.width,e.height),z(this,l,"f").endFill()}:()=>{},p=W.CmnTween.ease(z(this,j,"f")),g=z(this,h,"f").getBoundingClientRect(),v=g.left+globalThis.pageXOffset+this.infTL.pad_left,_=g.top+globalThis.pageYOffset+this.infTL.pad_top;for(let t=i;t<o;++t){const e=z(this,x,"f")[t],i=e.rect,s=JSON.parse(e.arg??'{"delay": 0}'),o=JSON.parse(e.add??"{}"),h=z(K,n,"f",N)[o.ch_in_style];switch(i.x-=v,i.y-=_,d(e,i),h&&(z(this,m,"f")?(i.x+=(i.width-i.height)/2,i.width=i.height):(i.y+=(i.height-i.width)/2,i.height=i.width),H(this,O,i,"f")),e.cmd){case"grp":const l=new Z.Container;z(this,u,"f").addChild(l),V.GrpLayer.csv2Sprites(s.pic,l,(t=>{z(this,r,"m",P).call(this,l,s,o,i,p,h??{}),l.parent||l.removeChild(t)}));break;case"link":const c=new Z.Sprite;s.key=`lnk=[${t}] `+this.name,z(this,r,"m",P).call(this,c,s,o,i,p,h??{}),s.hint_tate??=z(this,m,"f");const f=e.elm.style.cssText,d=s.style_hover??"",g=s.style_clicked??"",v=z(this,M,"f")!==e.elm;z(K,n,"f",a).button(s,c,(()=>e.elm.style.cssText=f),v?()=>!!this.canFocus()&&(e.elm.style.cssText=d,!0):()=>!1,(()=>e.elm.style.cssText=g)),H(this,M,e.elm,"f"),z(this,u,"f").addChild(c)}}z(this,x,"f").slice(0,-1),H(this,T,(e=z(this,T,"f"),--e),"f");const y=z(this,h,"f").getElementsByTagName("span"),b=y.length;b>0&&z(this,h,"f").removeChild(y[b-1]);const E=z(this,h,"f").querySelectorAll("span.sn_ch");E.forEach((t=>t.className=t.className.replace(/sn_ch_in_([^\s"]+)/g,"go_ch_in_$1"))),H(this,I,!0,"f"),H(this,C,(()=>{H(this,I,!1,"f"),E.forEach((t=>t.className=t.className.replace(/ go_ch_in_[^\s"]+/g,""))),z(K,n,"f",k).position.set(z(this,O,"f").x,z(this,O,"f").y),z(K,n,"f",k).visible=!0,H(this,C,(()=>{}),"f")}),"f");const D=E.length;if(0===D)return void z(this,C,"f").call(this);let L=null;for(let t=D-1;t>=0;--t){const e=E[t];if("sn_ch"===e.className)break;const i=e.getAttribute("style");if(!i){L=e;break}const r=i.match(z(this,R,"f"))?.groups;if(!r||Number(r.ms)>0){L=e;break}}L?L.addEventListener("animationend",z(this,C,"f"),{once:!0,passive:!0}):z(this,C,"f").call(this)}skipChIn(){let t=z(this,I,"f");return z(this,C,"f").call(this),z(this,E,"f").forEach((e=>{e.tw&&(e.tw.stop().end(),t=!0)})),H(this,E,[],"f"),t}static initChStyle(){H(K,n,Object.create(null),"f",N),H(K,n,Object.create(null),"f",L)}static getChInStyle(t){return z(K,n,"f",N)[t]}static ch_in_style(t){const e=t.name;if(!e)throw"nameは必須です";if(z(K,n,"f",D).lastIndex=0,z(K,n,"f",D).test(e))throw`name【${e}】に使えない文字が含まれます`;if(e in z(K,n,"f",N))throw`name【${e}】はすでにあります`;const i=String(t.x??"=0"),r=String(t.y??"=0");return z(K,n,"f",N)[e]={wait:(0,Y.argChk_Num)(t,"wait",500),alpha:(0,Y.argChk_Num)(t,"alpha",0),x:i,y:r,nx:parseFloat("="===i.charAt(0)?i.slice(1):i),ny:parseFloat("="===r.charAt(0)?r.slice(1):r),scale_x:(0,Y.argChk_Num)(t,"scale_x",1),scale_y:(0,Y.argChk_Num)(t,"scale_y",1),rotate:(0,Y.argChk_Num)(t,"rotate",0),join:(0,Y.argChk_Boolean)(t,"join",!0),ease:t.ease??"ease-out"}}static getChOutStyle(t){return z(K,n,"f",L)[t]}static ch_out_style(t){const e=t.name;if(!e)throw"nameは必須です";if(z(K,n,"f",D).lastIndex=0,z(K,n,"f",D).test(e))throw`name【${e}】に使えない文字が含まれます`;if(e in z(K,n,"f",L))throw`name【${e}】はすでにあります`;const i=String(t.x??"=0"),r=String(t.y??"=0");return z(K,n,"f",L)[e]={wait:(0,Y.argChk_Num)(t,"wait",500),alpha:(0,Y.argChk_Num)(t,"alpha",0),x:i,y:r,nx:parseFloat("="===i.charAt(0)?i.slice(1):i),ny:parseFloat("="===r.charAt(0)?r.slice(1):r),scale_x:(0,Y.argChk_Num)(t,"scale_x",1),scale_y:(0,Y.argChk_Num)(t,"scale_y",1),rotate:(0,Y.argChk_Num)(t,"rotate",0),join:(0,Y.argChk_Boolean)(t,"join",!1),ease:t.ease??"ease-out"}}dispBreak(t){const e=z(K,n,"f",k);e.visible=!1,this.addChild(e),V.GrpLayer.csv2Sprites(t,e,(t=>{e.parent||e.removeChild(t)}))}static delBreak(){const t=z(K,n,"f",k);t.parent&&(t.parent.removeChild(t),t.removeChildren()),H(K,n,new Z.Container,"f",k)}reNew(){z(this,r,"m",U).call(this);const t=new K(this.infTL,this.spLay,(()=>this.canFocus()));return z(t,h,"f").style.cssText=z(this,h,"f").style.cssText,H(t,p,z(this,p,"f"),"f"),t.name=this.name,z(t,r,"m",d).call(t),z(t,c,"f").sethArg(z(this,c,"f").gethArg()),H(t,b,z(this,b,"f"),"f"),H(t,j,z(this,j,"f"),"f"),H(t,G,z(this,G,"f"),"f"),this.destroy(),t}record(){return{infTL:this.infTL,cssText:z(this,h,"f").style.cssText,left:z(this,p,"f"),idc_hArg:z(this,c,"f").gethArg(),ch_filter:z(this,b,"f"),fi_easing:z(this,j,"f"),fo_easing:z(this,G,"f")}}playback(t){this.infTL=t.infTL,this.position.set(this.infTL.pad_left,this.infTL.pad_top),z(this,h,"f").style.cssText=t.cssText,H(this,p,t.left,"f"),z(this,r,"m",d).call(this),z(this,c,"f").sethArg(t.idc_hArg),H(this,b,t.ch_filter,"f"),H(this,j,t.fi_easing,"f"),H(this,G,t.fo_easing,"f")}snapshot(t,e){z(this,r,"m",y).call(this,(i=>{H(this,X,new Z.Sprite(i),"f"),z(this,m,"f")&&(z(this,X,"f").x+=Y.CmnLib.stageW-(z(this,p,"f")+this.infTL.$width)-(Y.CmnLib.isSafari&&!Y.CmnLib.isMobile?0:this.infTL.pad_left+this.infTL.pad_right)),z(this,X,"f").y-=z(this,v,"f"),z(this,X,"f").texture.frame=new Z.Rectangle(0,0,this.infTL.$width-z(this,p,"f"),this.infTL.$height),z(this,u,"f").addChild(z(this,X,"f")),t.render(z(this,X,"f"),void 0,!1),e()}),!1)}snapshot_end(){z(this,X,"f")&&(z(this,u,"f").removeChild(z(this,X,"f")),H(this,X,null,"f"))}makeDesignCast(t){t(z(this,c,"f"));const e=z(this,c,"f").gethArg();z(this,f,"f").sethArg({...e,":id_dc":e[":id_tag"]+"_pad"}),t(z(this,f,"f"))}showDesignCast(){z(this,c,"f").visible=!0,z(this,f,"f").visible=!0}dump(){const t=[],e=z(this,h,"f").style,i=e.length;for(let r=0;r<i;++r){const i=e[r];t.push(`"${i}":"${e[i].replace(/(["\\])/g,"\\$1")}"`)}return`"txt":"${z(this,h,"f").textContent.replace(/(["\\])/g,"\\$1")}", "style":{${t.join(",")}}`}destroy(){K.delBreak(),z(this,h,"f").parentElement.removeChild(z(this,h,"f")),this.removeChild(z(this,u,"f")),this.removeChild(z(this,l,"f")),super.destroy()}}e.TxtStage=K,n=K,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,E=new WeakMap,x=new WeakMap,T=new WeakMap,M=new WeakMap,O=new WeakMap,R=new WeakMap,C=new WeakMap,I=new WeakMap,B=new WeakMap,j=new WeakMap,G=new WeakMap,X=new WeakMap,r=new WeakSet,d=function(){const t=z(this,h,"f").style,e=parseFloat(t.fontSize||"0");this.infTL.fontsize=e,this.infTL.pad_left=parseFloat(t.paddingLeft||"0"),this.infTL.pad_right=parseFloat(t.paddingRight||"0"),this.infTL.pad_top=parseFloat(t.paddingTop||"0"),this.infTL.pad_bottom=parseFloat(t.paddingBottom||"0"),this.infTL.$width=parseFloat(t.width||"0"),this.infTL.$height=parseFloat(t.height||"0"),this.position.set(this.infTL.pad_left,this.infTL.pad_top),H(this,m,"vertical-rl"===t.writingMode,"f"),H(this,g,0,"f"),H(this,v,0,"f");const i=t.lineHeight??"0";H(this,B,z(this,m,"f")?0:("px"===i.slice(-2)?parseFloat(i):e*parseFloat(i)-e)/2,"f")},y=function(t,e=!0){const i={escape:t=>t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),mimeType:t=>{const e=function(t){return/\.([^\.\/]*?)$/g.exec(t)?.[1]??""}(t).toLowerCase();return function(){const t="application/font-woff",e="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:e,jpeg:e,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[e]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},resolveUrl:function(t,e){const i=document.implementation.createHTMLDocument(),r=i.createElement("base");i.head.appendChild(r);const n=i.createElement("a");return i.body.appendChild(n),r.href=e,n.href=t,n.href},getAndEncode:function(t){return new Promise((function(e){const i=new XMLHttpRequest;function r(t){console.error(t),e("")}i.onreadystatechange=function(){if(4!==i.readyState)return;if(200!==i.status)return void r("cannot fetch resource: "+t+", status: "+i.status);const n=new FileReader;n.onloadend=function(){const t=n.result.toString().split(/,/)[1];e(t)},n.readAsDataURL(i.response)},i.ontimeout=function(){r("timeout of 30000ms occured while fetching resource: "+t)},i.responseType="blob",i.timeout=3e4,i.open("GET",t,!0),i.send()}))},asArray:t=>{const e=[],i=t.length;for(let r=0;r<i;++r)e.push(t[r]);return e}},r=function(){const t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,i,s){return e(t)?Promise.resolve(t).then(r).then((e=>{let r=Promise.resolve(t);for(const t of e)r=r.then((e=>n(e,t,i,s)));return r})):Promise.resolve(t)},shouldProcess:e};function e(e){return-1!==e.search(t)}function r(e){const r=[];let n;for(;n=t.exec(e);)r.push(n[1]);return r.filter((function(t){return!i.isDataUrl(t)}))}function n(t,e,r,n){return Promise.resolve(e).then((t=>r?i.resolveUrl(t,r):t)).then(n||i.getAndEncode).then((t=>i.dataAsUrl(t,i.mimeType(e)))).then((r=>t.replace(function(t){return new RegExp("(url\\(['\"]?)("+i.escape(t)+")(['\"]?\\))","g")}(e),"$1"+r+"$3")))}}(),n=function(){return{resolveAll:function(){return t().then((t=>Promise.all(t.map((t=>t.resolve()))))).then((t=>t.join("\n")))},impl:{readAll:t}};function t(){return Promise.resolve(i.asArray(document.styleSheets)).then((function(t){const e=[];for(const r of t)try{if(r.href)continue;i.asArray(r.cssRules||[]).forEach(e.push.bind(e))}catch(t){console.error("Error while reading CSS rules from "+r.href,t.toString())}return e})).then((function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>r.shouldProcess(t.style.getPropertyValue("src"))))})).then((e=>e.map(t)));function t(t){return{resolve:function(){const e=(t.parentStyleSheet||{}).href;return r.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}();Promise.resolve(z(this,h,"f")).then((t=>{const i=t.cloneNode(!0);return i.style.padding="0px",i.style.paddingRight=z(this,g,"f")+"px",i.style.paddingTop=z(this,v,"f")+"px",i.style.left="0px",i.style.top="0px",i.style.width=this.infTL.$width-this.infTL.pad_left-this.infTL.pad_right+"px",i.style.height=this.infTL.$height-this.infTL.pad_top-this.infTL.pad_bottom+"px",z(this,h,"f").hidden=e,i})).then((function(t){return n.resolveAll().then((e=>{const i=document.createElement("style");return t.appendChild(i),i.appendChild(document.createTextNode(e)),t}))})).then((t=>{t.setAttribute("xmlns","http://www.w3.org/1999/xhtml");const e=new Image;return e.src=`data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="${this.infTL.$width}px" height="${this.infTL.$height}px"><foreignObject x="0" y="0" width="100%" height="100%">${(new XMLSerializer).serializeToString(t).replaceAll("#","%23").replaceAll("\n","%0A")}</foreignObject></svg>`,new Promise((t=>e.onload=()=>t(e)))})).then((t=>new Promise((e=>setTimeout((()=>e(t)),100))))).then((e=>{const i=document.createElement("canvas");i.width=this.infTL.$width,i.height=this.infTL.$height,i.getContext("2d").drawImage(e,0,0),i.toBlob((e=>{const i=URL.createObjectURL(e);Z.Texture.from(i).once("update",(e=>{t(e),URL.revokeObjectURL(i)}))}))})).catch((t=>$.DebugMng.myTrace(`goTxt() = ${t}`)))},P=function(t,e,i,r,n,s){t.alpha=0,e.x&&(r.x="="===e.x.charAt(0)?r.x+parseInt(e.x.slice(1)):parseInt(e.x)),e.y&&(r.y="="===e.y.charAt(0)?r.y+parseInt(e.y.slice(1)):parseInt(e.y)),e.width&&(r.width=parseInt(e.width)),e.height&&(r.height=parseInt(e.height)),e.wait&&(s.wait=parseInt(e.wait)),t.width=r.width,t.height=r.height,t.position.set("="===s.x.charAt(0)?r.x+t.width*s.nx:s.nx,"="===s.y.charAt(0)?r.y+t.height*s.ny:s.ny);const o={sp:t,tw:new J.Tween(t).to({alpha:1,x:r.x,y:r.y,width:r.width,height:r.height,angle:0},s.wait??0).easing(n).delay((i.wait??0)+(e.delay??0)).onComplete((()=>{o.tw=null})).start()};z(this,E,"f").push(o)},F=function t(e){const i=[];if(e.nodeType!==e.TEXT_NODE)return e.childNodes.forEach((e=>i.push(z(this,r,"m",t).call(this,e)))),Array.prototype.concat.apply([],i);const n=e.ownerDocument.createRange();n.selectNodeContents(e);let s=0;const o=n.endOffset;for(;s<o;){n.setStart(e,s),n.setEnd(e,++s);const t=n.getBoundingClientRect(),r=n.startContainer.parentElement;if(!r)throw"fn:TxtStage.ts pe null";const o=n.toString(),a={ch:o,rect:new Z.Rectangle(t.left+globalThis.pageXOffset,t.top+globalThis.pageYOffset,t.width,t.height+("gjqy".includes(o)?z(this,B,"f"):0)),elm:r,cmd:r.getAttribute("data-cmd")??void 0,arg:r.getAttribute("data-arg")??void 0,add:r.getAttribute("data-add")??void 0,tcy:r.getAttribute("data-tcy")??void 0};i.push(a)}return n.detach(),i},U=function(){z(this,l,"f").clear(),H(this,x,[],"f"),H(this,T,0,"f"),this.skipChIn();const t=z(this,h,"f").cloneNode(!0);t.textContent="";const e=z(this,h,"f");e.parentElement.insertBefore(t,e);let i=0;e.querySelectorAll("span.sn_ch").forEach((t=>{const e=JSON.parse(t?.getAttribute("data-add")??t?.children[0]?.getAttribute("data-add")??t?.children[0]?.children[0]?.getAttribute("data-add")??"{}");if(!e.ch_out_style)return;const r=z(K,n,"f",L)[e.ch_out_style];r&&(0!==r.wait?(i+=r.wait,r.join||(t.style.animationDelay="0ms"),t.classList.add(`go_ch_out_${e.ch_out_style}`)):t.style.display="none")}));const r=()=>{e.parentElement.removeChild(e),z(this,u,"f").removeChildren().forEach((t=>t.destroy()))};0===i?(z(this,h,"f").textContent="",r()):e.lastElementChild?.addEventListener("animationend",r,{once:!0,passive:!0}),H(this,h,t,"f")},s={value:void 0},o={value:void 0},a={value:void 0},_={value:{backgroundColor:0,borderBottomWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,marginBottom:0,marginLeft:0,marginRight:0,marginTop:0}},S={value:void 0},w={value:void 0},A={value:void 0},N={value:Object.create(null)},D={value:/[\s\.,]/},L={value:Object.create(null)},k={value:new Z.Container}},"./core/src/sn/Variable.ts":function(t,e,i){"use strict";var r,n,s,o,a,h,u,l,c,f,d,p,m,g,v,_,y,b,E,x,T,S,w,A,M,O,R,C,P,I,N,D,L,k,B,F,j,G,U,X,z,H,Y=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)},W=this&&this.__classPrivateFieldSet||function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;const V=i("./core/src/sn/CmnLib.ts"),$=i("./core/src/sn/Areas.ts"),q=i("./core/src/sn/PropParser.ts"),Z=i("./node_modules/platform/platform.js");class J{constructor(t,e){if(this.cfg=t,r.add(this),s.set(this,{sys:{},save:{},tmp:{},mp:{}}),o.set(this,Y(this,s,"f").save),a.set(this,Y(this,s,"f").tmp),h.set(this,void 0),u.set(this,{sys:{},mark:{},kidoku:{}}),l.set(this,void 0),c.set(this,{}),f.set(this,void 0),d.set(this,{auth:(t,e)=>Y(this,r,"m",p).call(this,e.hBreakpoint.aData),var:(t,e)=>Y(this,h,"f").send2Dbg(e.ri,{v:Y(this,s,"f")[e.scope]??{}}),set_var:(t,e)=>{try{Y(this,C,"f").call(this,e.nm,e.val),Y(this,h,"f").send2Dbg(e.ri,{})}catch{}},set_data_break:(t,e)=>{Y(this,r,"m",p).call(this,e.a),Y(this,h,"f").send2Dbg(e.ri,{})},disconnect:t=>W(J,n,{},"f",P)}),m.set(this,(()=>{})),g.set(this,(t=>{})),this.getMark=t=>Y(this,u,"f").mark[t],this.getAreaKidoku=t=>Y(this,c,"f")[t],C.set(this,((t,e,i=!0)=>{if(!t)throw"[変数に値セット] nameは必須です";if(null==e)throw"[変数に値セット] textは必須です（空文字はOK）";const r=q.PropParser.getValName(t);if(void 0===r)throw"[変数参照] name("+t+")が変数名として異常です";const n=Y(this,s,"f")[r.scope];if(!n)throw"[変数に値セット] scopeが異常【"+r.scope+"】です";const o=r.name;if("const."===o.slice(0,6)&&o in n)throw"[変数に値セット] 変数【"+o+"】は書き換え不可です";this.setVal_Nochk(r.scope,o,e,i)})),this.getVal=(t,e)=>{if(!t)throw"[変数参照] nameは必須です";const i=q.PropParser.getValName(t);if(void 0===i)throw"[変数参照] name("+t+")が変数名として異常です";const n=Y(this,s,"f")[i.scope];if(!n)throw"[変数参照] scopeが異常【"+i.scope+"】です";const o=i.name;let a=n[o];if(!(o in n)){a=e;let t="";const i=o.split("."),r=i.length;for(let s=0;s<r;++s,t+="."){if(t+=i[s],!(t in n))continue;let o=JSON.parse(n[t]);if("[object Object]"!==Object.prototype.toString.call(o)){if(s+1===r){a=o;break}continue}let h=s;for(;++h<r;){if(!(i[h]in o)){a=e;break}if(o=o[i[h]],"[object Object]"!==Object.prototype.toString.call(o)||h+1===r){a=o;break}}a instanceof Object&&(a=JSON.stringify(a));break}}return a instanceof Function&&(a=a()),"@str"===i.at?a:Y(this,r,"m",I).call(this,a)},N.set(this,/^-?[\d\.]+$/),D.set(this,(()=>{const t={tmp:{},sys:{},save:{},mp:{}};for(let e in t){const i=Y(this,s,"f")[e],r=t[e];for(let t in i){const e=i[t];"[object Function]"===Object.prototype.toString.call(e)?r[t]=e():r[t]=e}}return console.info("🥟 [dump_val]",t),!1})),L.set(this,!1),k.set(this,{"sys:sn.tagCh.doWait":t=>Y(this,r,"m",B).call(this,t),"sys:sn.tagCh.doWait_Kidoku":t=>Y(this,r,"m",B).call(this,t),"sys:sn.tagCh.msecWait":t=>Y(this,r,"m",F).call(this,t),"sys:sn.tagCh.msecWait_Kidoku":t=>Y(this,r,"m",j).call(this,t),"sys:sn.tagCh.canskip":t=>Y(this,r,"m",B).call(this,t),"sys:sn.auto.msecPageWait":t=>Y(this,r,"m",G).call(this,t),"sys:sn.auto.msecPageWait_Kidoku":t=>Y(this,r,"m",G).call(this,t),"sys:sn.auto.msecLineWait":t=>Y(this,r,"m",U).call(this,t),"sys:sn.auto.msecLineWait_Kidoku":t=>Y(this,r,"m",U).call(this,t),"save:sn.doRecLog":t=>{Y(this,g,"f").call(this,W(this,L,Y(this,r,"m",X).call(this,t),"f"))},"save:sn.userFnTail":(t,e)=>this.cfg.userFnTail=e,"tmp:sn.tagL.enabled":t=>Y(this,r,"m",z).call(this,t),"tmp:sn.skip.all":t=>Y(this,r,"m",H).call(this,t),"tmp:sn.skip.enabled":t=>Y(this,r,"m",H).call(this,t),"tmp:sn.auto.enabled":t=>Y(this,r,"m",H).call(this,t),"tmp:flash.desktop.NativeApplication.nativeApplication.systemIdleMode":()=>{},"tmp:sn.chkFontMode":()=>{Y(this,a,"f")["const.sn.onLauncher"]||Y(this,a,"f")["const.sn.isDebugger"]}}),e.let=t=>Y(this,r,"m",y).call(this,t),e.let_abs=t=>Y(this,r,"m",b).call(this,t),e.let_char_at=t=>Y(this,r,"m",E).call(this,t),e.let_index_of=t=>Y(this,r,"m",x).call(this,t),e.let_length=t=>Y(this,r,"m",T).call(this,t),e.let_replace=t=>Y(this,r,"m",S).call(this,t),e.let_round=t=>Y(this,r,"m",w).call(this,t),e.let_search=t=>Y(this,r,"m",A).call(this,t),e.let_substr=t=>Y(this,r,"m",M).call(this,t),e.clearsysvar=()=>Y(this,r,"m",O).call(this),e.clearvar=()=>Y(this,r,"m",R).call(this),e.dump_val=()=>Y(this,D,"f").call(this),e.copybookmark=t=>Y(this,r,"m",v).call(this,t),e.erasebookmark=t=>Y(this,r,"m",_).call(this,t),Y(this,o,"f")["sn.userFnTail"]="",this.defTmp("const.sn.bookmark.json",(()=>{const e=[];return Object.keys(Y(this,u,"f").mark).sort().forEach((i=>{const r={...Y(this,u,"f").mark[i].json};for(const e in r){const i=r[e];"string"==typeof i&&"userdata:/"===i.slice(0,10)&&(r[e]=t.searchPath(i))}r.place=i,e.push(r)})),JSON.stringify(e)})),Y(this,a,"f")["const.sn.isFirstBoot"]=!0,Y(this,a,"f")["sn.tagL.enabled"]=!0,Y(this,a,"f")["sn.skip.all"]=!1,Y(this,a,"f")["sn.skip.enabled"]=!1,Y(this,a,"f")["sn.auto.enabled"]=!1,Y(this,a,"f")["const.sn.last_page_text"]="",Y(this,a,"f")["const.sn.displayState"]=!1,Y(this,a,"f")["const.Date.getTime"]=()=>(new Date).getTime(),Y(this,a,"f")["const.Date.getDateStr"]=()=>(0,V.getDateStr)(),Y(this,a,"f")["const.sn.platform"]=JSON.stringify(Z),Y(this,r,"m",O).call(this),Y(this,r,"m",R).call(this),Y(this,a,"f")["const.sn.config.window.width"]=t.oCfg.window.width,Y(this,a,"f")["const.sn.config.window.height"]=t.oCfg.window.height,Y(this,a,"f")["const.sn.config.book.title"]=t.oCfg.book.title,Y(this,a,"f")["const.sn.config.book.version"]=t.oCfg.book.version,Y(this,a,"f")["const.sn.Math.PI"]=Math.PI,"undefined"==typeof window)return;const i=window,$=i.AudioContext??i.webkitAudioContext;Y(this,a,"f")["const.sn.needClick2Play"]=()=>"suspended"===(new $).state}setSys(t){W(this,h,t,"f"),t.initVal(Y(this,u,"f"),Y(this,a,"f"),(e=>{this.updateData(e),sessionStorage.clear();const i=this.cfg.getNs();W(this,m,this.cfg.oCfg.debug.variable?()=>{const e={};Object.keys(Y(this,l,"f")).forEach((t=>{const i=Y(this,l,"f")[t];e["sys:"+t]=i instanceof Function?i():i})),sessionStorage[i+"sys"]=JSON.stringify(e);const r={};Object.keys(Y(this,o,"f")).forEach((t=>{const e=Y(this,o,"f")[t];r["save:"+t]=e instanceof Function?e():e})),sessionStorage[i+"save"]=JSON.stringify(r);const n={};Object.keys(Y(this,a,"f")).forEach((t=>{const e=Y(this,a,"f")[t];n[t]=e instanceof Function?e():e})),sessionStorage[i+"tmp"]=JSON.stringify(n);const h={};Object.keys(Y(this,s,"f").mp).forEach((t=>{const e=Y(this,s,"f").mp[t];h[t]=e instanceof Function?e():e})),sessionStorage[i+"mp"]=JSON.stringify(h);const c={};Object.keys(Y(this,u,"f").mark).forEach((t=>{const e=Y(this,u,"f").mark[t];c[t]=e instanceof Function?e():e})),sessionStorage[i+"mark"]=JSON.stringify(c);const f={};Object.keys(Y(this,u,"f").kidoku).forEach((t=>{const e=Y(this,u,"f").kidoku[t];f[t]=e instanceof Function?e():e})),sessionStorage[i+"kidoku"]=JSON.stringify(f),t.flush()}:()=>t.flush(),"f"),W(this,f,((e,i)=>t.callHook(e,i)),"f"),t.addHook(((t,e)=>Y(this,d,"f")[t]?.(t,e)));const n=this.getVal("sys:sn.tagCh.msecWait",-1);(Y(this,a,"f")["const.sn.isFirstBoot"]||-1===n)&&Y(this,r,"m",O).call(this)}))}updateData(t){W(this,u,t,"f"),W(this,l,Y(this,s,"f").sys=Y(this,u,"f").sys,"f"),W(this,c,{},"f");for(const t in Y(this,u,"f").kidoku){const e=new $.Areas;e.hAreas={...Y(this,u,"f").kidoku[t]},Y(this,c,"f")[t]=e}}flush(){Y(this,m,"f").call(this)}setDoRecProc(t){W(this,g,t,"f")}defTmp(t,e){Y(this,a,"f")[t]=e}cloneMp(){return{...Y(this,s,"f").mp}}setMp(t){Y(this,s,"f").mp=t}setMark(t,e){Y(this,u,"f").mark[t]=e,this.flush()}cloneSave(){return{...Y(this,s,"f").save}}mark2save(t){W(this,o,Y(this,s,"f").save={...t.hSave},"f"),W(this,L,Y(this,o,"f")["sn.doRecLog"]??!1,"f")}loadScrWork(t){t in Y(this,c,"f")||(Y(this,c,"f")[t]=new $.Areas)}saveKidoku(){for(const t in Y(this,c,"f"))Y(this,u,"f").kidoku[t]={...Y(this,c,"f")[t].hAreas};this.flush()}setVal_Nochk(t,e,i,o=!1){const a=Y(this,s,"f")[t];o&&(i=Y(this,r,"m",I).call(this,i));const h=t+":"+e;if(h in Y(J,n,"f",P)){const t=a[e],r=i;t!=r&&Y(this,f,"f").call(this,"data_break",{dataId:h,old_v:t,new_v:r})}a[e]=i,Y(this,k,"f")[h]?.(e,i)}doRecLog(){return Y(this,L,"f")}defValTrg(t,e){Y(this,k,"f")[t]=e}}e.Variable=J,n=J,s=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,g=new WeakMap,C=new WeakMap,N=new WeakMap,D=new WeakMap,L=new WeakMap,k=new WeakMap,r=new WeakSet,p=function(t){W(J,n,{},"f",P),t.forEach((t=>Y(J,n,"f",P)[t.dataId]=1))},v=function(t){if(!("from"in t))throw"fromは必須です";if(!("to"in t))throw"toは必須です";const e=Number(t.from),i=Number(t.to);if(e===i)return!1;if(!(e in Y(this,u,"f").mark))throw`from:${e} のセーブデータは存在しません`;return this.setMark(i,{...Y(this,u,"f").mark[e]}),Y(this,h,"f").copyBMFolder(e,i),!1},_=function(t){const e=t.place;if(!e)throw"placeは必須です";return delete Y(this,u,"f").mark[e],this.flush(),Y(this,h,"f").eraseBMFolder(e),!1},y=function(t){if(!t.name)throw"nameは必須です";let e=!0;if(t.cast)switch(t.cast){case"num":(0,V.argChk_Num)(t,"text",NaN);break;case"int":t.text=String((0,V.int)((0,V.argChk_Num)(t,"text",NaN)));break;case"uint":t.text=String((0,V.uint)((0,V.argChk_Num)(t,"text",NaN)));break;case"bool":(0,V.argChk_Boolean)(t,"text",!1);break;case"str":e=!1;break;default:throw"cast【"+t.cast+"】は未定義です"}return Y(this,C,"f").call(this,t.name,t.text,e),!1},b=function(t){const e=(0,V.argChk_Num)(t,"text",0);return t.text=String(e<0?-e:e),Y(this,r,"m",y).call(this,t),!1},E=function(t){return t.text=(t.text??"").charAt((0,V.argChk_Num)(t,"pos",0)),Y(this,r,"m",y).call(this,t),!1},x=function(t){const e=t.val;if(!e)throw"valは必須です";const i=(0,V.argChk_Num)(t,"start",0);return t.text=String((t.text??"").indexOf(e,i)),Y(this,r,"m",y).call(this,t),!1},T=function(t){return t.text=String((t.text??"").length),Y(this,r,"m",y).call(this,t),!1},S=function(t){if(!t.reg)throw"regは必須です";const e=t.flags,i=e?new RegExp(t.reg,e):new RegExp(t.reg);return t.text=String(t.text??"").replace(i,String(t.val)),Y(this,r,"m",y).call(this,t),!1},w=function(t){const e=(0,V.argChk_Num)(t,"text",0);return t.text=String(Math.round(e)),Y(this,r,"m",y).call(this,t),!1},A=function(t){if(!t.reg)throw"regは必須です";const e=t.flags,i=e?new RegExp(t.reg,e):new RegExp(t.reg);return t.text=String((t.text??"").search(i)),Y(this,r,"m",y).call(this,t),!1},M=function(t){const e=(0,V.argChk_Num)(t,"pos",0);return t.text="all"!==t.len?(t.text??"").slice(e,e+(0,V.int)((0,V.argChk_Num)(t,"len",1))):(t.text??"").slice(e),Y(this,r,"m",y).call(this,t),!1},O=function(){const t=W(this,l,Y(this,s,"f").sys=Y(this,u,"f").sys={},"f");"undefined"!=typeof process||(this.setVal_Nochk("sys","const.sn.window.x",0),this.setVal_Nochk("sys","const.sn.window.y",0)),this.setVal_Nochk("sys","sn.tagCh.doWait",!0),this.setVal_Nochk("sys","sn.tagCh.doWait_Kidoku",!0),this.setVal_Nochk("sys","sn.tagCh.msecWait",this.cfg.oCfg.init.tagch_msecwait),this.setVal_Nochk("sys","sn.tagCh.msecWait_Kidoku",this.cfg.oCfg.init.tagch_msecwait),this.setVal_Nochk("sys","sn.tagCh.canskip",!0),this.setVal_Nochk("sys","sn.skip.mode","s"),this.setVal_Nochk("sys","sn.auto.msecPageWait",(0,V.argChk_Num)(t,"sn.auto.msecPageWait",this.cfg.oCfg.init.auto_msecpagewait??3500)),this.setVal_Nochk("sys","sn.auto.msecPageWait_Kidoku",(0,V.argChk_Num)(t,"sn.auto.msecPageWait",this.cfg.oCfg.init.auto_msecpagewait??3500)),this.setVal_Nochk("sys","sn.auto.msecLineWait",500),this.setVal_Nochk("sys","sn.auto.msecLineWait_Kidoku",500),this.setVal_Nochk("sys","const.sn.sound.BGM.volume",1),this.setVal_Nochk("sys","const.sn.sound.SE.volume",1),this.setVal_Nochk("sys","const.sn.sound.SYS.volume",1);for(const t in Y(this,u,"f").kidoku)Y(this,u,"f").kidoku[t].hAreas={},Y(this,c,"f")[t].clear();return this.setVal_Nochk("sys","TextLayer.Back.Alpha",.5),Y(this,s,"f").mark=Y(this,u,"f").mark={},this.setVal_Nochk("sys","const.sn.save.place",1),this.flush(),!1},R=function(){const t=Y(this,o,"f")["const.sn.mesLayer"]??"",e=Y(this,o,"f")["sn.doRecLog"]??!1,i=Y(this,o,"f")["const.sn.sLog"]??"[]";return W(this,o,Y(this,s,"f").save={},"f"),this.setVal_Nochk("save","const.sn.mesLayer",t),this.setVal_Nochk("save","sn.doRecLog",e),this.setVal_Nochk("save","const.sn.sLog",i),!1},I=function(t){const e=t;return"true"===e||"false"!==e&&("null"===e?null:"undefined"!==e?(Y(this,N,"f").lastIndex=0,Y(this,N,"f").test(e)?parseFloat(e):t):void 0)},B=function(t){(0,V.argChk_Boolean)(Y(this,l,"f"),t,!0)},F=function(t){(0,V.argChk_Num)(Y(this,l,"f"),t,10),Y(this,l,"f")["sn.tagCh.doWait"]},j=function(t){(0,V.argChk_Num)(Y(this,l,"f"),t,void 0===this.cfg.oCfg.init.tagch_msecwait?10:this.cfg.oCfg.init.tagch_msecwait),Y(this,l,"f")["sn.tagCh.doWait_Kidoku"]},G=function(t){(0,V.argChk_Num)(Y(this,l,"f"),t,void 0===this.cfg.oCfg.init.auto_msecpagewait?3500:this.cfg.oCfg.init.auto_msecpagewait)},U=function(t){(0,V.argChk_Num)(Y(this,l,"f"),t,500)},X=function(t){return(0,V.argChk_Boolean)(Y(this,o,"f"),t,!0)},z=function(t){(0,V.argChk_Boolean)(Y(this,a,"f"),t,!0)},H=function(t){(0,V.argChk_Boolean)(Y(this,a,"f"),t,!1)},P={value:{}}},"./node_modules/url/node_modules/punycode/punycode.js":function(t,e,i){var r;t=i.nmd(t),function(n){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i.g&&i.g;s.global!==s&&s.window!==s&&s.self;var o,a=2147483647,h=36,u=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function m(t){throw RangeError(f[t])}function g(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function v(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+g((t=t.replace(c,".")).split("."),e).join(".")}function _(t){for(var e,i,r=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function y(t){return g(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+p(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,i){var r=0;for(t=i?d(t/700):t>>1,t+=d(t/e);t>455;r+=h)t=d(t/35);return d(r+36*t/(t+38))}function x(t){var e,i,r,n,s,o,u,l,c,f,p,g=[],v=t.length,_=0,b=128,x=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),g.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<v;){for(s=_,o=1,u=h;n>=v&&m("invalid-input"),((l=(p=t.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:h)>=h||l>d((a-_)/o))&&m("overflow"),_+=l*o,!(l<(c=u<=x?1:u>=x+26?26:u-x));u+=h)o>d(a/(f=h-c))&&m("overflow"),o*=f;x=E(_-s,e=g.length+1,0==s),d(_/e)>a-b&&m("overflow"),b+=d(_/e),_%=e,g.splice(_++,0,b)}return y(g)}function T(t){var e,i,r,n,s,o,u,l,c,f,g,v,y,x,T,S=[];for(v=(t=_(t)).length,e=128,i=0,s=72,o=0;o<v;++o)(g=t[o])<128&&S.push(p(g));for(r=n=S.length,n&&S.push("-");r<v;){for(u=a,o=0;o<v;++o)(g=t[o])>=e&&g<u&&(u=g);for(u-e>d((a-i)/(y=r+1))&&m("overflow"),i+=(u-e)*y,e=u,o=0;o<v;++o)if((g=t[o])<e&&++i>a&&m("overflow"),g==e){for(l=i,c=h;!(l<(f=c<=s?1:c>=s+26?26:c-s));c+=h)T=l-f,x=h-f,S.push(p(b(f+T%x,0))),l=d(T/x);S.push(p(b(l,0))),s=E(i,y,r==n),i=0,++r}++i,++e}return S.join("")}o={version:"1.3.2",ucs2:{decode:_,encode:y},decode:x,encode:T,toASCII:function(t){return v(t,(function(t){return l.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return v(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return o}.call(e,i,e,t))||(t.exports=r)}()},"./node_modules/url/url.js":(t,e,i)=>{"use strict";var r=i("./node_modules/url/node_modules/punycode/punycode.js"),n=i("./node_modules/url/util.js");function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){return n.isString(t)&&(t=y(t)),t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i("./node_modules/querystring/index.js");function y(t,e,i){if(t&&n.isObject(t)&&t instanceof s)return t;var r=new s;return r.parse(t,e,i),r}s.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var y=t=u.join(a);if(y=y.trim(),!i&&1===t.split("#").length){var b=h.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=o.exec(y);if(E){var x=(E=E[0]).toLowerCase();this.protocol=x,y=y.substr(E.length)}if(i||E||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||E&&g[E]||(y=y.substr(2),this.slashes=!0)}if(!g[E]&&(T||E&&!v[E])){for(var S,w,A=-1,M=0;M<f.length;M++)-1!==(O=y.indexOf(f[M]))&&(-1===A||O<A)&&(A=O);for(-1!==(w=-1===A?y.lastIndexOf("@"):y.lastIndexOf("@",A))&&(S=y.slice(0,w),y=y.slice(w+1),this.auth=decodeURIComponent(S)),A=-1,M=0;M<c.length;M++){var O;-1!==(O=y.indexOf(c[M]))&&(-1===A||O<A)&&(A=O)}-1===A&&(A=y.length),this.host=y.slice(0,A),y=y.slice(A),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var C=this.hostname.split(/\./),P=(M=0,C.length);M<P;M++){var I=C[M];if(I&&!I.match(d)){for(var N="",D=0,L=I.length;D<L;D++)I.charCodeAt(D)>127?N+="x":N+=I[D];if(!N.match(d)){var k=C.slice(0,M),B=C.slice(M+1),F=I.match(p);F&&(k.push(F[1]),B.unshift(F[2])),B.length&&(y="/"+B.join(".")+y),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+j,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[x])for(M=0,P=l.length;M<P;M++){var U=l[M];if(-1!==y.indexOf(U)){var X=encodeURIComponent(U);X===U&&(X=escape(U)),y=y.split(U).join(X)}}var z=y.indexOf("#");-1!==z&&(this.hash=y.substr(z),y=y.slice(0,z));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),e&&(this.query=_.parse(this.query)),y=y.slice(0,H)):e&&(this.search="",this.query={}),y&&(this.pathname=y),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var Y=this.search||"";this.path=j+Y}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},s.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(i[l]=t[l])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",_=i.search||"";i.path=m+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=b||y||i.host&&t.pathname,x=E,T=i.pathname&&i.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),E=E&&(""===p[0]||""===T[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search))return S&&(i.hostname=i.host=T.shift(),(R=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=R.shift(),i.host=i.hostname=R.shift())),i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var w=T.slice(-1)[0],A=(i.host||t.host||T.length>1)&&("."===w||".."===w)||""===w,M=0,O=T.length;O>=0;O--)"."===(w=T[O])?T.splice(O,1):".."===w?(T.splice(O,1),M++):M&&(T.splice(O,1),M--);if(!E&&!x)for(;M--;M)T.unshift("..");!E||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),A&&"/"!==T.join("/").substr(-1)&&T.push("");var R,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);return S&&(i.hostname=i.host=C?"":T.length?T.shift():"",(R=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=R.shift(),i.host=i.hostname=R.shift())),(E=E||i.host&&T.length)&&!C&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},"./node_modules/url/util.js":t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},"./node_modules/yeast/index.js":t=>{"use strict";var e,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},n=0,s=0;function o(t){var e="";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function a(){var t=o(+new Date);return t!==e?(n=0,e=t):t+"."+o(n++)}for(;s<64;s++)r[i[s]]=s;a.encode=o,a.decode=function(t){var e=0;for(s=0;s<t.length;s++)e=64*e+r[t.charAt(s)];return e},t.exports=a},"./node_modules/engine.io-client/build/cjs/globalThis.browser.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"./node_modules/engine.io-client/build/cjs/index.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;const r=i("./node_modules/engine.io-client/build/cjs/socket.js");Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return r.Socket}}),e.protocol=r.Socket.protocol;var n=i("./node_modules/engine.io-client/build/cjs/transport.js");Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return n.Transport}});var s=i("./node_modules/engine.io-client/build/cjs/transports/index.js");Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return s.transports}});var o=i("./node_modules/engine.io-client/build/cjs/util.js");Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}})},"./node_modules/engine.io-client/build/cjs/socket.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i("./node_modules/engine.io-client/build/cjs/transports/index.js"),s=i("./node_modules/engine.io-client/build/cjs/util.js"),o=r(i("./node_modules/parseqs/index.js")),a=r(i("./node_modules/parseuri/index.js")),h=r(i("./node_modules/debug/src/browser.js")),u=i("./node_modules/@socket.io/component-emitter/index.js"),l=i("./node_modules/engine.io-parser/build/cjs/index.js"),c=(0,h.default)("engine.io-client:socket");class f extends u.Emitter{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=(0,a.default)(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=(0,a.default)(e.host).host),(0,s.installTimerFunctions)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=o.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){c('creating transport "%s"',t);const e=function(t){const e={};for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(this.opts.query);e.EIO=l.protocol,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return c("options: %j",i),new n.transports[t](i)}open(){let t;if(this.opts.rememberUpgrade&&f.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return c("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){c("setting transport %s",t.name),this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){c('probing transport "%s"',t);let e=this.createTransport(t),i=!1;f.priorWebsocketSuccess=!1;const r=()=>{i||(c('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(r=>{if(!i)if("pong"===r.type&&"probe"===r.data){if(c('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;f.priorWebsocketSuccess="websocket"===e.name,c('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{i||"closed"!==this.readyState&&(c("changing transport and sending upgrade packet"),u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{c('probe transport "%s" failed',t);const i=new Error("probe error");i.transport=e.name,this.emitReserved("upgradeError",i)}})))};function n(){i||(i=!0,u(),e.close(),e=null)}const s=i=>{const r=new Error("probe error: "+i);r.transport=e.name,n(),c('probe transport "%s" failed because of error: %s',t,i),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function h(t){e&&t.name!==e.name&&(c('"%s" works - aborting "%s"',t.name,e.name),n())}const u=()=>{e.removeListener("open",r),e.removeListener("error",s),e.removeListener("close",o),this.off("close",a),this.off("upgrading",h)};e.once("open",r),e.once("error",s),e.once("close",o),this.once("close",a),this.once("upgrading",h),e.open()}onOpen(){if(c("socket open"),this.readyState="open",f.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){c("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(c('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}else c('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const n={type:t,data:e,options:i};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),c("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?i():t()})):this.upgrading?i():t()),this}onError(t){c("socket error %j",t),f.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(c('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const r=t.length;for(;i<r;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}}e.Socket=f,f.protocol=l.protocol},"./node_modules/engine.io-client/build/cjs/transport.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;const n=i("./node_modules/engine.io-parser/build/cjs/index.js"),s=i("./node_modules/@socket.io/component-emitter/index.js"),o=i("./node_modules/engine.io-client/build/cjs/util.js"),a=(0,r(i("./node_modules/debug/src/browser.js")).default)("engine.io-client:transport");class h extends s.Emitter{constructor(t){super(),this.writable=!1,(0,o.installTimerFunctions)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const i=new Error(t);return i.type="TransportError",i.description=e,super.emit("error",i),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=(0,n.decodePacket)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}e.Transport=h},"./node_modules/engine.io-client/build/cjs/transports/index.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;const r=i("./node_modules/engine.io-client/build/cjs/transports/polling-xhr.js"),n=i("./node_modules/engine.io-client/build/cjs/transports/websocket.js");e.transports={websocket:n.WS,polling:r.XHR}},"./node_modules/engine.io-client/build/cjs/transports/polling-xhr.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.XHR=void 0;const n=r(i("./node_modules/engine.io-client/build/cjs/transports/xmlhttprequest.browser.js")),s=r(i("./node_modules/debug/src/browser.js")),o=r(i("./node_modules/engine.io-client/build/cjs/globalThis.browser.js")),a=i("./node_modules/engine.io-client/build/cjs/util.js"),h=i("./node_modules/@socket.io/component-emitter/index.js"),u=i("./node_modules/engine.io-client/build/cjs/transports/polling.js"),l=(0,s.default)("engine.io-client:polling-xhr");function c(){}const f=null!=new n.default({xdomain:!1}).responseType;class d extends u.Polling{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=f&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){l("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}}e.XHR=d;class p extends h.Emitter{constructor(t,e){super(),(0,a.installTimerFunctions)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=(0,a.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new n.default(t);try{l("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},l("xhr data %s",this.data),e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=c,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}abort(){this.cleanup()}}if(e.Request=p,p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",m);else if("function"==typeof addEventListener){const t="onpagehide"in o.default?"pagehide":"unload";addEventListener(t,m,!1)}function m(){for(let t in p.requests)p.requests.hasOwnProperty(t)&&p.requests[t].abort()}},"./node_modules/engine.io-client/build/cjs/transports/polling.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Polling=void 0;const n=i("./node_modules/engine.io-client/build/cjs/transport.js"),s=r(i("./node_modules/debug/src/browser.js")),o=r(i("./node_modules/yeast/index.js")),a=r(i("./node_modules/parseqs/index.js")),h=i("./node_modules/engine.io-parser/build/cjs/index.js"),u=(0,s.default)("engine.io-client:polling");class l extends n.Transport{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{u("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(u("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--t||e()}))),this.writable||(u("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){u("pre-pause writing complete"),--t||e()})))}else e()}poll(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){u("polling got data %s",t),(0,h.decodePayload)(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{u("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,(0,h.encodePayload)(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port);const r=a.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}}e.Polling=l},"./node_modules/engine.io-client/build/cjs/transports/websocket-constructor.browser.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;const n=r(i("./node_modules/engine.io-client/build/cjs/globalThis.browser.js"));e.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),e.WebSocket=n.default.WebSocket||n.default.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"},"./node_modules/engine.io-client/build/cjs/transports/websocket.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;const n=i("./node_modules/engine.io-client/build/cjs/transport.js"),s=r(i("./node_modules/parseqs/index.js")),o=r(i("./node_modules/yeast/index.js")),a=i("./node_modules/engine.io-client/build/cjs/util.js"),h=i("./node_modules/engine.io-client/build/cjs/transports/websocket-constructor.browser.js"),u=r(i("./node_modules/debug/src/browser.js")),l=i("./node_modules/engine.io-parser/build/cjs/index.js"),c=(0,u.default)("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class d extends n.Transport{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=f?{}:(0,a.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=h.usingBrowserWebSocket&&!f?e?new h.WebSocket(t,e):new h.WebSocket(t):new h.WebSocket(t,e,i)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||h.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],r=e===t.length-1;(0,l.encodePacket)(i,this.supportsBinary,(t=>{const e={};!h.usingBrowserWebSocket&&(i.options&&(e.compress=i.options.compress),this.opts.perMessageDeflate)&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1);try{h.usingBrowserWebSocket?this.ws.send(t):this.ws.send(t,e)}catch(t){c("websocket closed before onclose event")}r&&(0,h.nextTick)((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||(t.b64=1);const r=s.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(r.length?"?"+r:"")}check(){return!(!h.WebSocket||"__initialize"in h.WebSocket&&this.name===d.prototype.name)}}e.WS=d},"./node_modules/engine.io-client/build/cjs/transports/xmlhttprequest.browser.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(i("./node_modules/has-cors/index.js")),s=r(i("./node_modules/engine.io-client/build/cjs/globalThis.browser.js"));e.default=function(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n.default))return new XMLHttpRequest}catch(t){}if(!e)try{return new(s.default[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},"./node_modules/engine.io-client/build/cjs/util.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.pick=void 0;const n=r(i("./node_modules/engine.io-client/build/cjs/globalThis.browser.js"));e.pick=function(t,...e){return e.reduce(((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e)),{})};const s=setTimeout,o=clearTimeout;e.installTimerFunctions=function(t,e){e.useNativeTimers?(t.setTimeoutFn=s.bind(n.default),t.clearTimeoutFn=o.bind(n.default)):(t.setTimeoutFn=setTimeout.bind(n.default),t.clearTimeoutFn=clearTimeout.bind(n.default))}},"./node_modules/engine.io-parser/build/cjs/commons.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;const i=Object.create(null);e.PACKET_TYPES=i,i.open="0",i.close="1",i.ping="2",i.pong="3",i.message="4",i.upgrade="5",i.noop="6";const r=Object.create(null);e.PACKET_TYPES_REVERSE=r,Object.keys(i).forEach((t=>{r[i[t]]=t})),e.ERROR_PACKET={type:"error",data:"parser error"}},"./node_modules/engine.io-parser/build/cjs/decodePacket.browser.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i("./node_modules/engine.io-parser/build/cjs/commons.js"),n=i("./node_modules/base64-arraybuffer/dist/base64-arraybuffer.es5.js"),s="function"==typeof ArrayBuffer,o=(t,e)=>{if(s){const i=(0,n.decode)(t);return a(i,e)}return{base64:!0,data:t}},a=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;e.default=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const i=t.charAt(0);return"b"===i?{type:"message",data:o(t.substring(1),e)}:r.PACKET_TYPES_REVERSE[i]?t.length>1?{type:r.PACKET_TYPES_REVERSE[i],data:t.substring(1)}:{type:r.PACKET_TYPES_REVERSE[i]}:r.ERROR_PACKET}},"./node_modules/engine.io-parser/build/cjs/encodePacket.browser.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i("./node_modules/engine.io-parser/build/cjs/commons.js"),n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,o=(t,e)=>{const i=new FileReader;return i.onload=function(){const t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};e.default=({type:t,data:e},i,a)=>{return n&&e instanceof Blob?i?a(e):o(e,a):s&&(e instanceof ArrayBuffer||(h=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer instanceof ArrayBuffer))?i?a(e):o(new Blob([e]),a):a(r.PACKET_TYPES[t]+(e||""));var h}},"./node_modules/engine.io-parser/build/cjs/index.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=void 0;const r=i("./node_modules/engine.io-parser/build/cjs/encodePacket.browser.js");e.encodePacket=r.default;const n=i("./node_modules/engine.io-parser/build/cjs/decodePacket.browser.js");e.decodePacket=n.default;const s=String.fromCharCode(30);e.encodePayload=(t,e)=>{const i=t.length,n=new Array(i);let o=0;t.forEach(((t,a)=>{(0,r.default)(t,!1,(t=>{n[a]=t,++o===i&&e(n.join(s))}))}))},e.decodePayload=(t,e)=>{const i=t.split(s),r=[];for(let t=0;t<i.length;t++){const s=(0,n.default)(i[t],e);if(r.push(s),"error"===s.type)break}return r},e.protocol=4},"./node_modules/socket.io-client/build/cjs/index.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const n=i("./node_modules/socket.io-client/build/cjs/url.js"),s=i("./node_modules/socket.io-client/build/cjs/manager.js");Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return s.Manager}});const o=i("./node_modules/socket.io-client/build/cjs/socket.js");Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=r(i("./node_modules/debug/src/browser.js")).default("socket.io-client"),h={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const i=n.url(t,e.path||"/socket.io"),r=i.source,o=i.id,u=i.path,l=h[o]&&u in h[o].nsps;let c;return e.forceNew||e["force new connection"]||!1===e.multiplex||l?(a("ignoring socket cache for %s",r),c=new s.Manager(r,e)):(h[o]||(a("new io instance for %s",r),h[o]=new s.Manager(r,e)),c=h[o]),i.query&&!e.query&&(e.query=i.queryKey),c.socket(i.path,e)}e.io=u,e.connect=u,e.default=u,Object.assign(u,{Manager:s.Manager,Socket:o.Socket,io:u,connect:u}),t.exports=u;var l=i("./node_modules/socket.io-parser/build/cjs/index.js");Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return l.protocol}})},"./node_modules/socket.io-client/build/cjs/manager.js":function(t,e,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,r){void 0===r&&(r=i),t[r]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&r(e,t,i);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const a=i("./node_modules/engine.io-client/build/cjs/index.js"),h=i("./node_modules/socket.io-client/build/cjs/socket.js"),u=s(i("./node_modules/socket.io-parser/build/cjs/index.js")),l=i("./node_modules/socket.io-client/build/cjs/on.js"),c=o(i("./node_modules/backo2/index.js")),f=i("./node_modules/@socket.io/component-emitter/index.js"),d=o(i("./node_modules/debug/src/browser.js")).default("socket.io-client:manager");class p extends f.Emitter{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,a.installTimerFunctions(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=e.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new c.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||u;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(d("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=l.on(e,"open",(function(){i.onopen(),t&&t()})),n=l.on(e,"error",(e=>{d("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",e),t?t(e):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;d("connect attempt will timeout after %d",t),0===t&&r();const i=this.setTimeoutFn((()=>{d("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}return this.subs.push(r),this.subs.push(n),this}connect(t){return this.open(t)}onopen(){d("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(l.on(t,"ping",this.onping.bind(this)),l.on(t,"data",this.ondata.bind(this)),l.on(t,"error",this.onerror.bind(this)),l.on(t,"close",this.onclose.bind(this)),l.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){d("error",t),this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new h.Socket(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return void d("socket %s is still active, skipping close",t);this._close()}_packet(t){d("writing packet %j",t);const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){d("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){d("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){d("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();d("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const i=this.setTimeoutFn((()=>{t.skipReconnect||(d("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(d("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(d("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=p},"./node_modules/socket.io-client/build/cjs/on.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,i){return t.on(e,i),function(){t.off(e,i)}}},"./node_modules/socket.io-client/build/cjs/socket.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=i("./node_modules/socket.io-parser/build/cjs/index.js"),s=i("./node_modules/socket.io-client/build/cjs/on.js"),o=i("./node_modules/@socket.io/component-emitter/index.js"),a=r(i("./node_modules/debug/src/browser.js")).default("socket.io-client:socket"),h=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class u extends o.Emitter{constructor(t,e,i){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[s.on(t,"open",this.onopen.bind(this)),s.on(t,"packet",this.onpacket.bind(this)),s.on(t,"error",this.onerror.bind(this)),s.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(h.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const i={type:n.PacketType.EVENT,data:e,options:{}};i.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(a("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++);const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||r&&this.connected?this.connected?this.packet(i):this.sendBuffer.push(i):a("discard packet as the transport is not currently writable"),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:n.PacketType.CONNECT,data:t})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case n.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(t);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(t);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...r){i||(i=!0,a("sending ack %j",r),e.packet({type:n.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)}onconnect(t){a("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=u},"./node_modules/socket.io-client/build/cjs/url.js":function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=r(i("./node_modules/parseuri/index.js")),s=r(i("./node_modules/debug/src/browser.js")).default("socket.io-client:url");e.url=function(t,e="",i){let r=t;i=i||"undefined"!=typeof location&&location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(s("protocol-less url %s",t),t=void 0!==i?i.protocol+"//"+t:"https://"+t),s("parse %s",t),r=n.default(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(i&&i.port===r.port?"":":"+r.port),r}},"./node_modules/socket.io-parser/build/cjs/binary.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const r=i("./node_modules/socket.io-parser/build/cjs/is-binary.js");function n(t,e){if(!t)return t;if(r.isBinary(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=n(t[r],e);return i}if("object"==typeof t&&!(t instanceof Date)){const i={};for(const r in t)t.hasOwnProperty(r)&&(i[r]=n(t[r],e));return i}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=s(t[i],e);else if("object"==typeof t)for(const i in t)t.hasOwnProperty(i)&&(t[i]=s(t[i],e));return t}e.deconstructPacket=function(t){const e=[],i=t.data,r=t;return r.data=n(i,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t}},"./node_modules/socket.io-parser/build/cjs/index.js":(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const r=i("./node_modules/@socket.io/component-emitter/index.js"),n=i("./node_modules/socket.io-parser/build/cjs/binary.js"),s=i("./node_modules/socket.io-parser/build/cjs/is-binary.js"),o=i("./node_modules/debug/src/browser.js").default("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={})),e.Encoder=class{encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!s.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=n.deconstructPacket(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}};class h extends r.Emitter{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new u(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!s.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===a[i.type])throw new Error("unknown packet type "+i.type);if(i.type===a.BINARY_EVENT||i.type===a.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const n=t.substring(r,e);if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(n)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);i.nsp=t.substring(r,e)}else i.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!h.isPayloadValid(i.type,r))throw new Error("invalid payload");i.data=r}return o("decoded %s as %j",t,i),i}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=h;class u{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},"./node_modules/socket.io-parser/build/cjs/is-binary.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const i="function"==typeof ArrayBuffer,r=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function o(t){return i&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||n&&t instanceof Blob||s&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,i){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(t(e[i]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0;return!1}},"./node_modules/devtools-detect/index.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});const r={isOpen:!1,orientation:void 0},n=(t,e)=>{globalThis.dispatchEvent(new globalThis.CustomEvent("devtoolschange",{detail:{isOpen:t,orientation:e}}))},s=({emitEvents:t=!0}={})=>{const e=globalThis.outerWidth-globalThis.innerWidth>160,i=globalThis.outerHeight-globalThis.innerHeight>160,s=e?"vertical":"horizontal";i&&e||!(globalThis.Firebug&&globalThis.Firebug.chrome&&globalThis.Firebug.chrome.isInitialized||e||i)?(r.isOpen&&t&&n(!1,void 0),r.isOpen=!1,r.orientation=void 0):(r.isOpen&&r.orientation===s||!t||n(!0,s),r.isOpen=!0,r.orientation=s)};s({emitEvents:!1}),setInterval(s,500);const o=r}},__webpack_module_cache__={};function __nested_webpack_require_3244454__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__nested_webpack_require_3244454__),i.loaded=!0,i.exports}__nested_webpack_require_3244454__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __nested_webpack_require_3244454__.d(e,{a:e}),e},__nested_webpack_require_3244454__.d=(t,e)=>{for(var i in e)__nested_webpack_require_3244454__.o(e,i)&&!__nested_webpack_require_3244454__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__nested_webpack_require_3244454__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__nested_webpack_require_3244454__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__nested_webpack_require_3244454__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__nested_webpack_require_3244454__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __webpack_exports__={};return(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),t.argChk_Boolean=t.argChk_Num=t.Layer=t.CmnLib=t.SysWeb=void 0;const e=__nested_webpack_require_3244454__("./core/src/sn/SysWeb.ts");Object.defineProperty(t,"SysWeb",{enumerable:!0,get:function(){return e.SysWeb}});const i=__nested_webpack_require_3244454__("./core/src/sn/CmnLib.ts");Object.defineProperty(t,"CmnLib",{enumerable:!0,get:function(){return i.CmnLib}}),Object.defineProperty(t,"argChk_Num",{enumerable:!0,get:function(){return i.argChk_Num}}),Object.defineProperty(t,"argChk_Boolean",{enumerable:!0,get:function(){return i.argChk_Boolean}});const r=__nested_webpack_require_3244454__("./core/src/sn/Layer.ts");Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return r.Layer}})})(),__webpack_exports__})()},module.exports=factory()},969:(t,e,i)=>{"use strict";i.d(e,{Z:()=>_});var r=i(81),n=i.n(r),s=i(645),o=i.n(s),a=i(667),h=i.n(a),u=new URL(i(211),i.b),l=new URL(i(446),i.b),c=new URL(i(152),i.b),f=new URL(i(296),i.b),d=o()(n()),p=h()(u),m=h()(l),g=h()(c),v=h()(f);d.push([t.id,"html,\nbody {\n  min-height: 100%;\n}\n.humane,\n.humane-bigbox {\n  position: fixed;\n  -moz-transition: all 0.3s ease-out;\n  -webkit-transition: all 0.3s ease-out;\n  -ms-transition: all 0.3s ease-out;\n  -o-transition: all 0.3s ease-out;\n  transition: all 0.3s ease-out;\n  z-index: 100000;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n}\n.humane,\n.humane-bigbox {\n  font-family: Ubuntu, Verdana, sans-serif;\n  line-height: 40px;\n  font-size: 35px;\n  top: 25%;\n  left: 25%;\n  opacity: 0;\n  width: 50%;\n  min-height: 40px;\n  padding: 30px;\n  text-align: center;\n  background-image: url("+p+");\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #000), color-stop(1, rgba(0,0,0,0.9))) no-repeat;\n  background: -moz-linear-gradient(top, #000 0%, rgba(0,0,0,0.9) 100%) no-repeat;\n  background: -webkit-linear-gradient(top, #000 0%, rgba(0,0,0,0.9) 100%) no-repeat;\n  background: -ms-linear-gradient(top, #000 0%, rgba(0,0,0,0.9) 100%) no-repeat;\n  background: -o-linear-gradient(top, #000 0%, rgba(0,0,0,0.9) 100%) no-repeat;\n  background: linear-gradient(top, #000 0%, rgba(0,0,0,0.9) 100%) no-repeat;\n  *background-color: #000;\n  color: #fff;\n  -webkit-border-radius: 15px;\n  border-radius: 15px;\n  text-shadow: 0 -1px 1px #ddd;\n  -webkit-box-shadow: 0 15px 15px -15px #000;\n  box-shadow: 0 15px 15px -15px #000;\n  -moz-transform: scale(0.1);\n  -webkit-transform: scale(0.1);\n  -ms-transform: scale(0.1);\n  -o-transform: scale(0.1);\n  transform: scale(0.1);\n}\n.humane p,\n.humane-bigbox p,\n.humane ul,\n.humane-bigbox ul {\n  margin: 0;\n  padding: 0;\n}\n.humane ul,\n.humane-bigbox ul {\n  list-style: none;\n}\n.humane.humane-bigbox-info,\n.humane-bigbox.humane-bigbox-info {\n  background-image: url("+m+");\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #000064), color-stop(1, rgba(0,0,100,0.9))) no-repeat;\n  background: -moz-linear-gradient(top, #000064 0%, rgba(0,0,100,0.9) 100%) no-repeat;\n  background: -webkit-linear-gradient(top, #000064 0%, rgba(0,0,100,0.9) 100%) no-repeat;\n  background: -ms-linear-gradient(top, #000064 0%, rgba(0,0,100,0.9) 100%) no-repeat;\n  background: -o-linear-gradient(top, #000064 0%, rgba(0,0,100,0.9) 100%) no-repeat;\n  background: linear-gradient(top, #000064 0%, rgba(0,0,100,0.9) 100%) no-repeat;\n  *background-color: #030;\n}\n.humane.humane-bigbox-success,\n.humane-bigbox.humane-bigbox-success {\n  background-image: url("+g+");\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #006400), color-stop(1, rgba(0,100,0,0.9))) no-repeat;\n  background: -moz-linear-gradient(top, #006400 0%, rgba(0,100,0,0.9) 100%) no-repeat;\n  background: -webkit-linear-gradient(top, #006400 0%, rgba(0,100,0,0.9) 100%) no-repeat;\n  background: -ms-linear-gradient(top, #006400 0%, rgba(0,100,0,0.9) 100%) no-repeat;\n  background: -o-linear-gradient(top, #006400 0%, rgba(0,100,0,0.9) 100%) no-repeat;\n  background: linear-gradient(top, #006400 0%, rgba(0,100,0,0.9) 100%) no-repeat;\n  *background-color: #030;\n}\n.humane.humane-bigbox-error,\n.humane-bigbox.humane-bigbox-error {\n  background-image: url("+v+");\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #640000), color-stop(1, rgba(100,0,0,0.9))) no-repeat;\n  background: -moz-linear-gradient(top, #640000 0%, rgba(100,0,0,0.9) 100%) no-repeat;\n  background: -webkit-linear-gradient(top, #640000 0%, rgba(100,0,0,0.9) 100%) no-repeat;\n  background: -ms-linear-gradient(top, #640000 0%, rgba(100,0,0,0.9) 100%) no-repeat;\n  background: -o-linear-gradient(top, #640000 0%, rgba(100,0,0,0.9) 100%) no-repeat;\n  background: linear-gradient(top, #640000 0%, rgba(100,0,0,0.9) 100%) no-repeat;\n  *background-color: #300;\n}\n.humane.humane-animate,\n.humane-bigbox.humane-bigbox-animate {\n  opacity: 1;\n  -moz-transform: scale(1);\n  -webkit-transform: scale(1);\n  -ms-transform: scale(1);\n  -o-transform: scale(1);\n  transform: scale(1);\n}\n.humane.humane-animate:hover,\n.humane-bigbox.humane-bigbox-animate:hover {\n  opacity: 0.6;\n  -moz-transform: scale(0.8);\n  -webkit-transform: scale(0.8);\n  -ms-transform: scale(0.8);\n  -o-transform: scale(0.8);\n  transform: scale(0.8);\n}\n.humane.humane-js-animate,\n.humane-bigbox.humane-bigbox-js-animate {\n  opacity: 1;\n  -moz-transform: scale(1);\n  -webkit-transform: scale(1);\n  -ms-transform: scale(1);\n  -o-transform: scale(1);\n  transform: scale(1);\n}\n.humane.humane-js-animate:hover,\n.humane-bigbox.humane-bigbox-js-animate:hover {\n  opacity: 0.6;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=60);\n}\n",""]);const _=d},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,r,n,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{"use strict";t.exports=function(t){return t[1]}},991:function(t){t.exports=function(t,e){var i=window,r=document,n={on:function(t,e,r){"addEventListener"in i?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r)},off:function(t,e,r){"removeEventListener"in i?t.removeEventListener(e,r,!1):t.detachEvent("on"+e,r)},bind:function(t,e){return function(){t.apply(e,arguments)}},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},config:function(t,e){return null!=t?t:e},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var t=r.createElement("div"),e={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var i in e)i+"Transition"in t.style&&(this.vendorPrefix=e[i],this.transSupport=!0)}};n._checkTransition();var s=function(t){t||(t={}),this.queue=[],this.baseCls=t.baseCls||"humane",this.addnCls=t.addnCls||"",this.timeout="timeout"in t?t.timeout:2500,this.waitForMove=t.waitForMove||!1,this.clickToClose=t.clickToClose||!1,this.timeoutAfterMove=t.timeoutAfterMove||!1,this.container=t.container;try{this._setupEl()}catch(t){n.on(i,"load",n.bind(this._setupEl,this))}};return s.prototype={constructor:s,_setupEl:function(){var t=r.createElement("div");if(t.style.display="none",!this.container){if(!r.body)throw"document.body is null";this.container=r.body}this.container.appendChild(t),this.el=t,this.removeEvent=n.bind((function(){var t=n.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);t?setTimeout(n.bind(this.remove,this),t):this.remove()}),this),this.transEvent=n.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){n.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(n.on(r.body,"mousemove",this.removeEvent),n.on(r.body,"click",this.removeEvent),n.on(r.body,"keypress",this.removeEvent),n.on(r.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var t=this.queue.shift();n.config(t.clickToClose,this.clickToClose)&&(n.on(this.el,"click",this.removeEvent),n.on(this.el,"touchstart",this.removeEvent));var e=n.config(t.timeout,this.timeout);e>0&&(this.currentTimer=setTimeout(n.bind(this._afterTimeout,this),e)),n.isArray(t.html)&&(t.html="<ul><li>"+t.html.join("<li>")+"</ul>"),this.el.innerHTML=t.html,this.currentMsg=t,this.el.className=this.baseCls,n.transSupport?(this.el.style.display="block",setTimeout(n.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(t){if(n.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*t}catch(t){}else this.el.style.opacity=String(t)},_showMsg:function(){var t=n.config(this.currentMsg.addnCls,this.addnCls);if(n.transSupport)this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-animate";else{var e=0;this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var i=this,r=setInterval((function(){e<1?((e+=.1)>1&&(e=1),i._setOpacity(e)):clearInterval(r)}),30)}},_hideMsg:function(){var t=n.config(this.currentMsg.addnCls,this.addnCls);if(n.transSupport)this.el.className=this.baseCls+" "+t,n.on(this.el,n.vendorPrefix?n.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var e=1,i=this,r=setInterval((function(){e>0?((e-=.1)<0&&(e=0),i._setOpacity(e)):(i.el.className=i.baseCls+" "+t,clearInterval(r),i._afterAnimation())}),30)},_afterAnimation:function(){n.transSupport&&n.off(this.el,n.vendorPrefix?n.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(t){var e="function"==typeof t?t:null;n.off(r.body,"mousemove",this.removeEvent),n.off(r.body,"click",this.removeEvent),n.off(r.body,"keypress",this.removeEvent),n.off(r.body,"touchstart",this.removeEvent),n.off(this.el,"click",this.removeEvent),n.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,e&&this.currentMsg&&(this.currentMsg.cb=e),this._animating?this._hideMsg():e&&e()},log:function(t,e,i,r){var n={};if(r)for(var s in r)n[s]=r[s];if("function"==typeof e)i=e;else if(e)for(var s in e)n[s]=e[s];return n.html=t,i&&(n.cb=i),this.queue.push(n),this._run(),this},spawn:function(t){var e=this;return function(i,r,n){return e.log.call(e,i,r,n,t),e}},create:function(t){return new s(t)}},new s}()},119:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(379),n=i.n(r),s=i(795),o=i.n(s),a=i(569),h=i.n(a),u=i(565),l=i.n(u),c=i(216),f=i.n(c),d=i(589),p=i.n(d),m=i(969),g={};g.styleTagTransform=p(),g.setAttributes=l(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=f(),n()(m.Z,g);const v=m.Z&&m.Z.locals?m.Z.locals:void 0},379:t=>{"use strict";var e=[];function i(t){for(var i=-1,r=0;r<e.length;r++)if(e[r].identifier===t){i=r;break}return i}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var h=t[a],u=r.base?h[0]+r.base:h[0],l=s[u]||0,c="".concat(u," ").concat(l);s[u]=l+1;var f=i(c),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=n(d,r);r.byIndex=a,e.splice(a,0,{identifier:c,updater:p,references:1})}o.push(c)}return o}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var s=r(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=i(s[o]);e[a].references--}for(var h=r(t,n),u=0;u<s.length;u++){var l=i(s[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}s=h}}},569:t=>{"use strict";var e={};t.exports=function(t,i){var r=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},296:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADICAYAAAAp8ov1AAAABmJLR0QA/wD/AP+gvaeTAAAAPklEQVQokWNIYWD4z8QAJRhQCSLEyNQ2uMQYUcX+DyKnUVdsQJyBLTgZqecF6hpPVALBaS+ZdtDYeAYGBgYA9vA6v4OR3MkAAAAASUVORK5CYII="},152:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADICAYAAAAp8ov1AAAABmJLR0QA/wD/AP+gvaeTAAAAPklEQVQokWNgSGH4z8TAACEYUAkixMjUNsjEGFHF/g8ip1FVbGCcgS04GannBaoaT1wCwWkvmXbQ2HgGBgYA8Yw6v+m4Kh8AAAAASUVORK5CYII="},446:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADICAYAAAAp8ov1AAAABmJLR0QA/wD/AP+gvaeTAAAAQElEQVQokWNgYEj5z8TAwPCfiYGBgQGVIEKMTG2DTYwRVez/IHIaNcUGyBnYgpORel6gpvFEJhBqpxIaG8/AAADsKDq/HhYQ2AAAAABJRU5ErkJggg=="},211:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADICAYAAAAp8ov1AAAABmJLR0QA/wD/AP+gvaeTAAAAc0lEQVQokb2RQQ6EMAwDx/7/n80BtIEC3RYhLlXrVLGTAYiBWBIGtkPSP01SfreTVoV5re9Rcee1scwDk9NurbR62sZJcpzy9O+2X5KsXabyPaQFYNuvkqkRviDTp9Vs8opC0TpkHvJtVjeReW/5kEyX1gKeLEKE9peeWAAAAABJRU5ErkJggg=="}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.b=document.baseURI||self.location.href;var __webpack_exports__={};(()=>{"use strict";const t={humane:0};var e=__webpack_require__(398);const i={};for(const e in t)i[e]=__webpack_require__(202)(`./${e}`);new e.SysWeb(i)})()})();